{"version":3,"file":"default-node_modules_ng2-pdf-viewer_fesm2020_ng2-pdf-viewer_mjs.js","mappings":"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","sources":["pdfjs-dist/build/pdf/webpack/universalModuleDefinition","pdfjs-dist/build/pdf/src/shared/util.js","pdfjs-dist/build/pdf/src/shared/compatibility.js","pdfjs-dist/build/pdf/src/shared/is_node.js","pdfjs-dist/build/pdf/src/display/api.js","pdfjs-dist/build/pdf/src/display/display_utils.js","pdfjs-dist/build/pdf/src/display/base_factory.js","pdfjs-dist/build/pdf/src/display/font_loader.js","pdfjs-dist/build/pdf/src/display/annotation_storage.js","pdfjs-dist/build/pdf/src/shared/murmurhash3.js","pdfjs-dist/build/pdf/src/display/canvas.js","pdfjs-dist/build/pdf/src/display/pattern_helper.js","pdfjs-dist/build/pdf/src/shared/image_utils.js","pdfjs-dist/build/pdf/src/display/worker_options.js","pdfjs-dist/build/pdf/src/shared/message_handler.js","pdfjs-dist/build/pdf/src/display/metadata.js","pdfjs-dist/build/pdf/src/display/optional_content_config.js","pdfjs-dist/build/pdf/src/display/transport_stream.js","pdfjs-dist/build/pdf/src/display/xfa_text.js","pdfjs-dist/build/pdf/src/display/node_utils.js","pdfjs-dist/build/pdf/src/display/annotation_layer.js","pdfjs-dist/build/pdf/src/shared/scripting_utils.js","pdfjs-dist/build/pdf/src/display/xfa_layer.js","pdfjs-dist/build/pdf/src/display/text_layer.js","pdfjs-dist/build/pdf/src/display/svg.js","pdfjs-dist/build/pdf/src/display/node_stream.js","pdfjs-dist/build/pdf/src/display/network_utils.js","pdfjs-dist/build/pdf/src/display/content_disposition.js","pdfjs-dist/build/pdf/src/display/network.js","pdfjs-dist/build/pdf/src/display/fetch_stream.js","pdfjs-dist/build/pdf/webpack/bootstrap","pdfjs-dist/build/pdf/src/pdf.js","pdfjs-dist/web/pdf_viewer/webpack/universalModuleDefinition","pdfjs-dist/web/pdf_viewer/web/default_factory.js","pdfjs-dist/web/pdf_viewer/web/annotation_layer_builder.js","pdfjs-dist/web/pdf_viewer/web/pdfjs.js","pdfjs-dist/web/pdf_viewer/web/l10n_utils.js","pdfjs-dist/web/pdf_viewer/web/pdf_link_service.js","pdfjs-dist/web/pdf_viewer/web/ui_utils.js","pdfjs-dist/web/pdf_viewer/web/struct_tree_layer_builder.js","pdfjs-dist/web/pdf_viewer/web/text_layer_builder.js","pdfjs-dist/web/pdf_viewer/web/xfa_layer_builder.js","pdfjs-dist/web/pdf_viewer/web/pdf_viewer.js","pdfjs-dist/web/pdf_viewer/web/base_viewer.js","pdfjs-dist/web/pdf_viewer/web/pdf_page_view.js","pdfjs-dist/web/pdf_viewer/web/app_options.js","pdfjs-dist/web/pdf_viewer/web/pdf_rendering_queue.js","pdfjs-dist/web/pdf_viewer/web/text_highlighter.js","pdfjs-dist/web/pdf_viewer/web/download_manager.js","pdfjs-dist/web/pdf_viewer/web/event_utils.js","pdfjs-dist/web/pdf_viewer/web/genericl10n.js","pdfjs-dist/web/pdf_viewer/external/webL10n/l10n.js","pdfjs-dist/web/pdf_viewer/web/pdf_find_controller.js","pdfjs-dist/web/pdf_viewer/web/pdf_find_utils.js","pdfjs-dist/web/pdf_viewer/web/pdf_history.js","pdfjs-dist/web/pdf_viewer/web/pdf_scripting_manager.js","pdfjs-dist/web/pdf_viewer/web/generic_scripting.js","pdfjs-dist/web/pdf_viewer/webpack/bootstrap","pdfjs-dist/web/pdf_viewer/web/pdf_viewer.component.js","ignored|C:\\DevelopmentGitLab\\web\\shell\\source\\node_modules\\pdfjs-dist\\build|canvas","ignored|C:\\DevelopmentGitLab\\web\\shell\\source\\node_modules\\pdfjs-dist\\build|fs","ignored|C:\\DevelopmentGitLab\\web\\shell\\source\\node_modules\\pdfjs-dist\\build|http","ignored|C:\\DevelopmentGitLab\\web\\shell\\source\\node_modules\\pdfjs-dist\\build|https","ignored|C:\\DevelopmentGitLab\\web\\shell\\source\\node_modules\\pdfjs-dist\\build|url","ignored|C:\\DevelopmentGitLab\\web\\shell\\source\\node_modules\\pdfjs-dist\\build|zlib","./node_modules/@angular-devkit/build-angular/node_modules/@babel/runtime/helpers/asyncToGenerator.js","./node_modules/@angular-devkit/build-angular/node_modules/@babel/runtime/helpers/checkPrivateRedeclaration.js","./node_modules/@angular-devkit/build-angular/node_modules/@babel/runtime/helpers/classPrivateFieldInitSpec.js","./node_modules/@angular-devkit/build-angular/node_modules/@babel/runtime/helpers/classPrivateMethodInitSpec.js","./node_modules/@angular-devkit/build-angular/node_modules/@babel/runtime/helpers/defineProperty.js","./node_modules/@angular-devkit/build-angular/node_modules/@babel/runtime/helpers/toPrimitive.js","./node_modules/@angular-devkit/build-angular/node_modules/@babel/runtime/helpers/toPropertyKey.js","./node_modules/@angular-devkit/build-angular/node_modules/@babel/runtime/helpers/typeof.js","./node_modules/src/app/utils/event-bus-utils.ts","./node_modules/src/app/utils/helpers.ts","./node_modules/src/app/pdf-viewer/pdf-viewer.component.ts","./node_modules/src/app/pdf-viewer/pdf-viewer.module.ts","./node_modules/ng2-pdf-viewer.ts"],"sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine(\"pdfjs-dist/build/pdf\", [], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"pdfjs-dist/build/pdf\"] = factory();\n\telse\n\t\troot[\"pdfjs-dist/build/pdf\"] = factory();\n})(this, () => {\nreturn ","/* Copyright 2012 Mozilla Foundation\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport \"./compatibility.js\";\n\nconst IDENTITY_MATRIX = [1, 0, 0, 1, 0, 0];\nconst FONT_IDENTITY_MATRIX = [0.001, 0, 0, 0.001, 0, 0];\n\n/**\n * Refer to the `WorkerTransport.getRenderingIntent`-method in the API, to see\n * how these flags are being used:\n *  - ANY, DISPLAY, and PRINT are the normal rendering intents, note the\n *    `PDFPageProxy.{render, getOperatorList, getAnnotations}`-methods.\n *  - ANNOTATIONS_FORMS, ANNOTATIONS_STORAGE, ANNOTATIONS_DISABLE control which\n *    annotations are rendered onto the canvas (i.e. by being included in the\n *    operatorList), note the `PDFPageProxy.{render, getOperatorList}`-methods\n *    and their `annotationMode`-option.\n *  - OPLIST is used with the `PDFPageProxy.getOperatorList`-method, note the\n *    `OperatorList`-constructor (on the worker-thread).\n */\nconst RenderingIntentFlag = {\n  ANY: 0x01,\n  DISPLAY: 0x02,\n  PRINT: 0x04,\n  ANNOTATIONS_FORMS: 0x10,\n  ANNOTATIONS_STORAGE: 0x20,\n  ANNOTATIONS_DISABLE: 0x40,\n  OPLIST: 0x100,\n};\n\nconst AnnotationMode = {\n  DISABLE: 0,\n  ENABLE: 1,\n  ENABLE_FORMS: 2,\n  ENABLE_STORAGE: 3,\n};\n\n// Permission flags from Table 22, Section 7.6.3.2 of the PDF specification.\nconst PermissionFlag = {\n  PRINT: 0x04,\n  MODIFY_CONTENTS: 0x08,\n  COPY: 0x10,\n  MODIFY_ANNOTATIONS: 0x20,\n  FILL_INTERACTIVE_FORMS: 0x100,\n  COPY_FOR_ACCESSIBILITY: 0x200,\n  ASSEMBLE: 0x400,\n  PRINT_HIGH_QUALITY: 0x800,\n};\n\nconst TextRenderingMode = {\n  FILL: 0,\n  STROKE: 1,\n  FILL_STROKE: 2,\n  INVISIBLE: 3,\n  FILL_ADD_TO_PATH: 4,\n  STROKE_ADD_TO_PATH: 5,\n  FILL_STROKE_ADD_TO_PATH: 6,\n  ADD_TO_PATH: 7,\n  FILL_STROKE_MASK: 3,\n  ADD_TO_PATH_FLAG: 4,\n};\n\nconst ImageKind = {\n  GRAYSCALE_1BPP: 1,\n  RGB_24BPP: 2,\n  RGBA_32BPP: 3,\n};\n\nconst AnnotationType = {\n  TEXT: 1,\n  LINK: 2,\n  FREETEXT: 3,\n  LINE: 4,\n  SQUARE: 5,\n  CIRCLE: 6,\n  POLYGON: 7,\n  POLYLINE: 8,\n  HIGHLIGHT: 9,\n  UNDERLINE: 10,\n  SQUIGGLY: 11,\n  STRIKEOUT: 12,\n  STAMP: 13,\n  CARET: 14,\n  INK: 15,\n  POPUP: 16,\n  FILEATTACHMENT: 17,\n  SOUND: 18,\n  MOVIE: 19,\n  WIDGET: 20,\n  SCREEN: 21,\n  PRINTERMARK: 22,\n  TRAPNET: 23,\n  WATERMARK: 24,\n  THREED: 25,\n  REDACT: 26,\n};\n\nconst AnnotationStateModelType = {\n  MARKED: \"Marked\",\n  REVIEW: \"Review\",\n};\n\nconst AnnotationMarkedState = {\n  MARKED: \"Marked\",\n  UNMARKED: \"Unmarked\",\n};\n\nconst AnnotationReviewState = {\n  ACCEPTED: \"Accepted\",\n  REJECTED: \"Rejected\",\n  CANCELLED: \"Cancelled\",\n  COMPLETED: \"Completed\",\n  NONE: \"None\",\n};\n\nconst AnnotationReplyType = {\n  GROUP: \"Group\",\n  REPLY: \"R\",\n};\n\nconst AnnotationFlag = {\n  INVISIBLE: 0x01,\n  HIDDEN: 0x02,\n  PRINT: 0x04,\n  NOZOOM: 0x08,\n  NOROTATE: 0x10,\n  NOVIEW: 0x20,\n  READONLY: 0x40,\n  LOCKED: 0x80,\n  TOGGLENOVIEW: 0x100,\n  LOCKEDCONTENTS: 0x200,\n};\n\nconst AnnotationFieldFlag = {\n  READONLY: 0x0000001,\n  REQUIRED: 0x0000002,\n  NOEXPORT: 0x0000004,\n  MULTILINE: 0x0001000,\n  PASSWORD: 0x0002000,\n  NOTOGGLETOOFF: 0x0004000,\n  RADIO: 0x0008000,\n  PUSHBUTTON: 0x0010000,\n  COMBO: 0x0020000,\n  EDIT: 0x0040000,\n  SORT: 0x0080000,\n  FILESELECT: 0x0100000,\n  MULTISELECT: 0x0200000,\n  DONOTSPELLCHECK: 0x0400000,\n  DONOTSCROLL: 0x0800000,\n  COMB: 0x1000000,\n  RICHTEXT: 0x2000000,\n  RADIOSINUNISON: 0x2000000,\n  COMMITONSELCHANGE: 0x4000000,\n};\n\nconst AnnotationBorderStyleType = {\n  SOLID: 1,\n  DASHED: 2,\n  BEVELED: 3,\n  INSET: 4,\n  UNDERLINE: 5,\n};\n\nconst AnnotationActionEventType = {\n  E: \"Mouse Enter\",\n  X: \"Mouse Exit\",\n  D: \"Mouse Down\",\n  U: \"Mouse Up\",\n  Fo: \"Focus\",\n  Bl: \"Blur\",\n  PO: \"PageOpen\",\n  PC: \"PageClose\",\n  PV: \"PageVisible\",\n  PI: \"PageInvisible\",\n  K: \"Keystroke\",\n  F: \"Format\",\n  V: \"Validate\",\n  C: \"Calculate\",\n};\n\nconst DocumentActionEventType = {\n  WC: \"WillClose\",\n  WS: \"WillSave\",\n  DS: \"DidSave\",\n  WP: \"WillPrint\",\n  DP: \"DidPrint\",\n};\n\nconst PageActionEventType = {\n  O: \"PageOpen\",\n  C: \"PageClose\",\n};\n\nconst StreamType = {\n  UNKNOWN: \"UNKNOWN\",\n  FLATE: \"FLATE\",\n  LZW: \"LZW\",\n  DCT: \"DCT\",\n  JPX: \"JPX\",\n  JBIG: \"JBIG\",\n  A85: \"A85\",\n  AHX: \"AHX\",\n  CCF: \"CCF\",\n  RLX: \"RLX\", // PDF short name is 'RL', but telemetry requires three chars.\n};\n\nconst FontType = {\n  UNKNOWN: \"UNKNOWN\",\n  TYPE1: \"TYPE1\",\n  TYPE1STANDARD: \"TYPE1STANDARD\",\n  TYPE1C: \"TYPE1C\",\n  CIDFONTTYPE0: \"CIDFONTTYPE0\",\n  CIDFONTTYPE0C: \"CIDFONTTYPE0C\",\n  TRUETYPE: \"TRUETYPE\",\n  CIDFONTTYPE2: \"CIDFONTTYPE2\",\n  TYPE3: \"TYPE3\",\n  OPENTYPE: \"OPENTYPE\",\n  TYPE0: \"TYPE0\",\n  MMTYPE1: \"MMTYPE1\",\n};\n\nconst VerbosityLevel = {\n  ERRORS: 0,\n  WARNINGS: 1,\n  INFOS: 5,\n};\n\nconst CMapCompressionType = {\n  NONE: 0,\n  BINARY: 1,\n  STREAM: 2,\n};\n\n// All the possible operations for an operator list.\nconst OPS = {\n  // Intentionally start from 1 so it is easy to spot bad operators that will be\n  // 0's.\n  dependency: 1,\n  setLineWidth: 2,\n  setLineCap: 3,\n  setLineJoin: 4,\n  setMiterLimit: 5,\n  setDash: 6,\n  setRenderingIntent: 7,\n  setFlatness: 8,\n  setGState: 9,\n  save: 10,\n  restore: 11,\n  transform: 12,\n  moveTo: 13,\n  lineTo: 14,\n  curveTo: 15,\n  curveTo2: 16,\n  curveTo3: 17,\n  closePath: 18,\n  rectangle: 19,\n  stroke: 20,\n  closeStroke: 21,\n  fill: 22,\n  eoFill: 23,\n  fillStroke: 24,\n  eoFillStroke: 25,\n  closeFillStroke: 26,\n  closeEOFillStroke: 27,\n  endPath: 28,\n  clip: 29,\n  eoClip: 30,\n  beginText: 31,\n  endText: 32,\n  setCharSpacing: 33,\n  setWordSpacing: 34,\n  setHScale: 35,\n  setLeading: 36,\n  setFont: 37,\n  setTextRenderingMode: 38,\n  setTextRise: 39,\n  moveText: 40,\n  setLeadingMoveText: 41,\n  setTextMatrix: 42,\n  nextLine: 43,\n  showText: 44,\n  showSpacedText: 45,\n  nextLineShowText: 46,\n  nextLineSetSpacingShowText: 47,\n  setCharWidth: 48,\n  setCharWidthAndBounds: 49,\n  setStrokeColorSpace: 50,\n  setFillColorSpace: 51,\n  setStrokeColor: 52,\n  setStrokeColorN: 53,\n  setFillColor: 54,\n  setFillColorN: 55,\n  setStrokeGray: 56,\n  setFillGray: 57,\n  setStrokeRGBColor: 58,\n  setFillRGBColor: 59,\n  setStrokeCMYKColor: 60,\n  setFillCMYKColor: 61,\n  shadingFill: 62,\n  beginInlineImage: 63,\n  beginImageData: 64,\n  endInlineImage: 65,\n  paintXObject: 66,\n  markPoint: 67,\n  markPointProps: 68,\n  beginMarkedContent: 69,\n  beginMarkedContentProps: 70,\n  endMarkedContent: 71,\n  beginCompat: 72,\n  endCompat: 73,\n  paintFormXObjectBegin: 74,\n  paintFormXObjectEnd: 75,\n  beginGroup: 76,\n  endGroup: 77,\n  beginAnnotations: 78,\n  endAnnotations: 79,\n  beginAnnotation: 80,\n  endAnnotation: 81,\n  /** @deprecated unused */\n  paintJpegXObject: 82,\n  paintImageMaskXObject: 83,\n  paintImageMaskXObjectGroup: 84,\n  paintImageXObject: 85,\n  paintInlineImageXObject: 86,\n  paintInlineImageXObjectGroup: 87,\n  paintImageXObjectRepeat: 88,\n  paintImageMaskXObjectRepeat: 89,\n  paintSolidColorImageMask: 90,\n  constructPath: 91,\n};\n\nconst UNSUPPORTED_FEATURES = {\n  /** @deprecated unused */\n  unknown: \"unknown\",\n  forms: \"forms\",\n  javaScript: \"javaScript\",\n  signatures: \"signatures\",\n  smask: \"smask\",\n  shadingPattern: \"shadingPattern\",\n  /** @deprecated unused */\n  font: \"font\",\n  errorTilingPattern: \"errorTilingPattern\",\n  errorExtGState: \"errorExtGState\",\n  errorXObject: \"errorXObject\",\n  errorFontLoadType3: \"errorFontLoadType3\",\n  errorFontState: \"errorFontState\",\n  errorFontMissing: \"errorFontMissing\",\n  errorFontTranslate: \"errorFontTranslate\",\n  errorColorSpace: \"errorColorSpace\",\n  errorOperatorList: \"errorOperatorList\",\n  errorFontToUnicode: \"errorFontToUnicode\",\n  errorFontLoadNative: \"errorFontLoadNative\",\n  errorFontBuildPath: \"errorFontBuildPath\",\n  errorFontGetPath: \"errorFontGetPath\",\n  errorMarkedContent: \"errorMarkedContent\",\n  errorContentSubStream: \"errorContentSubStream\",\n};\n\nconst PasswordResponses = {\n  NEED_PASSWORD: 1,\n  INCORRECT_PASSWORD: 2,\n};\n\nlet verbosity = VerbosityLevel.WARNINGS;\n\nfunction setVerbosityLevel(level) {\n  if (Number.isInteger(level)) {\n    verbosity = level;\n  }\n}\n\nfunction getVerbosityLevel() {\n  return verbosity;\n}\n\n// A notice for devs. These are good for things that are helpful to devs, such\n// as warning that Workers were disabled, which is important to devs but not\n// end users.\nfunction info(msg) {\n  if (verbosity >= VerbosityLevel.INFOS) {\n    console.log(`Info: ${msg}`);\n  }\n}\n\n// Non-fatal warnings.\nfunction warn(msg) {\n  if (verbosity >= VerbosityLevel.WARNINGS) {\n    console.log(`Warning: ${msg}`);\n  }\n}\n\nfunction unreachable(msg) {\n  throw new Error(msg);\n}\n\nfunction assert(cond, msg) {\n  if (!cond) {\n    unreachable(msg);\n  }\n}\n\n// Checks if URLs use one of the allowed protocols, e.g. to avoid XSS.\nfunction _isValidProtocol(url) {\n  if (!url) {\n    return false;\n  }\n  switch (url.protocol) {\n    case \"http:\":\n    case \"https:\":\n    case \"ftp:\":\n    case \"mailto:\":\n    case \"tel:\":\n      return true;\n    default:\n      return false;\n  }\n}\n\n/**\n * Attempts to create a valid absolute URL.\n *\n * @param {URL|string} url - An absolute, or relative, URL.\n * @param {URL|string} [baseUrl] - An absolute URL.\n * @param {Object} [options]\n * @returns Either a valid {URL}, or `null` otherwise.\n */\nfunction createValidAbsoluteUrl(url, baseUrl = null, options = null) {\n  if (!url) {\n    return null;\n  }\n  try {\n    if (options && typeof url === \"string\") {\n      // Let URLs beginning with \"www.\" default to using the \"http://\" protocol.\n      if (options.addDefaultProtocol && url.startsWith(\"www.\")) {\n        const dots = url.match(/\\./g);\n        // Avoid accidentally matching a *relative* URL pointing to a file named\n        // e.g. \"www.pdf\" or similar.\n        if (dots && dots.length >= 2) {\n          url = `http://${url}`;\n        }\n      }\n\n      // According to ISO 32000-1:2008, section 12.6.4.7, URIs should be encoded\n      // in 7-bit ASCII. Some bad PDFs use UTF-8 encoding; see bug 1122280.\n      if (options.tryConvertEncoding) {\n        try {\n          url = stringToUTF8String(url);\n        } catch (ex) {}\n      }\n    }\n\n    const absoluteUrl = baseUrl ? new URL(url, baseUrl) : new URL(url);\n    if (_isValidProtocol(absoluteUrl)) {\n      return absoluteUrl;\n    }\n  } catch (ex) {\n    /* `new URL()` will throw on incorrect data. */\n  }\n  return null;\n}\n\nfunction shadow(obj, prop, value) {\n  if (\n    typeof PDFJSDev === \"undefined\" ||\n    PDFJSDev.test(\"!PRODUCTION || TESTING\")\n  ) {\n    assert(\n      prop in obj,\n      `shadow: Property \"${prop && prop.toString()}\" not found in object.`\n    );\n  }\n  Object.defineProperty(obj, prop, {\n    value,\n    enumerable: true,\n    configurable: true,\n    writable: false,\n  });\n  return value;\n}\n\n/**\n * @type {any}\n */\nconst BaseException = (function BaseExceptionClosure() {\n  // eslint-disable-next-line no-shadow\n  function BaseException(message, name) {\n    if (this.constructor === BaseException) {\n      unreachable(\"Cannot initialize BaseException.\");\n    }\n    this.message = message;\n    this.name = name;\n  }\n  BaseException.prototype = new Error();\n  BaseException.constructor = BaseException;\n\n  return BaseException;\n})();\n\nclass PasswordException extends BaseException {\n  constructor(msg, code) {\n    super(msg, \"PasswordException\");\n    this.code = code;\n  }\n}\n\nclass UnknownErrorException extends BaseException {\n  constructor(msg, details) {\n    super(msg, \"UnknownErrorException\");\n    this.details = details;\n  }\n}\n\nclass InvalidPDFException extends BaseException {\n  constructor(msg) {\n    super(msg, \"InvalidPDFException\");\n  }\n}\n\nclass MissingPDFException extends BaseException {\n  constructor(msg) {\n    super(msg, \"MissingPDFException\");\n  }\n}\n\nclass UnexpectedResponseException extends BaseException {\n  constructor(msg, status) {\n    super(msg, \"UnexpectedResponseException\");\n    this.status = status;\n  }\n}\n\n/**\n * Error caused during parsing PDF data.\n */\nclass FormatError extends BaseException {\n  constructor(msg) {\n    super(msg, \"FormatError\");\n  }\n}\n\n/**\n * Error used to indicate task cancellation.\n */\nclass AbortException extends BaseException {\n  constructor(msg) {\n    super(msg, \"AbortException\");\n  }\n}\n\nfunction bytesToString(bytes) {\n  if (\n    typeof bytes !== \"object\" ||\n    bytes === null ||\n    bytes.length === undefined\n  ) {\n    unreachable(\"Invalid argument for bytesToString\");\n  }\n  const length = bytes.length;\n  const MAX_ARGUMENT_COUNT = 8192;\n  if (length < MAX_ARGUMENT_COUNT) {\n    return String.fromCharCode.apply(null, bytes);\n  }\n  const strBuf = [];\n  for (let i = 0; i < length; i += MAX_ARGUMENT_COUNT) {\n    const chunkEnd = Math.min(i + MAX_ARGUMENT_COUNT, length);\n    const chunk = bytes.subarray(i, chunkEnd);\n    strBuf.push(String.fromCharCode.apply(null, chunk));\n  }\n  return strBuf.join(\"\");\n}\n\nfunction stringToBytes(str) {\n  if (typeof str !== \"string\") {\n    unreachable(\"Invalid argument for stringToBytes\");\n  }\n  const length = str.length;\n  const bytes = new Uint8Array(length);\n  for (let i = 0; i < length; ++i) {\n    bytes[i] = str.charCodeAt(i) & 0xff;\n  }\n  return bytes;\n}\n\n/**\n * Gets length of the array (Array, Uint8Array, or string) in bytes.\n * @param {Array<any>|Uint8Array|string} arr\n * @returns {number}\n */\n// eslint-disable-next-line consistent-return\nfunction arrayByteLength(arr) {\n  if (arr.length !== undefined) {\n    return arr.length;\n  }\n  if (arr.byteLength !== undefined) {\n    return arr.byteLength;\n  }\n  unreachable(\"Invalid argument for arrayByteLength\");\n}\n\n/**\n * Combines array items (arrays) into single Uint8Array object.\n * @param {Array<Array<any>|Uint8Array|string>} arr - the array of the arrays\n *   (Array, Uint8Array, or string).\n * @returns {Uint8Array}\n */\nfunction arraysToBytes(arr) {\n  const length = arr.length;\n  // Shortcut: if first and only item is Uint8Array, return it.\n  if (length === 1 && arr[0] instanceof Uint8Array) {\n    return arr[0];\n  }\n  let resultLength = 0;\n  for (let i = 0; i < length; i++) {\n    resultLength += arrayByteLength(arr[i]);\n  }\n  let pos = 0;\n  const data = new Uint8Array(resultLength);\n  for (let i = 0; i < length; i++) {\n    let item = arr[i];\n    if (!(item instanceof Uint8Array)) {\n      if (typeof item === \"string\") {\n        item = stringToBytes(item);\n      } else {\n        item = new Uint8Array(item);\n      }\n    }\n    const itemLength = item.byteLength;\n    data.set(item, pos);\n    pos += itemLength;\n  }\n  return data;\n}\n\nfunction string32(value) {\n  if (\n    typeof PDFJSDev === \"undefined\" ||\n    PDFJSDev.test(\"!PRODUCTION || TESTING\")\n  ) {\n    assert(\n      typeof value === \"number\" && Math.abs(value) < 2 ** 32,\n      `string32: Unexpected input \"${value}\".`\n    );\n  }\n  return String.fromCharCode(\n    (value >> 24) & 0xff,\n    (value >> 16) & 0xff,\n    (value >> 8) & 0xff,\n    value & 0xff\n  );\n}\n\nfunction objectSize(obj) {\n  return Object.keys(obj).length;\n}\n\n// Ensure that the returned Object has a `null` prototype; hence why\n// `Object.fromEntries(...)` is not used.\nfunction objectFromMap(map) {\n  const obj = Object.create(null);\n  for (const [key, value] of map) {\n    obj[key] = value;\n  }\n  return obj;\n}\n\n// Checks the endianness of the platform.\nfunction isLittleEndian() {\n  const buffer8 = new Uint8Array(4);\n  buffer8[0] = 1;\n  const view32 = new Uint32Array(buffer8.buffer, 0, 1);\n  return view32[0] === 1;\n}\n\n// Checks if it's possible to eval JS expressions.\nfunction isEvalSupported() {\n  try {\n    new Function(\"\"); // eslint-disable-line no-new, no-new-func\n    return true;\n  } catch (e) {\n    return false;\n  }\n}\n\nclass FeatureTest {\n  static get isLittleEndian() {\n    return shadow(this, \"isLittleEndian\", isLittleEndian());\n  }\n\n  static get isEvalSupported() {\n    return shadow(this, \"isEvalSupported\", isEvalSupported());\n  }\n\n  static get isOffscreenCanvasSupported() {\n    return shadow(\n      this,\n      \"isOffscreenCanvasSupported\",\n      typeof OffscreenCanvas !== \"undefined\"\n    );\n  }\n}\n\nconst hexNumbers = [...Array(256).keys()].map(n =>\n  n.toString(16).padStart(2, \"0\")\n);\n\nclass Util {\n  static makeHexColor(r, g, b) {\n    return `#${hexNumbers[r]}${hexNumbers[g]}${hexNumbers[b]}`;\n  }\n\n  // Apply a scaling matrix to some min/max values.\n  // If a scaling factor is negative then min and max must be\n  // swaped.\n  static scaleMinMax(transform, minMax) {\n    let temp;\n    if (transform[0]) {\n      if (transform[0] < 0) {\n        temp = minMax[0];\n        minMax[0] = minMax[1];\n        minMax[1] = temp;\n      }\n      minMax[0] *= transform[0];\n      minMax[1] *= transform[0];\n\n      if (transform[3] < 0) {\n        temp = minMax[2];\n        minMax[2] = minMax[3];\n        minMax[3] = temp;\n      }\n      minMax[2] *= transform[3];\n      minMax[3] *= transform[3];\n    } else {\n      temp = minMax[0];\n      minMax[0] = minMax[2];\n      minMax[2] = temp;\n      temp = minMax[1];\n      minMax[1] = minMax[3];\n      minMax[3] = temp;\n\n      if (transform[1] < 0) {\n        temp = minMax[2];\n        minMax[2] = minMax[3];\n        minMax[3] = temp;\n      }\n      minMax[2] *= transform[1];\n      minMax[3] *= transform[1];\n\n      if (transform[2] < 0) {\n        temp = minMax[0];\n        minMax[0] = minMax[1];\n        minMax[1] = temp;\n      }\n      minMax[0] *= transform[2];\n      minMax[1] *= transform[2];\n    }\n    minMax[0] += transform[4];\n    minMax[1] += transform[4];\n    minMax[2] += transform[5];\n    minMax[3] += transform[5];\n  }\n\n  // Concatenates two transformation matrices together and returns the result.\n  static transform(m1, m2) {\n    return [\n      m1[0] * m2[0] + m1[2] * m2[1],\n      m1[1] * m2[0] + m1[3] * m2[1],\n      m1[0] * m2[2] + m1[2] * m2[3],\n      m1[1] * m2[2] + m1[3] * m2[3],\n      m1[0] * m2[4] + m1[2] * m2[5] + m1[4],\n      m1[1] * m2[4] + m1[3] * m2[5] + m1[5],\n    ];\n  }\n\n  // For 2d affine transforms\n  static applyTransform(p, m) {\n    const xt = p[0] * m[0] + p[1] * m[2] + m[4];\n    const yt = p[0] * m[1] + p[1] * m[3] + m[5];\n    return [xt, yt];\n  }\n\n  static applyInverseTransform(p, m) {\n    const d = m[0] * m[3] - m[1] * m[2];\n    const xt = (p[0] * m[3] - p[1] * m[2] + m[2] * m[5] - m[4] * m[3]) / d;\n    const yt = (-p[0] * m[1] + p[1] * m[0] + m[4] * m[1] - m[5] * m[0]) / d;\n    return [xt, yt];\n  }\n\n  // Applies the transform to the rectangle and finds the minimum axially\n  // aligned bounding box.\n  static getAxialAlignedBoundingBox(r, m) {\n    const p1 = Util.applyTransform(r, m);\n    const p2 = Util.applyTransform(r.slice(2, 4), m);\n    const p3 = Util.applyTransform([r[0], r[3]], m);\n    const p4 = Util.applyTransform([r[2], r[1]], m);\n    return [\n      Math.min(p1[0], p2[0], p3[0], p4[0]),\n      Math.min(p1[1], p2[1], p3[1], p4[1]),\n      Math.max(p1[0], p2[0], p3[0], p4[0]),\n      Math.max(p1[1], p2[1], p3[1], p4[1]),\n    ];\n  }\n\n  static inverseTransform(m) {\n    const d = m[0] * m[3] - m[1] * m[2];\n    return [\n      m[3] / d,\n      -m[1] / d,\n      -m[2] / d,\n      m[0] / d,\n      (m[2] * m[5] - m[4] * m[3]) / d,\n      (m[4] * m[1] - m[5] * m[0]) / d,\n    ];\n  }\n\n  // Apply a generic 3d matrix M on a 3-vector v:\n  //   | a b c |   | X |\n  //   | d e f | x | Y |\n  //   | g h i |   | Z |\n  // M is assumed to be serialized as [a,b,c,d,e,f,g,h,i],\n  // with v as [X,Y,Z]\n  static apply3dTransform(m, v) {\n    return [\n      m[0] * v[0] + m[1] * v[1] + m[2] * v[2],\n      m[3] * v[0] + m[4] * v[1] + m[5] * v[2],\n      m[6] * v[0] + m[7] * v[1] + m[8] * v[2],\n    ];\n  }\n\n  // This calculation uses Singular Value Decomposition.\n  // The SVD can be represented with formula A = USV. We are interested in the\n  // matrix S here because it represents the scale values.\n  static singularValueDecompose2dScale(m) {\n    const transpose = [m[0], m[2], m[1], m[3]];\n\n    // Multiply matrix m with its transpose.\n    const a = m[0] * transpose[0] + m[1] * transpose[2];\n    const b = m[0] * transpose[1] + m[1] * transpose[3];\n    const c = m[2] * transpose[0] + m[3] * transpose[2];\n    const d = m[2] * transpose[1] + m[3] * transpose[3];\n\n    // Solve the second degree polynomial to get roots.\n    const first = (a + d) / 2;\n    const second = Math.sqrt((a + d) ** 2 - 4 * (a * d - c * b)) / 2;\n    const sx = first + second || 1;\n    const sy = first - second || 1;\n\n    // Scale values are the square roots of the eigenvalues.\n    return [Math.sqrt(sx), Math.sqrt(sy)];\n  }\n\n  // Normalize rectangle rect=[x1, y1, x2, y2] so that (x1,y1) < (x2,y2)\n  // For coordinate systems whose origin lies in the bottom-left, this\n  // means normalization to (BL,TR) ordering. For systems with origin in the\n  // top-left, this means (TL,BR) ordering.\n  static normalizeRect(rect) {\n    const r = rect.slice(0); // clone rect\n    if (rect[0] > rect[2]) {\n      r[0] = rect[2];\n      r[2] = rect[0];\n    }\n    if (rect[1] > rect[3]) {\n      r[1] = rect[3];\n      r[3] = rect[1];\n    }\n    return r;\n  }\n\n  // Returns a rectangle [x1, y1, x2, y2] corresponding to the\n  // intersection of rect1 and rect2. If no intersection, returns 'null'\n  // The rectangle coordinates of rect1, rect2 should be [x1, y1, x2, y2]\n  static intersect(rect1, rect2) {\n    const xLow = Math.max(\n      Math.min(rect1[0], rect1[2]),\n      Math.min(rect2[0], rect2[2])\n    );\n    const xHigh = Math.min(\n      Math.max(rect1[0], rect1[2]),\n      Math.max(rect2[0], rect2[2])\n    );\n    if (xLow > xHigh) {\n      return null;\n    }\n    const yLow = Math.max(\n      Math.min(rect1[1], rect1[3]),\n      Math.min(rect2[1], rect2[3])\n    );\n    const yHigh = Math.min(\n      Math.max(rect1[1], rect1[3]),\n      Math.max(rect2[1], rect2[3])\n    );\n    if (yLow > yHigh) {\n      return null;\n    }\n\n    return [xLow, yLow, xHigh, yHigh];\n  }\n\n  // From https://github.com/adobe-webplatform/Snap.svg/blob/b365287722a72526000ac4bfcf0ce4cac2faa015/src/path.js#L852\n  static bezierBoundingBox(x0, y0, x1, y1, x2, y2, x3, y3) {\n    const tvalues = [],\n      bounds = [[], []];\n    let a, b, c, t, t1, t2, b2ac, sqrtb2ac;\n    for (let i = 0; i < 2; ++i) {\n      if (i === 0) {\n        b = 6 * x0 - 12 * x1 + 6 * x2;\n        a = -3 * x0 + 9 * x1 - 9 * x2 + 3 * x3;\n        c = 3 * x1 - 3 * x0;\n      } else {\n        b = 6 * y0 - 12 * y1 + 6 * y2;\n        a = -3 * y0 + 9 * y1 - 9 * y2 + 3 * y3;\n        c = 3 * y1 - 3 * y0;\n      }\n      if (Math.abs(a) < 1e-12) {\n        if (Math.abs(b) < 1e-12) {\n          continue;\n        }\n        t = -c / b;\n        if (0 < t && t < 1) {\n          tvalues.push(t);\n        }\n        continue;\n      }\n      b2ac = b * b - 4 * c * a;\n      sqrtb2ac = Math.sqrt(b2ac);\n      if (b2ac < 0) {\n        continue;\n      }\n      t1 = (-b + sqrtb2ac) / (2 * a);\n      if (0 < t1 && t1 < 1) {\n        tvalues.push(t1);\n      }\n      t2 = (-b - sqrtb2ac) / (2 * a);\n      if (0 < t2 && t2 < 1) {\n        tvalues.push(t2);\n      }\n    }\n\n    let j = tvalues.length,\n      mt;\n    const jlen = j;\n    while (j--) {\n      t = tvalues[j];\n      mt = 1 - t;\n      bounds[0][j] =\n        mt * mt * mt * x0 +\n        3 * mt * mt * t * x1 +\n        3 * mt * t * t * x2 +\n        t * t * t * x3;\n      bounds[1][j] =\n        mt * mt * mt * y0 +\n        3 * mt * mt * t * y1 +\n        3 * mt * t * t * y2 +\n        t * t * t * y3;\n    }\n\n    bounds[0][jlen] = x0;\n    bounds[1][jlen] = y0;\n    bounds[0][jlen + 1] = x3;\n    bounds[1][jlen + 1] = y3;\n    bounds[0].length = bounds[1].length = jlen + 2;\n\n    return [\n      Math.min(...bounds[0]),\n      Math.min(...bounds[1]),\n      Math.max(...bounds[0]),\n      Math.max(...bounds[1]),\n    ];\n  }\n}\n\nconst PDFStringTranslateTable = [\n  0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0x2d8,\n  0x2c7, 0x2c6, 0x2d9, 0x2dd, 0x2db, 0x2da, 0x2dc, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,\n  0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,\n  0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,\n  0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,\n  0, 0, 0, 0, 0, 0, 0, 0, 0x2022, 0x2020, 0x2021, 0x2026, 0x2014, 0x2013, 0x192,\n  0x2044, 0x2039, 0x203a, 0x2212, 0x2030, 0x201e, 0x201c, 0x201d, 0x2018,\n  0x2019, 0x201a, 0x2122, 0xfb01, 0xfb02, 0x141, 0x152, 0x160, 0x178, 0x17d,\n  0x131, 0x142, 0x153, 0x161, 0x17e, 0, 0x20ac,\n];\n\nfunction stringToPDFString(str) {\n  if (str[0] >= \"\\xEF\") {\n    let encoding;\n    if (str[0] === \"\\xFE\" && str[1] === \"\\xFF\") {\n      encoding = \"utf-16be\";\n    } else if (str[0] === \"\\xFF\" && str[1] === \"\\xFE\") {\n      encoding = \"utf-16le\";\n    } else if (str[0] === \"\\xEF\" && str[1] === \"\\xBB\" && str[2] === \"\\xBF\") {\n      encoding = \"utf-8\";\n    }\n\n    if (encoding) {\n      try {\n        const decoder = new TextDecoder(encoding, { fatal: true });\n        const buffer = stringToBytes(str);\n        return decoder.decode(buffer);\n      } catch (ex) {\n        warn(`stringToPDFString: \"${ex}\".`);\n      }\n    }\n  }\n  // ISO Latin 1\n  const strBuf = [];\n  for (let i = 0, ii = str.length; i < ii; i++) {\n    const code = PDFStringTranslateTable[str.charCodeAt(i)];\n    strBuf.push(code ? String.fromCharCode(code) : str.charAt(i));\n  }\n  return strBuf.join(\"\");\n}\n\nfunction escapeString(str) {\n  // replace \"(\", \")\", \"\\n\", \"\\r\" and \"\\\"\n  // by \"\\(\", \"\\)\", \"\\\\n\", \"\\\\r\" and \"\\\\\"\n  // in order to write it in a PDF file.\n  return str.replace(/([()\\\\\\n\\r])/g, match => {\n    if (match === \"\\n\") {\n      return \"\\\\n\";\n    } else if (match === \"\\r\") {\n      return \"\\\\r\";\n    }\n    return `\\\\${match}`;\n  });\n}\n\nfunction isAscii(str) {\n  return /^[\\x00-\\x7F]*$/.test(str);\n}\n\nfunction stringToUTF16BEString(str) {\n  const buf = [\"\\xFE\\xFF\"];\n  for (let i = 0, ii = str.length; i < ii; i++) {\n    const char = str.charCodeAt(i);\n    buf.push(\n      String.fromCharCode((char >> 8) & 0xff),\n      String.fromCharCode(char & 0xff)\n    );\n  }\n  return buf.join(\"\");\n}\n\nfunction stringToUTF8String(str) {\n  return decodeURIComponent(escape(str));\n}\n\nfunction utf8StringToString(str) {\n  return unescape(encodeURIComponent(str));\n}\n\nfunction isArrayBuffer(v) {\n  return typeof v === \"object\" && v !== null && v.byteLength !== undefined;\n}\n\nfunction isArrayEqual(arr1, arr2) {\n  if (arr1.length !== arr2.length) {\n    return false;\n  }\n  for (let i = 0, ii = arr1.length; i < ii; i++) {\n    if (arr1[i] !== arr2[i]) {\n      return false;\n    }\n  }\n  return true;\n}\n\nfunction getModificationDate(date = new Date()) {\n  const buffer = [\n    date.getUTCFullYear().toString(),\n    (date.getUTCMonth() + 1).toString().padStart(2, \"0\"),\n    date.getUTCDate().toString().padStart(2, \"0\"),\n    date.getUTCHours().toString().padStart(2, \"0\"),\n    date.getUTCMinutes().toString().padStart(2, \"0\"),\n    date.getUTCSeconds().toString().padStart(2, \"0\"),\n  ];\n\n  return buffer.join(\"\");\n}\n\n/**\n * Promise Capability object.\n *\n * @typedef {Object} PromiseCapability\n * @property {Promise<any>} promise - A Promise object.\n * @property {boolean} settled - If the Promise has been fulfilled/rejected.\n * @property {function} resolve - Fulfills the Promise.\n * @property {function} reject - Rejects the Promise.\n */\n\n/**\n * Creates a promise capability object.\n * @alias createPromiseCapability\n *\n * @returns {PromiseCapability}\n */\nfunction createPromiseCapability() {\n  const capability = Object.create(null);\n  let isSettled = false;\n\n  Object.defineProperty(capability, \"settled\", {\n    get() {\n      return isSettled;\n    },\n  });\n  capability.promise = new Promise(function (resolve, reject) {\n    capability.resolve = function (data) {\n      isSettled = true;\n      resolve(data);\n    };\n    capability.reject = function (reason) {\n      isSettled = true;\n      reject(reason);\n    };\n  });\n  return capability;\n}\n\nexport {\n  AbortException,\n  AnnotationActionEventType,\n  AnnotationBorderStyleType,\n  AnnotationFieldFlag,\n  AnnotationFlag,\n  AnnotationMarkedState,\n  AnnotationMode,\n  AnnotationReplyType,\n  AnnotationReviewState,\n  AnnotationStateModelType,\n  AnnotationType,\n  arrayByteLength,\n  arraysToBytes,\n  assert,\n  BaseException,\n  bytesToString,\n  CMapCompressionType,\n  createPromiseCapability,\n  createValidAbsoluteUrl,\n  DocumentActionEventType,\n  escapeString,\n  FeatureTest,\n  FONT_IDENTITY_MATRIX,\n  FontType,\n  FormatError,\n  getModificationDate,\n  getVerbosityLevel,\n  IDENTITY_MATRIX,\n  ImageKind,\n  info,\n  InvalidPDFException,\n  isArrayBuffer,\n  isArrayEqual,\n  isAscii,\n  MissingPDFException,\n  objectFromMap,\n  objectSize,\n  OPS,\n  PageActionEventType,\n  PasswordException,\n  PasswordResponses,\n  PermissionFlag,\n  RenderingIntentFlag,\n  setVerbosityLevel,\n  shadow,\n  StreamType,\n  string32,\n  stringToBytes,\n  stringToPDFString,\n  stringToUTF16BEString,\n  stringToUTF8String,\n  TextRenderingMode,\n  UnexpectedResponseException,\n  UnknownErrorException,\n  unreachable,\n  UNSUPPORTED_FEATURES,\n  utf8StringToString,\n  Util,\n  VerbosityLevel,\n  warn,\n};\n","/* Copyright 2017 Mozilla Foundation\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n/* globals __non_webpack_require__ */\n\nimport { isNodeJS } from \"./is_node.js\";\n\n// Skip compatibility checks for modern builds and if we already ran the module.\nif (\n  (typeof PDFJSDev === \"undefined\" || !PDFJSDev.test(\"SKIP_BABEL\")) &&\n  !globalThis._pdfjsCompatibilityChecked\n) {\n  globalThis._pdfjsCompatibilityChecked = true;\n\n  // Support: Node.js\n  (function checkNodeBtoa() {\n    if (globalThis.btoa || !isNodeJS) {\n      return;\n    }\n    globalThis.btoa = function (chars) {\n      // eslint-disable-next-line no-undef\n      return Buffer.from(chars, \"binary\").toString(\"base64\");\n    };\n  })();\n\n  // Support: Node.js\n  (function checkNodeAtob() {\n    if (globalThis.atob || !isNodeJS) {\n      return;\n    }\n    globalThis.atob = function (input) {\n      // eslint-disable-next-line no-undef\n      return Buffer.from(input, \"base64\").toString(\"binary\");\n    };\n  })();\n\n  // Support: Node.js\n  (function checkDOMMatrix() {\n    if (globalThis.DOMMatrix || !isNodeJS) {\n      return;\n    }\n    globalThis.DOMMatrix = __non_webpack_require__(\n      \"dommatrix/dist/dommatrix.js\"\n    );\n  })();\n\n  // Provides support for *recent* additions to the Promise specification,\n  // however basic Promise support is assumed to be available natively.\n  // Support: Firefox<71, Chrome<76, Safari<13, Node.js<12.9.0\n  (function checkPromise() {\n    if (typeof PDFJSDev !== \"undefined\" && PDFJSDev.test(\"IMAGE_DECODERS\")) {\n      // The current image decoders are synchronous, hence `Promise` shouldn't\n      // need to be polyfilled for the IMAGE_DECODERS build target.\n      return;\n    }\n    if (globalThis.Promise.allSettled) {\n      return;\n    }\n    globalThis.Promise = require(\"core-js/es/promise/index.js\");\n  })();\n\n  // Support: Node.js\n  (function checkReadableStream() {\n    if (globalThis.ReadableStream || !isNodeJS) {\n      return;\n    }\n    globalThis.ReadableStream = __non_webpack_require__(\n      \"web-streams-polyfill/dist/ponyfill.js\"\n    ).ReadableStream;\n  })();\n\n  // Support: Firefox<94, Chrome<98, Safari<15.4, Node.js<17.0.0\n  (function checkStructuredClone() {\n    if (typeof PDFJSDev !== \"undefined\" && PDFJSDev.test(\"IMAGE_DECODERS\")) {\n      // The current image decoders are synchronous, hence `structuredClone`\n      // shouldn't need to be polyfilled for the IMAGE_DECODERS build target.\n      return;\n    }\n    if (globalThis.structuredClone) {\n      return;\n    }\n    require(\"core-js/web/structured-clone.js\");\n  })();\n}\n","/* Copyright 2018 Mozilla Foundation\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n/* globals process */\n\n// NW.js / Electron is a browser context, but copies some Node.js objects; see\n// http://docs.nwjs.io/en/latest/For%20Users/Advanced/JavaScript%20Contexts%20in%20NW.js/#access-nodejs-and-nwjs-api-in-browser-context\n// https://www.electronjs.org/docs/api/process#processversionselectron-readonly\n// https://www.electronjs.org/docs/api/process#processtype-readonly\nconst isNodeJS =\n  (typeof PDFJSDev === \"undefined\" || PDFJSDev.test(\"GENERIC\")) &&\n  typeof process === \"object\" &&\n  process + \"\" === \"[object process]\" &&\n  !process.versions.nw &&\n  !(process.versions.electron && process.type && process.type !== \"browser\");\n\nexport { isNodeJS };\n","/* Copyright 2012 Mozilla Foundation\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n/**\n * @module pdfjsLib\n */\n\nimport {\n  AbortException,\n  AnnotationMode,\n  assert,\n  createPromiseCapability,\n  getVerbosityLevel,\n  info,\n  InvalidPDFException,\n  isArrayBuffer,\n  MissingPDFException,\n  PasswordException,\n  RenderingIntentFlag,\n  setVerbosityLevel,\n  shadow,\n  stringToBytes,\n  UnexpectedResponseException,\n  UnknownErrorException,\n  unreachable,\n  warn,\n} from \"../shared/util.js\";\nimport {\n  deprecated,\n  DOMCanvasFactory,\n  DOMCMapReaderFactory,\n  DOMStandardFontDataFactory,\n  isDataScheme,\n  loadScript,\n  PageViewport,\n  RenderingCancelledException,\n  StatTimer,\n} from \"./display_utils.js\";\nimport { FontFaceObject, FontLoader } from \"./font_loader.js\";\nimport { AnnotationStorage } from \"./annotation_storage.js\";\nimport { CanvasGraphics } from \"./canvas.js\";\nimport { GlobalWorkerOptions } from \"./worker_options.js\";\nimport { isNodeJS } from \"../shared/is_node.js\";\nimport { MessageHandler } from \"../shared/message_handler.js\";\nimport { Metadata } from \"./metadata.js\";\nimport { OptionalContentConfig } from \"./optional_content_config.js\";\nimport { PDFDataTransportStream } from \"./transport_stream.js\";\nimport { XfaText } from \"./xfa_text.js\";\n\nconst DEFAULT_RANGE_CHUNK_SIZE = 65536; // 2^16 = 65536\nconst RENDERING_CANCELLED_TIMEOUT = 100; // ms\n\nlet DefaultCanvasFactory = DOMCanvasFactory;\nlet DefaultCMapReaderFactory = DOMCMapReaderFactory;\nlet DefaultStandardFontDataFactory = DOMStandardFontDataFactory;\n\nif (typeof PDFJSDev !== \"undefined\" && PDFJSDev.test(\"GENERIC\") && isNodeJS) {\n  const {\n    NodeCanvasFactory,\n    NodeCMapReaderFactory,\n    NodeStandardFontDataFactory,\n  } = require(\"./node_utils.js\");\n\n  DefaultCanvasFactory = NodeCanvasFactory;\n  DefaultCMapReaderFactory = NodeCMapReaderFactory;\n  DefaultStandardFontDataFactory = NodeStandardFontDataFactory;\n}\n\n/**\n * @typedef {function} IPDFStreamFactory\n * @param {DocumentInitParameters} params - The document initialization\n *   parameters. The \"url\" key is always present.\n * @returns {Promise} A promise, which is resolved with an instance of\n *   {IPDFStream}.\n * @ignore\n */\n\n/**\n * @type {IPDFStreamFactory}\n * @private\n */\nlet createPDFNetworkStream;\n\n/**\n * Sets the function that instantiates an {IPDFStream} as an alternative PDF\n * data transport.\n *\n * @param {IPDFStreamFactory} pdfNetworkStreamFactory - The factory function\n *   that takes document initialization parameters (including a \"url\") and\n *   returns a promise which is resolved with an instance of {IPDFStream}.\n * @ignore\n */\nfunction setPDFNetworkStreamFactory(pdfNetworkStreamFactory) {\n  createPDFNetworkStream = pdfNetworkStreamFactory;\n}\n\n/**\n * @typedef { Int8Array | Uint8Array | Uint8ClampedArray |\n *            Int16Array | Uint16Array |\n *            Int32Array | Uint32Array | Float32Array |\n *            Float64Array\n * } TypedArray\n */\n\n/**\n * @typedef {Object} RefProxy\n * @property {number} num\n * @property {number} gen\n */\n\n/**\n * Document initialization / loading parameters object.\n *\n * @typedef {Object} DocumentInitParameters\n * @property {string|URL} [url] - The URL of the PDF.\n * @property {TypedArray|Array<number>|string} [data] - Binary PDF data. Use\n *    typed arrays (Uint8Array) to improve the memory usage. If PDF data is\n *    BASE64-encoded, use `atob()` to convert it to a binary string first.\n * @property {Object} [httpHeaders] - Basic authentication headers.\n * @property {boolean} [withCredentials] - Indicates whether or not\n *   cross-site Access-Control requests should be made using credentials such\n *   as cookies or authorization headers. The default is `false`.\n * @property {string} [password] - For decrypting password-protected PDFs.\n * @property {TypedArray} [initialData] - A typed array with the first portion\n *   or all of the pdf data. Used by the extension since some data is already\n *   loaded before the switch to range requests.\n * @property {number} [length] - The PDF file length. It's used for progress\n *   reports and range requests operations.\n * @property {PDFDataRangeTransport} [range] - Allows for using a custom range\n *   transport implementation.\n * @property {number} [rangeChunkSize] - Specify maximum number of bytes fetched\n *   per range request. The default value is {@link DEFAULT_RANGE_CHUNK_SIZE}.\n * @property {PDFWorker} [worker] - The worker that will be used for loading and\n *   parsing the PDF data.\n * @property {number} [verbosity] - Controls the logging level; the constants\n *   from {@link VerbosityLevel} should be used.\n * @property {string} [docBaseUrl] - The base URL of the document, used when\n *   attempting to recover valid absolute URLs for annotations, and outline\n *   items, that (incorrectly) only specify relative URLs.\n * @property {string} [cMapUrl] - The URL where the predefined Adobe CMaps are\n *   located. Include the trailing slash.\n * @property {boolean} [cMapPacked] - Specifies if the Adobe CMaps are binary\n *   packed or not.\n * @property {Object} [CMapReaderFactory] - The factory that will be used when\n *   reading built-in CMap files. Providing a custom factory is useful for\n *   environments without Fetch API or `XMLHttpRequest` support, such as\n *   Node.js. The default value is {DOMCMapReaderFactory}.\n * @property {boolean} [useSystemFonts] - When `true`, fonts that aren't\n *   embedded in the PDF document will fallback to a system font.\n *   The default value is `true` in web environments and `false` in Node.js;\n *   unless `disableFontFace === true` in which case this defaults to `false`\n *   regardless of the environment (to prevent completely broken fonts).\n * @property {string} [standardFontDataUrl] - The URL where the standard font\n *   files are located. Include the trailing slash.\n * @property {Object} [StandardFontDataFactory] - The factory that will be used\n *   when reading the standard font files. Providing a custom factory is useful\n *   for environments without Fetch API or `XMLHttpRequest` support, such as\n *   Node.js. The default value is {DOMStandardFontDataFactory}.\n * @property {boolean} [useWorkerFetch] - Enable using the Fetch API in the\n *   worker-thread when reading CMap and standard font files. When `true`,\n *   the `CMapReaderFactory` and `StandardFontDataFactory` options are ignored.\n *   The default value is `true` in web environments and `false` in Node.js.\n * @property {boolean} [stopAtErrors] - Reject certain promises, e.g.\n *   `getOperatorList`, `getTextContent`, and `RenderTask`, when the associated\n *   PDF data cannot be successfully parsed, instead of attempting to recover\n *   whatever possible of the data. The default value is `false`.\n * @property {number} [maxImageSize] - The maximum allowed image size in total\n *   pixels, i.e. width * height. Images above this value will not be rendered.\n *   Use -1 for no limit, which is also the default value.\n * @property {boolean} [isEvalSupported] - Determines if we can evaluate strings\n *   as JavaScript. Primarily used to improve performance of font rendering, and\n *   when parsing PDF functions. The default value is `true`.\n * @property {boolean} [disableFontFace] - By default fonts are converted to\n *   OpenType fonts and loaded via the Font Loading API or `@font-face` rules.\n *   If disabled, fonts will be rendered using a built-in font renderer that\n *   constructs the glyphs with primitive path commands.\n *   The default value is `false` in web environments and `true` in Node.js.\n * @property {boolean} [fontExtraProperties] - Include additional properties,\n *   which are unused during rendering of PDF documents, when exporting the\n *   parsed font data from the worker-thread. This may be useful for debugging\n *   purposes (and backwards compatibility), but note that it will lead to\n *   increased memory usage. The default value is `false`.\n * @property {boolean} [enableXfa] - Render Xfa forms if any.\n *   The default value is `false`.\n * @property {HTMLDocument} [ownerDocument] - Specify an explicit document\n *   context to create elements with and to load resources, such as fonts,\n *   into. Defaults to the current document.\n * @property {boolean} [disableRange] - Disable range request loading of PDF\n *   files. When enabled, and if the server supports partial content requests,\n *   then the PDF will be fetched in chunks. The default value is `false`.\n * @property {boolean} [disableStream] - Disable streaming of PDF file data.\n *   By default PDF.js attempts to load PDF files in chunks. The default value\n *   is `false`.\n * @property {boolean} [disableAutoFetch] - Disable pre-fetching of PDF file\n *   data. When range requests are enabled PDF.js will automatically keep\n *   fetching more data even if it isn't needed to display the current page.\n *   The default value is `false`.\n *\n *   NOTE: It is also necessary to disable streaming, see above, in order for\n *   disabling of pre-fetching to work correctly.\n * @property {boolean} [pdfBug] - Enables special hooks for debugging PDF.js\n *   (see `web/debugger.js`). The default value is `false`.\n */\n\n/**\n * This is the main entry point for loading a PDF and interacting with it.\n *\n * NOTE: If a URL is used to fetch the PDF data a standard Fetch API call (or\n * XHR as fallback) is used, which means it must follow same origin rules,\n * e.g. no cross-domain requests without CORS.\n *\n * @param {string|URL|TypedArray|PDFDataRangeTransport|DocumentInitParameters}\n *   src - Can be a URL where a PDF file is located, a typed array (Uint8Array)\n *         already populated with data, or a parameter object.\n * @returns {PDFDocumentLoadingTask}\n */\nfunction getDocument(src) {\n  const task = new PDFDocumentLoadingTask();\n\n  let source;\n  if (typeof src === \"string\" || src instanceof URL) {\n    source = { url: src };\n  } else if (isArrayBuffer(src)) {\n    source = { data: src };\n  } else if (src instanceof PDFDataRangeTransport) {\n    source = { range: src };\n  } else {\n    if (typeof src !== \"object\") {\n      throw new Error(\n        \"Invalid parameter in getDocument, \" +\n          \"need either string, URL, Uint8Array, or parameter object.\"\n      );\n    }\n    if (!src.url && !src.data && !src.range) {\n      throw new Error(\n        \"Invalid parameter object: need either .data, .range or .url\"\n      );\n    }\n    source = src;\n  }\n  const params = Object.create(null);\n  let rangeTransport = null,\n    worker = null;\n\n  for (const key in source) {\n    const value = source[key];\n\n    switch (key) {\n      case \"url\":\n        if (typeof window !== \"undefined\") {\n          try {\n            // The full path is required in the 'url' field.\n            params[key] = new URL(value, window.location).href;\n            continue;\n          } catch (ex) {\n            warn(`Cannot create valid URL: \"${ex}\".`);\n          }\n        } else if (typeof value === \"string\" || value instanceof URL) {\n          params[key] = value.toString(); // Support Node.js environments.\n          continue;\n        }\n        throw new Error(\n          \"Invalid PDF url data: \" +\n            \"either string or URL-object is expected in the url property.\"\n        );\n      case \"range\":\n        rangeTransport = value;\n        continue;\n      case \"worker\":\n        worker = value;\n        continue;\n      case \"data\":\n        // Converting string or array-like data to Uint8Array.\n        if (\n          typeof PDFJSDev !== \"undefined\" &&\n          PDFJSDev.test(\"GENERIC\") &&\n          isNodeJS &&\n          typeof Buffer !== \"undefined\" && // eslint-disable-line no-undef\n          value instanceof Buffer // eslint-disable-line no-undef\n        ) {\n          params[key] = new Uint8Array(value);\n        } else if (value instanceof Uint8Array) {\n          break; // Use the data as-is when it's already a Uint8Array.\n        } else if (typeof value === \"string\") {\n          params[key] = stringToBytes(value);\n        } else if (\n          typeof value === \"object\" &&\n          value !== null &&\n          !isNaN(value.length)\n        ) {\n          params[key] = new Uint8Array(value);\n        } else if (isArrayBuffer(value)) {\n          params[key] = new Uint8Array(value);\n        } else {\n          throw new Error(\n            \"Invalid PDF binary data: either typed array, \" +\n              \"string, or array-like object is expected in the data property.\"\n          );\n        }\n        continue;\n    }\n    params[key] = value;\n  }\n\n  params.CMapReaderFactory =\n    params.CMapReaderFactory || DefaultCMapReaderFactory;\n  params.StandardFontDataFactory =\n    params.StandardFontDataFactory || DefaultStandardFontDataFactory;\n  params.ignoreErrors = params.stopAtErrors !== true;\n  params.fontExtraProperties = params.fontExtraProperties === true;\n  params.pdfBug = params.pdfBug === true;\n  params.enableXfa = params.enableXfa === true;\n\n  if (!Number.isInteger(params.rangeChunkSize) || params.rangeChunkSize < 1) {\n    params.rangeChunkSize = DEFAULT_RANGE_CHUNK_SIZE;\n  }\n  if (\n    typeof params.docBaseUrl !== \"string\" ||\n    isDataScheme(params.docBaseUrl)\n  ) {\n    // Ignore \"data:\"-URLs, since they can't be used to recover valid absolute\n    // URLs anyway. We want to avoid sending them to the worker-thread, since\n    // they contain the *entire* PDF document and can thus be arbitrarily long.\n    params.docBaseUrl = null;\n  }\n  if (!Number.isInteger(params.maxImageSize) || params.maxImageSize < -1) {\n    params.maxImageSize = -1;\n  }\n  if (typeof params.cMapUrl !== \"string\") {\n    params.cMapUrl = null;\n  }\n  if (typeof params.standardFontDataUrl !== \"string\") {\n    params.standardFontDataUrl = null;\n  }\n  if (typeof params.useWorkerFetch !== \"boolean\") {\n    params.useWorkerFetch =\n      params.CMapReaderFactory === DOMCMapReaderFactory &&\n      params.StandardFontDataFactory === DOMStandardFontDataFactory;\n  }\n  if (typeof params.isEvalSupported !== \"boolean\") {\n    params.isEvalSupported = true;\n  }\n  if (typeof params.disableFontFace !== \"boolean\") {\n    params.disableFontFace = isNodeJS;\n  }\n  if (typeof params.useSystemFonts !== \"boolean\") {\n    params.useSystemFonts = !isNodeJS && !params.disableFontFace;\n  }\n  if (\n    typeof params.ownerDocument !== \"object\" ||\n    params.ownerDocument === null\n  ) {\n    params.ownerDocument = globalThis.document;\n  }\n\n  if (typeof params.disableRange !== \"boolean\") {\n    params.disableRange = false;\n  }\n  if (typeof params.disableStream !== \"boolean\") {\n    params.disableStream = false;\n  }\n  if (typeof params.disableAutoFetch !== \"boolean\") {\n    params.disableAutoFetch = false;\n  }\n\n  // Set the main-thread verbosity level.\n  setVerbosityLevel(params.verbosity);\n\n  if (!worker) {\n    const workerParams = {\n      verbosity: params.verbosity,\n      port: GlobalWorkerOptions.workerPort,\n    };\n    // Worker was not provided -- creating and owning our own. If message port\n    // is specified in global worker options, using it.\n    worker = workerParams.port\n      ? PDFWorker.fromPort(workerParams)\n      : new PDFWorker(workerParams);\n    task._worker = worker;\n  }\n  const docId = task.docId;\n  worker.promise\n    .then(function () {\n      if (task.destroyed) {\n        throw new Error(\"Loading aborted\");\n      }\n\n      const workerIdPromise = _fetchDocument(\n        worker,\n        params,\n        rangeTransport,\n        docId\n      );\n      const networkStreamPromise = new Promise(function (resolve) {\n        let networkStream;\n        if (rangeTransport) {\n          networkStream = new PDFDataTransportStream(\n            {\n              length: params.length,\n              initialData: params.initialData,\n              progressiveDone: params.progressiveDone,\n              contentDispositionFilename: params.contentDispositionFilename,\n              disableRange: params.disableRange,\n              disableStream: params.disableStream,\n            },\n            rangeTransport\n          );\n        } else if (!params.data) {\n          networkStream = createPDFNetworkStream({\n            url: params.url,\n            length: params.length,\n            httpHeaders: params.httpHeaders,\n            withCredentials: params.withCredentials,\n            rangeChunkSize: params.rangeChunkSize,\n            disableRange: params.disableRange,\n            disableStream: params.disableStream,\n          });\n        }\n        resolve(networkStream);\n      });\n\n      return Promise.all([workerIdPromise, networkStreamPromise]).then(\n        function ([workerId, networkStream]) {\n          if (task.destroyed) {\n            throw new Error(\"Loading aborted\");\n          }\n\n          const messageHandler = new MessageHandler(\n            docId,\n            workerId,\n            worker.port\n          );\n          const transport = new WorkerTransport(\n            messageHandler,\n            task,\n            networkStream,\n            params\n          );\n          task._transport = transport;\n          messageHandler.send(\"Ready\", null);\n        }\n      );\n    })\n    .catch(task._capability.reject);\n\n  return task;\n}\n\n/**\n * Starts fetching of specified PDF document/data.\n *\n * @param {PDFWorker} worker\n * @param {Object} source\n * @param {PDFDataRangeTransport} pdfDataRangeTransport\n * @param {string} docId - Unique document ID, used in `MessageHandler`.\n * @returns {Promise<string>} A promise that is resolved when the worker ID of\n *   the `MessageHandler` is known.\n * @private\n */\nasync function _fetchDocument(worker, source, pdfDataRangeTransport, docId) {\n  if (worker.destroyed) {\n    throw new Error(\"Worker was destroyed\");\n  }\n\n  if (pdfDataRangeTransport) {\n    source.length = pdfDataRangeTransport.length;\n    source.initialData = pdfDataRangeTransport.initialData;\n    source.progressiveDone = pdfDataRangeTransport.progressiveDone;\n    source.contentDispositionFilename =\n      pdfDataRangeTransport.contentDispositionFilename;\n  }\n  const workerId = await worker.messageHandler.sendWithPromise(\n    \"GetDocRequest\",\n    {\n      docId,\n      apiVersion:\n        typeof PDFJSDev !== \"undefined\" && !PDFJSDev.test(\"TESTING\")\n          ? PDFJSDev.eval(\"BUNDLE_VERSION\")\n          : null,\n      // Only send the required properties, and *not* the entire object.\n      source: {\n        data: source.data,\n        url: source.url,\n        password: source.password,\n        disableAutoFetch: source.disableAutoFetch,\n        rangeChunkSize: source.rangeChunkSize,\n        length: source.length,\n      },\n      maxImageSize: source.maxImageSize,\n      disableFontFace: source.disableFontFace,\n      docBaseUrl: source.docBaseUrl,\n      ignoreErrors: source.ignoreErrors,\n      isEvalSupported: source.isEvalSupported,\n      fontExtraProperties: source.fontExtraProperties,\n      enableXfa: source.enableXfa,\n      useSystemFonts: source.useSystemFonts,\n      cMapUrl: source.useWorkerFetch ? source.cMapUrl : null,\n      standardFontDataUrl: source.useWorkerFetch\n        ? source.standardFontDataUrl\n        : null,\n    }\n  );\n\n  if (worker.destroyed) {\n    throw new Error(\"Worker was destroyed\");\n  }\n  return workerId;\n}\n\n/**\n * @typedef {Object} OnProgressParameters\n * @property {number} loaded - Currently loaded number of bytes.\n * @property {number} total - Total number of bytes in the PDF file.\n */\n\n/**\n * The loading task controls the operations required to load a PDF document\n * (such as network requests) and provides a way to listen for completion,\n * after which individual pages can be rendered.\n */\nclass PDFDocumentLoadingTask {\n  static #docId = 0;\n\n  constructor() {\n    this._capability = createPromiseCapability();\n    this._transport = null;\n    this._worker = null;\n\n    /**\n     * Unique identifier for the document loading task.\n     * @type {string}\n     */\n    this.docId = `d${PDFDocumentLoadingTask.#docId++}`;\n\n    /**\n     * Whether the loading task is destroyed or not.\n     * @type {boolean}\n     */\n    this.destroyed = false;\n\n    /**\n     * Callback to request a password if a wrong or no password was provided.\n     * The callback receives two parameters: a function that should be called\n     * with the new password, and a reason (see {@link PasswordResponses}).\n     * @type {function}\n     */\n    this.onPassword = null;\n\n    /**\n     * Callback to be able to monitor the loading progress of the PDF file\n     * (necessary to implement e.g. a loading bar).\n     * The callback receives an {@link OnProgressParameters} argument.\n     * @type {function}\n     */\n    this.onProgress = null;\n\n    /**\n     * Callback for when an unsupported feature is used in the PDF document.\n     * The callback receives an {@link UNSUPPORTED_FEATURES} argument.\n     * @type {function}\n     */\n    this.onUnsupportedFeature = null;\n  }\n\n  /**\n   * Promise for document loading task completion.\n   * @type {Promise<PDFDocumentProxy>}\n   */\n  get promise() {\n    return this._capability.promise;\n  }\n\n  /**\n   * Abort all network requests and destroy the worker.\n   * @returns {Promise<void>} A promise that is resolved when destruction is\n   *   completed.\n   */\n  async destroy() {\n    this.destroyed = true;\n    await this._transport?.destroy();\n\n    this._transport = null;\n    if (this._worker) {\n      this._worker.destroy();\n      this._worker = null;\n    }\n  }\n}\n\n/**\n * Abstract class to support range requests file loading.\n */\nclass PDFDataRangeTransport {\n  /**\n   * @param {number} length\n   * @param {Uint8Array} initialData\n   * @param {boolean} [progressiveDone]\n   * @param {string} [contentDispositionFilename]\n   */\n  constructor(\n    length,\n    initialData,\n    progressiveDone = false,\n    contentDispositionFilename = null\n  ) {\n    this.length = length;\n    this.initialData = initialData;\n    this.progressiveDone = progressiveDone;\n    this.contentDispositionFilename = contentDispositionFilename;\n\n    this._rangeListeners = [];\n    this._progressListeners = [];\n    this._progressiveReadListeners = [];\n    this._progressiveDoneListeners = [];\n    this._readyCapability = createPromiseCapability();\n  }\n\n  addRangeListener(listener) {\n    this._rangeListeners.push(listener);\n  }\n\n  addProgressListener(listener) {\n    this._progressListeners.push(listener);\n  }\n\n  addProgressiveReadListener(listener) {\n    this._progressiveReadListeners.push(listener);\n  }\n\n  addProgressiveDoneListener(listener) {\n    this._progressiveDoneListeners.push(listener);\n  }\n\n  onDataRange(begin, chunk) {\n    for (const listener of this._rangeListeners) {\n      listener(begin, chunk);\n    }\n  }\n\n  onDataProgress(loaded, total) {\n    this._readyCapability.promise.then(() => {\n      for (const listener of this._progressListeners) {\n        listener(loaded, total);\n      }\n    });\n  }\n\n  onDataProgressiveRead(chunk) {\n    this._readyCapability.promise.then(() => {\n      for (const listener of this._progressiveReadListeners) {\n        listener(chunk);\n      }\n    });\n  }\n\n  onDataProgressiveDone() {\n    this._readyCapability.promise.then(() => {\n      for (const listener of this._progressiveDoneListeners) {\n        listener();\n      }\n    });\n  }\n\n  transportReady() {\n    this._readyCapability.resolve();\n  }\n\n  requestDataRange(begin, end) {\n    unreachable(\"Abstract method PDFDataRangeTransport.requestDataRange\");\n  }\n\n  abort() {}\n}\n\n/**\n * Proxy to a `PDFDocument` in the worker thread.\n */\nclass PDFDocumentProxy {\n  constructor(pdfInfo, transport) {\n    this._pdfInfo = pdfInfo;\n    this._transport = transport;\n\n    if (typeof PDFJSDev === \"undefined\" || PDFJSDev.test(\"GENERIC\")) {\n      Object.defineProperty(this, \"fingerprint\", {\n        get() {\n          deprecated(\n            \"`PDFDocumentProxy.fingerprint`, \" +\n              \"please use `PDFDocumentProxy.fingerprints` instead.\"\n          );\n          return this.fingerprints[0];\n        },\n      });\n\n      Object.defineProperty(this, \"getStats\", {\n        value: async () => {\n          deprecated(\n            \"`PDFDocumentProxy.getStats`, \" +\n              \"please use the `PDFDocumentProxy.stats`-getter instead.\"\n          );\n          return this.stats || { streamTypes: {}, fontTypes: {} };\n        },\n      });\n    }\n  }\n\n  /**\n   * @type {AnnotationStorage} Storage for annotation data in forms.\n   */\n  get annotationStorage() {\n    return this._transport.annotationStorage;\n  }\n\n  /**\n   * @type {number} Total number of pages in the PDF file.\n   */\n  get numPages() {\n    return this._pdfInfo.numPages;\n  }\n\n  /**\n   * @type {Array<string, string|null>} A (not guaranteed to be) unique ID to\n   *   identify the PDF document.\n   *   NOTE: The first element will always be defined for all PDF documents,\n   *   whereas the second element is only defined for *modified* PDF documents.\n   */\n  get fingerprints() {\n    return this._pdfInfo.fingerprints;\n  }\n\n  /**\n   * @typedef {Object} PDFDocumentStats\n   * @property {Object<string, boolean>} streamTypes - Used stream types in the\n   *   document (an item is set to true if specific stream ID was used in the\n   *   document).\n   * @property {Object<string, boolean>} fontTypes - Used font types in the\n   *   document (an item is set to true if specific font ID was used in the\n   *   document).\n   */\n\n  /**\n   * @type {PDFDocumentStats | null} The current statistics about document\n   *   structures, or `null` when no statistics exists.\n   */\n  get stats() {\n    return this._transport.stats;\n  }\n\n  /**\n   * @type {boolean} True if only XFA form.\n   */\n  get isPureXfa() {\n    return !!this._transport._htmlForXfa;\n  }\n\n  /**\n   * NOTE: This is (mostly) intended to support printing of XFA forms.\n   *\n   * @type {Object | null} An object representing a HTML tree structure\n   *   to render the XFA, or `null` when no XFA form exists.\n   */\n  get allXfaHtml() {\n    return this._transport._htmlForXfa;\n  }\n\n  /**\n   * @param {number} pageNumber - The page number to get. The first page is 1.\n   * @returns {Promise<PDFPageProxy>} A promise that is resolved with\n   *   a {@link PDFPageProxy} object.\n   */\n  getPage(pageNumber) {\n    return this._transport.getPage(pageNumber);\n  }\n\n  /**\n   * @param {RefProxy} ref - The page reference.\n   * @returns {Promise<number>} A promise that is resolved with the page index,\n   *   starting from zero, that is associated with the reference.\n   */\n  getPageIndex(ref) {\n    return this._transport.getPageIndex(ref);\n  }\n\n  /**\n   * @returns {Promise<Object<string, Array<any>>>} A promise that is resolved\n   *   with a mapping from named destinations to references.\n   *\n   * This can be slow for large documents. Use `getDestination` instead.\n   */\n  getDestinations() {\n    return this._transport.getDestinations();\n  }\n\n  /**\n   * @param {string} id - The named destination to get.\n   * @returns {Promise<Array<any> | null>} A promise that is resolved with all\n   *   information of the given named destination, or `null` when the named\n   *   destination is not present in the PDF file.\n   */\n  getDestination(id) {\n    return this._transport.getDestination(id);\n  }\n\n  /**\n   * @returns {Promise<Array<string> | null>} A promise that is resolved with\n   *   an {Array} containing the page labels that correspond to the page\n   *   indexes, or `null` when no page labels are present in the PDF file.\n   */\n  getPageLabels() {\n    return this._transport.getPageLabels();\n  }\n\n  /**\n   * @returns {Promise<string>} A promise that is resolved with a {string}\n   *   containing the page layout name.\n   */\n  getPageLayout() {\n    return this._transport.getPageLayout();\n  }\n\n  /**\n   * @returns {Promise<string>} A promise that is resolved with a {string}\n   *   containing the page mode name.\n   */\n  getPageMode() {\n    return this._transport.getPageMode();\n  }\n\n  /**\n   * @returns {Promise<Object | null>} A promise that is resolved with an\n   *   {Object} containing the viewer preferences, or `null` when no viewer\n   *   preferences are present in the PDF file.\n   */\n  getViewerPreferences() {\n    return this._transport.getViewerPreferences();\n  }\n\n  /**\n   * @returns {Promise<any | null>} A promise that is resolved with an {Array}\n   *   containing the destination, or `null` when no open action is present\n   *   in the PDF.\n   */\n  getOpenAction() {\n    return this._transport.getOpenAction();\n  }\n\n  /**\n   * @returns {Promise<any>} A promise that is resolved with a lookup table\n   *   for mapping named attachments to their content.\n   */\n  getAttachments() {\n    return this._transport.getAttachments();\n  }\n\n  /**\n   * @returns {Promise<Array<string> | null>} A promise that is resolved with\n   *   an {Array} of all the JavaScript strings in the name tree, or `null`\n   *   if no JavaScript exists.\n   */\n  getJavaScript() {\n    return this._transport.getJavaScript();\n  }\n\n  /**\n   * @returns {Promise<Object | null>} A promise that is resolved with\n   *   an {Object} with the JavaScript actions:\n   *     - from the name tree (like getJavaScript);\n   *     - from A or AA entries in the catalog dictionary.\n   *   , or `null` if no JavaScript exists.\n   */\n  getJSActions() {\n    return this._transport.getDocJSActions();\n  }\n\n  /**\n   * @typedef {Object} OutlineNode\n   * @property {string} title\n   * @property {boolean} bold\n   * @property {boolean} italic\n   * @property {Uint8ClampedArray} color - The color in RGB format to use for\n   *   display purposes.\n   * @property {string | Array<any> | null} dest\n   * @property {string | null} url\n   * @property {string | undefined} unsafeUrl\n   * @property {boolean | undefined} newWindow\n   * @property {number | undefined} count\n   * @property {Array<OutlineNode>} items\n   */\n\n  /**\n   * @returns {Promise<Array<OutlineNode>>} A promise that is resolved with an\n   *   {Array} that is a tree outline (if it has one) of the PDF file.\n   */\n  getOutline() {\n    return this._transport.getOutline();\n  }\n\n  /**\n   * @returns {Promise<OptionalContentConfig>} A promise that is resolved with\n   *   an {@link OptionalContentConfig} that contains all the optional content\n   *   groups (assuming that the document has any).\n   */\n  getOptionalContentConfig() {\n    return this._transport.getOptionalContentConfig();\n  }\n\n  /**\n   * @returns {Promise<Array<number> | null>} A promise that is resolved with\n   *   an {Array} that contains the permission flags for the PDF document, or\n   *   `null` when no permissions are present in the PDF file.\n   */\n  getPermissions() {\n    return this._transport.getPermissions();\n  }\n\n  /**\n   * @returns {Promise<{ info: Object, metadata: Metadata }>} A promise that is\n   *   resolved with an {Object} that has `info` and `metadata` properties.\n   *   `info` is an {Object} filled with anything available in the information\n   *   dictionary and similarly `metadata` is a {Metadata} object with\n   *   information from the metadata section of the PDF.\n   */\n  getMetadata() {\n    return this._transport.getMetadata();\n  }\n\n  /**\n   * @typedef {Object} MarkInfo\n   * Properties correspond to Table 321 of the PDF 32000-1:2008 spec.\n   * @property {boolean} Marked\n   * @property {boolean} UserProperties\n   * @property {boolean} Suspects\n   */\n\n  /**\n   * @returns {Promise<MarkInfo | null>} A promise that is resolved with\n   *   a {MarkInfo} object that contains the MarkInfo flags for the PDF\n   *   document, or `null` when no MarkInfo values are present in the PDF file.\n   */\n  getMarkInfo() {\n    return this._transport.getMarkInfo();\n  }\n\n  /**\n   * @returns {Promise<TypedArray>} A promise that is resolved with a\n   *   {TypedArray} that has the raw data from the PDF.\n   */\n  getData() {\n    return this._transport.getData();\n  }\n\n  /**\n   * @returns {Promise<{ length: number }>} A promise that is resolved when the\n   *   document's data is loaded. It is resolved with an {Object} that contains\n   *   the `length` property that indicates size of the PDF data in bytes.\n   */\n  getDownloadInfo() {\n    return this._transport.downloadInfoCapability.promise;\n  }\n\n  /**\n   * Cleans up resources allocated by the document on both the main and worker\n   * threads.\n   *\n   * NOTE: Do not, under any circumstances, call this method when rendering is\n   * currently ongoing since that may lead to rendering errors.\n   *\n   * @param {boolean} [keepLoadedFonts] - Let fonts remain attached to the DOM.\n   *   NOTE: This will increase persistent memory usage, hence don't use this\n   *   option unless absolutely necessary. The default value is `false`.\n   * @returns {Promise} A promise that is resolved when clean-up has finished.\n   */\n  cleanup(keepLoadedFonts = false) {\n    return this._transport.startCleanup(keepLoadedFonts || this.isPureXfa);\n  }\n\n  /**\n   * Destroys the current document instance and terminates the worker.\n   */\n  destroy() {\n    return this.loadingTask.destroy();\n  }\n\n  /**\n   * @type {DocumentInitParameters} A subset of the current\n   *   {DocumentInitParameters}, which are needed in the viewer.\n   */\n  get loadingParams() {\n    return this._transport.loadingParams;\n  }\n\n  /**\n   * @type {PDFDocumentLoadingTask} The loadingTask for the current document.\n   */\n  get loadingTask() {\n    return this._transport.loadingTask;\n  }\n\n  /**\n   * @returns {Promise<Uint8Array>} A promise that is resolved with a\n   *   {Uint8Array} containing the full data of the saved document.\n   */\n  saveDocument() {\n    if (\n      (typeof PDFJSDev === \"undefined\" || PDFJSDev.test(\"GENERIC\")) &&\n      this._transport.annotationStorage.size <= 0\n    ) {\n      deprecated(\n        \"saveDocument called while `annotationStorage` is empty, \" +\n          \"please use the getData-method instead.\"\n      );\n    }\n    return this._transport.saveDocument();\n  }\n\n  /**\n   * @returns {Promise<Object<string, Array<Object>> | null>} A promise that is\n   *   resolved with an {Object} containing /AcroForm field data for the JS\n   *   sandbox, or `null` when no field data is present in the PDF file.\n   */\n  getFieldObjects() {\n    return this._transport.getFieldObjects();\n  }\n\n  /**\n   * @returns {Promise<boolean>} A promise that is resolved with `true`\n   *   if some /AcroForm fields have JavaScript actions.\n   */\n  hasJSActions() {\n    return this._transport.hasJSActions();\n  }\n\n  /**\n   * @returns {Promise<Array<string> | null>} A promise that is resolved with an\n   *   {Array<string>} containing IDs of annotations that have a calculation\n   *   action, or `null` when no such annotations are present in the PDF file.\n   */\n  getCalculationOrderIds() {\n    return this._transport.getCalculationOrderIds();\n  }\n}\n\n/**\n * Page getViewport parameters.\n *\n * @typedef {Object} GetViewportParameters\n * @property {number} scale - The desired scale of the viewport.\n * @property {number} [rotation] - The desired rotation, in degrees, of\n *   the viewport. If omitted it defaults to the page rotation.\n * @property {number} [offsetX] - The horizontal, i.e. x-axis, offset.\n *   The default value is `0`.\n * @property {number} [offsetY] - The vertical, i.e. y-axis, offset.\n *   The default value is `0`.\n * @property {boolean} [dontFlip] - If true, the y-axis will not be\n *   flipped. The default value is `false`.\n */\n\n/**\n * Page getTextContent parameters.\n *\n * @typedef {Object} getTextContentParameters\n * @property {boolean} disableCombineTextItems - Do not attempt to combine\n *   same line {@link TextItem}'s. The default value is `false`.\n * @property {boolean} [includeMarkedContent] - When true include marked\n *   content items in the items array of TextContent. The default is `false`.\n */\n\n/**\n * Page text content.\n *\n * @typedef {Object} TextContent\n * @property {Array<TextItem | TextMarkedContent>} items - Array of\n *   {@link TextItem} and {@link TextMarkedContent} objects. TextMarkedContent\n *   items are included when includeMarkedContent is true.\n * @property {Object<string, TextStyle>} styles - {@link TextStyle} objects,\n *   indexed by font name.\n */\n\n/**\n * Page text content part.\n *\n * @typedef {Object} TextItem\n * @property {string} str - Text content.\n * @property {string} dir - Text direction: 'ttb', 'ltr' or 'rtl'.\n * @property {Array<any>} transform - Transformation matrix.\n * @property {number} width - Width in device space.\n * @property {number} height - Height in device space.\n * @property {string} fontName - Font name used by PDF.js for converted font.\n * @property {boolean} hasEOL - Indicating if the text content is followed by a\n *   line-break.\n */\n\n/**\n * Page text marked content part.\n *\n * @typedef {Object} TextMarkedContent\n * @property {string} type - Either 'beginMarkedContent',\n *   'beginMarkedContentProps', or 'endMarkedContent'.\n * @property {string} id - The marked content identifier. Only used for type\n *   'beginMarkedContentProps'.\n */\n\n/**\n * Text style.\n *\n * @typedef {Object} TextStyle\n * @property {number} ascent - Font ascent.\n * @property {number} descent - Font descent.\n * @property {boolean} vertical - Whether or not the text is in vertical mode.\n * @property {string} fontFamily - The possible font family.\n */\n\n/**\n * Page annotation parameters.\n *\n * @typedef {Object} GetAnnotationsParameters\n * @property {string} [intent] - Determines the annotations that are fetched,\n *   can be 'display' (viewable annotations), 'print' (printable annotations),\n *   or 'any' (all annotations). The default value is 'display'.\n */\n\n/**\n * Page render parameters.\n *\n * @typedef {Object} RenderParameters\n * @property {Object} canvasContext - A 2D context of a DOM Canvas object.\n * @property {PageViewport} viewport - Rendering viewport obtained by calling\n *   the `PDFPageProxy.getViewport` method.\n * @property {string} [intent] - Rendering intent, can be 'display', 'print',\n *   or 'any'. The default value is 'display'.\n * @property {number} [annotationMode] Controls which annotations are rendered\n *   onto the canvas, for annotations with appearance-data; the values from\n *   {@link AnnotationMode} should be used. The following values are supported:\n *    - `AnnotationMode.DISABLE`, which disables all annotations.\n *    - `AnnotationMode.ENABLE`, which includes all possible annotations (thus\n *      it also depends on the `intent`-option, see above).\n *    - `AnnotationMode.ENABLE_FORMS`, which excludes annotations that contain\n *      interactive form elements (those will be rendered in the display layer).\n *    - `AnnotationMode.ENABLE_STORAGE`, which includes all possible annotations\n *      (as above) but where interactive form elements are updated with data\n *      from the {@link AnnotationStorage}-instance; useful e.g. for printing.\n *   The default value is `AnnotationMode.ENABLE`.\n * @property {Array<any>} [transform] - Additional transform, applied just\n *   before viewport transform.\n * @property {Object} [imageLayer] - An object that has `beginLayout`,\n *   `endLayout` and `appendImage` functions.\n * @property {Object} [canvasFactory] - The factory instance that will be used\n *   when creating canvases. The default value is {new DOMCanvasFactory()}.\n * @property {Object | string} [background] - Background to use for the canvas.\n *   Any valid `canvas.fillStyle` can be used: a `DOMString` parsed as CSS\n *   <color> value, a `CanvasGradient` object (a linear or radial gradient) or\n *   a `CanvasPattern` object (a repetitive image). The default value is\n *   'rgb(255,255,255)'.\n *\n *   NOTE: This option may be partially, or completely, ignored when the\n *   `pageColors`-option is used.\n * @property {Object} [pageColors] - Overwrites background and foreground colors\n *   with user defined ones in order to improve readability in high contrast\n *   mode.\n * @property {Promise<OptionalContentConfig>} [optionalContentConfigPromise] -\n *   A promise that should resolve with an {@link OptionalContentConfig}\n *   created from `PDFDocumentProxy.getOptionalContentConfig`. If `null`,\n *   the configuration will be fetched automatically with the default visibility\n *   states set.\n * @property {Map<string, HTMLCanvasElement>} [annotationCanvasMap] - Map some\n *   annotation ids with canvases used to render them.\n */\n\n/**\n * Page getOperatorList parameters.\n *\n * @typedef {Object} GetOperatorListParameters\n * @property {string} [intent] - Rendering intent, can be 'display', 'print',\n *   or 'any'. The default value is 'display'.\n * @property {number} [annotationMode] Controls which annotations are included\n *   in the operatorList, for annotations with appearance-data; the values from\n *   {@link AnnotationMode} should be used. The following values are supported:\n *    - `AnnotationMode.DISABLE`, which disables all annotations.\n *    - `AnnotationMode.ENABLE`, which includes all possible annotations (thus\n *      it also depends on the `intent`-option, see above).\n *    - `AnnotationMode.ENABLE_FORMS`, which excludes annotations that contain\n *      interactive form elements (those will be rendered in the display layer).\n *    - `AnnotationMode.ENABLE_STORAGE`, which includes all possible annotations\n *      (as above) but where interactive form elements are updated with data\n *      from the {@link AnnotationStorage}-instance; useful e.g. for printing.\n *   The default value is `AnnotationMode.ENABLE`.\n */\n\n/**\n * Structure tree node. The root node will have a role \"Root\".\n *\n * @typedef {Object} StructTreeNode\n * @property {Array<StructTreeNode | StructTreeContent>} children - Array of\n *   {@link StructTreeNode} and {@link StructTreeContent} objects.\n * @property {string} role - element's role, already mapped if a role map exists\n * in the PDF.\n */\n\n/**\n * Structure tree content.\n *\n * @typedef {Object} StructTreeContent\n * @property {string} type - either \"content\" for page and stream structure\n *   elements or \"object\" for object references.\n * @property {string} id - unique id that will map to the text layer.\n */\n\n/**\n * PDF page operator list.\n *\n * @typedef {Object} PDFOperatorList\n * @property {Array<number>} fnArray - Array containing the operator functions.\n * @property {Array<any>} argsArray - Array containing the arguments of the\n *   functions.\n */\n\n/**\n * Proxy to a `PDFPage` in the worker thread.\n */\nclass PDFPageProxy {\n  constructor(pageIndex, pageInfo, transport, ownerDocument, pdfBug = false) {\n    this._pageIndex = pageIndex;\n    this._pageInfo = pageInfo;\n    this._ownerDocument = ownerDocument;\n    this._transport = transport;\n    this._stats = pdfBug ? new StatTimer() : null;\n    this._pdfBug = pdfBug;\n    /** @type {PDFObjects} */\n    this.commonObjs = transport.commonObjs;\n    this.objs = new PDFObjects();\n\n    this._bitmaps = new Set();\n\n    this.cleanupAfterRender = false;\n    this.pendingCleanup = false;\n    this._intentStates = new Map();\n    this._annotationPromises = new Map();\n    this.destroyed = false;\n  }\n\n  /**\n   * @type {number} Page number of the page. First page is 1.\n   */\n  get pageNumber() {\n    return this._pageIndex + 1;\n  }\n\n  /**\n   * @type {number} The number of degrees the page is rotated clockwise.\n   */\n  get rotate() {\n    return this._pageInfo.rotate;\n  }\n\n  /**\n   * @type {RefProxy | null} The reference that points to this page.\n   */\n  get ref() {\n    return this._pageInfo.ref;\n  }\n\n  /**\n   * @type {number} The default size of units in 1/72nds of an inch.\n   */\n  get userUnit() {\n    return this._pageInfo.userUnit;\n  }\n\n  /**\n   * @type {Array<number>} An array of the visible portion of the PDF page in\n   *   user space units [x1, y1, x2, y2].\n   */\n  get view() {\n    return this._pageInfo.view;\n  }\n\n  /**\n   * @param {GetViewportParameters} params - Viewport parameters.\n   * @returns {PageViewport} Contains 'width' and 'height' properties\n   *   along with transforms required for rendering.\n   */\n  getViewport({\n    scale,\n    rotation = this.rotate,\n    offsetX = 0,\n    offsetY = 0,\n    dontFlip = false,\n  } = {}) {\n    return new PageViewport({\n      viewBox: this.view,\n      scale,\n      rotation,\n      offsetX,\n      offsetY,\n      dontFlip,\n    });\n  }\n\n  /**\n   * @param {GetAnnotationsParameters} params - Annotation parameters.\n   * @returns {Promise<Array<any>>} A promise that is resolved with an\n   *   {Array} of the annotation objects.\n   */\n  getAnnotations({ intent = \"display\" } = {}) {\n    const intentArgs = this._transport.getRenderingIntent(intent);\n\n    let promise = this._annotationPromises.get(intentArgs.cacheKey);\n    if (!promise) {\n      promise = this._transport.getAnnotations(\n        this._pageIndex,\n        intentArgs.renderingIntent\n      );\n      this._annotationPromises.set(intentArgs.cacheKey, promise);\n\n      if (typeof PDFJSDev === \"undefined\" || PDFJSDev.test(\"GENERIC\")) {\n        promise = promise.then(annotations => {\n          for (const annotation of annotations) {\n            if (annotation.titleObj !== undefined) {\n              Object.defineProperty(annotation, \"title\", {\n                get() {\n                  deprecated(\n                    \"`title`-property on annotation, please use `titleObj` instead.\"\n                  );\n                  return annotation.titleObj.str;\n                },\n              });\n            }\n            if (annotation.contentsObj !== undefined) {\n              Object.defineProperty(annotation, \"contents\", {\n                get() {\n                  deprecated(\n                    \"`contents`-property on annotation, please use `contentsObj` instead.\"\n                  );\n                  return annotation.contentsObj.str;\n                },\n              });\n            }\n          }\n          return annotations;\n        });\n      }\n    }\n    return promise;\n  }\n\n  /**\n   * @returns {Promise<Object>} A promise that is resolved with an\n   *   {Object} with JS actions.\n   */\n  getJSActions() {\n    return (this._jsActionsPromise ||= this._transport.getPageJSActions(\n      this._pageIndex\n    ));\n  }\n\n  /**\n   * @returns {Promise<Object | null>} A promise that is resolved with\n   *   an {Object} with a fake DOM object (a tree structure where elements\n   *   are {Object} with a name, attributes (class, style, ...), value and\n   *   children, very similar to a HTML DOM tree), or `null` if no XFA exists.\n   */\n  async getXfa() {\n    return this._transport._htmlForXfa?.children[this._pageIndex] || null;\n  }\n\n  /**\n   * Begins the process of rendering a page to the desired context.\n   *\n   * @param {RenderParameters} params - Page render parameters.\n   * @returns {RenderTask} An object that contains a promise that is\n   *   resolved when the page finishes rendering.\n   */\n  render({\n    canvasContext,\n    viewport,\n    intent = \"display\",\n    annotationMode = AnnotationMode.ENABLE,\n    transform = null,\n    imageLayer = null,\n    canvasFactory = null,\n    background = null,\n    optionalContentConfigPromise = null,\n    annotationCanvasMap = null,\n    pageColors = null,\n  }) {\n    if (typeof PDFJSDev !== \"undefined\" && PDFJSDev.test(\"GENERIC\")) {\n      if (arguments[0]?.renderInteractiveForms !== undefined) {\n        deprecated(\n          \"render no longer accepts the `renderInteractiveForms`-option, \" +\n            \"please use the `annotationMode`-option instead.\"\n        );\n        if (\n          arguments[0].renderInteractiveForms === true &&\n          annotationMode === AnnotationMode.ENABLE\n        ) {\n          annotationMode = AnnotationMode.ENABLE_FORMS;\n        }\n      }\n      if (arguments[0]?.includeAnnotationStorage !== undefined) {\n        deprecated(\n          \"render no longer accepts the `includeAnnotationStorage`-option, \" +\n            \"please use the `annotationMode`-option instead.\"\n        );\n        if (\n          arguments[0].includeAnnotationStorage === true &&\n          annotationMode === AnnotationMode.ENABLE\n        ) {\n          annotationMode = AnnotationMode.ENABLE_STORAGE;\n        }\n      }\n    }\n\n    if (this._stats) {\n      this._stats.time(\"Overall\");\n    }\n\n    const intentArgs = this._transport.getRenderingIntent(\n      intent,\n      annotationMode\n    );\n    // If there was a pending destroy, cancel it so no cleanup happens during\n    // this call to render.\n    this.pendingCleanup = false;\n\n    if (!optionalContentConfigPromise) {\n      optionalContentConfigPromise = this._transport.getOptionalContentConfig();\n    }\n\n    let intentState = this._intentStates.get(intentArgs.cacheKey);\n    if (!intentState) {\n      intentState = Object.create(null);\n      this._intentStates.set(intentArgs.cacheKey, intentState);\n    }\n\n    // Ensure that a pending `streamReader` cancel timeout is always aborted.\n    if (intentState.streamReaderCancelTimeout) {\n      clearTimeout(intentState.streamReaderCancelTimeout);\n      intentState.streamReaderCancelTimeout = null;\n    }\n\n    const canvasFactoryInstance =\n      canvasFactory ||\n      new DefaultCanvasFactory({ ownerDocument: this._ownerDocument });\n    const intentPrint = !!(\n      intentArgs.renderingIntent & RenderingIntentFlag.PRINT\n    );\n\n    // If there's no displayReadyCapability yet, then the operatorList\n    // was never requested before. Make the request and create the promise.\n    if (!intentState.displayReadyCapability) {\n      intentState.displayReadyCapability = createPromiseCapability();\n      intentState.operatorList = {\n        fnArray: [],\n        argsArray: [],\n        lastChunk: false,\n      };\n\n      if (this._stats) {\n        this._stats.time(\"Page Request\");\n      }\n      this._pumpOperatorList(intentArgs);\n    }\n\n    const complete = error => {\n      intentState.renderTasks.delete(internalRenderTask);\n\n      // Attempt to reduce memory usage during *printing*, by always running\n      // cleanup once rendering has finished (regardless of cleanupAfterRender).\n      if (this.cleanupAfterRender || intentPrint) {\n        this.pendingCleanup = true;\n      }\n      this._tryCleanup();\n\n      if (error) {\n        internalRenderTask.capability.reject(error);\n\n        this._abortOperatorList({\n          intentState,\n          reason: error instanceof Error ? error : new Error(error),\n        });\n      } else {\n        internalRenderTask.capability.resolve();\n      }\n      if (this._stats) {\n        this._stats.timeEnd(\"Rendering\");\n        this._stats.timeEnd(\"Overall\");\n      }\n    };\n\n    const internalRenderTask = new InternalRenderTask({\n      callback: complete,\n      // Only include the required properties, and *not* the entire object.\n      params: {\n        canvasContext,\n        viewport,\n        transform,\n        imageLayer,\n        background,\n      },\n      objs: this.objs,\n      commonObjs: this.commonObjs,\n      annotationCanvasMap,\n      operatorList: intentState.operatorList,\n      pageIndex: this._pageIndex,\n      canvasFactory: canvasFactoryInstance,\n      useRequestAnimationFrame: !intentPrint,\n      pdfBug: this._pdfBug,\n      pageColors,\n    });\n\n    (intentState.renderTasks ||= new Set()).add(internalRenderTask);\n    const renderTask = internalRenderTask.task;\n\n    Promise.all([\n      intentState.displayReadyCapability.promise,\n      optionalContentConfigPromise,\n    ])\n      .then(([transparency, optionalContentConfig]) => {\n        if (this.pendingCleanup) {\n          complete();\n          return;\n        }\n        if (this._stats) {\n          this._stats.time(\"Rendering\");\n        }\n        internalRenderTask.initializeGraphics({\n          transparency,\n          optionalContentConfig,\n        });\n        internalRenderTask.operatorListChanged();\n      })\n      .catch(complete);\n\n    return renderTask;\n  }\n\n  /**\n   * @param {GetOperatorListParameters} params - Page getOperatorList\n   *   parameters.\n   * @returns {Promise<PDFOperatorList>} A promise resolved with an\n   *   {@link PDFOperatorList} object that represents the page's operator list.\n   */\n  getOperatorList({\n    intent = \"display\",\n    annotationMode = AnnotationMode.ENABLE,\n  } = {}) {\n    function operatorListChanged() {\n      if (intentState.operatorList.lastChunk) {\n        intentState.opListReadCapability.resolve(intentState.operatorList);\n\n        intentState.renderTasks.delete(opListTask);\n      }\n    }\n\n    const intentArgs = this._transport.getRenderingIntent(\n      intent,\n      annotationMode,\n      /* isOpList = */ true\n    );\n    let intentState = this._intentStates.get(intentArgs.cacheKey);\n    if (!intentState) {\n      intentState = Object.create(null);\n      this._intentStates.set(intentArgs.cacheKey, intentState);\n    }\n    let opListTask;\n\n    if (!intentState.opListReadCapability) {\n      opListTask = Object.create(null);\n      opListTask.operatorListChanged = operatorListChanged;\n      intentState.opListReadCapability = createPromiseCapability();\n      (intentState.renderTasks ||= new Set()).add(opListTask);\n      intentState.operatorList = {\n        fnArray: [],\n        argsArray: [],\n        lastChunk: false,\n      };\n\n      if (this._stats) {\n        this._stats.time(\"Page Request\");\n      }\n      this._pumpOperatorList(intentArgs);\n    }\n    return intentState.opListReadCapability.promise;\n  }\n\n  /**\n   * NOTE: All occurrences of whitespace will be replaced by\n   * standard spaces (0x20).\n   *\n   * @param {getTextContentParameters} params - getTextContent parameters.\n   * @returns {ReadableStream} Stream for reading text content chunks.\n   */\n  streamTextContent({\n    disableCombineTextItems = false,\n    includeMarkedContent = false,\n  } = {}) {\n    const TEXT_CONTENT_CHUNK_SIZE = 100;\n\n    return this._transport.messageHandler.sendWithStream(\n      \"GetTextContent\",\n      {\n        pageIndex: this._pageIndex,\n        combineTextItems: disableCombineTextItems !== true,\n        includeMarkedContent: includeMarkedContent === true,\n      },\n      {\n        highWaterMark: TEXT_CONTENT_CHUNK_SIZE,\n        size(textContent) {\n          return textContent.items.length;\n        },\n      }\n    );\n  }\n\n  /**\n   * NOTE: All occurrences of whitespace will be replaced by\n   * standard spaces (0x20).\n   *\n   * @param {getTextContentParameters} params - getTextContent parameters.\n   * @returns {Promise<TextContent>} A promise that is resolved with a\n   *   {@link TextContent} object that represents the page's text content.\n   */\n  getTextContent(params = {}) {\n    if (this._transport._htmlForXfa) {\n      // TODO: We need to revisit this once the XFA foreground patch lands and\n      // only do this for non-foreground XFA.\n      return this.getXfa().then(xfa => {\n        return XfaText.textContent(xfa);\n      });\n    }\n    const readableStream = this.streamTextContent(params);\n\n    return new Promise(function (resolve, reject) {\n      function pump() {\n        reader.read().then(function ({ value, done }) {\n          if (done) {\n            resolve(textContent);\n            return;\n          }\n          Object.assign(textContent.styles, value.styles);\n          textContent.items.push(...value.items);\n          pump();\n        }, reject);\n      }\n\n      const reader = readableStream.getReader();\n      const textContent = {\n        items: [],\n        styles: Object.create(null),\n      };\n      pump();\n    });\n  }\n\n  /**\n   * @returns {Promise<StructTreeNode>} A promise that is resolved with a\n   *   {@link StructTreeNode} object that represents the page's structure tree,\n   *   or `null` when no structure tree is present for the current page.\n   */\n  getStructTree() {\n    return (this._structTreePromise ||= this._transport.getStructTree(\n      this._pageIndex\n    ));\n  }\n\n  /**\n   * Destroys the page object.\n   * @private\n   */\n  _destroy() {\n    this.destroyed = true;\n\n    const waitOn = [];\n    for (const intentState of this._intentStates.values()) {\n      this._abortOperatorList({\n        intentState,\n        reason: new Error(\"Page was destroyed.\"),\n        force: true,\n      });\n\n      if (intentState.opListReadCapability) {\n        // Avoid errors below, since the renderTasks are just stubs.\n        continue;\n      }\n      for (const internalRenderTask of intentState.renderTasks) {\n        waitOn.push(internalRenderTask.completed);\n        internalRenderTask.cancel();\n      }\n    }\n    this.objs.clear();\n    for (const bitmap of this._bitmaps) {\n      bitmap.close();\n    }\n    this._bitmaps.clear();\n    this._annotationPromises.clear();\n    this._jsActionsPromise = null;\n    this._structTreePromise = null;\n    this.pendingCleanup = false;\n    return Promise.all(waitOn);\n  }\n\n  /**\n   * Cleans up resources allocated by the page.\n   *\n   * @param {boolean} [resetStats] - Reset page stats, if enabled.\n   *   The default value is `false`.\n   * @returns {boolean} Indicates if clean-up was successfully run.\n   */\n  cleanup(resetStats = false) {\n    this.pendingCleanup = true;\n    return this._tryCleanup(resetStats);\n  }\n\n  /**\n   * Attempts to clean up if rendering is in a state where that's possible.\n   * @private\n   */\n  _tryCleanup(resetStats = false) {\n    if (!this.pendingCleanup) {\n      return false;\n    }\n    for (const { renderTasks, operatorList } of this._intentStates.values()) {\n      if (renderTasks.size > 0 || !operatorList.lastChunk) {\n        return false;\n      }\n    }\n\n    this._intentStates.clear();\n    this.objs.clear();\n    this._annotationPromises.clear();\n    this._jsActionsPromise = null;\n    this._structTreePromise = null;\n    if (resetStats && this._stats) {\n      this._stats = new StatTimer();\n    }\n    for (const bitmap of this._bitmaps) {\n      bitmap.close();\n    }\n    this._bitmaps.clear();\n    this.pendingCleanup = false;\n    return true;\n  }\n\n  /**\n   * @private\n   */\n  _startRenderPage(transparency, cacheKey) {\n    const intentState = this._intentStates.get(cacheKey);\n    if (!intentState) {\n      return; // Rendering was cancelled.\n    }\n    if (this._stats) {\n      this._stats.timeEnd(\"Page Request\");\n    }\n    // TODO Refactor RenderPageRequest to separate rendering\n    // and operator list logic\n    if (intentState.displayReadyCapability) {\n      intentState.displayReadyCapability.resolve(transparency);\n    }\n  }\n\n  /**\n   * @private\n   */\n  _renderPageChunk(operatorListChunk, intentState) {\n    // Add the new chunk to the current operator list.\n    for (let i = 0, ii = operatorListChunk.length; i < ii; i++) {\n      intentState.operatorList.fnArray.push(operatorListChunk.fnArray[i]);\n      intentState.operatorList.argsArray.push(operatorListChunk.argsArray[i]);\n    }\n    intentState.operatorList.lastChunk = operatorListChunk.lastChunk;\n\n    // Notify all the rendering tasks there are more operators to be consumed.\n    for (const internalRenderTask of intentState.renderTasks) {\n      internalRenderTask.operatorListChanged();\n    }\n\n    if (operatorListChunk.lastChunk) {\n      this._tryCleanup();\n    }\n  }\n\n  /**\n   * @private\n   */\n  _pumpOperatorList({ renderingIntent, cacheKey }) {\n    if (\n      typeof PDFJSDev === \"undefined\" ||\n      PDFJSDev.test(\"!PRODUCTION || TESTING\")\n    ) {\n      assert(\n        Number.isInteger(renderingIntent) && renderingIntent > 0,\n        '_pumpOperatorList: Expected valid \"renderingIntent\" argument.'\n      );\n    }\n\n    const readableStream = this._transport.messageHandler.sendWithStream(\n      \"GetOperatorList\",\n      {\n        pageIndex: this._pageIndex,\n        intent: renderingIntent,\n        cacheKey,\n        annotationStorage:\n          renderingIntent & RenderingIntentFlag.ANNOTATIONS_STORAGE\n            ? this._transport.annotationStorage.serializable\n            : null,\n      }\n    );\n    const reader = readableStream.getReader();\n\n    const intentState = this._intentStates.get(cacheKey);\n    intentState.streamReader = reader;\n\n    const pump = () => {\n      reader.read().then(\n        ({ value, done }) => {\n          if (done) {\n            intentState.streamReader = null;\n            return;\n          }\n          if (this._transport.destroyed) {\n            return; // Ignore any pending requests if the worker was terminated.\n          }\n          this._renderPageChunk(value, intentState);\n          pump();\n        },\n        reason => {\n          intentState.streamReader = null;\n\n          if (this._transport.destroyed) {\n            return; // Ignore any pending requests if the worker was terminated.\n          }\n          if (intentState.operatorList) {\n            // Mark operator list as complete.\n            intentState.operatorList.lastChunk = true;\n\n            for (const internalRenderTask of intentState.renderTasks) {\n              internalRenderTask.operatorListChanged();\n            }\n            this._tryCleanup();\n          }\n\n          if (intentState.displayReadyCapability) {\n            intentState.displayReadyCapability.reject(reason);\n          } else if (intentState.opListReadCapability) {\n            intentState.opListReadCapability.reject(reason);\n          } else {\n            throw reason;\n          }\n        }\n      );\n    };\n    pump();\n  }\n\n  /**\n   * @private\n   */\n  _abortOperatorList({ intentState, reason, force = false }) {\n    if (\n      typeof PDFJSDev === \"undefined\" ||\n      PDFJSDev.test(\"!PRODUCTION || TESTING\")\n    ) {\n      assert(\n        reason instanceof Error,\n        '_abortOperatorList: Expected valid \"reason\" argument.'\n      );\n    }\n\n    if (!intentState.streamReader) {\n      return;\n    }\n    if (!force) {\n      // Ensure that an Error occurring in *only* one `InternalRenderTask`, e.g.\n      // multiple render() calls on the same canvas, won't break all rendering.\n      if (intentState.renderTasks.size > 0) {\n        return;\n      }\n      // Don't immediately abort parsing on the worker-thread when rendering is\n      // cancelled, since that will unnecessarily delay re-rendering when (for\n      // partially parsed pages) e.g. zooming/rotation occurs in the viewer.\n      if (reason instanceof RenderingCancelledException) {\n        intentState.streamReaderCancelTimeout = setTimeout(() => {\n          this._abortOperatorList({ intentState, reason, force: true });\n          intentState.streamReaderCancelTimeout = null;\n        }, RENDERING_CANCELLED_TIMEOUT);\n        return;\n      }\n    }\n    intentState.streamReader\n      .cancel(new AbortException(reason.message))\n      .catch(() => {\n        // Avoid \"Uncaught promise\" messages in the console.\n      });\n    intentState.streamReader = null;\n\n    if (this._transport.destroyed) {\n      return; // Ignore any pending requests if the worker was terminated.\n    }\n    // Remove the current `intentState`, since a cancelled `getOperatorList`\n    // call on the worker-thread cannot be re-started...\n    for (const [curCacheKey, curIntentState] of this._intentStates) {\n      if (curIntentState === intentState) {\n        this._intentStates.delete(curCacheKey);\n        break;\n      }\n    }\n    // ... and force clean-up to ensure that any old state is always removed.\n    this.cleanup();\n  }\n\n  /**\n   * @type {Object} Returns page stats, if enabled; returns `null` otherwise.\n   */\n  get stats() {\n    return this._stats;\n  }\n}\n\nclass LoopbackPort {\n  constructor() {\n    this._listeners = [];\n    this._deferred = Promise.resolve();\n  }\n\n  postMessage(obj, transfers) {\n    const event = {\n      data: structuredClone(obj, transfers),\n    };\n\n    this._deferred.then(() => {\n      for (const listener of this._listeners) {\n        listener.call(this, event);\n      }\n    });\n  }\n\n  addEventListener(name, listener) {\n    this._listeners.push(listener);\n  }\n\n  removeEventListener(name, listener) {\n    const i = this._listeners.indexOf(listener);\n    this._listeners.splice(i, 1);\n  }\n\n  terminate() {\n    this._listeners.length = 0;\n  }\n}\n\n/**\n * @typedef {Object} PDFWorkerParameters\n * @property {string} [name] - The name of the worker.\n * @property {Object} [port] - The `workerPort` object.\n * @property {number} [verbosity] - Controls the logging level;\n *   the constants from {@link VerbosityLevel} should be used.\n */\n\nconst PDFWorkerUtil = {\n  isWorkerDisabled: false,\n  fallbackWorkerSrc: null,\n  fakeWorkerId: 0,\n};\nif (typeof PDFJSDev === \"undefined\" || PDFJSDev.test(\"GENERIC\")) {\n  // eslint-disable-next-line no-undef\n  if (isNodeJS && typeof __non_webpack_require__ === \"function\") {\n    // Workers aren't supported in Node.js, force-disabling them there.\n    PDFWorkerUtil.isWorkerDisabled = true;\n\n    PDFWorkerUtil.fallbackWorkerSrc = PDFJSDev.test(\"LIB\")\n      ? \"../pdf.worker.js\"\n      : \"./pdf.worker.js\";\n  } else if (typeof document === \"object\") {\n    const pdfjsFilePath = document?.currentScript?.src;\n    if (pdfjsFilePath) {\n      PDFWorkerUtil.fallbackWorkerSrc = pdfjsFilePath.replace(\n        /(\\.(?:min\\.)?js)(\\?.*)?$/i,\n        \".worker$1$2\"\n      );\n    }\n  }\n\n  // Check if URLs have the same origin. For non-HTTP based URLs, returns false.\n  PDFWorkerUtil.isSameOrigin = function (baseUrl, otherUrl) {\n    let base;\n    try {\n      base = new URL(baseUrl);\n      if (!base.origin || base.origin === \"null\") {\n        return false; // non-HTTP url\n      }\n    } catch (e) {\n      return false;\n    }\n\n    const other = new URL(otherUrl, base);\n    return base.origin === other.origin;\n  };\n\n  PDFWorkerUtil.createCDNWrapper = function (url) {\n    // We will rely on blob URL's property to specify origin.\n    // We want this function to fail in case if createObjectURL or Blob do not\n    // exist or fail for some reason -- our Worker creation will fail anyway.\n    const wrapper = `importScripts(\"${url}\");`;\n    return URL.createObjectURL(new Blob([wrapper]));\n  };\n}\n\n/**\n * PDF.js web worker abstraction that controls the instantiation of PDF\n * documents. Message handlers are used to pass information from the main\n * thread to the worker thread and vice versa. If the creation of a web\n * worker is not possible, a \"fake\" worker will be used instead.\n *\n * @param {PDFWorkerParameters} params - The worker initialization parameters.\n */\nclass PDFWorker {\n  static #workerPorts = new WeakMap();\n\n  constructor({\n    name = null,\n    port = null,\n    verbosity = getVerbosityLevel(),\n  } = {}) {\n    if (port && PDFWorker.#workerPorts.has(port)) {\n      throw new Error(\"Cannot use more than one PDFWorker per port.\");\n    }\n\n    this.name = name;\n    this.destroyed = false;\n    this.verbosity = verbosity;\n\n    this._readyCapability = createPromiseCapability();\n    this._port = null;\n    this._webWorker = null;\n    this._messageHandler = null;\n\n    if (port) {\n      PDFWorker.#workerPorts.set(port, this);\n      this._initializeFromPort(port);\n      return;\n    }\n    this._initialize();\n  }\n\n  /**\n   * Promise for worker initialization completion.\n   * @type {Promise<void>}\n   */\n  get promise() {\n    return this._readyCapability.promise;\n  }\n\n  /**\n   * The current `workerPort`, when it exists.\n   * @type {Worker}\n   */\n  get port() {\n    return this._port;\n  }\n\n  /**\n   * The current MessageHandler-instance.\n   * @type {MessageHandler}\n   */\n  get messageHandler() {\n    return this._messageHandler;\n  }\n\n  _initializeFromPort(port) {\n    this._port = port;\n    this._messageHandler = new MessageHandler(\"main\", \"worker\", port);\n    this._messageHandler.on(\"ready\", function () {\n      // Ignoring \"ready\" event -- MessageHandler should already be initialized\n      // and ready to accept messages.\n    });\n    this._readyCapability.resolve();\n  }\n\n  _initialize() {\n    // If worker support isn't disabled explicit and the browser has worker\n    // support, create a new web worker and test if it/the browser fulfills\n    // all requirements to run parts of pdf.js in a web worker.\n    // Right now, the requirement is, that an Uint8Array is still an\n    // Uint8Array as it arrives on the worker. (Chrome added this with v.15.)\n    if (\n      typeof Worker !== \"undefined\" &&\n      !PDFWorkerUtil.isWorkerDisabled &&\n      !PDFWorker._mainThreadWorkerMessageHandler\n    ) {\n      let workerSrc = PDFWorker.workerSrc;\n\n      try {\n        // Wraps workerSrc path into blob URL, if the former does not belong\n        // to the same origin.\n        if (\n          typeof PDFJSDev !== \"undefined\" &&\n          PDFJSDev.test(\"GENERIC\") &&\n          !PDFWorkerUtil.isSameOrigin(window.location.href, workerSrc)\n        ) {\n          workerSrc = PDFWorkerUtil.createCDNWrapper(\n            new URL(workerSrc, window.location).href\n          );\n        }\n\n        // Some versions of FF can't create a worker on localhost, see:\n        // https://bugzilla.mozilla.org/show_bug.cgi?id=683280\n        const worker = new Worker(workerSrc);\n        const messageHandler = new MessageHandler(\"main\", \"worker\", worker);\n        const terminateEarly = () => {\n          worker.removeEventListener(\"error\", onWorkerError);\n          messageHandler.destroy();\n          worker.terminate();\n          if (this.destroyed) {\n            this._readyCapability.reject(new Error(\"Worker was destroyed\"));\n          } else {\n            // Fall back to fake worker if the termination is caused by an\n            // error (e.g. NetworkError / SecurityError).\n            this._setupFakeWorker();\n          }\n        };\n\n        const onWorkerError = () => {\n          if (!this._webWorker) {\n            // Worker failed to initialize due to an error. Clean up and fall\n            // back to the fake worker.\n            terminateEarly();\n          }\n        };\n        worker.addEventListener(\"error\", onWorkerError);\n\n        messageHandler.on(\"test\", data => {\n          worker.removeEventListener(\"error\", onWorkerError);\n          if (this.destroyed) {\n            terminateEarly();\n            return; // worker was destroyed\n          }\n          if (data) {\n            this._messageHandler = messageHandler;\n            this._port = worker;\n            this._webWorker = worker;\n\n            this._readyCapability.resolve();\n            // Send global setting, e.g. verbosity level.\n            messageHandler.send(\"configure\", {\n              verbosity: this.verbosity,\n            });\n          } else {\n            this._setupFakeWorker();\n            messageHandler.destroy();\n            worker.terminate();\n          }\n        });\n\n        messageHandler.on(\"ready\", data => {\n          worker.removeEventListener(\"error\", onWorkerError);\n          if (this.destroyed) {\n            terminateEarly();\n            return; // worker was destroyed\n          }\n          try {\n            sendTest();\n          } catch (e) {\n            // We need fallback to a faked worker.\n            this._setupFakeWorker();\n          }\n        });\n\n        const sendTest = () => {\n          const testObj = new Uint8Array();\n          // Ensure that we can use `postMessage` transfers.\n          messageHandler.send(\"test\", testObj, [testObj.buffer]);\n        };\n\n        // It might take time for the worker to initialize. We will try to send\n        // the \"test\" message immediately, and once the \"ready\" message arrives.\n        // The worker shall process only the first received \"test\" message.\n        sendTest();\n        return;\n      } catch (e) {\n        info(\"The worker has been disabled.\");\n      }\n    }\n    // Either workers are disabled, not supported or have thrown an exception.\n    // Thus, we fallback to a faked worker.\n    this._setupFakeWorker();\n  }\n\n  _setupFakeWorker() {\n    if (!PDFWorkerUtil.isWorkerDisabled) {\n      warn(\"Setting up fake worker.\");\n      PDFWorkerUtil.isWorkerDisabled = true;\n    }\n\n    PDFWorker._setupFakeWorkerGlobal\n      .then(WorkerMessageHandler => {\n        if (this.destroyed) {\n          this._readyCapability.reject(new Error(\"Worker was destroyed\"));\n          return;\n        }\n        const port = new LoopbackPort();\n        this._port = port;\n\n        // All fake workers use the same port, making id unique.\n        const id = `fake${PDFWorkerUtil.fakeWorkerId++}`;\n\n        // If the main thread is our worker, setup the handling for the\n        // messages -- the main thread sends to it self.\n        const workerHandler = new MessageHandler(id + \"_worker\", id, port);\n        WorkerMessageHandler.setup(workerHandler, port);\n\n        const messageHandler = new MessageHandler(id, id + \"_worker\", port);\n        this._messageHandler = messageHandler;\n        this._readyCapability.resolve();\n        // Send global setting, e.g. verbosity level.\n        messageHandler.send(\"configure\", {\n          verbosity: this.verbosity,\n        });\n      })\n      .catch(reason => {\n        this._readyCapability.reject(\n          new Error(`Setting up fake worker failed: \"${reason.message}\".`)\n        );\n      });\n  }\n\n  /**\n   * Destroys the worker instance.\n   */\n  destroy() {\n    this.destroyed = true;\n    if (this._webWorker) {\n      // We need to terminate only web worker created resource.\n      this._webWorker.terminate();\n      this._webWorker = null;\n    }\n    PDFWorker.#workerPorts.delete(this._port);\n    this._port = null;\n    if (this._messageHandler) {\n      this._messageHandler.destroy();\n      this._messageHandler = null;\n    }\n  }\n\n  /**\n   * @param {PDFWorkerParameters} params - The worker initialization parameters.\n   */\n  static fromPort(params) {\n    if (!params?.port) {\n      throw new Error(\"PDFWorker.fromPort - invalid method signature.\");\n    }\n    if (this.#workerPorts.has(params.port)) {\n      return this.#workerPorts.get(params.port);\n    }\n    return new PDFWorker(params);\n  }\n\n  /**\n   * The current `workerSrc`, when it exists.\n   * @type {string}\n   */\n  static get workerSrc() {\n    if (GlobalWorkerOptions.workerSrc) {\n      return GlobalWorkerOptions.workerSrc;\n    }\n    if (PDFWorkerUtil.fallbackWorkerSrc !== null) {\n      if (!isNodeJS) {\n        deprecated('No \"GlobalWorkerOptions.workerSrc\" specified.');\n      }\n      return PDFWorkerUtil.fallbackWorkerSrc;\n    }\n    throw new Error('No \"GlobalWorkerOptions.workerSrc\" specified.');\n  }\n\n  static get _mainThreadWorkerMessageHandler() {\n    try {\n      return globalThis.pdfjsWorker?.WorkerMessageHandler || null;\n    } catch (ex) {\n      return null;\n    }\n  }\n\n  // Loads worker code into the main-thread.\n  static get _setupFakeWorkerGlobal() {\n    const loader = async () => {\n      const mainWorkerMessageHandler = this._mainThreadWorkerMessageHandler;\n\n      if (mainWorkerMessageHandler) {\n        // The worker was already loaded using e.g. a `<script>` tag.\n        return mainWorkerMessageHandler;\n      }\n      if (typeof PDFJSDev === \"undefined\" || !PDFJSDev.test(\"PRODUCTION\")) {\n        const worker = await import(\"pdfjs/core/worker.js\");\n        return worker.WorkerMessageHandler;\n      }\n      if (\n        PDFJSDev.test(\"GENERIC\") &&\n        isNodeJS &&\n        // eslint-disable-next-line no-undef\n        typeof __non_webpack_require__ === \"function\"\n      ) {\n        // Since bundlers, such as Webpack, cannot be told to leave `require`\n        // statements alone we are thus forced to jump through hoops in order\n        // to prevent `Critical dependency: ...` warnings in third-party\n        // deployments of the built `pdf.js`/`pdf.worker.js` files; see\n        // https://github.com/webpack/webpack/issues/8826\n        //\n        // The following hack is based on the assumption that code running in\n        // Node.js won't ever be affected by e.g. Content Security Policies that\n        // prevent the use of `eval`. If that ever occurs, we should revert this\n        // to a normal `__non_webpack_require__` statement and simply document\n        // the Webpack warnings instead (telling users to ignore them).\n        //\n        // eslint-disable-next-line no-eval\n        const worker = eval(\"require\")(this.workerSrc);\n        return worker.WorkerMessageHandler;\n      }\n      await loadScript(this.workerSrc);\n      return window.pdfjsWorker.WorkerMessageHandler;\n    };\n\n    return shadow(this, \"_setupFakeWorkerGlobal\", loader());\n  }\n}\nif (typeof PDFJSDev !== \"undefined\" && PDFJSDev.test(\"GENERIC\")) {\n  PDFWorker.getWorkerSrc = function () {\n    deprecated(\n      \"`PDFWorker.getWorkerSrc()`, please use `PDFWorker.workerSrc` instead.\"\n    );\n    return this.workerSrc;\n  };\n}\n\n/**\n * For internal use only.\n * @ignore\n */\nclass WorkerTransport {\n  #docStats = null;\n\n  #pageCache = new Map();\n\n  #pagePromises = new Map();\n\n  #metadataPromise = null;\n\n  constructor(messageHandler, loadingTask, networkStream, params) {\n    this.messageHandler = messageHandler;\n    this.loadingTask = loadingTask;\n    this.commonObjs = new PDFObjects();\n    this.fontLoader = new FontLoader({\n      docId: loadingTask.docId,\n      onUnsupportedFeature: this._onUnsupportedFeature.bind(this),\n      ownerDocument: params.ownerDocument,\n      styleElement: params.styleElement,\n    });\n    this._params = params;\n\n    if (!params.useWorkerFetch) {\n      this.CMapReaderFactory = new params.CMapReaderFactory({\n        baseUrl: params.cMapUrl,\n        isCompressed: params.cMapPacked,\n      });\n      this.StandardFontDataFactory = new params.StandardFontDataFactory({\n        baseUrl: params.standardFontDataUrl,\n      });\n    }\n\n    this.destroyed = false;\n    this.destroyCapability = null;\n    this._passwordCapability = null;\n\n    this._networkStream = networkStream;\n    this._fullReader = null;\n    this._lastProgress = null;\n    this.downloadInfoCapability = createPromiseCapability();\n\n    this.setupMessageHandler();\n  }\n\n  get annotationStorage() {\n    return shadow(this, \"annotationStorage\", new AnnotationStorage());\n  }\n\n  get stats() {\n    return this.#docStats;\n  }\n\n  getRenderingIntent(\n    intent,\n    annotationMode = AnnotationMode.ENABLE,\n    isOpList = false\n  ) {\n    let renderingIntent = RenderingIntentFlag.DISPLAY; // Default value.\n    let annotationHash = \"\";\n\n    switch (intent) {\n      case \"any\":\n        renderingIntent = RenderingIntentFlag.ANY;\n        break;\n      case \"display\":\n        break;\n      case \"print\":\n        renderingIntent = RenderingIntentFlag.PRINT;\n        break;\n      default:\n        warn(`getRenderingIntent - invalid intent: ${intent}`);\n    }\n\n    switch (annotationMode) {\n      case AnnotationMode.DISABLE:\n        renderingIntent += RenderingIntentFlag.ANNOTATIONS_DISABLE;\n        break;\n      case AnnotationMode.ENABLE:\n        break;\n      case AnnotationMode.ENABLE_FORMS:\n        renderingIntent += RenderingIntentFlag.ANNOTATIONS_FORMS;\n        break;\n      case AnnotationMode.ENABLE_STORAGE:\n        renderingIntent += RenderingIntentFlag.ANNOTATIONS_STORAGE;\n\n        annotationHash = this.annotationStorage.hash;\n        break;\n      default:\n        warn(`getRenderingIntent - invalid annotationMode: ${annotationMode}`);\n    }\n\n    if (isOpList) {\n      renderingIntent += RenderingIntentFlag.OPLIST;\n    }\n\n    return {\n      renderingIntent,\n      cacheKey: `${renderingIntent}_${annotationHash}`,\n    };\n  }\n\n  destroy() {\n    if (this.destroyCapability) {\n      return this.destroyCapability.promise;\n    }\n\n    this.destroyed = true;\n    this.destroyCapability = createPromiseCapability();\n\n    if (this._passwordCapability) {\n      this._passwordCapability.reject(\n        new Error(\"Worker was destroyed during onPassword callback\")\n      );\n    }\n\n    const waitOn = [];\n    // We need to wait for all renderings to be completed, e.g.\n    // timeout/rAF can take a long time.\n    for (const page of this.#pageCache.values()) {\n      waitOn.push(page._destroy());\n    }\n    this.#pageCache.clear();\n    this.#pagePromises.clear();\n    // Allow `AnnotationStorage`-related clean-up when destroying the document.\n    if (this.hasOwnProperty(\"annotationStorage\")) {\n      this.annotationStorage.resetModified();\n    }\n    // We also need to wait for the worker to finish its long running tasks.\n    const terminated = this.messageHandler.sendWithPromise(\"Terminate\", null);\n    waitOn.push(terminated);\n\n    Promise.all(waitOn).then(() => {\n      this.commonObjs.clear();\n      this.fontLoader.clear();\n      this.#metadataPromise = null;\n      this._getFieldObjectsPromise = null;\n      this._hasJSActionsPromise = null;\n\n      if (this._networkStream) {\n        this._networkStream.cancelAllRequests(\n          new AbortException(\"Worker was terminated.\")\n        );\n      }\n\n      if (this.messageHandler) {\n        this.messageHandler.destroy();\n        this.messageHandler = null;\n      }\n      this.destroyCapability.resolve();\n    }, this.destroyCapability.reject);\n    return this.destroyCapability.promise;\n  }\n\n  setupMessageHandler() {\n    const { messageHandler, loadingTask } = this;\n\n    messageHandler.on(\"GetReader\", (data, sink) => {\n      assert(\n        this._networkStream,\n        \"GetReader - no `IPDFStream` instance available.\"\n      );\n      this._fullReader = this._networkStream.getFullReader();\n      this._fullReader.onProgress = evt => {\n        this._lastProgress = {\n          loaded: evt.loaded,\n          total: evt.total,\n        };\n      };\n      sink.onPull = () => {\n        this._fullReader\n          .read()\n          .then(function ({ value, done }) {\n            if (done) {\n              sink.close();\n              return;\n            }\n            assert(\n              isArrayBuffer(value),\n              \"GetReader - expected an ArrayBuffer.\"\n            );\n            // Enqueue data chunk into sink, and transfer it\n            // to other side as `Transferable` object.\n            sink.enqueue(new Uint8Array(value), 1, [value]);\n          })\n          .catch(reason => {\n            sink.error(reason);\n          });\n      };\n\n      sink.onCancel = reason => {\n        this._fullReader.cancel(reason);\n\n        sink.ready.catch(readyReason => {\n          if (this.destroyed) {\n            return; // Ignore any pending requests if the worker was terminated.\n          }\n          throw readyReason;\n        });\n      };\n    });\n\n    messageHandler.on(\"ReaderHeadersReady\", data => {\n      const headersCapability = createPromiseCapability();\n      const fullReader = this._fullReader;\n      fullReader.headersReady.then(() => {\n        // If stream or range are disabled, it's our only way to report\n        // loading progress.\n        if (!fullReader.isStreamingSupported || !fullReader.isRangeSupported) {\n          if (this._lastProgress) {\n            loadingTask.onProgress?.(this._lastProgress);\n          }\n          fullReader.onProgress = evt => {\n            loadingTask.onProgress?.({\n              loaded: evt.loaded,\n              total: evt.total,\n            });\n          };\n        }\n\n        headersCapability.resolve({\n          isStreamingSupported: fullReader.isStreamingSupported,\n          isRangeSupported: fullReader.isRangeSupported,\n          contentLength: fullReader.contentLength,\n        });\n      }, headersCapability.reject);\n\n      return headersCapability.promise;\n    });\n\n    messageHandler.on(\"GetRangeReader\", (data, sink) => {\n      assert(\n        this._networkStream,\n        \"GetRangeReader - no `IPDFStream` instance available.\"\n      );\n      const rangeReader = this._networkStream.getRangeReader(\n        data.begin,\n        data.end\n      );\n\n      // When streaming is enabled, it's possible that the data requested here\n      // has already been fetched via the `_fullRequestReader` implementation.\n      // However, given that the PDF data is loaded asynchronously on the\n      // main-thread and then sent via `postMessage` to the worker-thread,\n      // it may not have been available during parsing (hence the attempt to\n      // use range requests here).\n      //\n      // To avoid wasting time and resources here, we'll thus *not* dispatch\n      // range requests if the data was already loaded but has not been sent to\n      // the worker-thread yet (which will happen via the `_fullRequestReader`).\n      if (!rangeReader) {\n        sink.close();\n        return;\n      }\n\n      sink.onPull = () => {\n        rangeReader\n          .read()\n          .then(function ({ value, done }) {\n            if (done) {\n              sink.close();\n              return;\n            }\n            assert(\n              isArrayBuffer(value),\n              \"GetRangeReader - expected an ArrayBuffer.\"\n            );\n            sink.enqueue(new Uint8Array(value), 1, [value]);\n          })\n          .catch(reason => {\n            sink.error(reason);\n          });\n      };\n\n      sink.onCancel = reason => {\n        rangeReader.cancel(reason);\n\n        sink.ready.catch(readyReason => {\n          if (this.destroyed) {\n            return; // Ignore any pending requests if the worker was terminated.\n          }\n          throw readyReason;\n        });\n      };\n    });\n\n    messageHandler.on(\"GetDoc\", ({ pdfInfo }) => {\n      this._numPages = pdfInfo.numPages;\n      this._htmlForXfa = pdfInfo.htmlForXfa;\n      delete pdfInfo.htmlForXfa;\n      loadingTask._capability.resolve(new PDFDocumentProxy(pdfInfo, this));\n    });\n\n    messageHandler.on(\"DocException\", function (ex) {\n      let reason;\n      switch (ex.name) {\n        case \"PasswordException\":\n          reason = new PasswordException(ex.message, ex.code);\n          break;\n        case \"InvalidPDFException\":\n          reason = new InvalidPDFException(ex.message);\n          break;\n        case \"MissingPDFException\":\n          reason = new MissingPDFException(ex.message);\n          break;\n        case \"UnexpectedResponseException\":\n          reason = new UnexpectedResponseException(ex.message, ex.status);\n          break;\n        case \"UnknownErrorException\":\n          reason = new UnknownErrorException(ex.message, ex.details);\n          break;\n        default:\n          unreachable(\"DocException - expected a valid Error.\");\n      }\n      loadingTask._capability.reject(reason);\n    });\n\n    messageHandler.on(\"PasswordRequest\", exception => {\n      this._passwordCapability = createPromiseCapability();\n\n      if (loadingTask.onPassword) {\n        const updatePassword = password => {\n          if (password instanceof Error) {\n            this._passwordCapability.reject(password);\n          } else {\n            this._passwordCapability.resolve({ password });\n          }\n        };\n        try {\n          loadingTask.onPassword(updatePassword, exception.code);\n        } catch (ex) {\n          this._passwordCapability.reject(ex);\n        }\n      } else {\n        this._passwordCapability.reject(\n          new PasswordException(exception.message, exception.code)\n        );\n      }\n      return this._passwordCapability.promise;\n    });\n\n    messageHandler.on(\"DataLoaded\", data => {\n      // For consistency: Ensure that progress is always reported when the\n      // entire PDF file has been loaded, regardless of how it was fetched.\n      loadingTask.onProgress?.({\n        loaded: data.length,\n        total: data.length,\n      });\n\n      this.downloadInfoCapability.resolve(data);\n    });\n\n    messageHandler.on(\"StartRenderPage\", data => {\n      if (this.destroyed) {\n        return; // Ignore any pending requests if the worker was terminated.\n      }\n\n      const page = this.#pageCache.get(data.pageIndex);\n      page._startRenderPage(data.transparency, data.cacheKey);\n    });\n\n    messageHandler.on(\"commonobj\", ([id, type, exportedData]) => {\n      if (this.destroyed) {\n        return; // Ignore any pending requests if the worker was terminated.\n      }\n\n      if (this.commonObjs.has(id)) {\n        return;\n      }\n\n      switch (type) {\n        case \"Font\":\n          const params = this._params;\n\n          if (\"error\" in exportedData) {\n            const exportedError = exportedData.error;\n            warn(`Error during font loading: ${exportedError}`);\n            this.commonObjs.resolve(id, exportedError);\n            break;\n          }\n\n          let fontRegistry = null;\n          if (params.pdfBug && globalThis.FontInspector?.enabled) {\n            fontRegistry = {\n              registerFont(font, url) {\n                globalThis.FontInspector.fontAdded(font, url);\n              },\n            };\n          }\n          const font = new FontFaceObject(exportedData, {\n            isEvalSupported: params.isEvalSupported,\n            disableFontFace: params.disableFontFace,\n            ignoreErrors: params.ignoreErrors,\n            onUnsupportedFeature: this._onUnsupportedFeature.bind(this),\n            fontRegistry,\n          });\n\n          this.fontLoader\n            .bind(font)\n            .catch(reason => {\n              return messageHandler.sendWithPromise(\"FontFallback\", { id });\n            })\n            .finally(() => {\n              if (!params.fontExtraProperties && font.data) {\n                // Immediately release the `font.data` property once the font\n                // has been attached to the DOM, since it's no longer needed,\n                // rather than waiting for a `PDFDocumentProxy.cleanup` call.\n                // Since `font.data` could be very large, e.g. in some cases\n                // multiple megabytes, this will help reduce memory usage.\n                font.data = null;\n              }\n              this.commonObjs.resolve(id, font);\n            });\n          break;\n        case \"FontPath\":\n        case \"Image\":\n          this.commonObjs.resolve(id, exportedData);\n          break;\n        default:\n          throw new Error(`Got unknown common object type ${type}`);\n      }\n    });\n\n    messageHandler.on(\"obj\", ([id, pageIndex, type, imageData]) => {\n      if (this.destroyed) {\n        // Ignore any pending requests if the worker was terminated.\n        return;\n      }\n\n      const pageProxy = this.#pageCache.get(pageIndex);\n      if (pageProxy.objs.has(id)) {\n        return;\n      }\n\n      switch (type) {\n        case \"Image\":\n          pageProxy.objs.resolve(id, imageData);\n\n          // Heuristic that will allow us not to store large data.\n          const MAX_IMAGE_SIZE_TO_STORE = 8000000;\n          if (imageData) {\n            let length;\n            if (imageData.bitmap) {\n              const { bitmap, width, height } = imageData;\n              length = width * height * 4;\n              pageProxy._bitmaps.add(bitmap);\n            } else {\n              length = imageData.data?.length || 0;\n            }\n\n            if (length > MAX_IMAGE_SIZE_TO_STORE) {\n              pageProxy.cleanupAfterRender = true;\n            }\n          }\n          break;\n        case \"Pattern\":\n          pageProxy.objs.resolve(id, imageData);\n          break;\n        default:\n          throw new Error(`Got unknown object type ${type}`);\n      }\n    });\n\n    messageHandler.on(\"DocProgress\", data => {\n      if (this.destroyed) {\n        return; // Ignore any pending requests if the worker was terminated.\n      }\n      loadingTask.onProgress?.({\n        loaded: data.loaded,\n        total: data.total,\n      });\n    });\n\n    messageHandler.on(\"DocStats\", data => {\n      if (this.destroyed) {\n        return; // Ignore any pending requests if the worker was terminated.\n      }\n      // Ensure that a `PDFDocumentProxy.stats` call-site cannot accidentally\n      // modify this internal data.\n      this.#docStats = Object.freeze({\n        streamTypes: Object.freeze(data.streamTypes),\n        fontTypes: Object.freeze(data.fontTypes),\n      });\n    });\n\n    messageHandler.on(\n      \"UnsupportedFeature\",\n      this._onUnsupportedFeature.bind(this)\n    );\n\n    messageHandler.on(\"FetchBuiltInCMap\", data => {\n      if (this.destroyed) {\n        return Promise.reject(new Error(\"Worker was destroyed.\"));\n      }\n      if (!this.CMapReaderFactory) {\n        return Promise.reject(\n          new Error(\n            \"CMapReaderFactory not initialized, see the `useWorkerFetch` parameter.\"\n          )\n        );\n      }\n      return this.CMapReaderFactory.fetch(data);\n    });\n\n    messageHandler.on(\"FetchStandardFontData\", data => {\n      if (this.destroyed) {\n        return Promise.reject(new Error(\"Worker was destroyed.\"));\n      }\n      if (!this.StandardFontDataFactory) {\n        return Promise.reject(\n          new Error(\n            \"StandardFontDataFactory not initialized, see the `useWorkerFetch` parameter.\"\n          )\n        );\n      }\n      return this.StandardFontDataFactory.fetch(data);\n    });\n  }\n\n  _onUnsupportedFeature({ featureId }) {\n    if (this.destroyed) {\n      return; // Ignore any pending requests if the worker was terminated.\n    }\n    this.loadingTask.onUnsupportedFeature?.(featureId);\n  }\n\n  getData() {\n    return this.messageHandler.sendWithPromise(\"GetData\", null);\n  }\n\n  getPage(pageNumber) {\n    if (\n      !Number.isInteger(pageNumber) ||\n      pageNumber <= 0 ||\n      pageNumber > this._numPages\n    ) {\n      return Promise.reject(new Error(\"Invalid page request.\"));\n    }\n\n    const pageIndex = pageNumber - 1,\n      cachedPromise = this.#pagePromises.get(pageIndex);\n    if (cachedPromise) {\n      return cachedPromise;\n    }\n    const promise = this.messageHandler\n      .sendWithPromise(\"GetPage\", {\n        pageIndex,\n      })\n      .then(pageInfo => {\n        if (this.destroyed) {\n          throw new Error(\"Transport destroyed\");\n        }\n        const page = new PDFPageProxy(\n          pageIndex,\n          pageInfo,\n          this,\n          this._params.ownerDocument,\n          this._params.pdfBug\n        );\n        this.#pageCache.set(pageIndex, page);\n        return page;\n      });\n    this.#pagePromises.set(pageIndex, promise);\n    return promise;\n  }\n\n  getPageIndex(ref) {\n    if (\n      typeof ref !== \"object\" ||\n      ref === null ||\n      !Number.isInteger(ref.num) ||\n      ref.num < 0 ||\n      !Number.isInteger(ref.gen) ||\n      ref.gen < 0\n    ) {\n      return Promise.reject(new Error(\"Invalid pageIndex request.\"));\n    }\n    return this.messageHandler.sendWithPromise(\"GetPageIndex\", {\n      num: ref.num,\n      gen: ref.gen,\n    });\n  }\n\n  getAnnotations(pageIndex, intent) {\n    return this.messageHandler.sendWithPromise(\"GetAnnotations\", {\n      pageIndex,\n      intent,\n    });\n  }\n\n  saveDocument() {\n    return this.messageHandler\n      .sendWithPromise(\"SaveDocument\", {\n        isPureXfa: !!this._htmlForXfa,\n        numPages: this._numPages,\n        annotationStorage: this.annotationStorage.serializable,\n        filename: this._fullReader?.filename ?? null,\n      })\n      .finally(() => {\n        this.annotationStorage.resetModified();\n      });\n  }\n\n  getFieldObjects() {\n    return (this._getFieldObjectsPromise ||=\n      this.messageHandler.sendWithPromise(\"GetFieldObjects\", null));\n  }\n\n  hasJSActions() {\n    return (this._hasJSActionsPromise ||= this.messageHandler.sendWithPromise(\n      \"HasJSActions\",\n      null\n    ));\n  }\n\n  getCalculationOrderIds() {\n    return this.messageHandler.sendWithPromise(\"GetCalculationOrderIds\", null);\n  }\n\n  getDestinations() {\n    return this.messageHandler.sendWithPromise(\"GetDestinations\", null);\n  }\n\n  getDestination(id) {\n    if (typeof id !== \"string\") {\n      return Promise.reject(new Error(\"Invalid destination request.\"));\n    }\n    return this.messageHandler.sendWithPromise(\"GetDestination\", {\n      id,\n    });\n  }\n\n  getPageLabels() {\n    return this.messageHandler.sendWithPromise(\"GetPageLabels\", null);\n  }\n\n  getPageLayout() {\n    return this.messageHandler.sendWithPromise(\"GetPageLayout\", null);\n  }\n\n  getPageMode() {\n    return this.messageHandler.sendWithPromise(\"GetPageMode\", null);\n  }\n\n  getViewerPreferences() {\n    return this.messageHandler.sendWithPromise(\"GetViewerPreferences\", null);\n  }\n\n  getOpenAction() {\n    return this.messageHandler.sendWithPromise(\"GetOpenAction\", null);\n  }\n\n  getAttachments() {\n    return this.messageHandler.sendWithPromise(\"GetAttachments\", null);\n  }\n\n  getJavaScript() {\n    return this.messageHandler.sendWithPromise(\"GetJavaScript\", null);\n  }\n\n  getDocJSActions() {\n    return this.messageHandler.sendWithPromise(\"GetDocJSActions\", null);\n  }\n\n  getPageJSActions(pageIndex) {\n    return this.messageHandler.sendWithPromise(\"GetPageJSActions\", {\n      pageIndex,\n    });\n  }\n\n  getStructTree(pageIndex) {\n    return this.messageHandler.sendWithPromise(\"GetStructTree\", {\n      pageIndex,\n    });\n  }\n\n  getOutline() {\n    return this.messageHandler.sendWithPromise(\"GetOutline\", null);\n  }\n\n  getOptionalContentConfig() {\n    return this.messageHandler\n      .sendWithPromise(\"GetOptionalContentConfig\", null)\n      .then(results => {\n        return new OptionalContentConfig(results);\n      });\n  }\n\n  getPermissions() {\n    return this.messageHandler.sendWithPromise(\"GetPermissions\", null);\n  }\n\n  getMetadata() {\n    return (this.#metadataPromise ||= this.messageHandler\n      .sendWithPromise(\"GetMetadata\", null)\n      .then(results => {\n        return {\n          info: results[0],\n          metadata: results[1] ? new Metadata(results[1]) : null,\n          contentDispositionFilename: this._fullReader?.filename ?? null,\n          contentLength: this._fullReader?.contentLength ?? null,\n        };\n      }));\n  }\n\n  getMarkInfo() {\n    return this.messageHandler.sendWithPromise(\"GetMarkInfo\", null);\n  }\n\n  async startCleanup(keepLoadedFonts = false) {\n    await this.messageHandler.sendWithPromise(\"Cleanup\", null);\n\n    if (this.destroyed) {\n      return; // No need to manually clean-up when destruction has started.\n    }\n    for (const page of this.#pageCache.values()) {\n      const cleanupSuccessful = page.cleanup();\n\n      if (!cleanupSuccessful) {\n        throw new Error(\n          `startCleanup: Page ${page.pageNumber} is currently rendering.`\n        );\n      }\n    }\n    this.commonObjs.clear();\n    if (!keepLoadedFonts) {\n      this.fontLoader.clear();\n    }\n    this.#metadataPromise = null;\n    this._getFieldObjectsPromise = null;\n    this._hasJSActionsPromise = null;\n  }\n\n  get loadingParams() {\n    const params = this._params;\n    return shadow(this, \"loadingParams\", {\n      disableAutoFetch: params.disableAutoFetch,\n      enableXfa: params.enableXfa,\n    });\n  }\n}\n\n/**\n * A PDF document and page is built of many objects. E.g. there are objects for\n * fonts, images, rendering code, etc. These objects may get processed inside of\n * a worker. This class implements some basic methods to manage these objects.\n */\nclass PDFObjects {\n  #objs = Object.create(null);\n\n  /**\n   * Ensures there is an object defined for `objId`.\n   *\n   * @param {string} objId\n   * @returns {Object}\n   */\n  #ensureObj(objId) {\n    const obj = this.#objs[objId];\n    if (obj) {\n      return obj;\n    }\n    return (this.#objs[objId] = {\n      capability: createPromiseCapability(),\n      data: null,\n    });\n  }\n\n  /**\n   * If called *without* callback, this returns the data of `objId` but the\n   * object needs to be resolved. If it isn't, this method throws.\n   *\n   * If called *with* a callback, the callback is called with the data of the\n   * object once the object is resolved. That means, if you call this method\n   * and the object is already resolved, the callback gets called right away.\n   *\n   * @param {string} objId\n   * @param {function} [callback]\n   * @returns {any}\n   */\n  get(objId, callback = null) {\n    // If there is a callback, then the get can be async and the object is\n    // not required to be resolved right now.\n    if (callback) {\n      const obj = this.#ensureObj(objId);\n      obj.capability.promise.then(() => callback(obj.data));\n      return null;\n    }\n    // If there isn't a callback, the user expects to get the resolved data\n    // directly.\n    const obj = this.#objs[objId];\n    // If there isn't an object yet or the object isn't resolved, then the\n    // data isn't ready yet!\n    if (!obj?.capability.settled) {\n      throw new Error(`Requesting object that isn't resolved yet ${objId}.`);\n    }\n    return obj.data;\n  }\n\n  /**\n   * @param {string} objId\n   * @returns {boolean}\n   */\n  has(objId) {\n    const obj = this.#objs[objId];\n    return obj?.capability.settled || false;\n  }\n\n  /**\n   * Resolves the object `objId` with optional `data`.\n   *\n   * @param {string} objId\n   * @param {any} [data]\n   */\n  resolve(objId, data = null) {\n    const obj = this.#ensureObj(objId);\n    obj.data = data;\n    obj.capability.resolve();\n  }\n\n  clear() {\n    this.#objs = Object.create(null);\n  }\n}\n\n/**\n * Allows controlling of the rendering tasks.\n */\nclass RenderTask {\n  constructor(internalRenderTask) {\n    this._internalRenderTask = internalRenderTask;\n\n    /**\n     * Callback for incremental rendering -- a function that will be called\n     * each time the rendering is paused.  To continue rendering call the\n     * function that is the first argument to the callback.\n     * @type {function}\n     */\n    this.onContinue = null;\n  }\n\n  /**\n   * Promise for rendering task completion.\n   * @type {Promise<void>}\n   */\n  get promise() {\n    return this._internalRenderTask.capability.promise;\n  }\n\n  /**\n   * Cancels the rendering task. If the task is currently rendering it will\n   * not be cancelled until graphics pauses with a timeout. The promise that\n   * this object extends will be rejected when cancelled.\n   */\n  cancel() {\n    this._internalRenderTask.cancel();\n  }\n}\n\n/**\n * For internal use only.\n * @ignore\n */\nclass InternalRenderTask {\n  static #canvasInUse = new WeakSet();\n\n  constructor({\n    callback,\n    params,\n    objs,\n    commonObjs,\n    annotationCanvasMap,\n    operatorList,\n    pageIndex,\n    canvasFactory,\n    useRequestAnimationFrame = false,\n    pdfBug = false,\n    pageColors = null,\n  }) {\n    this.callback = callback;\n    this.params = params;\n    this.objs = objs;\n    this.commonObjs = commonObjs;\n    this.annotationCanvasMap = annotationCanvasMap;\n    this.operatorListIdx = null;\n    this.operatorList = operatorList;\n    this._pageIndex = pageIndex;\n    this.canvasFactory = canvasFactory;\n    this._pdfBug = pdfBug;\n    this.pageColors = pageColors;\n\n    this.running = false;\n    this.graphicsReadyCallback = null;\n    this.graphicsReady = false;\n    this._useRequestAnimationFrame =\n      useRequestAnimationFrame === true && typeof window !== \"undefined\";\n    this.cancelled = false;\n    this.capability = createPromiseCapability();\n    this.task = new RenderTask(this);\n    // caching this-bound methods\n    this._cancelBound = this.cancel.bind(this);\n    this._continueBound = this._continue.bind(this);\n    this._scheduleNextBound = this._scheduleNext.bind(this);\n    this._nextBound = this._next.bind(this);\n    this._canvas = params.canvasContext.canvas;\n  }\n\n  get completed() {\n    return this.capability.promise.catch(function () {\n      // Ignoring errors, since we only want to know when rendering is\n      // no longer pending.\n    });\n  }\n\n  initializeGraphics({ transparency = false, optionalContentConfig }) {\n    if (this.cancelled) {\n      return;\n    }\n    if (this._canvas) {\n      if (InternalRenderTask.#canvasInUse.has(this._canvas)) {\n        throw new Error(\n          \"Cannot use the same canvas during multiple render() operations. \" +\n            \"Use different canvas or ensure previous operations were \" +\n            \"cancelled or completed.\"\n        );\n      }\n      InternalRenderTask.#canvasInUse.add(this._canvas);\n    }\n\n    if (this._pdfBug && globalThis.StepperManager?.enabled) {\n      this.stepper = globalThis.StepperManager.create(this._pageIndex);\n      this.stepper.init(this.operatorList);\n      this.stepper.nextBreakPoint = this.stepper.getNextBreakPoint();\n    }\n    const { canvasContext, viewport, transform, imageLayer, background } =\n      this.params;\n\n    this.gfx = new CanvasGraphics(\n      canvasContext,\n      this.commonObjs,\n      this.objs,\n      this.canvasFactory,\n      imageLayer,\n      optionalContentConfig,\n      this.annotationCanvasMap,\n      this.pageColors\n    );\n    this.gfx.beginDrawing({\n      transform,\n      viewport,\n      transparency,\n      background,\n    });\n    this.operatorListIdx = 0;\n    this.graphicsReady = true;\n    if (this.graphicsReadyCallback) {\n      this.graphicsReadyCallback();\n    }\n  }\n\n  cancel(error = null) {\n    this.running = false;\n    this.cancelled = true;\n    if (this.gfx) {\n      this.gfx.endDrawing();\n    }\n    if (this._canvas) {\n      InternalRenderTask.#canvasInUse.delete(this._canvas);\n    }\n    this.callback(\n      error ||\n        new RenderingCancelledException(\n          `Rendering cancelled, page ${this._pageIndex + 1}`,\n          \"canvas\"\n        )\n    );\n  }\n\n  operatorListChanged() {\n    if (!this.graphicsReady) {\n      if (!this.graphicsReadyCallback) {\n        this.graphicsReadyCallback = this._continueBound;\n      }\n      return;\n    }\n\n    if (this.stepper) {\n      this.stepper.updateOperatorList(this.operatorList);\n    }\n\n    if (this.running) {\n      return;\n    }\n    this._continue();\n  }\n\n  _continue() {\n    this.running = true;\n    if (this.cancelled) {\n      return;\n    }\n    if (this.task.onContinue) {\n      this.task.onContinue(this._scheduleNextBound);\n    } else {\n      this._scheduleNext();\n    }\n  }\n\n  _scheduleNext() {\n    if (this._useRequestAnimationFrame) {\n      window.requestAnimationFrame(() => {\n        this._nextBound().catch(this._cancelBound);\n      });\n    } else {\n      Promise.resolve().then(this._nextBound).catch(this._cancelBound);\n    }\n  }\n\n  async _next() {\n    if (this.cancelled) {\n      return;\n    }\n    this.operatorListIdx = this.gfx.executeOperatorList(\n      this.operatorList,\n      this.operatorListIdx,\n      this._continueBound,\n      this.stepper\n    );\n    if (this.operatorListIdx === this.operatorList.argsArray.length) {\n      this.running = false;\n      if (this.operatorList.lastChunk) {\n        this.gfx.endDrawing();\n        if (this._canvas) {\n          InternalRenderTask.#canvasInUse.delete(this._canvas);\n        }\n        this.callback();\n      }\n    }\n  }\n}\n\n/** @type {string} */\nconst version =\n  typeof PDFJSDev !== \"undefined\" ? PDFJSDev.eval(\"BUNDLE_VERSION\") : null;\n/** @type {string} */\nconst build =\n  typeof PDFJSDev !== \"undefined\" ? PDFJSDev.eval(\"BUNDLE_BUILD\") : null;\n\nexport {\n  build,\n  DefaultCanvasFactory,\n  DefaultCMapReaderFactory,\n  DefaultStandardFontDataFactory,\n  getDocument,\n  LoopbackPort,\n  PDFDataRangeTransport,\n  PDFDocumentLoadingTask,\n  PDFDocumentProxy,\n  PDFPageProxy,\n  PDFWorker,\n  PDFWorkerUtil,\n  RenderTask,\n  setPDFNetworkStreamFactory,\n  version,\n};\n","/* Copyright 2015 Mozilla Foundation\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport {\n  BaseCanvasFactory,\n  BaseCMapReaderFactory,\n  BaseStandardFontDataFactory,\n  BaseSVGFactory,\n} from \"./base_factory.js\";\nimport { BaseException, stringToBytes, Util, warn } from \"../shared/util.js\";\n\nconst SVG_NS = \"http://www.w3.org/2000/svg\";\n\nclass PixelsPerInch {\n  static CSS = 96.0;\n\n  static PDF = 72.0;\n\n  static PDF_TO_CSS_UNITS = this.CSS / this.PDF;\n}\n\nclass DOMCanvasFactory extends BaseCanvasFactory {\n  constructor({ ownerDocument = globalThis.document } = {}) {\n    super();\n    this._document = ownerDocument;\n  }\n\n  /**\n   * @ignore\n   */\n  _createCanvas(width, height) {\n    const canvas = this._document.createElement(\"canvas\");\n    canvas.width = width;\n    canvas.height = height;\n    return canvas;\n  }\n}\n\nasync function fetchData(url, asTypedArray = false) {\n  if (\n    (typeof PDFJSDev !== \"undefined\" && PDFJSDev.test(\"MOZCENTRAL\")) ||\n    isValidFetchUrl(url, document.baseURI)\n  ) {\n    const response = await fetch(url);\n    if (!response.ok) {\n      throw new Error(response.statusText);\n    }\n    return asTypedArray\n      ? new Uint8Array(await response.arrayBuffer())\n      : stringToBytes(await response.text());\n  }\n\n  // The Fetch API is not supported.\n  return new Promise((resolve, reject) => {\n    const request = new XMLHttpRequest();\n    request.open(\"GET\", url, /* asTypedArray = */ true);\n\n    if (asTypedArray) {\n      request.responseType = \"arraybuffer\";\n    }\n    request.onreadystatechange = () => {\n      if (request.readyState !== XMLHttpRequest.DONE) {\n        return;\n      }\n      if (request.status === 200 || request.status === 0) {\n        let data;\n        if (asTypedArray && request.response) {\n          data = new Uint8Array(request.response);\n        } else if (!asTypedArray && request.responseText) {\n          data = stringToBytes(request.responseText);\n        }\n        if (data) {\n          resolve(data);\n          return;\n        }\n      }\n      reject(new Error(request.statusText));\n    };\n\n    request.send(null);\n  });\n}\n\nclass DOMCMapReaderFactory extends BaseCMapReaderFactory {\n  /**\n   * @ignore\n   */\n  _fetchData(url, compressionType) {\n    return fetchData(url, /* asTypedArray = */ this.isCompressed).then(data => {\n      return { cMapData: data, compressionType };\n    });\n  }\n}\n\nclass DOMStandardFontDataFactory extends BaseStandardFontDataFactory {\n  /**\n   * @ignore\n   */\n  _fetchData(url) {\n    return fetchData(url, /* asTypedArray = */ true);\n  }\n}\n\nclass DOMSVGFactory extends BaseSVGFactory {\n  /**\n   * @ignore\n   */\n  _createSVG(type) {\n    return document.createElementNS(SVG_NS, type);\n  }\n}\n\n/**\n * @typedef {Object} PageViewportParameters\n * @property {Array<number>} viewBox - The xMin, yMin, xMax and\n *   yMax coordinates.\n * @property {number} scale - The scale of the viewport.\n * @property {number} rotation - The rotation, in degrees, of the viewport.\n * @property {number} [offsetX] - The horizontal, i.e. x-axis, offset. The\n *   default value is `0`.\n * @property {number} [offsetY] - The vertical, i.e. y-axis, offset. The\n *   default value is `0`.\n * @property {boolean} [dontFlip] - If true, the y-axis will not be flipped.\n *   The default value is `false`.\n */\n\n/**\n * @typedef {Object} PageViewportCloneParameters\n * @property {number} [scale] - The scale, overriding the one in the cloned\n *   viewport. The default value is `this.scale`.\n * @property {number} [rotation] - The rotation, in degrees, overriding the one\n *   in the cloned viewport. The default value is `this.rotation`.\n * @property {number} [offsetX] - The horizontal, i.e. x-axis, offset.\n *   The default value is `this.offsetX`.\n * @property {number} [offsetY] - The vertical, i.e. y-axis, offset.\n *   The default value is `this.offsetY`.\n * @property {boolean} [dontFlip] - If true, the x-axis will not be flipped.\n *   The default value is `false`.\n */\n\n/**\n * PDF page viewport created based on scale, rotation and offset.\n */\nclass PageViewport {\n  /**\n   * @param {PageViewportParameters}\n   */\n  constructor({\n    viewBox,\n    scale,\n    rotation,\n    offsetX = 0,\n    offsetY = 0,\n    dontFlip = false,\n  }) {\n    this.viewBox = viewBox;\n    this.scale = scale;\n    this.rotation = rotation;\n    this.offsetX = offsetX;\n    this.offsetY = offsetY;\n\n    // creating transform to convert pdf coordinate system to the normal\n    // canvas like coordinates taking in account scale and rotation\n    const centerX = (viewBox[2] + viewBox[0]) / 2;\n    const centerY = (viewBox[3] + viewBox[1]) / 2;\n    let rotateA, rotateB, rotateC, rotateD;\n    // Normalize the rotation, by clamping it to the [0, 360) range.\n    rotation %= 360;\n    if (rotation < 0) {\n      rotation += 360;\n    }\n    switch (rotation) {\n      case 180:\n        rotateA = -1;\n        rotateB = 0;\n        rotateC = 0;\n        rotateD = 1;\n        break;\n      case 90:\n        rotateA = 0;\n        rotateB = 1;\n        rotateC = 1;\n        rotateD = 0;\n        break;\n      case 270:\n        rotateA = 0;\n        rotateB = -1;\n        rotateC = -1;\n        rotateD = 0;\n        break;\n      case 0:\n        rotateA = 1;\n        rotateB = 0;\n        rotateC = 0;\n        rotateD = -1;\n        break;\n      default:\n        throw new Error(\n          \"PageViewport: Invalid rotation, must be a multiple of 90 degrees.\"\n        );\n    }\n\n    if (dontFlip) {\n      rotateC = -rotateC;\n      rotateD = -rotateD;\n    }\n\n    let offsetCanvasX, offsetCanvasY;\n    let width, height;\n    if (rotateA === 0) {\n      offsetCanvasX = Math.abs(centerY - viewBox[1]) * scale + offsetX;\n      offsetCanvasY = Math.abs(centerX - viewBox[0]) * scale + offsetY;\n      width = Math.abs(viewBox[3] - viewBox[1]) * scale;\n      height = Math.abs(viewBox[2] - viewBox[0]) * scale;\n    } else {\n      offsetCanvasX = Math.abs(centerX - viewBox[0]) * scale + offsetX;\n      offsetCanvasY = Math.abs(centerY - viewBox[1]) * scale + offsetY;\n      width = Math.abs(viewBox[2] - viewBox[0]) * scale;\n      height = Math.abs(viewBox[3] - viewBox[1]) * scale;\n    }\n    // creating transform for the following operations:\n    // translate(-centerX, -centerY), rotate and flip vertically,\n    // scale, and translate(offsetCanvasX, offsetCanvasY)\n    this.transform = [\n      rotateA * scale,\n      rotateB * scale,\n      rotateC * scale,\n      rotateD * scale,\n      offsetCanvasX - rotateA * scale * centerX - rotateC * scale * centerY,\n      offsetCanvasY - rotateB * scale * centerX - rotateD * scale * centerY,\n    ];\n\n    this.width = width;\n    this.height = height;\n  }\n\n  /**\n   * Clones viewport, with optional additional properties.\n   * @param {PageViewportCloneParameters} [params]\n   * @returns {PageViewport} Cloned viewport.\n   */\n  clone({\n    scale = this.scale,\n    rotation = this.rotation,\n    offsetX = this.offsetX,\n    offsetY = this.offsetY,\n    dontFlip = false,\n  } = {}) {\n    return new PageViewport({\n      viewBox: this.viewBox.slice(),\n      scale,\n      rotation,\n      offsetX,\n      offsetY,\n      dontFlip,\n    });\n  }\n\n  /**\n   * Converts PDF point to the viewport coordinates. For examples, useful for\n   * converting PDF location into canvas pixel coordinates.\n   * @param {number} x - The x-coordinate.\n   * @param {number} y - The y-coordinate.\n   * @returns {Object} Object containing `x` and `y` properties of the\n   *   point in the viewport coordinate space.\n   * @see {@link convertToPdfPoint}\n   * @see {@link convertToViewportRectangle}\n   */\n  convertToViewportPoint(x, y) {\n    return Util.applyTransform([x, y], this.transform);\n  }\n\n  /**\n   * Converts PDF rectangle to the viewport coordinates.\n   * @param {Array} rect - The xMin, yMin, xMax and yMax coordinates.\n   * @returns {Array} Array containing corresponding coordinates of the\n   *   rectangle in the viewport coordinate space.\n   * @see {@link convertToViewportPoint}\n   */\n  convertToViewportRectangle(rect) {\n    const topLeft = Util.applyTransform([rect[0], rect[1]], this.transform);\n    const bottomRight = Util.applyTransform([rect[2], rect[3]], this.transform);\n    return [topLeft[0], topLeft[1], bottomRight[0], bottomRight[1]];\n  }\n\n  /**\n   * Converts viewport coordinates to the PDF location. For examples, useful\n   * for converting canvas pixel location into PDF one.\n   * @param {number} x - The x-coordinate.\n   * @param {number} y - The y-coordinate.\n   * @returns {Object} Object containing `x` and `y` properties of the\n   *   point in the PDF coordinate space.\n   * @see {@link convertToViewportPoint}\n   */\n  convertToPdfPoint(x, y) {\n    return Util.applyInverseTransform([x, y], this.transform);\n  }\n}\n\nclass RenderingCancelledException extends BaseException {\n  constructor(msg, type) {\n    super(msg, \"RenderingCancelledException\");\n    this.type = type;\n  }\n}\n\nfunction isDataScheme(url) {\n  const ii = url.length;\n  let i = 0;\n  while (i < ii && url[i].trim() === \"\") {\n    i++;\n  }\n  return url.substring(i, i + 5).toLowerCase() === \"data:\";\n}\n\nfunction isPdfFile(filename) {\n  return typeof filename === \"string\" && /\\.pdf$/i.test(filename);\n}\n\n/**\n * Gets the filename from a given URL.\n * @param {string} url\n * @returns {string}\n */\nfunction getFilenameFromUrl(url) {\n  const anchor = url.indexOf(\"#\");\n  const query = url.indexOf(\"?\");\n  const end = Math.min(\n    anchor > 0 ? anchor : url.length,\n    query > 0 ? query : url.length\n  );\n  return url.substring(url.lastIndexOf(\"/\", end) + 1, end);\n}\n\n/**\n * Returns the filename or guessed filename from the url (see issue 3455).\n * @param {string} url - The original PDF location.\n * @param {string} defaultFilename - The value returned if the filename is\n *   unknown, or the protocol is unsupported.\n * @returns {string} Guessed PDF filename.\n */\nfunction getPdfFilenameFromUrl(url, defaultFilename = \"document.pdf\") {\n  if (typeof url !== \"string\") {\n    return defaultFilename;\n  }\n  if (isDataScheme(url)) {\n    warn('getPdfFilenameFromUrl: ignore \"data:\"-URL for performance reasons.');\n    return defaultFilename;\n  }\n  const reURI = /^(?:(?:[^:]+:)?\\/\\/[^/]+)?([^?#]*)(\\?[^#]*)?(#.*)?$/;\n  //              SCHEME        HOST        1.PATH  2.QUERY   3.REF\n  // Pattern to get last matching NAME.pdf\n  const reFilename = /[^/?#=]+\\.pdf\\b(?!.*\\.pdf\\b)/i;\n  const splitURI = reURI.exec(url);\n  let suggestedFilename =\n    reFilename.exec(splitURI[1]) ||\n    reFilename.exec(splitURI[2]) ||\n    reFilename.exec(splitURI[3]);\n  if (suggestedFilename) {\n    suggestedFilename = suggestedFilename[0];\n    if (suggestedFilename.includes(\"%\")) {\n      // URL-encoded %2Fpath%2Fto%2Ffile.pdf should be file.pdf\n      try {\n        suggestedFilename = reFilename.exec(\n          decodeURIComponent(suggestedFilename)\n        )[0];\n      } catch (ex) {\n        // Possible (extremely rare) errors:\n        // URIError \"Malformed URI\", e.g. for \"%AA.pdf\"\n        // TypeError \"null has no properties\", e.g. for \"%2F.pdf\"\n      }\n    }\n  }\n  return suggestedFilename || defaultFilename;\n}\n\nclass StatTimer {\n  constructor() {\n    this.started = Object.create(null);\n    this.times = [];\n  }\n\n  time(name) {\n    if (name in this.started) {\n      warn(`Timer is already running for ${name}`);\n    }\n    this.started[name] = Date.now();\n  }\n\n  timeEnd(name) {\n    if (!(name in this.started)) {\n      warn(`Timer has not been started for ${name}`);\n    }\n    this.times.push({\n      name,\n      start: this.started[name],\n      end: Date.now(),\n    });\n    // Remove timer from started so it can be called again.\n    delete this.started[name];\n  }\n\n  toString() {\n    // Find the longest name for padding purposes.\n    const outBuf = [];\n    let longest = 0;\n    for (const time of this.times) {\n      const name = time.name;\n      if (name.length > longest) {\n        longest = name.length;\n      }\n    }\n    for (const time of this.times) {\n      const duration = time.end - time.start;\n      outBuf.push(`${time.name.padEnd(longest)} ${duration}ms\\n`);\n    }\n    return outBuf.join(\"\");\n  }\n}\n\nfunction isValidFetchUrl(url, baseUrl) {\n  try {\n    const { protocol } = baseUrl ? new URL(url, baseUrl) : new URL(url);\n    // The Fetch API only supports the http/https protocols, and not file/ftp.\n    return protocol === \"http:\" || protocol === \"https:\";\n  } catch (ex) {\n    return false; // `new URL()` will throw on incorrect data.\n  }\n}\n\n/**\n * @param {string} src\n * @param {boolean} [removeScriptElement]\n * @returns {Promise<void>}\n */\nfunction loadScript(src, removeScriptElement = false) {\n  return new Promise((resolve, reject) => {\n    const script = document.createElement(\"script\");\n    script.src = src;\n\n    script.onload = function (evt) {\n      if (removeScriptElement) {\n        script.remove();\n      }\n      resolve(evt);\n    };\n    script.onerror = function () {\n      reject(new Error(`Cannot load script at: ${script.src}`));\n    };\n    (document.head || document.documentElement).appendChild(script);\n  });\n}\n\n// Deprecated API function -- display regardless of the `verbosity` setting.\nfunction deprecated(details) {\n  console.log(\"Deprecated API usage: \" + details);\n}\n\nlet pdfDateStringRegex;\n\nclass PDFDateString {\n  /**\n   * Convert a PDF date string to a JavaScript `Date` object.\n   *\n   * The PDF date string format is described in section 7.9.4 of the official\n   * PDF 32000-1:2008 specification. However, in the PDF 1.7 reference (sixth\n   * edition) Adobe describes the same format including a trailing apostrophe.\n   * This syntax in incorrect, but Adobe Acrobat creates PDF files that contain\n   * them. We ignore all apostrophes as they are not necessary for date parsing.\n   *\n   * Moreover, Adobe Acrobat doesn't handle changing the date to universal time\n   * and doesn't use the user's time zone (effectively ignoring the HH' and mm'\n   * parts of the date string).\n   *\n   * @param {string} input\n   * @returns {Date|null}\n   */\n  static toDateObject(input) {\n    if (!input || typeof input !== \"string\") {\n      return null;\n    }\n\n    // Lazily initialize the regular expression.\n    if (!pdfDateStringRegex) {\n      pdfDateStringRegex = new RegExp(\n        \"^D:\" + // Prefix (required)\n          \"(\\\\d{4})\" + // Year (required)\n          \"(\\\\d{2})?\" + // Month (optional)\n          \"(\\\\d{2})?\" + // Day (optional)\n          \"(\\\\d{2})?\" + // Hour (optional)\n          \"(\\\\d{2})?\" + // Minute (optional)\n          \"(\\\\d{2})?\" + // Second (optional)\n          \"([Z|+|-])?\" + // Universal time relation (optional)\n          \"(\\\\d{2})?\" + // Offset hour (optional)\n          \"'?\" + // Splitting apostrophe (optional)\n          \"(\\\\d{2})?\" + // Offset minute (optional)\n          \"'?\" // Trailing apostrophe (optional)\n      );\n    }\n\n    // Optional fields that don't satisfy the requirements from the regular\n    // expression (such as incorrect digit counts or numbers that are out of\n    // range) will fall back the defaults from the specification.\n    const matches = pdfDateStringRegex.exec(input);\n    if (!matches) {\n      return null;\n    }\n\n    // JavaScript's `Date` object expects the month to be between 0 and 11\n    // instead of 1 and 12, so we have to correct for that.\n    const year = parseInt(matches[1], 10);\n    let month = parseInt(matches[2], 10);\n    month = month >= 1 && month <= 12 ? month - 1 : 0;\n    let day = parseInt(matches[3], 10);\n    day = day >= 1 && day <= 31 ? day : 1;\n    let hour = parseInt(matches[4], 10);\n    hour = hour >= 0 && hour <= 23 ? hour : 0;\n    let minute = parseInt(matches[5], 10);\n    minute = minute >= 0 && minute <= 59 ? minute : 0;\n    let second = parseInt(matches[6], 10);\n    second = second >= 0 && second <= 59 ? second : 0;\n    const universalTimeRelation = matches[7] || \"Z\";\n    let offsetHour = parseInt(matches[8], 10);\n    offsetHour = offsetHour >= 0 && offsetHour <= 23 ? offsetHour : 0;\n    let offsetMinute = parseInt(matches[9], 10) || 0;\n    offsetMinute = offsetMinute >= 0 && offsetMinute <= 59 ? offsetMinute : 0;\n\n    // Universal time relation 'Z' means that the local time is equal to the\n    // universal time, whereas the relations '+'/'-' indicate that the local\n    // time is later respectively earlier than the universal time. Every date\n    // is normalized to universal time.\n    if (universalTimeRelation === \"-\") {\n      hour += offsetHour;\n      minute += offsetMinute;\n    } else if (universalTimeRelation === \"+\") {\n      hour -= offsetHour;\n      minute -= offsetMinute;\n    }\n\n    return new Date(Date.UTC(year, month, day, hour, minute, second));\n  }\n}\n\n/**\n * NOTE: This is (mostly) intended to support printing of XFA forms.\n */\nfunction getXfaPageViewport(xfaPage, { scale = 1, rotation = 0 }) {\n  const { width, height } = xfaPage.attributes.style;\n  const viewBox = [0, 0, parseInt(width), parseInt(height)];\n\n  return new PageViewport({\n    viewBox,\n    scale,\n    rotation,\n  });\n}\n\nexport {\n  deprecated,\n  DOMCanvasFactory,\n  DOMCMapReaderFactory,\n  DOMStandardFontDataFactory,\n  DOMSVGFactory,\n  getFilenameFromUrl,\n  getPdfFilenameFromUrl,\n  getXfaPageViewport,\n  isDataScheme,\n  isPdfFile,\n  isValidFetchUrl,\n  loadScript,\n  PageViewport,\n  PDFDateString,\n  PixelsPerInch,\n  RenderingCancelledException,\n  StatTimer,\n};\n","/* Copyright 2015 Mozilla Foundation\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { CMapCompressionType, unreachable } from \"../shared/util.js\";\n\nclass BaseCanvasFactory {\n  constructor() {\n    if (this.constructor === BaseCanvasFactory) {\n      unreachable(\"Cannot initialize BaseCanvasFactory.\");\n    }\n  }\n\n  create(width, height) {\n    if (width <= 0 || height <= 0) {\n      throw new Error(\"Invalid canvas size\");\n    }\n    const canvas = this._createCanvas(width, height);\n    return {\n      canvas,\n      context: canvas.getContext(\"2d\"),\n    };\n  }\n\n  reset(canvasAndContext, width, height) {\n    if (!canvasAndContext.canvas) {\n      throw new Error(\"Canvas is not specified\");\n    }\n    if (width <= 0 || height <= 0) {\n      throw new Error(\"Invalid canvas size\");\n    }\n    canvasAndContext.canvas.width = width;\n    canvasAndContext.canvas.height = height;\n  }\n\n  destroy(canvasAndContext) {\n    if (!canvasAndContext.canvas) {\n      throw new Error(\"Canvas is not specified\");\n    }\n    // Zeroing the width and height cause Firefox to release graphics\n    // resources immediately, which can greatly reduce memory consumption.\n    canvasAndContext.canvas.width = 0;\n    canvasAndContext.canvas.height = 0;\n    canvasAndContext.canvas = null;\n    canvasAndContext.context = null;\n  }\n\n  /**\n   * @ignore\n   */\n  _createCanvas(width, height) {\n    unreachable(\"Abstract method `_createCanvas` called.\");\n  }\n}\n\nclass BaseCMapReaderFactory {\n  constructor({ baseUrl = null, isCompressed = false }) {\n    if (this.constructor === BaseCMapReaderFactory) {\n      unreachable(\"Cannot initialize BaseCMapReaderFactory.\");\n    }\n    this.baseUrl = baseUrl;\n    this.isCompressed = isCompressed;\n  }\n\n  async fetch({ name }) {\n    if (!this.baseUrl) {\n      throw new Error(\n        'The CMap \"baseUrl\" parameter must be specified, ensure that ' +\n          'the \"cMapUrl\" and \"cMapPacked\" API parameters are provided.'\n      );\n    }\n    if (!name) {\n      throw new Error(\"CMap name must be specified.\");\n    }\n    const url = this.baseUrl + name + (this.isCompressed ? \".bcmap\" : \"\");\n    const compressionType = this.isCompressed\n      ? CMapCompressionType.BINARY\n      : CMapCompressionType.NONE;\n\n    return this._fetchData(url, compressionType).catch(reason => {\n      throw new Error(\n        `Unable to load ${this.isCompressed ? \"binary \" : \"\"}CMap at: ${url}`\n      );\n    });\n  }\n\n  /**\n   * @ignore\n   */\n  _fetchData(url, compressionType) {\n    unreachable(\"Abstract method `_fetchData` called.\");\n  }\n}\n\nclass BaseStandardFontDataFactory {\n  constructor({ baseUrl = null }) {\n    if (this.constructor === BaseStandardFontDataFactory) {\n      unreachable(\"Cannot initialize BaseStandardFontDataFactory.\");\n    }\n    this.baseUrl = baseUrl;\n  }\n\n  async fetch({ filename }) {\n    if (!this.baseUrl) {\n      throw new Error(\n        'The standard font \"baseUrl\" parameter must be specified, ensure that ' +\n          'the \"standardFontDataUrl\" API parameter is provided.'\n      );\n    }\n    if (!filename) {\n      throw new Error(\"Font filename must be specified.\");\n    }\n    const url = `${this.baseUrl}${filename}`;\n\n    return this._fetchData(url).catch(reason => {\n      throw new Error(`Unable to load font data at: ${url}`);\n    });\n  }\n\n  /**\n   * @ignore\n   */\n  _fetchData(url) {\n    unreachable(\"Abstract method `_fetchData` called.\");\n  }\n}\n\nclass BaseSVGFactory {\n  constructor() {\n    if (this.constructor === BaseSVGFactory) {\n      unreachable(\"Cannot initialize BaseSVGFactory.\");\n    }\n  }\n\n  create(width, height) {\n    if (width <= 0 || height <= 0) {\n      throw new Error(\"Invalid SVG dimensions\");\n    }\n    const svg = this._createSVG(\"svg:svg\");\n    svg.setAttribute(\"version\", \"1.1\");\n    svg.setAttribute(\"width\", `${width}px`);\n    svg.setAttribute(\"height\", `${height}px`);\n    svg.setAttribute(\"preserveAspectRatio\", \"none\");\n    svg.setAttribute(\"viewBox\", `0 0 ${width} ${height}`);\n\n    return svg;\n  }\n\n  createElement(type) {\n    if (typeof type !== \"string\") {\n      throw new Error(\"Invalid SVG element type\");\n    }\n    return this._createSVG(type);\n  }\n\n  /**\n   * @ignore\n   */\n  _createSVG(type) {\n    unreachable(\"Abstract method `_createSVG` called.\");\n  }\n}\n\nexport {\n  BaseCanvasFactory,\n  BaseCMapReaderFactory,\n  BaseStandardFontDataFactory,\n  BaseSVGFactory,\n};\n","/* Copyright 2012 Mozilla Foundation\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport {\n  assert,\n  bytesToString,\n  FeatureTest,\n  shadow,\n  string32,\n  unreachable,\n  UNSUPPORTED_FEATURES,\n  warn,\n} from \"../shared/util.js\";\n\nclass BaseFontLoader {\n  constructor({\n    docId,\n    onUnsupportedFeature,\n    ownerDocument = globalThis.document,\n    // For testing only.\n    styleElement = null,\n  }) {\n    if (this.constructor === BaseFontLoader) {\n      unreachable(\"Cannot initialize BaseFontLoader.\");\n    }\n    this.docId = docId;\n    this._onUnsupportedFeature = onUnsupportedFeature;\n    this._document = ownerDocument;\n\n    this.nativeFontFaces = [];\n    this.styleElement =\n      typeof PDFJSDev === \"undefined\" || PDFJSDev.test(\"!PRODUCTION || TESTING\")\n        ? styleElement\n        : null;\n  }\n\n  addNativeFontFace(nativeFontFace) {\n    this.nativeFontFaces.push(nativeFontFace);\n    this._document.fonts.add(nativeFontFace);\n  }\n\n  insertRule(rule) {\n    let styleElement = this.styleElement;\n    if (!styleElement) {\n      styleElement = this.styleElement = this._document.createElement(\"style\");\n      styleElement.id = `PDFJS_FONT_STYLE_TAG_${this.docId}`;\n      this._document.documentElement\n        .getElementsByTagName(\"head\")[0]\n        .appendChild(styleElement);\n    }\n    const styleSheet = styleElement.sheet;\n    styleSheet.insertRule(rule, styleSheet.cssRules.length);\n  }\n\n  clear() {\n    for (const nativeFontFace of this.nativeFontFaces) {\n      this._document.fonts.delete(nativeFontFace);\n    }\n    this.nativeFontFaces.length = 0;\n\n    if (this.styleElement) {\n      // Note: ChildNode.remove doesn't throw if the parentNode is undefined.\n      this.styleElement.remove();\n      this.styleElement = null;\n    }\n  }\n\n  async bind(font) {\n    // Add the font to the DOM only once; skip if the font is already loaded.\n    if (font.attached || font.missingFile) {\n      return;\n    }\n    font.attached = true;\n\n    if (this.isFontLoadingAPISupported) {\n      const nativeFontFace = font.createNativeFontFace();\n      if (nativeFontFace) {\n        this.addNativeFontFace(nativeFontFace);\n        try {\n          await nativeFontFace.loaded;\n        } catch (ex) {\n          this._onUnsupportedFeature({\n            featureId: UNSUPPORTED_FEATURES.errorFontLoadNative,\n          });\n          warn(`Failed to load font '${nativeFontFace.family}': '${ex}'.`);\n\n          // When font loading failed, fall back to the built-in font renderer.\n          font.disableFontFace = true;\n          throw ex;\n        }\n      }\n      return; // The font was, asynchronously, loaded.\n    }\n\n    // !this.isFontLoadingAPISupported\n    const rule = font.createFontFaceRule();\n    if (rule) {\n      this.insertRule(rule);\n\n      if (this.isSyncFontLoadingSupported) {\n        return; // The font was, synchronously, loaded.\n      }\n      await new Promise(resolve => {\n        const request = this._queueLoadingCallback(resolve);\n        this._prepareFontLoadEvent([rule], [font], request);\n      });\n      // The font was, asynchronously, loaded.\n    }\n  }\n\n  _queueLoadingCallback(callback) {\n    unreachable(\"Abstract method `_queueLoadingCallback`.\");\n  }\n\n  get isFontLoadingAPISupported() {\n    const hasFonts = !!this._document?.fonts;\n    if (\n      typeof PDFJSDev === \"undefined\" ||\n      PDFJSDev.test(\"!PRODUCTION || TESTING\")\n    ) {\n      return shadow(\n        this,\n        \"isFontLoadingAPISupported\",\n        hasFonts && !this.styleElement\n      );\n    }\n    return shadow(this, \"isFontLoadingAPISupported\", hasFonts);\n  }\n\n  // eslint-disable-next-line getter-return\n  get isSyncFontLoadingSupported() {\n    unreachable(\"Abstract method `isSyncFontLoadingSupported`.\");\n  }\n\n  // eslint-disable-next-line getter-return\n  get _loadTestFont() {\n    unreachable(\"Abstract method `_loadTestFont`.\");\n  }\n\n  _prepareFontLoadEvent(rules, fontsToLoad, request) {\n    unreachable(\"Abstract method `_prepareFontLoadEvent`.\");\n  }\n}\n\nlet FontLoader;\nif (typeof PDFJSDev !== \"undefined\" && PDFJSDev.test(\"MOZCENTRAL\")) {\n  FontLoader = class MozcentralFontLoader extends BaseFontLoader {\n    get isSyncFontLoadingSupported() {\n      return shadow(this, \"isSyncFontLoadingSupported\", true);\n    }\n  };\n} else {\n  // PDFJSDev.test('CHROME || GENERIC')\n\n  FontLoader = class GenericFontLoader extends BaseFontLoader {\n    constructor(params) {\n      super(params);\n      this.loadingContext = {\n        requests: [],\n        nextRequestId: 0,\n      };\n      this.loadTestFontId = 0;\n    }\n\n    get isSyncFontLoadingSupported() {\n      let supported = false;\n      if (typeof PDFJSDev === \"undefined\" || !PDFJSDev.test(\"CHROME\")) {\n        if (typeof navigator === \"undefined\") {\n          // Node.js - we can pretend that sync font loading is supported.\n          supported = true;\n        } else {\n          // User agent string sniffing is bad, but there is no reliable way to\n          // tell if the font is fully loaded and ready to be used with canvas.\n          const m = /Mozilla\\/5.0.*?rv:(\\d+).*? Gecko/.exec(\n            navigator.userAgent\n          );\n          if (m?.[1] >= 14) {\n            supported = true;\n          }\n          // TODO - other browsers...\n        }\n      }\n      return shadow(this, \"isSyncFontLoadingSupported\", supported);\n    }\n\n    _queueLoadingCallback(callback) {\n      function completeRequest() {\n        assert(!request.done, \"completeRequest() cannot be called twice.\");\n        request.done = true;\n\n        // Sending all completed requests in order of how they were queued.\n        while (context.requests.length > 0 && context.requests[0].done) {\n          const otherRequest = context.requests.shift();\n          setTimeout(otherRequest.callback, 0);\n        }\n      }\n\n      const context = this.loadingContext;\n      const request = {\n        id: `pdfjs-font-loading-${context.nextRequestId++}`,\n        done: false,\n        complete: completeRequest,\n        callback,\n      };\n      context.requests.push(request);\n      return request;\n    }\n\n    get _loadTestFont() {\n      const getLoadTestFont = function () {\n        // This is a CFF font with 1 glyph for '.' that fills its entire width\n        // and height.\n        return atob(\n          \"T1RUTwALAIAAAwAwQ0ZGIDHtZg4AAAOYAAAAgUZGVE1lkzZwAAAEHAAAABxHREVGABQA\" +\n            \"FQAABDgAAAAeT1MvMlYNYwkAAAEgAAAAYGNtYXABDQLUAAACNAAAAUJoZWFk/xVFDQAA\" +\n            \"ALwAAAA2aGhlYQdkA+oAAAD0AAAAJGhtdHgD6AAAAAAEWAAAAAZtYXhwAAJQAAAAARgA\" +\n            \"AAAGbmFtZVjmdH4AAAGAAAAAsXBvc3T/hgAzAAADeAAAACAAAQAAAAEAALZRFsRfDzz1\" +\n            \"AAsD6AAAAADOBOTLAAAAAM4KHDwAAAAAA+gDIQAAAAgAAgAAAAAAAAABAAADIQAAAFoD\" +\n            \"6AAAAAAD6AABAAAAAAAAAAAAAAAAAAAAAQAAUAAAAgAAAAQD6AH0AAUAAAKKArwAAACM\" +\n            \"AooCvAAAAeAAMQECAAACAAYJAAAAAAAAAAAAAQAAAAAAAAAAAAAAAFBmRWQAwAAuAC4D\" +\n            \"IP84AFoDIQAAAAAAAQAAAAAAAAAAACAAIAABAAAADgCuAAEAAAAAAAAAAQAAAAEAAAAA\" +\n            \"AAEAAQAAAAEAAAAAAAIAAQAAAAEAAAAAAAMAAQAAAAEAAAAAAAQAAQAAAAEAAAAAAAUA\" +\n            \"AQAAAAEAAAAAAAYAAQAAAAMAAQQJAAAAAgABAAMAAQQJAAEAAgABAAMAAQQJAAIAAgAB\" +\n            \"AAMAAQQJAAMAAgABAAMAAQQJAAQAAgABAAMAAQQJAAUAAgABAAMAAQQJAAYAAgABWABY\" +\n            \"AAAAAAAAAwAAAAMAAAAcAAEAAAAAADwAAwABAAAAHAAEACAAAAAEAAQAAQAAAC7//wAA\" +\n            \"AC7////TAAEAAAAAAAABBgAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA\" +\n            \"AAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA\" +\n            \"AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA\" +\n            \"AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA\" +\n            \"AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA\" +\n            \"AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAAAAAD/gwAyAAAAAQAAAAAAAAAAAAAAAAAA\" +\n            \"AAABAAQEAAEBAQJYAAEBASH4DwD4GwHEAvgcA/gXBIwMAYuL+nz5tQXkD5j3CBLnEQAC\" +\n            \"AQEBIVhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYAAABAQAADwACAQEEE/t3\" +\n            \"Dov6fAH6fAT+fPp8+nwHDosMCvm1Cvm1DAz6fBQAAAAAAAABAAAAAMmJbzEAAAAAzgTj\" +\n            \"FQAAAADOBOQpAAEAAAAAAAAADAAUAAQAAAABAAAAAgABAAAAAAAAAAAD6AAAAAAAAA==\"\n        );\n      };\n      return shadow(this, \"_loadTestFont\", getLoadTestFont());\n    }\n\n    _prepareFontLoadEvent(rules, fonts, request) {\n      /** Hack begin */\n      // There's currently no event when a font has finished downloading so the\n      // following code is a dirty hack to 'guess' when a font is ready.\n      // It's assumed fonts are loaded in order, so add a known test font after\n      // the desired fonts and then test for the loading of that test font.\n\n      function int32(data, offset) {\n        return (\n          (data.charCodeAt(offset) << 24) |\n          (data.charCodeAt(offset + 1) << 16) |\n          (data.charCodeAt(offset + 2) << 8) |\n          (data.charCodeAt(offset + 3) & 0xff)\n        );\n      }\n      function spliceString(s, offset, remove, insert) {\n        const chunk1 = s.substring(0, offset);\n        const chunk2 = s.substring(offset + remove);\n        return chunk1 + insert + chunk2;\n      }\n      let i, ii;\n\n      // The temporary canvas is used to determine if fonts are loaded.\n      const canvas = this._document.createElement(\"canvas\");\n      canvas.width = 1;\n      canvas.height = 1;\n      const ctx = canvas.getContext(\"2d\");\n\n      let called = 0;\n      function isFontReady(name, callback) {\n        called++;\n        // With setTimeout clamping this gives the font ~100ms to load.\n        if (called > 30) {\n          warn(\"Load test font never loaded.\");\n          callback();\n          return;\n        }\n        ctx.font = \"30px \" + name;\n        ctx.fillText(\".\", 0, 20);\n        const imageData = ctx.getImageData(0, 0, 1, 1);\n        if (imageData.data[3] > 0) {\n          callback();\n          return;\n        }\n        setTimeout(isFontReady.bind(null, name, callback));\n      }\n\n      const loadTestFontId = `lt${Date.now()}${this.loadTestFontId++}`;\n      // Chromium seems to cache fonts based on a hash of the actual font data,\n      // so the font must be modified for each load test else it will appear to\n      // be loaded already.\n      // TODO: This could maybe be made faster by avoiding the btoa of the full\n      // font by splitting it in chunks before hand and padding the font id.\n      let data = this._loadTestFont;\n      const COMMENT_OFFSET = 976; // has to be on 4 byte boundary (for checksum)\n      data = spliceString(\n        data,\n        COMMENT_OFFSET,\n        loadTestFontId.length,\n        loadTestFontId\n      );\n      // CFF checksum is important for IE, adjusting it\n      const CFF_CHECKSUM_OFFSET = 16;\n      const XXXX_VALUE = 0x58585858; // the \"comment\" filled with 'X'\n      let checksum = int32(data, CFF_CHECKSUM_OFFSET);\n      for (i = 0, ii = loadTestFontId.length - 3; i < ii; i += 4) {\n        checksum = (checksum - XXXX_VALUE + int32(loadTestFontId, i)) | 0;\n      }\n      if (i < loadTestFontId.length) {\n        // align to 4 bytes boundary\n        checksum =\n          (checksum - XXXX_VALUE + int32(loadTestFontId + \"XXX\", i)) | 0;\n      }\n      data = spliceString(data, CFF_CHECKSUM_OFFSET, 4, string32(checksum));\n\n      const url = `url(data:font/opentype;base64,${btoa(data)});`;\n      const rule = `@font-face {font-family:\"${loadTestFontId}\";src:${url}}`;\n      this.insertRule(rule);\n\n      const names = [];\n      for (const font of fonts) {\n        names.push(font.loadedName);\n      }\n      names.push(loadTestFontId);\n\n      const div = this._document.createElement(\"div\");\n      div.style.visibility = \"hidden\";\n      div.style.width = div.style.height = \"10px\";\n      div.style.position = \"absolute\";\n      div.style.top = div.style.left = \"0px\";\n\n      for (const name of names) {\n        const span = this._document.createElement(\"span\");\n        span.textContent = \"Hi\";\n        span.style.fontFamily = name;\n        div.appendChild(span);\n      }\n      this._document.body.appendChild(div);\n\n      isFontReady(loadTestFontId, () => {\n        div.remove();\n        request.complete();\n      });\n      /** Hack end */\n    }\n  };\n} // End of PDFJSDev.test('CHROME || GENERIC')\n\nclass FontFaceObject {\n  constructor(\n    translatedData,\n    {\n      isEvalSupported = true,\n      disableFontFace = false,\n      ignoreErrors = false,\n      onUnsupportedFeature,\n      fontRegistry = null,\n    }\n  ) {\n    this.compiledGlyphs = Object.create(null);\n    // importing translated data\n    for (const i in translatedData) {\n      this[i] = translatedData[i];\n    }\n    this.isEvalSupported = isEvalSupported !== false;\n    this.disableFontFace = disableFontFace === true;\n    this.ignoreErrors = ignoreErrors === true;\n    this._onUnsupportedFeature = onUnsupportedFeature;\n    this.fontRegistry = fontRegistry;\n  }\n\n  createNativeFontFace() {\n    if (!this.data || this.disableFontFace) {\n      return null;\n    }\n    let nativeFontFace;\n    if (!this.cssFontInfo) {\n      nativeFontFace = new FontFace(this.loadedName, this.data, {});\n    } else {\n      const css = {\n        weight: this.cssFontInfo.fontWeight,\n      };\n      if (this.cssFontInfo.italicAngle) {\n        css.style = `oblique ${this.cssFontInfo.italicAngle}deg`;\n      }\n      nativeFontFace = new FontFace(\n        this.cssFontInfo.fontFamily,\n        this.data,\n        css\n      );\n    }\n\n    if (this.fontRegistry) {\n      this.fontRegistry.registerFont(this);\n    }\n    return nativeFontFace;\n  }\n\n  createFontFaceRule() {\n    if (!this.data || this.disableFontFace) {\n      return null;\n    }\n    const data = bytesToString(this.data);\n    // Add the @font-face rule to the document.\n    const url = `url(data:${this.mimetype};base64,${btoa(data)});`;\n    let rule;\n    if (!this.cssFontInfo) {\n      rule = `@font-face {font-family:\"${this.loadedName}\";src:${url}}`;\n    } else {\n      let css = `font-weight: ${this.cssFontInfo.fontWeight};`;\n      if (this.cssFontInfo.italicAngle) {\n        css += `font-style: oblique ${this.cssFontInfo.italicAngle}deg;`;\n      }\n      rule = `@font-face {font-family:\"${this.cssFontInfo.fontFamily}\";${css}src:${url}}`;\n    }\n\n    if (this.fontRegistry) {\n      this.fontRegistry.registerFont(this, url);\n    }\n    return rule;\n  }\n\n  getPathGenerator(objs, character) {\n    if (this.compiledGlyphs[character] !== undefined) {\n      return this.compiledGlyphs[character];\n    }\n\n    let cmds;\n    try {\n      cmds = objs.get(this.loadedName + \"_path_\" + character);\n    } catch (ex) {\n      if (!this.ignoreErrors) {\n        throw ex;\n      }\n      this._onUnsupportedFeature({\n        featureId: UNSUPPORTED_FEATURES.errorFontGetPath,\n      });\n      warn(`getPathGenerator - ignoring character: \"${ex}\".`);\n\n      return (this.compiledGlyphs[character] = function (c, size) {\n        // No-op function, to allow rendering to continue.\n      });\n    }\n\n    // If we can, compile cmds into JS for MAXIMUM SPEED...\n    if (this.isEvalSupported && FeatureTest.isEvalSupported) {\n      const jsBuf = [];\n      for (const current of cmds) {\n        const args = current.args !== undefined ? current.args.join(\",\") : \"\";\n        jsBuf.push(\"c.\", current.cmd, \"(\", args, \");\\n\");\n      }\n      // eslint-disable-next-line no-new-func\n      return (this.compiledGlyphs[character] = new Function(\n        \"c\",\n        \"size\",\n        jsBuf.join(\"\")\n      ));\n    }\n    // ... but fall back on using Function.prototype.apply() if we're\n    // blocked from using eval() for whatever reason (like CSP policies).\n    return (this.compiledGlyphs[character] = function (c, size) {\n      for (const current of cmds) {\n        if (current.cmd === \"scale\") {\n          current.args = [size, -size];\n        }\n        c[current.cmd].apply(c, current.args);\n      }\n    });\n  }\n}\n\nexport { FontFaceObject, FontLoader };\n","/* Copyright 2020 Mozilla Foundation\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { MurmurHash3_64 } from \"../shared/murmurhash3.js\";\nimport { objectFromMap } from \"../shared/util.js\";\n\n/**\n * Key/value storage for annotation data in forms.\n */\nclass AnnotationStorage {\n  constructor() {\n    this._storage = new Map();\n    this._modified = false;\n\n    // Callbacks to signal when the modification state is set or reset.\n    // This is used by the viewer to only bind on `beforeunload` if forms\n    // are actually edited to prevent doing so unconditionally since that\n    // can have undesirable effects.\n    this.onSetModified = null;\n    this.onResetModified = null;\n  }\n\n  /**\n   * Get the value for a given key if it exists, or return the default value.\n   *\n   * @public\n   * @memberof AnnotationStorage\n   * @param {string} key\n   * @param {Object} defaultValue\n   * @returns {Object}\n   */\n  getValue(key, defaultValue) {\n    const value = this._storage.get(key);\n    if (value === undefined) {\n      return defaultValue;\n    }\n\n    return Object.assign(defaultValue, value);\n  }\n\n  /**\n   * Get the value for a given key.\n   *\n   * @public\n   * @memberof AnnotationStorage\n   * @param {string} key\n   * @returns {Object}\n   */\n  getRawValue(key) {\n    return this._storage.get(key);\n  }\n\n  /**\n   * Set the value for a given key\n   *\n   * @public\n   * @memberof AnnotationStorage\n   * @param {string} key\n   * @param {Object} value\n   */\n  setValue(key, value) {\n    const obj = this._storage.get(key);\n    let modified = false;\n    if (obj !== undefined) {\n      for (const [entry, val] of Object.entries(value)) {\n        if (obj[entry] !== val) {\n          modified = true;\n          obj[entry] = val;\n        }\n      }\n    } else {\n      modified = true;\n      this._storage.set(key, value);\n    }\n    if (modified) {\n      this._setModified();\n    }\n  }\n\n  getAll() {\n    return this._storage.size > 0 ? objectFromMap(this._storage) : null;\n  }\n\n  get size() {\n    return this._storage.size;\n  }\n\n  /**\n   * @private\n   */\n  _setModified() {\n    if (!this._modified) {\n      this._modified = true;\n      if (typeof this.onSetModified === \"function\") {\n        this.onSetModified();\n      }\n    }\n  }\n\n  resetModified() {\n    if (this._modified) {\n      this._modified = false;\n      if (typeof this.onResetModified === \"function\") {\n        this.onResetModified();\n      }\n    }\n  }\n\n  /**\n   * PLEASE NOTE: Only intended for usage within the API itself.\n   * @ignore\n   */\n  get serializable() {\n    return this._storage.size > 0 ? this._storage : null;\n  }\n\n  /**\n   * PLEASE NOTE: Only intended for usage within the API itself.\n   * @ignore\n   */\n  get hash() {\n    const hash = new MurmurHash3_64();\n\n    for (const [key, value] of this._storage) {\n      hash.update(`${key}:${JSON.stringify(value)}`);\n    }\n    return hash.hexdigest();\n  }\n}\n\nexport { AnnotationStorage };\n","/* Copyright 2014 Opera Software ASA\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n *\n *\n * Based on https://code.google.com/p/smhasher/wiki/MurmurHash3.\n * Hashes roughly 100 KB per millisecond on i7 3.4 GHz.\n */\n\nimport { isArrayBuffer } from \"./util.js\";\n\nconst SEED = 0xc3d2e1f0;\n// Workaround for missing math precision in JS.\nconst MASK_HIGH = 0xffff0000;\nconst MASK_LOW = 0xffff;\n\nclass MurmurHash3_64 {\n  constructor(seed) {\n    this.h1 = seed ? seed & 0xffffffff : SEED;\n    this.h2 = seed ? seed & 0xffffffff : SEED;\n  }\n\n  update(input) {\n    let data, length;\n    if (typeof input === \"string\") {\n      data = new Uint8Array(input.length * 2);\n      length = 0;\n      for (let i = 0, ii = input.length; i < ii; i++) {\n        const code = input.charCodeAt(i);\n        if (code <= 0xff) {\n          data[length++] = code;\n        } else {\n          data[length++] = code >>> 8;\n          data[length++] = code & 0xff;\n        }\n      }\n    } else if (isArrayBuffer(input)) {\n      data = input.slice();\n      length = data.byteLength;\n    } else {\n      throw new Error(\n        \"Wrong data format in MurmurHash3_64_update. \" +\n          \"Input must be a string or array.\"\n      );\n    }\n\n    const blockCounts = length >> 2;\n    const tailLength = length - blockCounts * 4;\n    // We don't care about endianness here.\n    const dataUint32 = new Uint32Array(data.buffer, 0, blockCounts);\n    let k1 = 0,\n      k2 = 0;\n    let h1 = this.h1,\n      h2 = this.h2;\n    const C1 = 0xcc9e2d51,\n      C2 = 0x1b873593;\n    const C1_LOW = C1 & MASK_LOW,\n      C2_LOW = C2 & MASK_LOW;\n\n    for (let i = 0; i < blockCounts; i++) {\n      if (i & 1) {\n        k1 = dataUint32[i];\n        k1 = ((k1 * C1) & MASK_HIGH) | ((k1 * C1_LOW) & MASK_LOW);\n        k1 = (k1 << 15) | (k1 >>> 17);\n        k1 = ((k1 * C2) & MASK_HIGH) | ((k1 * C2_LOW) & MASK_LOW);\n        h1 ^= k1;\n        h1 = (h1 << 13) | (h1 >>> 19);\n        h1 = h1 * 5 + 0xe6546b64;\n      } else {\n        k2 = dataUint32[i];\n        k2 = ((k2 * C1) & MASK_HIGH) | ((k2 * C1_LOW) & MASK_LOW);\n        k2 = (k2 << 15) | (k2 >>> 17);\n        k2 = ((k2 * C2) & MASK_HIGH) | ((k2 * C2_LOW) & MASK_LOW);\n        h2 ^= k2;\n        h2 = (h2 << 13) | (h2 >>> 19);\n        h2 = h2 * 5 + 0xe6546b64;\n      }\n    }\n\n    k1 = 0;\n\n    switch (tailLength) {\n      case 3:\n        k1 ^= data[blockCounts * 4 + 2] << 16;\n      /* falls through */\n      case 2:\n        k1 ^= data[blockCounts * 4 + 1] << 8;\n      /* falls through */\n      case 1:\n        k1 ^= data[blockCounts * 4];\n        /* falls through */\n\n        k1 = ((k1 * C1) & MASK_HIGH) | ((k1 * C1_LOW) & MASK_LOW);\n        k1 = (k1 << 15) | (k1 >>> 17);\n        k1 = ((k1 * C2) & MASK_HIGH) | ((k1 * C2_LOW) & MASK_LOW);\n        if (blockCounts & 1) {\n          h1 ^= k1;\n        } else {\n          h2 ^= k1;\n        }\n    }\n\n    this.h1 = h1;\n    this.h2 = h2;\n  }\n\n  hexdigest() {\n    let h1 = this.h1,\n      h2 = this.h2;\n\n    h1 ^= h2 >>> 1;\n    h1 = ((h1 * 0xed558ccd) & MASK_HIGH) | ((h1 * 0x8ccd) & MASK_LOW);\n    h2 =\n      ((h2 * 0xff51afd7) & MASK_HIGH) |\n      (((((h2 << 16) | (h1 >>> 16)) * 0xafd7ed55) & MASK_HIGH) >>> 16);\n    h1 ^= h2 >>> 1;\n    h1 = ((h1 * 0x1a85ec53) & MASK_HIGH) | ((h1 * 0xec53) & MASK_LOW);\n    h2 =\n      ((h2 * 0xc4ceb9fe) & MASK_HIGH) |\n      (((((h2 << 16) | (h1 >>> 16)) * 0xb9fe1a85) & MASK_HIGH) >>> 16);\n    h1 ^= h2 >>> 1;\n\n    const hex1 = (h1 >>> 0).toString(16),\n      hex2 = (h2 >>> 0).toString(16);\n    return hex1.padStart(8, \"0\") + hex2.padStart(8, \"0\");\n  }\n}\n\nexport { MurmurHash3_64 };\n","/* Copyright 2012 Mozilla Foundation\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport {\n  FeatureTest,\n  FONT_IDENTITY_MATRIX,\n  IDENTITY_MATRIX,\n  ImageKind,\n  info,\n  OPS,\n  shadow,\n  TextRenderingMode,\n  unreachable,\n  Util,\n  warn,\n} from \"../shared/util.js\";\nimport {\n  getShadingPattern,\n  PathType,\n  TilingPattern,\n} from \"./pattern_helper.js\";\nimport { applyMaskImageData } from \"../shared/image_utils.js\";\nimport { isNodeJS } from \"../shared/is_node.js\";\nimport { PixelsPerInch } from \"./display_utils.js\";\n\n// <canvas> contexts store most of the state we need natively.\n// However, PDF needs a bit more state, which we store here.\n// Minimal font size that would be used during canvas fillText operations.\nconst MIN_FONT_SIZE = 16;\n// Maximum font size that would be used during canvas fillText operations.\nconst MAX_FONT_SIZE = 100;\nconst MAX_GROUP_SIZE = 4096;\n\n// Defines the time the `executeOperatorList`-method is going to be executing\n// before it stops and schedules a continue of execution.\nconst EXECUTION_TIME = 15; // ms\n// Defines the number of steps before checking the execution time.\nconst EXECUTION_STEPS = 10;\n\nconst COMPILE_TYPE3_GLYPHS = true;\nconst MAX_SIZE_TO_COMPILE = 1000;\n\nconst FULL_CHUNK_HEIGHT = 16;\n\n// Because of https://bugs.chromium.org/p/chromium/issues/detail?id=1170396\n// some curves aren't rendered correctly.\n// Multiplying lineWidth by this factor should help to have \"correct\"\n// rendering with no artifacts.\n// Once the bug is fixed upstream, we can remove this constant and its use.\nconst LINEWIDTH_SCALE_FACTOR = 1.000001;\n\n/**\n * Overrides certain methods on a 2d ctx so that when they are called they\n * will also call the same method on the destCtx. The methods that are\n * overridden are all the transformation state modifiers, path creation, and\n * save/restore. We only forward these specific methods because they are the\n * only state modifiers that we cannot copy over when we switch contexts.\n *\n * To remove mirroring call `ctx._removeMirroring()`.\n *\n * @param {Object} ctx - The 2d canvas context that will duplicate its calls on\n *   the destCtx.\n * @param {Object} destCtx - The 2d canvas context that will receive the\n *   forwarded calls.\n */\nfunction mirrorContextOperations(ctx, destCtx) {\n  if (ctx._removeMirroring) {\n    throw new Error(\"Context is already forwarding operations.\");\n  }\n  ctx.__originalSave = ctx.save;\n  ctx.__originalRestore = ctx.restore;\n  ctx.__originalRotate = ctx.rotate;\n  ctx.__originalScale = ctx.scale;\n  ctx.__originalTranslate = ctx.translate;\n  ctx.__originalTransform = ctx.transform;\n  ctx.__originalSetTransform = ctx.setTransform;\n  ctx.__originalResetTransform = ctx.resetTransform;\n  ctx.__originalClip = ctx.clip;\n  ctx.__originalMoveTo = ctx.moveTo;\n  ctx.__originalLineTo = ctx.lineTo;\n  ctx.__originalBezierCurveTo = ctx.bezierCurveTo;\n  ctx.__originalRect = ctx.rect;\n  ctx.__originalClosePath = ctx.closePath;\n  ctx.__originalBeginPath = ctx.beginPath;\n\n  ctx._removeMirroring = () => {\n    ctx.save = ctx.__originalSave;\n    ctx.restore = ctx.__originalRestore;\n    ctx.rotate = ctx.__originalRotate;\n    ctx.scale = ctx.__originalScale;\n    ctx.translate = ctx.__originalTranslate;\n    ctx.transform = ctx.__originalTransform;\n    ctx.setTransform = ctx.__originalSetTransform;\n    ctx.resetTransform = ctx.__originalResetTransform;\n\n    ctx.clip = ctx.__originalClip;\n    ctx.moveTo = ctx.__originalMoveTo;\n    ctx.lineTo = ctx.__originalLineTo;\n    ctx.bezierCurveTo = ctx.__originalBezierCurveTo;\n    ctx.rect = ctx.__originalRect;\n    ctx.closePath = ctx.__originalClosePath;\n    ctx.beginPath = ctx.__originalBeginPath;\n    delete ctx._removeMirroring;\n  };\n\n  ctx.save = function ctxSave() {\n    destCtx.save();\n    this.__originalSave();\n  };\n\n  ctx.restore = function ctxRestore() {\n    destCtx.restore();\n    this.__originalRestore();\n  };\n\n  ctx.translate = function ctxTranslate(x, y) {\n    destCtx.translate(x, y);\n    this.__originalTranslate(x, y);\n  };\n\n  ctx.scale = function ctxScale(x, y) {\n    destCtx.scale(x, y);\n    this.__originalScale(x, y);\n  };\n\n  ctx.transform = function ctxTransform(a, b, c, d, e, f) {\n    destCtx.transform(a, b, c, d, e, f);\n    this.__originalTransform(a, b, c, d, e, f);\n  };\n\n  ctx.setTransform = function ctxSetTransform(a, b, c, d, e, f) {\n    destCtx.setTransform(a, b, c, d, e, f);\n    this.__originalSetTransform(a, b, c, d, e, f);\n  };\n\n  ctx.resetTransform = function ctxResetTransform() {\n    destCtx.resetTransform();\n    this.__originalResetTransform();\n  };\n\n  ctx.rotate = function ctxRotate(angle) {\n    destCtx.rotate(angle);\n    this.__originalRotate(angle);\n  };\n\n  ctx.clip = function ctxRotate(rule) {\n    destCtx.clip(rule);\n    this.__originalClip(rule);\n  };\n\n  ctx.moveTo = function (x, y) {\n    destCtx.moveTo(x, y);\n    this.__originalMoveTo(x, y);\n  };\n\n  ctx.lineTo = function (x, y) {\n    destCtx.lineTo(x, y);\n    this.__originalLineTo(x, y);\n  };\n\n  ctx.bezierCurveTo = function (cp1x, cp1y, cp2x, cp2y, x, y) {\n    destCtx.bezierCurveTo(cp1x, cp1y, cp2x, cp2y, x, y);\n    this.__originalBezierCurveTo(cp1x, cp1y, cp2x, cp2y, x, y);\n  };\n\n  ctx.rect = function (x, y, width, height) {\n    destCtx.rect(x, y, width, height);\n    this.__originalRect(x, y, width, height);\n  };\n\n  ctx.closePath = function () {\n    destCtx.closePath();\n    this.__originalClosePath();\n  };\n\n  ctx.beginPath = function () {\n    destCtx.beginPath();\n    this.__originalBeginPath();\n  };\n}\n\nfunction addContextCurrentTransform(ctx) {\n  if (ctx._transformStack) {\n    // Reset the transform stack.\n    ctx._transformStack = [];\n  }\n  // If the context doesn't expose a `mozCurrentTransform`, add a JS based one.\n  if (ctx.mozCurrentTransform) {\n    return;\n  }\n  ctx._originalSave = ctx.save;\n  ctx._originalRestore = ctx.restore;\n  ctx._originalRotate = ctx.rotate;\n  ctx._originalScale = ctx.scale;\n  ctx._originalTranslate = ctx.translate;\n  ctx._originalTransform = ctx.transform;\n  ctx._originalSetTransform = ctx.setTransform;\n  ctx._originalResetTransform = ctx.resetTransform;\n\n  ctx._transformMatrix = ctx._transformMatrix || [1, 0, 0, 1, 0, 0];\n  ctx._transformStack = [];\n\n  try {\n    // The call to getOwnPropertyDescriptor throws an exception in Node.js:\n    // \"TypeError: Method lineWidth called on incompatible receiver\n    //  #<CanvasRenderingContext2D>\".\n    const desc = Object.getOwnPropertyDescriptor(\n      Object.getPrototypeOf(ctx),\n      \"lineWidth\"\n    );\n\n    ctx._setLineWidth = desc.set;\n    ctx._getLineWidth = desc.get;\n\n    Object.defineProperty(ctx, \"lineWidth\", {\n      set: function setLineWidth(width) {\n        this._setLineWidth(width * LINEWIDTH_SCALE_FACTOR);\n      },\n      get: function getLineWidth() {\n        return this._getLineWidth();\n      },\n    });\n  } catch (_) {}\n\n  Object.defineProperty(ctx, \"mozCurrentTransform\", {\n    get: function getCurrentTransform() {\n      return this._transformMatrix;\n    },\n  });\n\n  Object.defineProperty(ctx, \"mozCurrentTransformInverse\", {\n    get: function getCurrentTransformInverse() {\n      // Calculation done using WolframAlpha:\n      // http://www.wolframalpha.com/input/?\n      //   i=Inverse+{{a%2C+c%2C+e}%2C+{b%2C+d%2C+f}%2C+{0%2C+0%2C+1}}\n\n      const [a, b, c, d, e, f] = this._transformMatrix;\n      const ad_bc = a * d - b * c;\n      const bc_ad = b * c - a * d;\n\n      return [\n        d / ad_bc,\n        b / bc_ad,\n        c / bc_ad,\n        a / ad_bc,\n        (d * e - c * f) / bc_ad,\n        (b * e - a * f) / ad_bc,\n      ];\n    },\n  });\n\n  ctx.save = function ctxSave() {\n    const old = this._transformMatrix;\n    this._transformStack.push(old);\n    this._transformMatrix = old.slice(0, 6);\n\n    this._originalSave();\n  };\n\n  ctx.restore = function ctxRestore() {\n    if (this._transformStack.length === 0) {\n      warn(\"Tried to restore a ctx when the stack was already empty.\");\n    }\n    const prev = this._transformStack.pop();\n    if (prev) {\n      this._transformMatrix = prev;\n      this._originalRestore();\n    }\n  };\n\n  ctx.translate = function ctxTranslate(x, y) {\n    const m = this._transformMatrix;\n    m[4] = m[0] * x + m[2] * y + m[4];\n    m[5] = m[1] * x + m[3] * y + m[5];\n\n    this._originalTranslate(x, y);\n  };\n\n  ctx.scale = function ctxScale(x, y) {\n    const m = this._transformMatrix;\n    m[0] *= x;\n    m[1] *= x;\n    m[2] *= y;\n    m[3] *= y;\n\n    this._originalScale(x, y);\n  };\n\n  ctx.transform = function ctxTransform(a, b, c, d, e, f) {\n    const m = this._transformMatrix;\n    this._transformMatrix = [\n      m[0] * a + m[2] * b,\n      m[1] * a + m[3] * b,\n      m[0] * c + m[2] * d,\n      m[1] * c + m[3] * d,\n      m[0] * e + m[2] * f + m[4],\n      m[1] * e + m[3] * f + m[5],\n    ];\n\n    ctx._originalTransform(a, b, c, d, e, f);\n  };\n\n  ctx.setTransform = function ctxSetTransform(a, b, c, d, e, f) {\n    this._transformMatrix = [a, b, c, d, e, f];\n\n    ctx._originalSetTransform(a, b, c, d, e, f);\n  };\n\n  ctx.resetTransform = function ctxResetTransform() {\n    this._transformMatrix = [1, 0, 0, 1, 0, 0];\n\n    ctx._originalResetTransform();\n  };\n\n  ctx.rotate = function ctxRotate(angle) {\n    const cosValue = Math.cos(angle);\n    const sinValue = Math.sin(angle);\n\n    const m = this._transformMatrix;\n    this._transformMatrix = [\n      m[0] * cosValue + m[2] * sinValue,\n      m[1] * cosValue + m[3] * sinValue,\n      m[0] * -sinValue + m[2] * cosValue,\n      m[1] * -sinValue + m[3] * cosValue,\n      m[4],\n      m[5],\n    ];\n\n    this._originalRotate(angle);\n  };\n}\n\nclass CachedCanvases {\n  constructor(canvasFactory) {\n    this.canvasFactory = canvasFactory;\n    this.cache = Object.create(null);\n  }\n\n  getCanvas(id, width, height, trackTransform) {\n    let canvasEntry;\n    if (this.cache[id] !== undefined) {\n      canvasEntry = this.cache[id];\n      this.canvasFactory.reset(canvasEntry, width, height);\n      // reset canvas transform for emulated mozCurrentTransform, if needed\n      canvasEntry.context.setTransform(1, 0, 0, 1, 0, 0);\n    } else {\n      canvasEntry = this.canvasFactory.create(width, height);\n      this.cache[id] = canvasEntry;\n    }\n    if (trackTransform) {\n      addContextCurrentTransform(canvasEntry.context);\n    }\n    return canvasEntry;\n  }\n\n  delete(id) {\n    delete this.cache[id];\n  }\n\n  clear() {\n    for (const id in this.cache) {\n      const canvasEntry = this.cache[id];\n      this.canvasFactory.destroy(canvasEntry);\n      delete this.cache[id];\n    }\n  }\n}\n\nfunction drawImageAtIntegerCoords(\n  ctx,\n  srcImg,\n  srcX,\n  srcY,\n  srcW,\n  srcH,\n  destX,\n  destY,\n  destW,\n  destH\n) {\n  const [a, b, c, d, tx, ty] = ctx.mozCurrentTransform;\n  if (b === 0 && c === 0) {\n    // top-left corner is at (X, Y) and\n    // bottom-right one is at (X + width, Y + height).\n\n    // If leftX is 4.321 then it's rounded to 4.\n    // If width is 10.432 then it's rounded to 11 because\n    // rightX = leftX + width = 14.753 which is rounded to 15\n    // so after rounding the total width is 11 (15 - 4).\n    // It's why we can't just floor/ceil uniformly, it just depends\n    // on the values we've.\n\n    const tlX = destX * a + tx;\n    const rTlX = Math.round(tlX);\n    const tlY = destY * d + ty;\n    const rTlY = Math.round(tlY);\n    const brX = (destX + destW) * a + tx;\n\n    // Some pdf contains images with 1x1 images so in case of 0-width after\n    // scaling we must fallback on 1 to be sure there is something.\n    const rWidth = Math.abs(Math.round(brX) - rTlX) || 1;\n    const brY = (destY + destH) * d + ty;\n    const rHeight = Math.abs(Math.round(brY) - rTlY) || 1;\n\n    // We must apply a transformation in order to apply it on the image itself.\n    // For example if a == 1 && d == -1, it means that the image itself is\n    // mirrored w.r.t. the x-axis.\n    ctx.setTransform(Math.sign(a), 0, 0, Math.sign(d), rTlX, rTlY);\n    ctx.drawImage(srcImg, srcX, srcY, srcW, srcH, 0, 0, rWidth, rHeight);\n    ctx.setTransform(a, b, c, d, tx, ty);\n\n    return [rWidth, rHeight];\n  }\n\n  if (a === 0 && d === 0) {\n    // This path is taken in issue9462.pdf (page 3).\n    const tlX = destY * c + tx;\n    const rTlX = Math.round(tlX);\n    const tlY = destX * b + ty;\n    const rTlY = Math.round(tlY);\n    const brX = (destY + destH) * c + tx;\n    const rWidth = Math.abs(Math.round(brX) - rTlX) || 1;\n    const brY = (destX + destW) * b + ty;\n    const rHeight = Math.abs(Math.round(brY) - rTlY) || 1;\n\n    ctx.setTransform(0, Math.sign(b), Math.sign(c), 0, rTlX, rTlY);\n    ctx.drawImage(srcImg, srcX, srcY, srcW, srcH, 0, 0, rHeight, rWidth);\n    ctx.setTransform(a, b, c, d, tx, ty);\n\n    return [rHeight, rWidth];\n  }\n\n  // Not a scale matrix so let the render handle the case without rounding.\n  ctx.drawImage(srcImg, srcX, srcY, srcW, srcH, destX, destY, destW, destH);\n\n  const scaleX = Math.hypot(a, b);\n  const scaleY = Math.hypot(c, d);\n  return [scaleX * destW, scaleY * destH];\n}\n\nfunction compileType3Glyph(imgData) {\n  const { width, height } = imgData;\n  if (\n    !COMPILE_TYPE3_GLYPHS ||\n    width > MAX_SIZE_TO_COMPILE ||\n    height > MAX_SIZE_TO_COMPILE\n  ) {\n    return null;\n  }\n\n  const POINT_TO_PROCESS_LIMIT = 1000;\n  const POINT_TYPES = new Uint8Array([\n    0, 2, 4, 0, 1, 0, 5, 4, 8, 10, 0, 8, 0, 2, 1, 0,\n  ]);\n\n  const width1 = width + 1;\n  let points = new Uint8Array(width1 * (height + 1));\n  let i, j, j0;\n\n  // decodes bit-packed mask data\n  const lineSize = (width + 7) & ~7;\n  let data = new Uint8Array(lineSize * height),\n    pos = 0;\n  for (const elem of imgData.data) {\n    let mask = 128;\n    while (mask > 0) {\n      data[pos++] = elem & mask ? 0 : 255;\n      mask >>= 1;\n    }\n  }\n\n  // finding interesting points: every point is located between mask pixels,\n  // so there will be points of the (width + 1)x(height + 1) grid. Every point\n  // will have flags assigned based on neighboring mask pixels:\n  //   4 | 8\n  //   --P--\n  //   2 | 1\n  // We are interested only in points with the flags:\n  //   - outside corners: 1, 2, 4, 8;\n  //   - inside corners: 7, 11, 13, 14;\n  //   - and, intersections: 5, 10.\n  let count = 0;\n  pos = 0;\n  if (data[pos] !== 0) {\n    points[0] = 1;\n    ++count;\n  }\n  for (j = 1; j < width; j++) {\n    if (data[pos] !== data[pos + 1]) {\n      points[j] = data[pos] ? 2 : 1;\n      ++count;\n    }\n    pos++;\n  }\n  if (data[pos] !== 0) {\n    points[j] = 2;\n    ++count;\n  }\n  for (i = 1; i < height; i++) {\n    pos = i * lineSize;\n    j0 = i * width1;\n    if (data[pos - lineSize] !== data[pos]) {\n      points[j0] = data[pos] ? 1 : 8;\n      ++count;\n    }\n    // 'sum' is the position of the current pixel configuration in the 'TYPES'\n    // array (in order 8-1-2-4, so we can use '>>2' to shift the column).\n    let sum = (data[pos] ? 4 : 0) + (data[pos - lineSize] ? 8 : 0);\n    for (j = 1; j < width; j++) {\n      sum =\n        (sum >> 2) +\n        (data[pos + 1] ? 4 : 0) +\n        (data[pos - lineSize + 1] ? 8 : 0);\n      if (POINT_TYPES[sum]) {\n        points[j0 + j] = POINT_TYPES[sum];\n        ++count;\n      }\n      pos++;\n    }\n    if (data[pos - lineSize] !== data[pos]) {\n      points[j0 + j] = data[pos] ? 2 : 4;\n      ++count;\n    }\n\n    if (count > POINT_TO_PROCESS_LIMIT) {\n      return null;\n    }\n  }\n\n  pos = lineSize * (height - 1);\n  j0 = i * width1;\n  if (data[pos] !== 0) {\n    points[j0] = 8;\n    ++count;\n  }\n  for (j = 1; j < width; j++) {\n    if (data[pos] !== data[pos + 1]) {\n      points[j0 + j] = data[pos] ? 4 : 8;\n      ++count;\n    }\n    pos++;\n  }\n  if (data[pos] !== 0) {\n    points[j0 + j] = 4;\n    ++count;\n  }\n  if (count > POINT_TO_PROCESS_LIMIT) {\n    return null;\n  }\n\n  // building outlines\n  const steps = new Int32Array([0, width1, -1, 0, -width1, 0, 0, 0, 1]);\n  let path, outlines, coords;\n  if (!isNodeJS) {\n    path = new Path2D();\n  } else {\n    outlines = [];\n  }\n\n  for (i = 0; count && i <= height; i++) {\n    let p = i * width1;\n    const end = p + width;\n    while (p < end && !points[p]) {\n      p++;\n    }\n    if (p === end) {\n      continue;\n    }\n\n    if (path) {\n      path.moveTo(p % width1, i);\n    } else {\n      coords = [p % width1, i];\n    }\n\n    const p0 = p;\n    let type = points[p];\n    do {\n      const step = steps[type];\n      do {\n        p += step;\n      } while (!points[p]);\n\n      const pp = points[p];\n      if (pp !== 5 && pp !== 10) {\n        // set new direction\n        type = pp;\n        // delete mark\n        points[p] = 0;\n      } else {\n        // type is 5 or 10, ie, a crossing\n        // set new direction\n        type = pp & ((0x33 * type) >> 4);\n        // set new type for \"future hit\"\n        points[p] &= (type >> 2) | (type << 2);\n      }\n\n      if (path) {\n        path.lineTo(p % width1, (p / width1) | 0);\n      } else {\n        coords.push(p % width1, (p / width1) | 0);\n      }\n\n      if (!points[p]) {\n        --count;\n      }\n    } while (p0 !== p);\n\n    if (!path) {\n      outlines.push(coords);\n    }\n    --i;\n  }\n\n  // Immediately release the, potentially large, `Uint8Array`s after parsing.\n  data = null;\n  points = null;\n\n  const drawOutline = function (c) {\n    c.save();\n    // the path shall be painted in [0..1]x[0..1] space\n    c.scale(1 / width, -1 / height);\n    c.translate(0, -height);\n    if (path) {\n      c.fill(path);\n    } else {\n      c.beginPath();\n      for (const o of outlines) {\n        c.moveTo(o[0], o[1]);\n        for (let l = 2, ll = o.length; l < ll; l += 2) {\n          c.lineTo(o[l], o[l + 1]);\n        }\n      }\n      c.fill();\n    }\n    c.beginPath();\n    c.restore();\n  };\n\n  return drawOutline;\n}\n\nclass CanvasExtraState {\n  constructor(width, height) {\n    // Are soft masks and alpha values shapes or opacities?\n    this.alphaIsShape = false;\n    this.fontSize = 0;\n    this.fontSizeScale = 1;\n    this.textMatrix = IDENTITY_MATRIX;\n    this.textMatrixScale = 1;\n    this.fontMatrix = FONT_IDENTITY_MATRIX;\n    this.leading = 0;\n    // Current point (in user coordinates)\n    this.x = 0;\n    this.y = 0;\n    // Start of text line (in text coordinates)\n    this.lineX = 0;\n    this.lineY = 0;\n    // Character and word spacing\n    this.charSpacing = 0;\n    this.wordSpacing = 0;\n    this.textHScale = 1;\n    this.textRenderingMode = TextRenderingMode.FILL;\n    this.textRise = 0;\n    // Default fore and background colors\n    this.fillColor = \"#000000\";\n    this.strokeColor = \"#000000\";\n    this.patternFill = false;\n    // Note: fill alpha applies to all non-stroking operations\n    this.fillAlpha = 1;\n    this.strokeAlpha = 1;\n    this.lineWidth = 1;\n    this.activeSMask = null;\n    this.transferMaps = null;\n\n    this.startNewPathAndClipBox([0, 0, width, height]);\n  }\n\n  clone() {\n    const clone = Object.create(this);\n    clone.clipBox = this.clipBox.slice();\n    return clone;\n  }\n\n  setCurrentPoint(x, y) {\n    this.x = x;\n    this.y = y;\n  }\n\n  updatePathMinMax(transform, x, y) {\n    [x, y] = Util.applyTransform([x, y], transform);\n    this.minX = Math.min(this.minX, x);\n    this.minY = Math.min(this.minY, y);\n    this.maxX = Math.max(this.maxX, x);\n    this.maxY = Math.max(this.maxY, y);\n  }\n\n  updateRectMinMax(transform, rect) {\n    const p1 = Util.applyTransform(rect, transform);\n    const p2 = Util.applyTransform(rect.slice(2), transform);\n    this.minX = Math.min(this.minX, p1[0], p2[0]);\n    this.minY = Math.min(this.minY, p1[1], p2[1]);\n    this.maxX = Math.max(this.maxX, p1[0], p2[0]);\n    this.maxY = Math.max(this.maxY, p1[1], p2[1]);\n  }\n\n  updateScalingPathMinMax(transform, minMax) {\n    Util.scaleMinMax(transform, minMax);\n    this.minX = Math.min(this.minX, minMax[0]);\n    this.maxX = Math.max(this.maxX, minMax[1]);\n    this.minY = Math.min(this.minY, minMax[2]);\n    this.maxY = Math.max(this.maxY, minMax[3]);\n  }\n\n  updateCurvePathMinMax(transform, x0, y0, x1, y1, x2, y2, x3, y3, minMax) {\n    const box = Util.bezierBoundingBox(x0, y0, x1, y1, x2, y2, x3, y3);\n    if (minMax) {\n      minMax[0] = Math.min(minMax[0], box[0], box[2]);\n      minMax[1] = Math.max(minMax[1], box[0], box[2]);\n      minMax[2] = Math.min(minMax[2], box[1], box[3]);\n      minMax[3] = Math.max(minMax[3], box[1], box[3]);\n      return;\n    }\n    this.updateRectMinMax(transform, box);\n  }\n\n  getPathBoundingBox(pathType = PathType.FILL, transform = null) {\n    const box = [this.minX, this.minY, this.maxX, this.maxY];\n    if (pathType === PathType.STROKE) {\n      if (!transform) {\n        unreachable(\"Stroke bounding box must include transform.\");\n      }\n      // Stroked paths can be outside of the path bounding box by 1/2 the line\n      // width.\n      const scale = Util.singularValueDecompose2dScale(transform);\n      const xStrokePad = (scale[0] * this.lineWidth) / 2;\n      const yStrokePad = (scale[1] * this.lineWidth) / 2;\n      box[0] -= xStrokePad;\n      box[1] -= yStrokePad;\n      box[2] += xStrokePad;\n      box[3] += yStrokePad;\n    }\n    return box;\n  }\n\n  updateClipFromPath() {\n    const intersect = Util.intersect(this.clipBox, this.getPathBoundingBox());\n    this.startNewPathAndClipBox(intersect || [0, 0, 0, 0]);\n  }\n\n  isEmptyClip() {\n    return this.minX === Infinity;\n  }\n\n  startNewPathAndClipBox(box) {\n    this.clipBox = box;\n    this.minX = Infinity;\n    this.minY = Infinity;\n    this.maxX = 0;\n    this.maxY = 0;\n  }\n\n  getClippedPathBoundingBox(pathType = PathType.FILL, transform = null) {\n    return Util.intersect(\n      this.clipBox,\n      this.getPathBoundingBox(pathType, transform)\n    );\n  }\n}\n\nfunction putBinaryImageData(ctx, imgData, transferMaps = null) {\n  if (typeof ImageData !== \"undefined\" && imgData instanceof ImageData) {\n    ctx.putImageData(imgData, 0, 0);\n    return;\n  }\n\n  // Put the image data to the canvas in chunks, rather than putting the\n  // whole image at once.  This saves JS memory, because the ImageData object\n  // is smaller. It also possibly saves C++ memory within the implementation\n  // of putImageData(). (E.g. in Firefox we make two short-lived copies of\n  // the data passed to putImageData()). |n| shouldn't be too small, however,\n  // because too many putImageData() calls will slow things down.\n  //\n  // Note: as written, if the last chunk is partial, the putImageData() call\n  // will (conceptually) put pixels past the bounds of the canvas.  But\n  // that's ok; any such pixels are ignored.\n\n  const height = imgData.height,\n    width = imgData.width;\n  const partialChunkHeight = height % FULL_CHUNK_HEIGHT;\n  const fullChunks = (height - partialChunkHeight) / FULL_CHUNK_HEIGHT;\n  const totalChunks = partialChunkHeight === 0 ? fullChunks : fullChunks + 1;\n\n  const chunkImgData = ctx.createImageData(width, FULL_CHUNK_HEIGHT);\n  let srcPos = 0,\n    destPos;\n  const src = imgData.data;\n  const dest = chunkImgData.data;\n  let i, j, thisChunkHeight, elemsInThisChunk;\n\n  let transferMapRed, transferMapGreen, transferMapBlue, transferMapGray;\n  if (transferMaps) {\n    switch (transferMaps.length) {\n      case 1:\n        transferMapRed = transferMaps[0];\n        transferMapGreen = transferMaps[0];\n        transferMapBlue = transferMaps[0];\n        transferMapGray = transferMaps[0];\n        break;\n      case 4:\n        transferMapRed = transferMaps[0];\n        transferMapGreen = transferMaps[1];\n        transferMapBlue = transferMaps[2];\n        transferMapGray = transferMaps[3];\n        break;\n    }\n  }\n\n  // There are multiple forms in which the pixel data can be passed, and\n  // imgData.kind tells us which one this is.\n  if (imgData.kind === ImageKind.GRAYSCALE_1BPP) {\n    // Grayscale, 1 bit per pixel (i.e. black-and-white).\n    const srcLength = src.byteLength;\n    const dest32 = new Uint32Array(dest.buffer, 0, dest.byteLength >> 2);\n    const dest32DataLength = dest32.length;\n    const fullSrcDiff = (width + 7) >> 3;\n    let white = 0xffffffff;\n    let black = FeatureTest.isLittleEndian ? 0xff000000 : 0x000000ff;\n\n    if (transferMapGray) {\n      if (transferMapGray[0] === 0xff && transferMapGray[0xff] === 0) {\n        [white, black] = [black, white];\n      }\n    }\n\n    for (i = 0; i < totalChunks; i++) {\n      thisChunkHeight = i < fullChunks ? FULL_CHUNK_HEIGHT : partialChunkHeight;\n      destPos = 0;\n      for (j = 0; j < thisChunkHeight; j++) {\n        const srcDiff = srcLength - srcPos;\n        let k = 0;\n        const kEnd = srcDiff > fullSrcDiff ? width : srcDiff * 8 - 7;\n        const kEndUnrolled = kEnd & ~7;\n        let mask = 0;\n        let srcByte = 0;\n        for (; k < kEndUnrolled; k += 8) {\n          srcByte = src[srcPos++];\n          dest32[destPos++] = srcByte & 128 ? white : black;\n          dest32[destPos++] = srcByte & 64 ? white : black;\n          dest32[destPos++] = srcByte & 32 ? white : black;\n          dest32[destPos++] = srcByte & 16 ? white : black;\n          dest32[destPos++] = srcByte & 8 ? white : black;\n          dest32[destPos++] = srcByte & 4 ? white : black;\n          dest32[destPos++] = srcByte & 2 ? white : black;\n          dest32[destPos++] = srcByte & 1 ? white : black;\n        }\n        for (; k < kEnd; k++) {\n          if (mask === 0) {\n            srcByte = src[srcPos++];\n            mask = 128;\n          }\n\n          dest32[destPos++] = srcByte & mask ? white : black;\n          mask >>= 1;\n        }\n      }\n      // We ran out of input. Make all remaining pixels transparent.\n      while (destPos < dest32DataLength) {\n        dest32[destPos++] = 0;\n      }\n\n      ctx.putImageData(chunkImgData, 0, i * FULL_CHUNK_HEIGHT);\n    }\n  } else if (imgData.kind === ImageKind.RGBA_32BPP) {\n    // RGBA, 32-bits per pixel.\n    const hasTransferMaps = !!(\n      transferMapRed ||\n      transferMapGreen ||\n      transferMapBlue\n    );\n\n    j = 0;\n    elemsInThisChunk = width * FULL_CHUNK_HEIGHT * 4;\n    for (i = 0; i < fullChunks; i++) {\n      dest.set(src.subarray(srcPos, srcPos + elemsInThisChunk));\n      srcPos += elemsInThisChunk;\n\n      if (hasTransferMaps) {\n        for (let k = 0; k < elemsInThisChunk; k += 4) {\n          if (transferMapRed) {\n            dest[k + 0] = transferMapRed[dest[k + 0]];\n          }\n          if (transferMapGreen) {\n            dest[k + 1] = transferMapGreen[dest[k + 1]];\n          }\n          if (transferMapBlue) {\n            dest[k + 2] = transferMapBlue[dest[k + 2]];\n          }\n        }\n      }\n\n      ctx.putImageData(chunkImgData, 0, j);\n      j += FULL_CHUNK_HEIGHT;\n    }\n    if (i < totalChunks) {\n      elemsInThisChunk = width * partialChunkHeight * 4;\n      dest.set(src.subarray(srcPos, srcPos + elemsInThisChunk));\n\n      if (hasTransferMaps) {\n        for (let k = 0; k < elemsInThisChunk; k += 4) {\n          if (transferMapRed) {\n            dest[k + 0] = transferMapRed[dest[k + 0]];\n          }\n          if (transferMapGreen) {\n            dest[k + 1] = transferMapGreen[dest[k + 1]];\n          }\n          if (transferMapBlue) {\n            dest[k + 2] = transferMapBlue[dest[k + 2]];\n          }\n        }\n      }\n\n      ctx.putImageData(chunkImgData, 0, j);\n    }\n  } else if (imgData.kind === ImageKind.RGB_24BPP) {\n    // RGB, 24-bits per pixel.\n    const hasTransferMaps = !!(\n      transferMapRed ||\n      transferMapGreen ||\n      transferMapBlue\n    );\n\n    thisChunkHeight = FULL_CHUNK_HEIGHT;\n    elemsInThisChunk = width * thisChunkHeight;\n    for (i = 0; i < totalChunks; i++) {\n      if (i >= fullChunks) {\n        thisChunkHeight = partialChunkHeight;\n        elemsInThisChunk = width * thisChunkHeight;\n      }\n\n      destPos = 0;\n      for (j = elemsInThisChunk; j--; ) {\n        dest[destPos++] = src[srcPos++];\n        dest[destPos++] = src[srcPos++];\n        dest[destPos++] = src[srcPos++];\n        dest[destPos++] = 255;\n      }\n\n      if (hasTransferMaps) {\n        for (let k = 0; k < destPos; k += 4) {\n          if (transferMapRed) {\n            dest[k + 0] = transferMapRed[dest[k + 0]];\n          }\n          if (transferMapGreen) {\n            dest[k + 1] = transferMapGreen[dest[k + 1]];\n          }\n          if (transferMapBlue) {\n            dest[k + 2] = transferMapBlue[dest[k + 2]];\n          }\n        }\n      }\n\n      ctx.putImageData(chunkImgData, 0, i * FULL_CHUNK_HEIGHT);\n    }\n  } else {\n    throw new Error(`bad image kind: ${imgData.kind}`);\n  }\n}\n\nfunction putBinaryImageMask(ctx, imgData) {\n  if (imgData.bitmap) {\n    // The bitmap has been created in the worker.\n    ctx.drawImage(imgData.bitmap, 0, 0);\n    return;\n  }\n\n  // Slow path: OffscreenCanvas isn't available in the worker.\n  const height = imgData.height,\n    width = imgData.width;\n  const partialChunkHeight = height % FULL_CHUNK_HEIGHT;\n  const fullChunks = (height - partialChunkHeight) / FULL_CHUNK_HEIGHT;\n  const totalChunks = partialChunkHeight === 0 ? fullChunks : fullChunks + 1;\n\n  const chunkImgData = ctx.createImageData(width, FULL_CHUNK_HEIGHT);\n  let srcPos = 0;\n  const src = imgData.data;\n  const dest = chunkImgData.data;\n\n  for (let i = 0; i < totalChunks; i++) {\n    const thisChunkHeight =\n      i < fullChunks ? FULL_CHUNK_HEIGHT : partialChunkHeight;\n\n    // Expand the mask so it can be used by the canvas.  Any required\n    // inversion has already been handled.\n\n    ({ srcPos } = applyMaskImageData({\n      src,\n      srcPos,\n      dest,\n      width,\n      height: thisChunkHeight,\n    }));\n\n    ctx.putImageData(chunkImgData, 0, i * FULL_CHUNK_HEIGHT);\n  }\n}\n\nfunction copyCtxState(sourceCtx, destCtx) {\n  const properties = [\n    \"strokeStyle\",\n    \"fillStyle\",\n    \"fillRule\",\n    \"globalAlpha\",\n    \"lineWidth\",\n    \"lineCap\",\n    \"lineJoin\",\n    \"miterLimit\",\n    \"globalCompositeOperation\",\n    \"font\",\n  ];\n  for (let i = 0, ii = properties.length; i < ii; i++) {\n    const property = properties[i];\n    if (sourceCtx[property] !== undefined) {\n      destCtx[property] = sourceCtx[property];\n    }\n  }\n  if (sourceCtx.setLineDash !== undefined) {\n    destCtx.setLineDash(sourceCtx.getLineDash());\n    destCtx.lineDashOffset = sourceCtx.lineDashOffset;\n  }\n}\n\nfunction resetCtxToDefault(ctx, foregroundColor) {\n  ctx.strokeStyle = ctx.fillStyle = foregroundColor || \"#000000\";\n  ctx.fillRule = \"nonzero\";\n  ctx.globalAlpha = 1;\n  ctx.lineWidth = 1;\n  ctx.lineCap = \"butt\";\n  ctx.lineJoin = \"miter\";\n  ctx.miterLimit = 10;\n  ctx.globalCompositeOperation = \"source-over\";\n  ctx.font = \"10px sans-serif\";\n  if (ctx.setLineDash !== undefined) {\n    ctx.setLineDash([]);\n    ctx.lineDashOffset = 0;\n  }\n}\n\nfunction composeSMaskBackdrop(bytes, r0, g0, b0) {\n  const length = bytes.length;\n  for (let i = 3; i < length; i += 4) {\n    const alpha = bytes[i];\n    if (alpha === 0) {\n      bytes[i - 3] = r0;\n      bytes[i - 2] = g0;\n      bytes[i - 1] = b0;\n    } else if (alpha < 255) {\n      const alpha_ = 255 - alpha;\n      bytes[i - 3] = (bytes[i - 3] * alpha + r0 * alpha_) >> 8;\n      bytes[i - 2] = (bytes[i - 2] * alpha + g0 * alpha_) >> 8;\n      bytes[i - 1] = (bytes[i - 1] * alpha + b0 * alpha_) >> 8;\n    }\n  }\n}\n\nfunction composeSMaskAlpha(maskData, layerData, transferMap) {\n  const length = maskData.length;\n  const scale = 1 / 255;\n  for (let i = 3; i < length; i += 4) {\n    const alpha = transferMap ? transferMap[maskData[i]] : maskData[i];\n    layerData[i] = (layerData[i] * alpha * scale) | 0;\n  }\n}\n\nfunction composeSMaskLuminosity(maskData, layerData, transferMap) {\n  const length = maskData.length;\n  for (let i = 3; i < length; i += 4) {\n    const y =\n      maskData[i - 3] * 77 + // * 0.3 / 255 * 0x10000\n      maskData[i - 2] * 152 + // * 0.59 ....\n      maskData[i - 1] * 28; // * 0.11 ....\n    layerData[i] = transferMap\n      ? (layerData[i] * transferMap[y >> 8]) >> 8\n      : (layerData[i] * y) >> 16;\n  }\n}\n\nfunction genericComposeSMask(\n  maskCtx,\n  layerCtx,\n  width,\n  height,\n  subtype,\n  backdrop,\n  transferMap,\n  layerOffsetX,\n  layerOffsetY,\n  maskOffsetX,\n  maskOffsetY\n) {\n  const hasBackdrop = !!backdrop;\n  const r0 = hasBackdrop ? backdrop[0] : 0;\n  const g0 = hasBackdrop ? backdrop[1] : 0;\n  const b0 = hasBackdrop ? backdrop[2] : 0;\n\n  let composeFn;\n  if (subtype === \"Luminosity\") {\n    composeFn = composeSMaskLuminosity;\n  } else {\n    composeFn = composeSMaskAlpha;\n  }\n\n  // processing image in chunks to save memory\n  const PIXELS_TO_PROCESS = 1048576;\n  const chunkSize = Math.min(height, Math.ceil(PIXELS_TO_PROCESS / width));\n  for (let row = 0; row < height; row += chunkSize) {\n    const chunkHeight = Math.min(chunkSize, height - row);\n    const maskData = maskCtx.getImageData(\n      layerOffsetX - maskOffsetX,\n      row + (layerOffsetY - maskOffsetY),\n      width,\n      chunkHeight\n    );\n    const layerData = layerCtx.getImageData(\n      layerOffsetX,\n      row + layerOffsetY,\n      width,\n      chunkHeight\n    );\n\n    if (hasBackdrop) {\n      composeSMaskBackdrop(maskData.data, r0, g0, b0);\n    }\n    composeFn(maskData.data, layerData.data, transferMap);\n\n    layerCtx.putImageData(layerData, layerOffsetX, row + layerOffsetY);\n  }\n}\n\nfunction composeSMask(ctx, smask, layerCtx, layerBox) {\n  const layerOffsetX = layerBox[0];\n  const layerOffsetY = layerBox[1];\n  const layerWidth = layerBox[2] - layerOffsetX;\n  const layerHeight = layerBox[3] - layerOffsetY;\n  if (layerWidth === 0 || layerHeight === 0) {\n    return;\n  }\n  genericComposeSMask(\n    smask.context,\n    layerCtx,\n    layerWidth,\n    layerHeight,\n    smask.subtype,\n    smask.backdrop,\n    smask.transferMap,\n    layerOffsetX,\n    layerOffsetY,\n    smask.offsetX,\n    smask.offsetY\n  );\n  ctx.save();\n  ctx.globalAlpha = 1;\n  ctx.globalCompositeOperation = \"source-over\";\n  ctx.setTransform(1, 0, 0, 1, 0, 0);\n  ctx.drawImage(layerCtx.canvas, 0, 0);\n  ctx.restore();\n}\n\nfunction getImageSmoothingEnabled(transform, interpolate) {\n  const scale = Util.singularValueDecompose2dScale(transform);\n  // Round to a 32bit float so that `<=` check below will pass for numbers that\n  // are very close, but not exactly the same 64bit floats.\n  scale[0] = Math.fround(scale[0]);\n  scale[1] = Math.fround(scale[1]);\n  const actualScale = Math.fround(\n    (globalThis.devicePixelRatio || 1) * PixelsPerInch.PDF_TO_CSS_UNITS\n  );\n  if (interpolate !== undefined) {\n    // If the value is explicitly set use it.\n    return interpolate;\n  } else if (scale[0] <= actualScale || scale[1] <= actualScale) {\n    // Smooth when downscaling.\n    return true;\n  }\n  // Don't smooth when upscaling.\n  return false;\n}\n\nconst LINE_CAP_STYLES = [\"butt\", \"round\", \"square\"];\nconst LINE_JOIN_STYLES = [\"miter\", \"round\", \"bevel\"];\nconst NORMAL_CLIP = {};\nconst EO_CLIP = {};\n\nclass CanvasGraphics {\n  constructor(\n    canvasCtx,\n    commonObjs,\n    objs,\n    canvasFactory,\n    imageLayer,\n    optionalContentConfig,\n    annotationCanvasMap,\n    pageColors\n  ) {\n    this.ctx = canvasCtx;\n    this.current = new CanvasExtraState(\n      this.ctx.canvas.width,\n      this.ctx.canvas.height\n    );\n    this.stateStack = [];\n    this.pendingClip = null;\n    this.pendingEOFill = false;\n    this.res = null;\n    this.xobjs = null;\n    this.commonObjs = commonObjs;\n    this.objs = objs;\n    this.canvasFactory = canvasFactory;\n    this.imageLayer = imageLayer;\n    this.groupStack = [];\n    this.processingType3 = null;\n    // Patterns are painted relative to the initial page/form transform, see\n    // PDF spec 8.7.2 NOTE 1.\n    this.baseTransform = null;\n    this.baseTransformStack = [];\n    this.groupLevel = 0;\n    this.smaskStack = [];\n    this.smaskCounter = 0;\n    this.tempSMask = null;\n    this.suspendedCtx = null;\n    this.contentVisible = true;\n    this.markedContentStack = [];\n    this.optionalContentConfig = optionalContentConfig;\n    this.cachedCanvases = new CachedCanvases(this.canvasFactory);\n    this.cachedPatterns = new Map();\n    this.annotationCanvasMap = annotationCanvasMap;\n    this.viewportScale = 1;\n    this.outputScaleX = 1;\n    this.outputScaleY = 1;\n    this.backgroundColor = pageColors?.background || null;\n    this.foregroundColor = pageColors?.foreground || null;\n    if (canvasCtx) {\n      // NOTE: if mozCurrentTransform is polyfilled, then the current state of\n      // the transformation must already be set in canvasCtx._transformMatrix.\n      addContextCurrentTransform(canvasCtx);\n    }\n    this._cachedScaleForStroking = null;\n    this._cachedGetSinglePixelWidth = null;\n    this._cachedBitmapsMap = new Map();\n  }\n\n  getObject(data, fallback = null) {\n    if (typeof data === \"string\") {\n      return data.startsWith(\"g_\")\n        ? this.commonObjs.get(data)\n        : this.objs.get(data);\n    }\n    return fallback;\n  }\n\n  beginDrawing({\n    transform,\n    viewport,\n    transparency = false,\n    background = null,\n  }) {\n    // For pdfs that use blend modes we have to clear the canvas else certain\n    // blend modes can look wrong since we'd be blending with a white\n    // backdrop. The problem with a transparent backdrop though is we then\n    // don't get sub pixel anti aliasing on text, creating temporary\n    // transparent canvas when we have blend modes.\n    const width = this.ctx.canvas.width;\n    const height = this.ctx.canvas.height;\n    const defaultBackgroundColor = background || \"#ffffff\";\n    this.ctx.save();\n\n    if (this.foregroundColor && this.backgroundColor) {\n      // Get the #RRGGBB value of the color. If it's a name (e.g. CanvasText)\n      // then it'll be converted to its rgb value.\n      this.ctx.fillStyle = this.foregroundColor;\n      const fg = (this.foregroundColor = this.ctx.fillStyle);\n      this.ctx.fillStyle = this.backgroundColor;\n      const bg = (this.backgroundColor = this.ctx.fillStyle);\n      let isValidDefaultBg = true;\n      let defaultBg = defaultBackgroundColor;\n\n      if (typeof PDFJSDev === \"undefined\" || !PDFJSDev.test(\"MOZCENTRAL\")) {\n        this.ctx.fillStyle = defaultBackgroundColor;\n        defaultBg = this.ctx.fillStyle;\n        isValidDefaultBg =\n          typeof defaultBg === \"string\" && /^#[0-9A-Fa-f]{6}$/.test(defaultBg);\n      }\n\n      if (\n        (fg === \"#000000\" && bg === \"#ffffff\") ||\n        fg === bg ||\n        !isValidDefaultBg\n      ) {\n        // Ignore the `pageColors`-option when:\n        //  - The computed background/foreground colors have their default\n        //    values, i.e. white/black.\n        //  - The computed background/foreground colors are identical,\n        //    since that'd render the `canvas` mostly blank.\n        //  - The `background`-option has a value that's incompatible with\n        //    the `pageColors`-values.\n        //\n        this.foregroundColor = this.backgroundColor = null;\n      } else {\n        // https://developer.mozilla.org/en-US/docs/Web/Accessibility/Understanding_Colors_and_Luminance\n        //\n        // Relative luminance:\n        // https://www.w3.org/TR/WCAG20/#relativeluminancedef\n        //\n        // We compute the rounded luminance of the default background color.\n        // Then for every color in the pdf, if its rounded luminance is the\n        // same as the background one then it's replaced by the new\n        // background color else by the foreground one.\n        const cB = parseInt(defaultBg.slice(1), 16);\n        const rB = (cB && 0xff0000) >> 16;\n        const gB = (cB && 0x00ff00) >> 8;\n        const bB = cB && 0x0000ff;\n        const newComp = x => {\n          x /= 255;\n          return x <= 0.03928 ? x / 12.92 : ((x + 0.055) / 1.055) ** 2.4;\n        };\n        const lumB = Math.round(\n          0.2126 * newComp(rB) + 0.7152 * newComp(gB) + 0.0722 * newComp(bB)\n        );\n        this.selectColor = (r, g, b) => {\n          const lumC =\n            0.2126 * newComp(r) + 0.7152 * newComp(g) + 0.0722 * newComp(b);\n          return Math.round(lumC) === lumB ? bg : fg;\n        };\n      }\n    }\n\n    this.ctx.fillStyle = this.backgroundColor || defaultBackgroundColor;\n    this.ctx.fillRect(0, 0, width, height);\n    this.ctx.restore();\n\n    if (transparency) {\n      const transparentCanvas = this.cachedCanvases.getCanvas(\n        \"transparent\",\n        width,\n        height,\n        /* trackTransform */ true\n      );\n      this.compositeCtx = this.ctx;\n      this.transparentCanvas = transparentCanvas.canvas;\n      this.ctx = transparentCanvas.context;\n      this.ctx.save();\n      // The transform can be applied before rendering, transferring it to\n      // the new canvas.\n      this.ctx.transform.apply(this.ctx, this.compositeCtx.mozCurrentTransform);\n    }\n\n    this.ctx.save();\n    resetCtxToDefault(this.ctx, this.foregroundColor);\n    if (transform) {\n      this.ctx.transform.apply(this.ctx, transform);\n      this.outputScaleX = transform[0];\n      this.outputScaleY = transform[0];\n    }\n    this.ctx.transform.apply(this.ctx, viewport.transform);\n    this.viewportScale = viewport.scale;\n\n    this.baseTransform = this.ctx.mozCurrentTransform.slice();\n\n    if (this.imageLayer) {\n      this.imageLayer.beginLayout();\n    }\n  }\n\n  executeOperatorList(\n    operatorList,\n    executionStartIdx,\n    continueCallback,\n    stepper\n  ) {\n    const argsArray = operatorList.argsArray;\n    const fnArray = operatorList.fnArray;\n    let i = executionStartIdx || 0;\n    const argsArrayLen = argsArray.length;\n\n    // Sometimes the OperatorList to execute is empty.\n    if (argsArrayLen === i) {\n      return i;\n    }\n\n    const chunkOperations =\n      argsArrayLen - i > EXECUTION_STEPS &&\n      typeof continueCallback === \"function\";\n    const endTime = chunkOperations ? Date.now() + EXECUTION_TIME : 0;\n    let steps = 0;\n\n    const commonObjs = this.commonObjs;\n    const objs = this.objs;\n    let fnId;\n\n    while (true) {\n      if (stepper !== undefined && i === stepper.nextBreakPoint) {\n        stepper.breakIt(i, continueCallback);\n        return i;\n      }\n\n      fnId = fnArray[i];\n\n      if (fnId !== OPS.dependency) {\n        this[fnId].apply(this, argsArray[i]);\n      } else {\n        for (const depObjId of argsArray[i]) {\n          const objsPool = depObjId.startsWith(\"g_\") ? commonObjs : objs;\n\n          // If the promise isn't resolved yet, add the continueCallback\n          // to the promise and bail out.\n          if (!objsPool.has(depObjId)) {\n            objsPool.get(depObjId, continueCallback);\n            return i;\n          }\n        }\n      }\n\n      i++;\n\n      // If the entire operatorList was executed, stop as were done.\n      if (i === argsArrayLen) {\n        return i;\n      }\n\n      // If the execution took longer then a certain amount of time and\n      // `continueCallback` is specified, interrupt the execution.\n      if (chunkOperations && ++steps > EXECUTION_STEPS) {\n        if (Date.now() > endTime) {\n          continueCallback();\n          return i;\n        }\n        steps = 0;\n      }\n\n      // If the operatorList isn't executed completely yet OR the execution\n      // time was short enough, do another execution round.\n    }\n  }\n\n  endDrawing() {\n    // Finishing all opened operations such as SMask group painting.\n    while (this.stateStack.length || this.inSMaskMode) {\n      this.restore();\n    }\n\n    this.ctx.restore();\n\n    if (this.transparentCanvas) {\n      this.ctx = this.compositeCtx;\n      this.ctx.save();\n      this.ctx.setTransform(1, 0, 0, 1, 0, 0); // Avoid apply transform twice\n      this.ctx.drawImage(this.transparentCanvas, 0, 0);\n      this.ctx.restore();\n      this.transparentCanvas = null;\n    }\n\n    this.cachedCanvases.clear();\n    this.cachedPatterns.clear();\n\n    for (const cache of this._cachedBitmapsMap.values()) {\n      for (const canvas of cache.values()) {\n        if (\n          typeof HTMLCanvasElement !== \"undefined\" &&\n          canvas instanceof HTMLCanvasElement\n        ) {\n          canvas.width = canvas.height = 0;\n        }\n      }\n      cache.clear();\n    }\n    this._cachedBitmapsMap.clear();\n\n    if (this.imageLayer) {\n      this.imageLayer.endLayout();\n    }\n  }\n\n  _scaleImage(img, inverseTransform) {\n    // Vertical or horizontal scaling shall not be more than 2 to not lose the\n    // pixels during drawImage operation, painting on the temporary canvas(es)\n    // that are twice smaller in size.\n    const width = img.width;\n    const height = img.height;\n    let widthScale = Math.max(\n      Math.hypot(inverseTransform[0], inverseTransform[1]),\n      1\n    );\n    let heightScale = Math.max(\n      Math.hypot(inverseTransform[2], inverseTransform[3]),\n      1\n    );\n\n    let paintWidth = width,\n      paintHeight = height;\n    let tmpCanvasId = \"prescale1\";\n    let tmpCanvas, tmpCtx;\n    while (\n      (widthScale > 2 && paintWidth > 1) ||\n      (heightScale > 2 && paintHeight > 1)\n    ) {\n      let newWidth = paintWidth,\n        newHeight = paintHeight;\n      if (widthScale > 2 && paintWidth > 1) {\n        newWidth = Math.ceil(paintWidth / 2);\n        widthScale /= paintWidth / newWidth;\n      }\n      if (heightScale > 2 && paintHeight > 1) {\n        newHeight = Math.ceil(paintHeight / 2);\n        heightScale /= paintHeight / newHeight;\n      }\n      tmpCanvas = this.cachedCanvases.getCanvas(\n        tmpCanvasId,\n        newWidth,\n        newHeight,\n        /* trackTransform */ false\n      );\n      tmpCtx = tmpCanvas.context;\n      tmpCtx.clearRect(0, 0, newWidth, newHeight);\n      tmpCtx.drawImage(\n        img,\n        0,\n        0,\n        paintWidth,\n        paintHeight,\n        0,\n        0,\n        newWidth,\n        newHeight\n      );\n      img = tmpCanvas.canvas;\n      paintWidth = newWidth;\n      paintHeight = newHeight;\n      tmpCanvasId = tmpCanvasId === \"prescale1\" ? \"prescale2\" : \"prescale1\";\n    }\n    return {\n      img,\n      paintWidth,\n      paintHeight,\n    };\n  }\n\n  _createMaskCanvas(img) {\n    const ctx = this.ctx;\n    const { width, height } = img;\n    const fillColor = this.current.fillColor;\n    const isPatternFill = this.current.patternFill;\n    const currentTransform = ctx.mozCurrentTransform;\n\n    let cache, cacheKey, scaled, maskCanvas;\n    if ((img.bitmap || img.data) && img.count > 1) {\n      const mainKey = img.bitmap || img.data.buffer;\n      // We're reusing the same image several times, so we can cache it.\n      // In case we've a pattern fill we just keep the scaled version of\n      // the image.\n      // Only the scaling part matters, the translation part is just used\n      // to compute offsets.\n      // TODO: handle the case of a pattern fill if it's possible.\n      const withoutTranslation = currentTransform.slice(0, 4);\n      cacheKey = JSON.stringify(\n        isPatternFill ? withoutTranslation : [withoutTranslation, fillColor]\n      );\n\n      cache = this._cachedBitmapsMap.get(mainKey);\n      if (!cache) {\n        cache = new Map();\n        this._cachedBitmapsMap.set(mainKey, cache);\n      }\n      const cachedImage = cache.get(cacheKey);\n      if (cachedImage && !isPatternFill) {\n        const offsetX = Math.round(\n          Math.min(currentTransform[0], currentTransform[2]) +\n            currentTransform[4]\n        );\n        const offsetY = Math.round(\n          Math.min(currentTransform[1], currentTransform[3]) +\n            currentTransform[5]\n        );\n        return {\n          canvas: cachedImage,\n          offsetX,\n          offsetY,\n        };\n      }\n      scaled = cachedImage;\n    }\n\n    if (!scaled) {\n      maskCanvas = this.cachedCanvases.getCanvas(\n        \"maskCanvas\",\n        width,\n        height,\n        /* trackTransform */ false\n      );\n      putBinaryImageMask(maskCanvas.context, img);\n    }\n\n    // Create the mask canvas at the size it will be drawn at and also set\n    // its transform to match the current transform so if there are any\n    // patterns applied they will be applied relative to the correct\n    // transform.\n\n    let maskToCanvas = Util.transform(currentTransform, [\n      1 / width,\n      0,\n      0,\n      -1 / height,\n      0,\n      0,\n    ]);\n    maskToCanvas = Util.transform(maskToCanvas, [1, 0, 0, 1, 0, -height]);\n    const cord1 = Util.applyTransform([0, 0], maskToCanvas);\n    const cord2 = Util.applyTransform([width, height], maskToCanvas);\n    const rect = Util.normalizeRect([cord1[0], cord1[1], cord2[0], cord2[1]]);\n    const drawnWidth = Math.round(rect[2] - rect[0]) || 1;\n    const drawnHeight = Math.round(rect[3] - rect[1]) || 1;\n    const fillCanvas = this.cachedCanvases.getCanvas(\n      \"fillCanvas\",\n      drawnWidth,\n      drawnHeight,\n      /* trackTransform */ true\n    );\n    const fillCtx = fillCanvas.context;\n\n    // The offset will be the top-left cordinate mask.\n    // If objToCanvas is [a,b,c,d,e,f] then:\n    //   - offsetX = min(a, c) + e\n    //   - offsetY = min(b, d) + f\n    const offsetX = Math.min(cord1[0], cord2[0]);\n    const offsetY = Math.min(cord1[1], cord2[1]);\n    fillCtx.translate(-offsetX, -offsetY);\n    fillCtx.transform.apply(fillCtx, maskToCanvas);\n\n    if (!scaled) {\n      // Pre-scale if needed to improve image smoothing.\n      scaled = this._scaleImage(\n        maskCanvas.canvas,\n        fillCtx.mozCurrentTransformInverse\n      );\n      scaled = scaled.img;\n      if (cache && isPatternFill) {\n        cache.set(cacheKey, scaled);\n      }\n    }\n\n    fillCtx.imageSmoothingEnabled = getImageSmoothingEnabled(\n      fillCtx.mozCurrentTransform,\n      img.interpolate\n    );\n\n    drawImageAtIntegerCoords(\n      fillCtx,\n      scaled,\n      0,\n      0,\n      scaled.width,\n      scaled.height,\n      0,\n      0,\n      width,\n      height\n    );\n    fillCtx.globalCompositeOperation = \"source-in\";\n\n    const inverse = Util.transform(fillCtx.mozCurrentTransformInverse, [\n      1,\n      0,\n      0,\n      1,\n      -offsetX,\n      -offsetY,\n    ]);\n    fillCtx.fillStyle = isPatternFill\n      ? fillColor.getPattern(ctx, this, inverse, PathType.FILL)\n      : fillColor;\n\n    fillCtx.fillRect(0, 0, width, height);\n\n    if (cache && !isPatternFill) {\n      // The fill canvas is put in the cache associated to the mask image\n      // so we must remove from the cached canvas: it mustn't be used again.\n      this.cachedCanvases.delete(\"fillCanvas\");\n      cache.set(cacheKey, fillCanvas.canvas);\n    }\n\n    // Round the offsets to avoid drawing fractional pixels.\n    return {\n      canvas: fillCanvas.canvas,\n      offsetX: Math.round(offsetX),\n      offsetY: Math.round(offsetY),\n    };\n  }\n\n  // Graphics state\n  setLineWidth(width) {\n    if (width !== this.current.lineWidth) {\n      this._cachedScaleForStroking = null;\n    }\n    this.current.lineWidth = width;\n    this.ctx.lineWidth = width;\n  }\n\n  setLineCap(style) {\n    this.ctx.lineCap = LINE_CAP_STYLES[style];\n  }\n\n  setLineJoin(style) {\n    this.ctx.lineJoin = LINE_JOIN_STYLES[style];\n  }\n\n  setMiterLimit(limit) {\n    this.ctx.miterLimit = limit;\n  }\n\n  setDash(dashArray, dashPhase) {\n    const ctx = this.ctx;\n    if (ctx.setLineDash !== undefined) {\n      ctx.setLineDash(dashArray);\n      ctx.lineDashOffset = dashPhase;\n    }\n  }\n\n  setRenderingIntent(intent) {\n    // This operation is ignored since we haven't found a use case for it yet.\n  }\n\n  setFlatness(flatness) {\n    // This operation is ignored since we haven't found a use case for it yet.\n  }\n\n  setGState(states) {\n    for (let i = 0, ii = states.length; i < ii; i++) {\n      const state = states[i];\n      const key = state[0];\n      const value = state[1];\n\n      switch (key) {\n        case \"LW\":\n          this.setLineWidth(value);\n          break;\n        case \"LC\":\n          this.setLineCap(value);\n          break;\n        case \"LJ\":\n          this.setLineJoin(value);\n          break;\n        case \"ML\":\n          this.setMiterLimit(value);\n          break;\n        case \"D\":\n          this.setDash(value[0], value[1]);\n          break;\n        case \"RI\":\n          this.setRenderingIntent(value);\n          break;\n        case \"FL\":\n          this.setFlatness(value);\n          break;\n        case \"Font\":\n          this.setFont(value[0], value[1]);\n          break;\n        case \"CA\":\n          this.current.strokeAlpha = state[1];\n          break;\n        case \"ca\":\n          this.current.fillAlpha = state[1];\n          this.ctx.globalAlpha = state[1];\n          break;\n        case \"BM\":\n          this.ctx.globalCompositeOperation = value;\n          break;\n        case \"SMask\":\n          this.current.activeSMask = value ? this.tempSMask : null;\n          this.tempSMask = null;\n          this.checkSMaskState();\n          break;\n        case \"TR\":\n          this.current.transferMaps = value;\n      }\n    }\n  }\n\n  get inSMaskMode() {\n    return !!this.suspendedCtx;\n  }\n\n  checkSMaskState() {\n    const inSMaskMode = this.inSMaskMode;\n    if (this.current.activeSMask && !inSMaskMode) {\n      this.beginSMaskMode();\n    } else if (!this.current.activeSMask && inSMaskMode) {\n      this.endSMaskMode();\n    }\n    // Else, the state is okay and nothing needs to be done.\n  }\n\n  /**\n   * Soft mask mode takes the current main drawing canvas and replaces it with\n   * a temporary canvas. Any drawing operations that happen on the temporary\n   * canvas need to be composed with the main canvas that was suspended (see\n   * `compose()`). The temporary canvas also duplicates many of its operations\n   * on the suspended canvas to keep them in sync, so that when the soft mask\n   * mode ends any clipping paths or transformations will still be active and in\n   * the right order on the canvas' graphics state stack.\n   */\n  beginSMaskMode() {\n    if (this.inSMaskMode) {\n      throw new Error(\"beginSMaskMode called while already in smask mode\");\n    }\n    const drawnWidth = this.ctx.canvas.width;\n    const drawnHeight = this.ctx.canvas.height;\n    const cacheId = \"smaskGroupAt\" + this.groupLevel;\n    const scratchCanvas = this.cachedCanvases.getCanvas(\n      cacheId,\n      drawnWidth,\n      drawnHeight,\n      /* trackTransform */ true\n    );\n    this.suspendedCtx = this.ctx;\n    this.ctx = scratchCanvas.context;\n    const ctx = this.ctx;\n    ctx.setTransform.apply(ctx, this.suspendedCtx.mozCurrentTransform);\n    copyCtxState(this.suspendedCtx, ctx);\n    mirrorContextOperations(ctx, this.suspendedCtx);\n\n    this.setGState([\n      [\"BM\", \"source-over\"],\n      [\"ca\", 1],\n      [\"CA\", 1],\n    ]);\n  }\n\n  endSMaskMode() {\n    if (!this.inSMaskMode) {\n      throw new Error(\"endSMaskMode called while not in smask mode\");\n    }\n    // The soft mask is done, now restore the suspended canvas as the main\n    // drawing canvas.\n    this.ctx._removeMirroring();\n    copyCtxState(this.ctx, this.suspendedCtx);\n    this.ctx = this.suspendedCtx;\n\n    this.suspendedCtx = null;\n  }\n\n  compose(dirtyBox) {\n    if (!this.current.activeSMask) {\n      return;\n    }\n\n    if (!dirtyBox) {\n      dirtyBox = [0, 0, this.ctx.canvas.width, this.ctx.canvas.height];\n    } else {\n      dirtyBox[0] = Math.floor(dirtyBox[0]);\n      dirtyBox[1] = Math.floor(dirtyBox[1]);\n      dirtyBox[2] = Math.ceil(dirtyBox[2]);\n      dirtyBox[3] = Math.ceil(dirtyBox[3]);\n    }\n    const smask = this.current.activeSMask;\n    const suspendedCtx = this.suspendedCtx;\n\n    composeSMask(suspendedCtx, smask, this.ctx, dirtyBox);\n    // Whatever was drawn has been moved to the suspended canvas, now clear it\n    // out of the current canvas.\n    this.ctx.save();\n    this.ctx.setTransform(1, 0, 0, 1, 0, 0);\n    this.ctx.clearRect(0, 0, this.ctx.canvas.width, this.ctx.canvas.height);\n    this.ctx.restore();\n  }\n\n  save() {\n    if (this.inSMaskMode) {\n      // SMask mode may be turned on/off causing us to lose graphics state.\n      // Copy the temporary canvas state to the main(suspended) canvas to keep\n      // it in sync.\n      copyCtxState(this.ctx, this.suspendedCtx);\n      // Don't bother calling save on the temporary canvas since state is not\n      // saved there.\n      this.suspendedCtx.save();\n    } else {\n      this.ctx.save();\n    }\n    const old = this.current;\n    this.stateStack.push(old);\n    this.current = old.clone();\n  }\n\n  restore() {\n    if (this.stateStack.length === 0 && this.inSMaskMode) {\n      this.endSMaskMode();\n    }\n    if (this.stateStack.length !== 0) {\n      this.current = this.stateStack.pop();\n      if (this.inSMaskMode) {\n        // Graphics state is stored on the main(suspended) canvas. Restore its\n        // state then copy it over to the temporary canvas.\n        this.suspendedCtx.restore();\n        copyCtxState(this.suspendedCtx, this.ctx);\n      } else {\n        this.ctx.restore();\n      }\n      this.checkSMaskState();\n\n      // Ensure that the clipping path is reset (fixes issue6413.pdf).\n      this.pendingClip = null;\n\n      this._cachedScaleForStroking = null;\n      this._cachedGetSinglePixelWidth = null;\n    }\n  }\n\n  transform(a, b, c, d, e, f) {\n    this.ctx.transform(a, b, c, d, e, f);\n\n    this._cachedScaleForStroking = null;\n    this._cachedGetSinglePixelWidth = null;\n  }\n\n  // Path\n  constructPath(ops, args, minMax) {\n    const ctx = this.ctx;\n    const current = this.current;\n    let x = current.x,\n      y = current.y;\n    let startX, startY;\n    const currentTransform = ctx.mozCurrentTransform;\n\n    // Most of the time the current transform is a scaling matrix\n    // so we don't need to transform points before computing min/max:\n    // we can compute min/max first and then smartly \"apply\" the\n    // transform (see Util.scaleMinMax).\n    // For rectangle, moveTo and lineTo, min/max are computed in the\n    // worker (see evaluator.js).\n    const isScalingMatrix =\n      (currentTransform[0] === 0 && currentTransform[3] === 0) ||\n      (currentTransform[1] === 0 && currentTransform[2] === 0);\n    const minMaxForBezier = isScalingMatrix ? minMax.slice(0) : null;\n\n    for (let i = 0, j = 0, ii = ops.length; i < ii; i++) {\n      switch (ops[i] | 0) {\n        case OPS.rectangle:\n          x = args[j++];\n          y = args[j++];\n          const width = args[j++];\n          const height = args[j++];\n\n          const xw = x + width;\n          const yh = y + height;\n          ctx.moveTo(x, y);\n          if (width === 0 || height === 0) {\n            ctx.lineTo(xw, yh);\n          } else {\n            ctx.lineTo(xw, y);\n            ctx.lineTo(xw, yh);\n            ctx.lineTo(x, yh);\n          }\n          if (!isScalingMatrix) {\n            current.updateRectMinMax(currentTransform, [x, y, xw, yh]);\n          }\n          ctx.closePath();\n          break;\n        case OPS.moveTo:\n          x = args[j++];\n          y = args[j++];\n          ctx.moveTo(x, y);\n          if (!isScalingMatrix) {\n            current.updatePathMinMax(currentTransform, x, y);\n          }\n          break;\n        case OPS.lineTo:\n          x = args[j++];\n          y = args[j++];\n          ctx.lineTo(x, y);\n          if (!isScalingMatrix) {\n            current.updatePathMinMax(currentTransform, x, y);\n          }\n          break;\n        case OPS.curveTo:\n          startX = x;\n          startY = y;\n          x = args[j + 4];\n          y = args[j + 5];\n          ctx.bezierCurveTo(\n            args[j],\n            args[j + 1],\n            args[j + 2],\n            args[j + 3],\n            x,\n            y\n          );\n          current.updateCurvePathMinMax(\n            currentTransform,\n            startX,\n            startY,\n            args[j],\n            args[j + 1],\n            args[j + 2],\n            args[j + 3],\n            x,\n            y,\n            minMaxForBezier\n          );\n          j += 6;\n          break;\n        case OPS.curveTo2:\n          startX = x;\n          startY = y;\n          ctx.bezierCurveTo(\n            x,\n            y,\n            args[j],\n            args[j + 1],\n            args[j + 2],\n            args[j + 3]\n          );\n          current.updateCurvePathMinMax(\n            currentTransform,\n            startX,\n            startY,\n            x,\n            y,\n            args[j],\n            args[j + 1],\n            args[j + 2],\n            args[j + 3],\n            minMaxForBezier\n          );\n          x = args[j + 2];\n          y = args[j + 3];\n          j += 4;\n          break;\n        case OPS.curveTo3:\n          startX = x;\n          startY = y;\n          x = args[j + 2];\n          y = args[j + 3];\n          ctx.bezierCurveTo(args[j], args[j + 1], x, y, x, y);\n          current.updateCurvePathMinMax(\n            currentTransform,\n            startX,\n            startY,\n            args[j],\n            args[j + 1],\n            x,\n            y,\n            x,\n            y,\n            minMaxForBezier\n          );\n          j += 4;\n          break;\n        case OPS.closePath:\n          ctx.closePath();\n          break;\n      }\n    }\n\n    if (isScalingMatrix) {\n      current.updateScalingPathMinMax(currentTransform, minMaxForBezier);\n    }\n\n    current.setCurrentPoint(x, y);\n  }\n\n  closePath() {\n    this.ctx.closePath();\n  }\n\n  stroke(consumePath) {\n    consumePath = typeof consumePath !== \"undefined\" ? consumePath : true;\n    const ctx = this.ctx;\n    const strokeColor = this.current.strokeColor;\n    // For stroke we want to temporarily change the global alpha to the\n    // stroking alpha.\n    ctx.globalAlpha = this.current.strokeAlpha;\n    if (this.contentVisible) {\n      if (typeof strokeColor === \"object\" && strokeColor?.getPattern) {\n        ctx.save();\n        ctx.strokeStyle = strokeColor.getPattern(\n          ctx,\n          this,\n          ctx.mozCurrentTransformInverse,\n          PathType.STROKE\n        );\n        this.rescaleAndStroke(/* saveRestore */ false);\n        ctx.restore();\n      } else {\n        this.rescaleAndStroke(/* saveRestore */ true);\n      }\n    }\n    if (consumePath) {\n      this.consumePath(this.current.getClippedPathBoundingBox());\n    }\n    // Restore the global alpha to the fill alpha\n    ctx.globalAlpha = this.current.fillAlpha;\n  }\n\n  closeStroke() {\n    this.closePath();\n    this.stroke();\n  }\n\n  fill(consumePath) {\n    consumePath = typeof consumePath !== \"undefined\" ? consumePath : true;\n    const ctx = this.ctx;\n    const fillColor = this.current.fillColor;\n    const isPatternFill = this.current.patternFill;\n    let needRestore = false;\n\n    if (isPatternFill) {\n      ctx.save();\n      ctx.fillStyle = fillColor.getPattern(\n        ctx,\n        this,\n        ctx.mozCurrentTransformInverse,\n        PathType.FILL\n      );\n      needRestore = true;\n    }\n\n    const intersect = this.current.getClippedPathBoundingBox();\n    if (this.contentVisible && intersect !== null) {\n      if (this.pendingEOFill) {\n        ctx.fill(\"evenodd\");\n        this.pendingEOFill = false;\n      } else {\n        ctx.fill();\n      }\n    }\n\n    if (needRestore) {\n      ctx.restore();\n    }\n    if (consumePath) {\n      this.consumePath(intersect);\n    }\n  }\n\n  eoFill() {\n    this.pendingEOFill = true;\n    this.fill();\n  }\n\n  fillStroke() {\n    this.fill(false);\n    this.stroke(false);\n\n    this.consumePath();\n  }\n\n  eoFillStroke() {\n    this.pendingEOFill = true;\n    this.fillStroke();\n  }\n\n  closeFillStroke() {\n    this.closePath();\n    this.fillStroke();\n  }\n\n  closeEOFillStroke() {\n    this.pendingEOFill = true;\n    this.closePath();\n    this.fillStroke();\n  }\n\n  endPath() {\n    this.consumePath();\n  }\n\n  // Clipping\n  clip() {\n    this.pendingClip = NORMAL_CLIP;\n  }\n\n  eoClip() {\n    this.pendingClip = EO_CLIP;\n  }\n\n  // Text\n  beginText() {\n    this.current.textMatrix = IDENTITY_MATRIX;\n    this.current.textMatrixScale = 1;\n    this.current.x = this.current.lineX = 0;\n    this.current.y = this.current.lineY = 0;\n  }\n\n  endText() {\n    const paths = this.pendingTextPaths;\n    const ctx = this.ctx;\n    if (paths === undefined) {\n      ctx.beginPath();\n      return;\n    }\n\n    ctx.save();\n    ctx.beginPath();\n    for (let i = 0; i < paths.length; i++) {\n      const path = paths[i];\n      ctx.setTransform.apply(ctx, path.transform);\n      ctx.translate(path.x, path.y);\n      path.addToPath(ctx, path.fontSize);\n    }\n    ctx.restore();\n    ctx.clip();\n    ctx.beginPath();\n    delete this.pendingTextPaths;\n  }\n\n  setCharSpacing(spacing) {\n    this.current.charSpacing = spacing;\n  }\n\n  setWordSpacing(spacing) {\n    this.current.wordSpacing = spacing;\n  }\n\n  setHScale(scale) {\n    this.current.textHScale = scale / 100;\n  }\n\n  setLeading(leading) {\n    this.current.leading = -leading;\n  }\n\n  setFont(fontRefName, size) {\n    const fontObj = this.commonObjs.get(fontRefName);\n    const current = this.current;\n\n    if (!fontObj) {\n      throw new Error(`Can't find font for ${fontRefName}`);\n    }\n    current.fontMatrix = fontObj.fontMatrix || FONT_IDENTITY_MATRIX;\n\n    // A valid matrix needs all main diagonal elements to be non-zero\n    // This also ensures we bypass FF bugzilla bug #719844.\n    if (current.fontMatrix[0] === 0 || current.fontMatrix[3] === 0) {\n      warn(\"Invalid font matrix for font \" + fontRefName);\n    }\n\n    // The spec for Tf (setFont) says that 'size' specifies the font 'scale',\n    // and in some docs this can be negative (inverted x-y axes).\n    if (size < 0) {\n      size = -size;\n      current.fontDirection = -1;\n    } else {\n      current.fontDirection = 1;\n    }\n\n    this.current.font = fontObj;\n    this.current.fontSize = size;\n\n    if (fontObj.isType3Font) {\n      return; // we don't need ctx.font for Type3 fonts\n    }\n\n    const name = fontObj.loadedName || \"sans-serif\";\n\n    let bold = \"normal\";\n    if (fontObj.black) {\n      bold = \"900\";\n    } else if (fontObj.bold) {\n      bold = \"bold\";\n    }\n    const italic = fontObj.italic ? \"italic\" : \"normal\";\n    const typeface = `\"${name}\", ${fontObj.fallbackName}`;\n\n    // Some font backends cannot handle fonts below certain size.\n    // Keeping the font at minimal size and using the fontSizeScale to change\n    // the current transformation matrix before the fillText/strokeText.\n    // See https://bugzilla.mozilla.org/show_bug.cgi?id=726227\n    let browserFontSize = size;\n    if (size < MIN_FONT_SIZE) {\n      browserFontSize = MIN_FONT_SIZE;\n    } else if (size > MAX_FONT_SIZE) {\n      browserFontSize = MAX_FONT_SIZE;\n    }\n    this.current.fontSizeScale = size / browserFontSize;\n\n    this.ctx.font = `${italic} ${bold} ${browserFontSize}px ${typeface}`;\n  }\n\n  setTextRenderingMode(mode) {\n    this.current.textRenderingMode = mode;\n  }\n\n  setTextRise(rise) {\n    this.current.textRise = rise;\n  }\n\n  moveText(x, y) {\n    this.current.x = this.current.lineX += x;\n    this.current.y = this.current.lineY += y;\n  }\n\n  setLeadingMoveText(x, y) {\n    this.setLeading(-y);\n    this.moveText(x, y);\n  }\n\n  setTextMatrix(a, b, c, d, e, f) {\n    this.current.textMatrix = [a, b, c, d, e, f];\n    this.current.textMatrixScale = Math.hypot(a, b);\n\n    this.current.x = this.current.lineX = 0;\n    this.current.y = this.current.lineY = 0;\n  }\n\n  nextLine() {\n    this.moveText(0, this.current.leading);\n  }\n\n  paintChar(character, x, y, patternTransform) {\n    const ctx = this.ctx;\n    const current = this.current;\n    const font = current.font;\n    const textRenderingMode = current.textRenderingMode;\n    const fontSize = current.fontSize / current.fontSizeScale;\n    const fillStrokeMode =\n      textRenderingMode & TextRenderingMode.FILL_STROKE_MASK;\n    const isAddToPathSet = !!(\n      textRenderingMode & TextRenderingMode.ADD_TO_PATH_FLAG\n    );\n    const patternFill = current.patternFill && !font.missingFile;\n\n    let addToPath;\n    if (font.disableFontFace || isAddToPathSet || patternFill) {\n      addToPath = font.getPathGenerator(this.commonObjs, character);\n    }\n\n    if (font.disableFontFace || patternFill) {\n      ctx.save();\n      ctx.translate(x, y);\n      ctx.beginPath();\n      addToPath(ctx, fontSize);\n      if (patternTransform) {\n        ctx.setTransform.apply(ctx, patternTransform);\n      }\n      if (\n        fillStrokeMode === TextRenderingMode.FILL ||\n        fillStrokeMode === TextRenderingMode.FILL_STROKE\n      ) {\n        ctx.fill();\n      }\n      if (\n        fillStrokeMode === TextRenderingMode.STROKE ||\n        fillStrokeMode === TextRenderingMode.FILL_STROKE\n      ) {\n        ctx.stroke();\n      }\n      ctx.restore();\n    } else {\n      if (\n        fillStrokeMode === TextRenderingMode.FILL ||\n        fillStrokeMode === TextRenderingMode.FILL_STROKE\n      ) {\n        ctx.fillText(character, x, y);\n      }\n      if (\n        fillStrokeMode === TextRenderingMode.STROKE ||\n        fillStrokeMode === TextRenderingMode.FILL_STROKE\n      ) {\n        ctx.strokeText(character, x, y);\n      }\n    }\n\n    if (isAddToPathSet) {\n      const paths = this.pendingTextPaths || (this.pendingTextPaths = []);\n      paths.push({\n        transform: ctx.mozCurrentTransform,\n        x,\n        y,\n        fontSize,\n        addToPath,\n      });\n    }\n  }\n\n  get isFontSubpixelAAEnabled() {\n    // Checks if anti-aliasing is enabled when scaled text is painted.\n    // On Windows GDI scaled fonts looks bad.\n    const { context: ctx } = this.cachedCanvases.getCanvas(\n      \"isFontSubpixelAAEnabled\",\n      10,\n      10,\n      /* trackTransform */ false\n    );\n    ctx.scale(1.5, 1);\n    ctx.fillText(\"I\", 0, 10);\n    const data = ctx.getImageData(0, 0, 10, 10).data;\n    let enabled = false;\n    for (let i = 3; i < data.length; i += 4) {\n      if (data[i] > 0 && data[i] < 255) {\n        enabled = true;\n        break;\n      }\n    }\n    return shadow(this, \"isFontSubpixelAAEnabled\", enabled);\n  }\n\n  showText(glyphs) {\n    const current = this.current;\n    const font = current.font;\n    if (font.isType3Font) {\n      return this.showType3Text(glyphs);\n    }\n\n    const fontSize = current.fontSize;\n    if (fontSize === 0) {\n      return undefined;\n    }\n\n    const ctx = this.ctx;\n    const fontSizeScale = current.fontSizeScale;\n    const charSpacing = current.charSpacing;\n    const wordSpacing = current.wordSpacing;\n    const fontDirection = current.fontDirection;\n    const textHScale = current.textHScale * fontDirection;\n    const glyphsLength = glyphs.length;\n    const vertical = font.vertical;\n    const spacingDir = vertical ? 1 : -1;\n    const defaultVMetrics = font.defaultVMetrics;\n    const widthAdvanceScale = fontSize * current.fontMatrix[0];\n\n    const simpleFillText =\n      current.textRenderingMode === TextRenderingMode.FILL &&\n      !font.disableFontFace &&\n      !current.patternFill;\n\n    ctx.save();\n    ctx.transform.apply(ctx, current.textMatrix);\n    ctx.translate(current.x, current.y + current.textRise);\n\n    if (fontDirection > 0) {\n      ctx.scale(textHScale, -1);\n    } else {\n      ctx.scale(textHScale, 1);\n    }\n\n    let patternTransform;\n    if (current.patternFill) {\n      ctx.save();\n      const pattern = current.fillColor.getPattern(\n        ctx,\n        this,\n        ctx.mozCurrentTransformInverse,\n        PathType.FILL\n      );\n      patternTransform = ctx.mozCurrentTransform;\n      ctx.restore();\n      ctx.fillStyle = pattern;\n    }\n\n    let lineWidth = current.lineWidth;\n    const scale = current.textMatrixScale;\n    if (scale === 0 || lineWidth === 0) {\n      const fillStrokeMode =\n        current.textRenderingMode & TextRenderingMode.FILL_STROKE_MASK;\n      if (\n        fillStrokeMode === TextRenderingMode.STROKE ||\n        fillStrokeMode === TextRenderingMode.FILL_STROKE\n      ) {\n        lineWidth = this.getSinglePixelWidth();\n      }\n    } else {\n      lineWidth /= scale;\n    }\n\n    if (fontSizeScale !== 1.0) {\n      ctx.scale(fontSizeScale, fontSizeScale);\n      lineWidth /= fontSizeScale;\n    }\n\n    ctx.lineWidth = lineWidth;\n\n    let x = 0,\n      i;\n    for (i = 0; i < glyphsLength; ++i) {\n      const glyph = glyphs[i];\n      if (typeof glyph === \"number\") {\n        x += (spacingDir * glyph * fontSize) / 1000;\n        continue;\n      }\n\n      let restoreNeeded = false;\n      const spacing = (glyph.isSpace ? wordSpacing : 0) + charSpacing;\n      const character = glyph.fontChar;\n      const accent = glyph.accent;\n      let scaledX, scaledY;\n      let width = glyph.width;\n      if (vertical) {\n        const vmetric = glyph.vmetric || defaultVMetrics;\n        const vx =\n          -(glyph.vmetric ? vmetric[1] : width * 0.5) * widthAdvanceScale;\n        const vy = vmetric[2] * widthAdvanceScale;\n\n        width = vmetric ? -vmetric[0] : width;\n        scaledX = vx / fontSizeScale;\n        scaledY = (x + vy) / fontSizeScale;\n      } else {\n        scaledX = x / fontSizeScale;\n        scaledY = 0;\n      }\n\n      if (font.remeasure && width > 0) {\n        // Some standard fonts may not have the exact width: rescale per\n        // character if measured width is greater than expected glyph width\n        // and subpixel-aa is enabled, otherwise just center the glyph.\n        const measuredWidth =\n          ((ctx.measureText(character).width * 1000) / fontSize) *\n          fontSizeScale;\n        if (width < measuredWidth && this.isFontSubpixelAAEnabled) {\n          const characterScaleX = width / measuredWidth;\n          restoreNeeded = true;\n          ctx.save();\n          ctx.scale(characterScaleX, 1);\n          scaledX /= characterScaleX;\n        } else if (width !== measuredWidth) {\n          scaledX +=\n            (((width - measuredWidth) / 2000) * fontSize) / fontSizeScale;\n        }\n      }\n\n      // Only attempt to draw the glyph if it is actually in the embedded font\n      // file or if there isn't a font file so the fallback font is shown.\n      if (this.contentVisible && (glyph.isInFont || font.missingFile)) {\n        if (simpleFillText && !accent) {\n          // common case\n          ctx.fillText(character, scaledX, scaledY);\n        } else {\n          this.paintChar(character, scaledX, scaledY, patternTransform);\n          if (accent) {\n            const scaledAccentX =\n              scaledX + (fontSize * accent.offset.x) / fontSizeScale;\n            const scaledAccentY =\n              scaledY - (fontSize * accent.offset.y) / fontSizeScale;\n            this.paintChar(\n              accent.fontChar,\n              scaledAccentX,\n              scaledAccentY,\n              patternTransform\n            );\n          }\n        }\n      }\n\n      let charWidth;\n      if (vertical) {\n        charWidth = width * widthAdvanceScale - spacing * fontDirection;\n      } else {\n        charWidth = width * widthAdvanceScale + spacing * fontDirection;\n      }\n      x += charWidth;\n\n      if (restoreNeeded) {\n        ctx.restore();\n      }\n    }\n    if (vertical) {\n      current.y -= x;\n    } else {\n      current.x += x * textHScale;\n    }\n    ctx.restore();\n    this.compose();\n\n    return undefined;\n  }\n\n  showType3Text(glyphs) {\n    // Type3 fonts - each glyph is a \"mini-PDF\"\n    const ctx = this.ctx;\n    const current = this.current;\n    const font = current.font;\n    const fontSize = current.fontSize;\n    const fontDirection = current.fontDirection;\n    const spacingDir = font.vertical ? 1 : -1;\n    const charSpacing = current.charSpacing;\n    const wordSpacing = current.wordSpacing;\n    const textHScale = current.textHScale * fontDirection;\n    const fontMatrix = current.fontMatrix || FONT_IDENTITY_MATRIX;\n    const glyphsLength = glyphs.length;\n    const isTextInvisible =\n      current.textRenderingMode === TextRenderingMode.INVISIBLE;\n    let i, glyph, width, spacingLength;\n\n    if (isTextInvisible || fontSize === 0) {\n      return;\n    }\n    this._cachedScaleForStroking = null;\n    this._cachedGetSinglePixelWidth = null;\n\n    ctx.save();\n    ctx.transform.apply(ctx, current.textMatrix);\n    ctx.translate(current.x, current.y);\n\n    ctx.scale(textHScale, fontDirection);\n\n    for (i = 0; i < glyphsLength; ++i) {\n      glyph = glyphs[i];\n      if (typeof glyph === \"number\") {\n        spacingLength = (spacingDir * glyph * fontSize) / 1000;\n        this.ctx.translate(spacingLength, 0);\n        current.x += spacingLength * textHScale;\n        continue;\n      }\n\n      const spacing = (glyph.isSpace ? wordSpacing : 0) + charSpacing;\n      const operatorList = font.charProcOperatorList[glyph.operatorListId];\n      if (!operatorList) {\n        warn(`Type3 character \"${glyph.operatorListId}\" is not available.`);\n        continue;\n      }\n      if (this.contentVisible) {\n        this.processingType3 = glyph;\n        this.save();\n        ctx.scale(fontSize, fontSize);\n        ctx.transform.apply(ctx, fontMatrix);\n        this.executeOperatorList(operatorList);\n        this.restore();\n      }\n\n      const transformed = Util.applyTransform([glyph.width, 0], fontMatrix);\n      width = transformed[0] * fontSize + spacing;\n\n      ctx.translate(width, 0);\n      current.x += width * textHScale;\n    }\n    ctx.restore();\n    this.processingType3 = null;\n  }\n\n  // Type3 fonts\n  setCharWidth(xWidth, yWidth) {\n    // We can safely ignore this since the width should be the same\n    // as the width in the Widths array.\n  }\n\n  setCharWidthAndBounds(xWidth, yWidth, llx, lly, urx, ury) {\n    // TODO According to the spec we're also suppose to ignore any operators\n    // that set color or include images while processing this type3 font.\n    this.ctx.rect(llx, lly, urx - llx, ury - lly);\n    this.ctx.clip();\n    this.endPath();\n  }\n\n  // Color\n  getColorN_Pattern(IR) {\n    let pattern;\n    if (IR[0] === \"TilingPattern\") {\n      const color = IR[1];\n      const baseTransform =\n        this.baseTransform || this.ctx.mozCurrentTransform.slice();\n      const canvasGraphicsFactory = {\n        createCanvasGraphics: ctx => {\n          return new CanvasGraphics(\n            ctx,\n            this.commonObjs,\n            this.objs,\n            this.canvasFactory\n          );\n        },\n      };\n      pattern = new TilingPattern(\n        IR,\n        color,\n        this.ctx,\n        canvasGraphicsFactory,\n        baseTransform\n      );\n    } else {\n      pattern = this._getPattern(IR[1], IR[2]);\n    }\n    return pattern;\n  }\n\n  setStrokeColorN() {\n    this.current.strokeColor = this.getColorN_Pattern(arguments);\n  }\n\n  setFillColorN() {\n    this.current.fillColor = this.getColorN_Pattern(arguments);\n    this.current.patternFill = true;\n  }\n\n  setStrokeRGBColor(r, g, b) {\n    const color = this.selectColor?.(r, g, b) || Util.makeHexColor(r, g, b);\n    this.ctx.strokeStyle = color;\n    this.current.strokeColor = color;\n  }\n\n  setFillRGBColor(r, g, b) {\n    const color = this.selectColor?.(r, g, b) || Util.makeHexColor(r, g, b);\n    this.ctx.fillStyle = color;\n    this.current.fillColor = color;\n    this.current.patternFill = false;\n  }\n\n  _getPattern(objId, matrix = null) {\n    let pattern;\n    if (this.cachedPatterns.has(objId)) {\n      pattern = this.cachedPatterns.get(objId);\n    } else {\n      pattern = getShadingPattern(this.objs.get(objId));\n      this.cachedPatterns.set(objId, pattern);\n    }\n    if (matrix) {\n      pattern.matrix = matrix;\n    }\n    return pattern;\n  }\n\n  shadingFill(objId) {\n    if (!this.contentVisible) {\n      return;\n    }\n    const ctx = this.ctx;\n\n    this.save();\n    const pattern = this._getPattern(objId);\n    ctx.fillStyle = pattern.getPattern(\n      ctx,\n      this,\n      ctx.mozCurrentTransformInverse,\n      PathType.SHADING\n    );\n\n    const inv = ctx.mozCurrentTransformInverse;\n    if (inv) {\n      const canvas = ctx.canvas;\n      const width = canvas.width;\n      const height = canvas.height;\n\n      const bl = Util.applyTransform([0, 0], inv);\n      const br = Util.applyTransform([0, height], inv);\n      const ul = Util.applyTransform([width, 0], inv);\n      const ur = Util.applyTransform([width, height], inv);\n\n      const x0 = Math.min(bl[0], br[0], ul[0], ur[0]);\n      const y0 = Math.min(bl[1], br[1], ul[1], ur[1]);\n      const x1 = Math.max(bl[0], br[0], ul[0], ur[0]);\n      const y1 = Math.max(bl[1], br[1], ul[1], ur[1]);\n\n      this.ctx.fillRect(x0, y0, x1 - x0, y1 - y0);\n    } else {\n      // HACK to draw the gradient onto an infinite rectangle.\n      // PDF gradients are drawn across the entire image while\n      // Canvas only allows gradients to be drawn in a rectangle\n      // The following bug should allow us to remove this.\n      // https://bugzilla.mozilla.org/show_bug.cgi?id=664884\n\n      this.ctx.fillRect(-1e10, -1e10, 2e10, 2e10);\n    }\n\n    this.compose(this.current.getClippedPathBoundingBox());\n    this.restore();\n  }\n\n  // Images\n  beginInlineImage() {\n    unreachable(\"Should not call beginInlineImage\");\n  }\n\n  beginImageData() {\n    unreachable(\"Should not call beginImageData\");\n  }\n\n  paintFormXObjectBegin(matrix, bbox) {\n    if (!this.contentVisible) {\n      return;\n    }\n    this.save();\n    this.baseTransformStack.push(this.baseTransform);\n\n    if (Array.isArray(matrix) && matrix.length === 6) {\n      this.transform.apply(this, matrix);\n    }\n\n    this.baseTransform = this.ctx.mozCurrentTransform;\n\n    if (bbox) {\n      const width = bbox[2] - bbox[0];\n      const height = bbox[3] - bbox[1];\n      this.ctx.rect(bbox[0], bbox[1], width, height);\n      this.current.updateRectMinMax(this.ctx.mozCurrentTransform, bbox);\n      this.clip();\n      this.endPath();\n    }\n  }\n\n  paintFormXObjectEnd() {\n    if (!this.contentVisible) {\n      return;\n    }\n    this.restore();\n    this.baseTransform = this.baseTransformStack.pop();\n  }\n\n  beginGroup(group) {\n    if (!this.contentVisible) {\n      return;\n    }\n\n    this.save();\n    // If there's an active soft mask we don't want it enabled for the group, so\n    // clear it out. The mask and suspended canvas will be restored in endGroup.\n    if (this.inSMaskMode) {\n      this.endSMaskMode();\n      this.current.activeSMask = null;\n    }\n\n    const currentCtx = this.ctx;\n    // TODO non-isolated groups - according to Rik at adobe non-isolated\n    // group results aren't usually that different and they even have tools\n    // that ignore this setting. Notes from Rik on implementing:\n    // - When you encounter an transparency group, create a new canvas with\n    // the dimensions of the bbox\n    // - copy the content from the previous canvas to the new canvas\n    // - draw as usual\n    // - remove the backdrop alpha:\n    // alphaNew = 1 - (1 - alpha)/(1 - alphaBackdrop) with 'alpha' the alpha\n    // value of your transparency group and 'alphaBackdrop' the alpha of the\n    // backdrop\n    // - remove background color:\n    // colorNew = color - alphaNew *colorBackdrop /(1 - alphaNew)\n    if (!group.isolated) {\n      info(\"TODO: Support non-isolated groups.\");\n    }\n\n    // TODO knockout - supposedly possible with the clever use of compositing\n    // modes.\n    if (group.knockout) {\n      warn(\"Knockout groups not supported.\");\n    }\n\n    const currentTransform = currentCtx.mozCurrentTransform;\n    if (group.matrix) {\n      currentCtx.transform.apply(currentCtx, group.matrix);\n    }\n    if (!group.bbox) {\n      throw new Error(\"Bounding box is required.\");\n    }\n\n    // Based on the current transform figure out how big the bounding box\n    // will actually be.\n    let bounds = Util.getAxialAlignedBoundingBox(\n      group.bbox,\n      currentCtx.mozCurrentTransform\n    );\n    // Clip the bounding box to the current canvas.\n    const canvasBounds = [\n      0,\n      0,\n      currentCtx.canvas.width,\n      currentCtx.canvas.height,\n    ];\n    bounds = Util.intersect(bounds, canvasBounds) || [0, 0, 0, 0];\n    // Use ceil in case we're between sizes so we don't create canvas that is\n    // too small and make the canvas at least 1x1 pixels.\n    const offsetX = Math.floor(bounds[0]);\n    const offsetY = Math.floor(bounds[1]);\n    let drawnWidth = Math.max(Math.ceil(bounds[2]) - offsetX, 1);\n    let drawnHeight = Math.max(Math.ceil(bounds[3]) - offsetY, 1);\n    let scaleX = 1,\n      scaleY = 1;\n    if (drawnWidth > MAX_GROUP_SIZE) {\n      scaleX = drawnWidth / MAX_GROUP_SIZE;\n      drawnWidth = MAX_GROUP_SIZE;\n    }\n    if (drawnHeight > MAX_GROUP_SIZE) {\n      scaleY = drawnHeight / MAX_GROUP_SIZE;\n      drawnHeight = MAX_GROUP_SIZE;\n    }\n\n    this.current.startNewPathAndClipBox([0, 0, drawnWidth, drawnHeight]);\n\n    let cacheId = \"groupAt\" + this.groupLevel;\n    if (group.smask) {\n      // Using two cache entries is case if masks are used one after another.\n      cacheId += \"_smask_\" + (this.smaskCounter++ % 2);\n    }\n    const scratchCanvas = this.cachedCanvases.getCanvas(\n      cacheId,\n      drawnWidth,\n      drawnHeight,\n      /* trackTransform */ true\n    );\n    const groupCtx = scratchCanvas.context;\n\n    // Since we created a new canvas that is just the size of the bounding box\n    // we have to translate the group ctx.\n    groupCtx.scale(1 / scaleX, 1 / scaleY);\n    groupCtx.translate(-offsetX, -offsetY);\n    groupCtx.transform.apply(groupCtx, currentTransform);\n\n    if (group.smask) {\n      // Saving state and cached mask to be used in setGState.\n      this.smaskStack.push({\n        canvas: scratchCanvas.canvas,\n        context: groupCtx,\n        offsetX,\n        offsetY,\n        scaleX,\n        scaleY,\n        subtype: group.smask.subtype,\n        backdrop: group.smask.backdrop,\n        transferMap: group.smask.transferMap || null,\n        startTransformInverse: null, // used during suspend operation\n      });\n    } else {\n      // Setup the current ctx so when the group is popped we draw it at the\n      // right location.\n      currentCtx.setTransform(1, 0, 0, 1, 0, 0);\n      currentCtx.translate(offsetX, offsetY);\n      currentCtx.scale(scaleX, scaleY);\n      currentCtx.save();\n    }\n    // The transparency group inherits all off the current graphics state\n    // except the blend mode, soft mask, and alpha constants.\n    copyCtxState(currentCtx, groupCtx);\n    this.ctx = groupCtx;\n    this.setGState([\n      [\"BM\", \"source-over\"],\n      [\"ca\", 1],\n      [\"CA\", 1],\n    ]);\n    this.groupStack.push(currentCtx);\n    this.groupLevel++;\n  }\n\n  endGroup(group) {\n    if (!this.contentVisible) {\n      return;\n    }\n    this.groupLevel--;\n    const groupCtx = this.ctx;\n    const ctx = this.groupStack.pop();\n    this.ctx = ctx;\n    // Turn off image smoothing to avoid sub pixel interpolation which can\n    // look kind of blurry for some pdfs.\n    this.ctx.imageSmoothingEnabled = false;\n\n    if (group.smask) {\n      this.tempSMask = this.smaskStack.pop();\n      this.restore();\n    } else {\n      this.ctx.restore();\n      const currentMtx = this.ctx.mozCurrentTransform;\n      this.restore();\n      this.ctx.save();\n      this.ctx.setTransform.apply(this.ctx, currentMtx);\n      const dirtyBox = Util.getAxialAlignedBoundingBox(\n        [0, 0, groupCtx.canvas.width, groupCtx.canvas.height],\n        currentMtx\n      );\n      this.ctx.drawImage(groupCtx.canvas, 0, 0);\n      this.ctx.restore();\n      this.compose(dirtyBox);\n    }\n  }\n\n  beginAnnotations() {\n    this.save();\n    if (this.baseTransform) {\n      this.ctx.setTransform.apply(this.ctx, this.baseTransform);\n    }\n  }\n\n  endAnnotations() {\n    this.restore();\n  }\n\n  beginAnnotation(id, rect, transform, matrix, hasOwnCanvas) {\n    this.save();\n\n    if (Array.isArray(rect) && rect.length === 4) {\n      const width = rect[2] - rect[0];\n      const height = rect[3] - rect[1];\n\n      if (hasOwnCanvas && this.annotationCanvasMap) {\n        transform = transform.slice();\n        transform[4] -= rect[0];\n        transform[5] -= rect[1];\n\n        rect = rect.slice();\n        rect[0] = rect[1] = 0;\n        rect[2] = width;\n        rect[3] = height;\n\n        const [scaleX, scaleY] = Util.singularValueDecompose2dScale(\n          this.ctx.mozCurrentTransform\n        );\n        const { viewportScale } = this;\n        const canvasWidth = Math.ceil(\n          width * this.outputScaleX * viewportScale\n        );\n        const canvasHeight = Math.ceil(\n          height * this.outputScaleY * viewportScale\n        );\n\n        this.annotationCanvas = this.canvasFactory.create(\n          canvasWidth,\n          canvasHeight\n        );\n        const { canvas, context } = this.annotationCanvas;\n        const viewportScaleFactorStr = `var(--zoom-factor) * ${PixelsPerInch.PDF_TO_CSS_UNITS}`;\n        canvas.style.width = `calc(${width}px * ${viewportScaleFactorStr})`;\n        canvas.style.height = `calc(${height}px * ${viewportScaleFactorStr})`;\n        this.annotationCanvasMap.set(id, canvas);\n        this.annotationCanvas.savedCtx = this.ctx;\n        this.ctx = context;\n        this.ctx.setTransform(scaleX, 0, 0, -scaleY, 0, height * scaleY);\n        addContextCurrentTransform(this.ctx);\n\n        resetCtxToDefault(this.ctx, this.foregroundColor);\n      } else {\n        resetCtxToDefault(this.ctx, this.foregroundColor);\n\n        this.ctx.rect(rect[0], rect[1], width, height);\n        this.ctx.clip();\n        this.endPath();\n      }\n    }\n\n    this.current = new CanvasExtraState(\n      this.ctx.canvas.width,\n      this.ctx.canvas.height\n    );\n\n    this.transform.apply(this, transform);\n    this.transform.apply(this, matrix);\n  }\n\n  endAnnotation() {\n    if (this.annotationCanvas) {\n      this.ctx = this.annotationCanvas.savedCtx;\n      delete this.annotationCanvas.savedCtx;\n      delete this.annotationCanvas;\n    }\n    this.restore();\n  }\n\n  paintImageMaskXObject(img) {\n    if (!this.contentVisible) {\n      return;\n    }\n    const count = img.count;\n    img = this.getObject(img.data, img);\n    img.count = count;\n\n    const ctx = this.ctx;\n    const glyph = this.processingType3;\n\n    if (glyph) {\n      if (glyph.compiled === undefined) {\n        glyph.compiled = compileType3Glyph(img);\n      }\n\n      if (glyph.compiled) {\n        glyph.compiled(ctx);\n        return;\n      }\n    }\n    const mask = this._createMaskCanvas(img);\n    const maskCanvas = mask.canvas;\n\n    ctx.save();\n    // The mask is drawn with the transform applied. Reset the current\n    // transform to draw to the identity.\n    ctx.setTransform(1, 0, 0, 1, 0, 0);\n    ctx.drawImage(maskCanvas, mask.offsetX, mask.offsetY);\n    ctx.restore();\n    this.compose();\n  }\n\n  paintImageMaskXObjectRepeat(\n    img,\n    scaleX,\n    skewX = 0,\n    skewY = 0,\n    scaleY,\n    positions\n  ) {\n    if (!this.contentVisible) {\n      return;\n    }\n\n    img = this.getObject(img.data, img);\n\n    const ctx = this.ctx;\n    ctx.save();\n    const currentTransform = ctx.mozCurrentTransform;\n    ctx.transform(scaleX, skewX, skewY, scaleY, 0, 0);\n    const mask = this._createMaskCanvas(img);\n\n    ctx.setTransform(1, 0, 0, 1, 0, 0);\n    for (let i = 0, ii = positions.length; i < ii; i += 2) {\n      const trans = Util.transform(currentTransform, [\n        scaleX,\n        skewX,\n        skewY,\n        scaleY,\n        positions[i],\n        positions[i + 1],\n      ]);\n\n      const [x, y] = Util.applyTransform([0, 0], trans);\n      ctx.drawImage(mask.canvas, x, y);\n    }\n    ctx.restore();\n    this.compose();\n  }\n\n  paintImageMaskXObjectGroup(images) {\n    if (!this.contentVisible) {\n      return;\n    }\n    const ctx = this.ctx;\n\n    const fillColor = this.current.fillColor;\n    const isPatternFill = this.current.patternFill;\n    for (let i = 0, ii = images.length; i < ii; i++) {\n      const image = images[i];\n      const width = image.width,\n        height = image.height;\n\n      const maskCanvas = this.cachedCanvases.getCanvas(\n        \"maskCanvas\",\n        width,\n        height,\n        /* trackTransform */ false\n      );\n      const maskCtx = maskCanvas.context;\n      maskCtx.save();\n\n      putBinaryImageMask(maskCtx, image);\n\n      maskCtx.globalCompositeOperation = \"source-in\";\n\n      maskCtx.fillStyle = isPatternFill\n        ? fillColor.getPattern(\n            maskCtx,\n            this,\n            ctx.mozCurrentTransformInverse,\n            PathType.FILL\n          )\n        : fillColor;\n      maskCtx.fillRect(0, 0, width, height);\n\n      maskCtx.restore();\n\n      ctx.save();\n      ctx.transform.apply(ctx, image.transform);\n      ctx.scale(1, -1);\n      drawImageAtIntegerCoords(\n        ctx,\n        maskCanvas.canvas,\n        0,\n        0,\n        width,\n        height,\n        0,\n        -1,\n        1,\n        1\n      );\n      ctx.restore();\n    }\n    this.compose();\n  }\n\n  paintImageXObject(objId) {\n    if (!this.contentVisible) {\n      return;\n    }\n    const imgData = this.getObject(objId);\n    if (!imgData) {\n      warn(\"Dependent image isn't ready yet\");\n      return;\n    }\n\n    this.paintInlineImageXObject(imgData);\n  }\n\n  paintImageXObjectRepeat(objId, scaleX, scaleY, positions) {\n    if (!this.contentVisible) {\n      return;\n    }\n    const imgData = this.getObject(objId);\n    if (!imgData) {\n      warn(\"Dependent image isn't ready yet\");\n      return;\n    }\n\n    const width = imgData.width;\n    const height = imgData.height;\n    const map = [];\n    for (let i = 0, ii = positions.length; i < ii; i += 2) {\n      map.push({\n        transform: [scaleX, 0, 0, scaleY, positions[i], positions[i + 1]],\n        x: 0,\n        y: 0,\n        w: width,\n        h: height,\n      });\n    }\n    this.paintInlineImageXObjectGroup(imgData, map);\n  }\n\n  paintInlineImageXObject(imgData) {\n    if (!this.contentVisible) {\n      return;\n    }\n    const width = imgData.width;\n    const height = imgData.height;\n    const ctx = this.ctx;\n\n    this.save();\n    // scale the image to the unit square\n    ctx.scale(1 / width, -1 / height);\n\n    let imgToPaint;\n    // typeof check is needed due to node.js support, see issue #8489\n    if (\n      (typeof HTMLElement === \"function\" && imgData instanceof HTMLElement) ||\n      !imgData.data\n    ) {\n      imgToPaint = imgData;\n    } else {\n      const tmpCanvas = this.cachedCanvases.getCanvas(\n        \"inlineImage\",\n        width,\n        height,\n        /* trackTransform */ false\n      );\n      const tmpCtx = tmpCanvas.context;\n      putBinaryImageData(tmpCtx, imgData, this.current.transferMaps);\n      imgToPaint = tmpCanvas.canvas;\n    }\n\n    const scaled = this._scaleImage(imgToPaint, ctx.mozCurrentTransformInverse);\n    ctx.imageSmoothingEnabled = getImageSmoothingEnabled(\n      ctx.mozCurrentTransform,\n      imgData.interpolate\n    );\n\n    const [rWidth, rHeight] = drawImageAtIntegerCoords(\n      ctx,\n      scaled.img,\n      0,\n      0,\n      scaled.paintWidth,\n      scaled.paintHeight,\n      0,\n      -height,\n      width,\n      height\n    );\n\n    if (this.imageLayer) {\n      const position = this.getCanvasPosition(0, -height);\n      this.imageLayer.appendImage({\n        imgData,\n        left: position[0],\n        top: position[1],\n        width: rWidth,\n        height: rHeight,\n      });\n    }\n    this.compose();\n    this.restore();\n  }\n\n  paintInlineImageXObjectGroup(imgData, map) {\n    if (!this.contentVisible) {\n      return;\n    }\n    const ctx = this.ctx;\n    const w = imgData.width;\n    const h = imgData.height;\n\n    const tmpCanvas = this.cachedCanvases.getCanvas(\n      \"inlineImage\",\n      w,\n      h,\n      /* trackTransform */ false\n    );\n    const tmpCtx = tmpCanvas.context;\n    putBinaryImageData(tmpCtx, imgData, this.current.transferMaps);\n\n    for (let i = 0, ii = map.length; i < ii; i++) {\n      const entry = map[i];\n      ctx.save();\n      ctx.transform.apply(ctx, entry.transform);\n      ctx.scale(1, -1);\n      drawImageAtIntegerCoords(\n        ctx,\n        tmpCanvas.canvas,\n        entry.x,\n        entry.y,\n        entry.w,\n        entry.h,\n        0,\n        -1,\n        1,\n        1\n      );\n      if (this.imageLayer) {\n        const position = this.getCanvasPosition(entry.x, entry.y);\n        this.imageLayer.appendImage({\n          imgData,\n          left: position[0],\n          top: position[1],\n          width: w,\n          height: h,\n        });\n      }\n      ctx.restore();\n    }\n    this.compose();\n  }\n\n  paintSolidColorImageMask() {\n    if (!this.contentVisible) {\n      return;\n    }\n    this.ctx.fillRect(0, 0, 1, 1);\n    this.compose();\n  }\n\n  // Marked content\n\n  markPoint(tag) {\n    // TODO Marked content.\n  }\n\n  markPointProps(tag, properties) {\n    // TODO Marked content.\n  }\n\n  beginMarkedContent(tag) {\n    this.markedContentStack.push({\n      visible: true,\n    });\n  }\n\n  beginMarkedContentProps(tag, properties) {\n    if (tag === \"OC\") {\n      this.markedContentStack.push({\n        visible: this.optionalContentConfig.isVisible(properties),\n      });\n    } else {\n      this.markedContentStack.push({\n        visible: true,\n      });\n    }\n    this.contentVisible = this.isContentVisible();\n  }\n\n  endMarkedContent() {\n    this.markedContentStack.pop();\n    this.contentVisible = this.isContentVisible();\n  }\n\n  // Compatibility\n\n  beginCompat() {\n    // TODO ignore undefined operators (should we do that anyway?)\n  }\n\n  endCompat() {\n    // TODO stop ignoring undefined operators\n  }\n\n  // Helper functions\n\n  consumePath(clipBox) {\n    const isEmpty = this.current.isEmptyClip();\n    if (this.pendingClip) {\n      this.current.updateClipFromPath();\n    }\n    if (!this.pendingClip) {\n      this.compose(clipBox);\n    }\n    const ctx = this.ctx;\n    if (this.pendingClip) {\n      if (!isEmpty) {\n        if (this.pendingClip === EO_CLIP) {\n          ctx.clip(\"evenodd\");\n        } else {\n          ctx.clip();\n        }\n      }\n      this.pendingClip = null;\n    }\n    this.current.startNewPathAndClipBox(this.current.clipBox);\n    ctx.beginPath();\n  }\n\n  getSinglePixelWidth() {\n    if (!this._cachedGetSinglePixelWidth) {\n      const m = this.ctx.mozCurrentTransform;\n      if (m[1] === 0 && m[2] === 0) {\n        // Fast path\n        this._cachedGetSinglePixelWidth =\n          1 / Math.min(Math.abs(m[0]), Math.abs(m[3]));\n      } else {\n        const absDet = Math.abs(m[0] * m[3] - m[2] * m[1]);\n        const normX = Math.hypot(m[0], m[2]);\n        const normY = Math.hypot(m[1], m[3]);\n        this._cachedGetSinglePixelWidth = Math.max(normX, normY) / absDet;\n      }\n    }\n    return this._cachedGetSinglePixelWidth;\n  }\n\n  getScaleForStroking() {\n    // A pixel has thicknessX = thicknessY = 1;\n    // A transformed pixel is a parallelogram and the thicknesses\n    // corresponds to the heights.\n    // The goal of this function is to rescale before setting the\n    // lineWidth in order to have both thicknesses greater or equal\n    // to 1 after transform.\n    if (!this._cachedScaleForStroking) {\n      const { lineWidth } = this.current;\n      const m = this.ctx.mozCurrentTransform;\n      let scaleX, scaleY;\n\n      if (m[1] === 0 && m[2] === 0) {\n        // Fast path\n        const normX = Math.abs(m[0]);\n        const normY = Math.abs(m[3]);\n        if (lineWidth === 0) {\n          scaleX = 1 / normX;\n          scaleY = 1 / normY;\n        } else {\n          const scaledXLineWidth = normX * lineWidth;\n          const scaledYLineWidth = normY * lineWidth;\n          scaleX = scaledXLineWidth < 1 ? 1 / scaledXLineWidth : 1;\n          scaleY = scaledYLineWidth < 1 ? 1 / scaledYLineWidth : 1;\n        }\n      } else {\n        // A pixel (base (x, y)) is transformed by M into a parallelogram:\n        //  - its area is |det(M)|;\n        //  - heightY (orthogonal to Mx) has a length: |det(M)| / norm(Mx);\n        //  - heightX (orthogonal to My) has a length: |det(M)| / norm(My).\n        // heightX and heightY are the thicknesses of the transformed pixel\n        // and they must be both greater or equal to 1.\n        const absDet = Math.abs(m[0] * m[3] - m[2] * m[1]);\n        const normX = Math.hypot(m[0], m[1]);\n        const normY = Math.hypot(m[2], m[3]);\n        if (lineWidth === 0) {\n          scaleX = normY / absDet;\n          scaleY = normX / absDet;\n        } else {\n          const baseArea = lineWidth * absDet;\n          scaleX = normY > baseArea ? normY / baseArea : 1;\n          scaleY = normX > baseArea ? normX / baseArea : 1;\n        }\n      }\n      this._cachedScaleForStroking = [scaleX, scaleY];\n    }\n    return this._cachedScaleForStroking;\n  }\n\n  // Rescale before stroking in order to have a final lineWidth\n  // with both thicknesses greater or equal to 1.\n  rescaleAndStroke(saveRestore) {\n    const { ctx } = this;\n    const { lineWidth } = this.current;\n    const [scaleX, scaleY] = this.getScaleForStroking();\n\n    ctx.lineWidth = lineWidth || 1;\n\n    if (scaleX === 1 && scaleY === 1) {\n      ctx.stroke();\n      return;\n    }\n\n    let savedMatrix, savedDashes, savedDashOffset;\n    if (saveRestore) {\n      savedMatrix = ctx.mozCurrentTransform.slice();\n      savedDashes = ctx.getLineDash().slice();\n      savedDashOffset = ctx.lineDashOffset;\n    }\n\n    ctx.scale(scaleX, scaleY);\n\n    // How the dashed line is rendered depends on the current transform...\n    // so we added a rescale to handle too thin lines and consequently\n    // the way the line is dashed will be modified.\n    // If scaleX === scaleY, the dashed lines will be rendered correctly\n    // else we'll have some bugs (but only with too thin lines).\n    // Here we take the max... why not taking the min... or something else.\n    // Anyway, as said it's buggy when scaleX !== scaleY.\n    const scale = Math.max(scaleX, scaleY);\n    ctx.setLineDash(ctx.getLineDash().map(x => x / scale));\n    ctx.lineDashOffset /= scale;\n\n    ctx.stroke();\n\n    if (saveRestore) {\n      ctx.setTransform(...savedMatrix);\n      ctx.setLineDash(savedDashes);\n      ctx.lineDashOffset = savedDashOffset;\n    }\n  }\n\n  getCanvasPosition(x, y) {\n    const transform = this.ctx.mozCurrentTransform;\n    return [\n      transform[0] * x + transform[2] * y + transform[4],\n      transform[1] * x + transform[3] * y + transform[5],\n    ];\n  }\n\n  isContentVisible() {\n    for (let i = this.markedContentStack.length - 1; i >= 0; i--) {\n      if (!this.markedContentStack[i].visible) {\n        return false;\n      }\n    }\n    return true;\n  }\n}\n\nfor (const op in OPS) {\n  if (CanvasGraphics.prototype[op] !== undefined) {\n    CanvasGraphics.prototype[OPS[op]] = CanvasGraphics.prototype[op];\n  }\n}\n\nexport { CanvasGraphics };\n","/* Copyright 2014 Mozilla Foundation\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport {\n  FormatError,\n  info,\n  shadow,\n  unreachable,\n  Util,\n  warn,\n} from \"../shared/util.js\";\nimport { isNodeJS } from \"../shared/is_node.js\";\n\nconst PathType = {\n  FILL: \"Fill\",\n  STROKE: \"Stroke\",\n  SHADING: \"Shading\",\n};\n\nfunction applyBoundingBox(ctx, bbox) {\n  if (!bbox || isNodeJS) {\n    return;\n  }\n  const width = bbox[2] - bbox[0];\n  const height = bbox[3] - bbox[1];\n  const region = new Path2D();\n  region.rect(bbox[0], bbox[1], width, height);\n  ctx.clip(region);\n}\n\nclass BaseShadingPattern {\n  constructor() {\n    if (this.constructor === BaseShadingPattern) {\n      unreachable(\"Cannot initialize BaseShadingPattern.\");\n    }\n  }\n\n  getPattern() {\n    unreachable(\"Abstract method `getPattern` called.\");\n  }\n}\n\nclass RadialAxialShadingPattern extends BaseShadingPattern {\n  constructor(IR) {\n    super();\n    this._type = IR[1];\n    this._bbox = IR[2];\n    this._colorStops = IR[3];\n    this._p0 = IR[4];\n    this._p1 = IR[5];\n    this._r0 = IR[6];\n    this._r1 = IR[7];\n    this.matrix = null;\n  }\n\n  _createGradient(ctx) {\n    let grad;\n    if (this._type === \"axial\") {\n      grad = ctx.createLinearGradient(\n        this._p0[0],\n        this._p0[1],\n        this._p1[0],\n        this._p1[1]\n      );\n    } else if (this._type === \"radial\") {\n      grad = ctx.createRadialGradient(\n        this._p0[0],\n        this._p0[1],\n        this._r0,\n        this._p1[0],\n        this._p1[1],\n        this._r1\n      );\n    }\n\n    for (const colorStop of this._colorStops) {\n      grad.addColorStop(colorStop[0], colorStop[1]);\n    }\n    return grad;\n  }\n\n  getPattern(ctx, owner, inverse, pathType) {\n    let pattern;\n    if (pathType === PathType.STROKE || pathType === PathType.FILL) {\n      const ownerBBox = owner.current.getClippedPathBoundingBox(\n        pathType,\n        ctx.mozCurrentTransform\n      ) || [0, 0, 0, 0];\n      // Create a canvas that is only as big as the current path. This doesn't\n      // allow us to cache the pattern, but it generally creates much smaller\n      // canvases and saves memory use. See bug 1722807 for an example.\n      const width = Math.ceil(ownerBBox[2] - ownerBBox[0]) || 1;\n      const height = Math.ceil(ownerBBox[3] - ownerBBox[1]) || 1;\n\n      const tmpCanvas = owner.cachedCanvases.getCanvas(\n        \"pattern\",\n        width,\n        height,\n        true\n      );\n\n      const tmpCtx = tmpCanvas.context;\n      tmpCtx.clearRect(0, 0, tmpCtx.canvas.width, tmpCtx.canvas.height);\n      tmpCtx.beginPath();\n      tmpCtx.rect(0, 0, tmpCtx.canvas.width, tmpCtx.canvas.height);\n      // Non shading fill patterns are positioned relative to the base transform\n      // (usually the page's initial transform), but we may have created a\n      // smaller canvas based on the path, so we must account for the shift.\n      tmpCtx.translate(-ownerBBox[0], -ownerBBox[1]);\n      inverse = Util.transform(inverse, [\n        1,\n        0,\n        0,\n        1,\n        ownerBBox[0],\n        ownerBBox[1],\n      ]);\n\n      tmpCtx.transform.apply(tmpCtx, owner.baseTransform);\n      if (this.matrix) {\n        tmpCtx.transform.apply(tmpCtx, this.matrix);\n      }\n      applyBoundingBox(tmpCtx, this._bbox);\n\n      tmpCtx.fillStyle = this._createGradient(tmpCtx);\n      tmpCtx.fill();\n\n      pattern = ctx.createPattern(tmpCanvas.canvas, \"no-repeat\");\n      const domMatrix = new DOMMatrix(inverse);\n      try {\n        pattern.setTransform(domMatrix);\n      } catch (ex) {\n        // Avoid rendering breaking completely in Firefox 78 ESR,\n        // and in Node.js (see issue 13724).\n        warn(`RadialAxialShadingPattern.getPattern: \"${ex?.message}\".`);\n      }\n    } else {\n      // Shading fills are applied relative to the current matrix which is also\n      // how canvas gradients work, so there's no need to do anything special\n      // here.\n      applyBoundingBox(ctx, this._bbox);\n      pattern = this._createGradient(ctx);\n    }\n    return pattern;\n  }\n}\n\nfunction drawTriangle(data, context, p1, p2, p3, c1, c2, c3) {\n  // Very basic Gouraud-shaded triangle rasterization algorithm.\n  const coords = context.coords,\n    colors = context.colors;\n  const bytes = data.data,\n    rowSize = data.width * 4;\n  let tmp;\n  if (coords[p1 + 1] > coords[p2 + 1]) {\n    tmp = p1;\n    p1 = p2;\n    p2 = tmp;\n    tmp = c1;\n    c1 = c2;\n    c2 = tmp;\n  }\n  if (coords[p2 + 1] > coords[p3 + 1]) {\n    tmp = p2;\n    p2 = p3;\n    p3 = tmp;\n    tmp = c2;\n    c2 = c3;\n    c3 = tmp;\n  }\n  if (coords[p1 + 1] > coords[p2 + 1]) {\n    tmp = p1;\n    p1 = p2;\n    p2 = tmp;\n    tmp = c1;\n    c1 = c2;\n    c2 = tmp;\n  }\n  const x1 = (coords[p1] + context.offsetX) * context.scaleX;\n  const y1 = (coords[p1 + 1] + context.offsetY) * context.scaleY;\n  const x2 = (coords[p2] + context.offsetX) * context.scaleX;\n  const y2 = (coords[p2 + 1] + context.offsetY) * context.scaleY;\n  const x3 = (coords[p3] + context.offsetX) * context.scaleX;\n  const y3 = (coords[p3 + 1] + context.offsetY) * context.scaleY;\n  if (y1 >= y3) {\n    return;\n  }\n  const c1r = colors[c1],\n    c1g = colors[c1 + 1],\n    c1b = colors[c1 + 2];\n  const c2r = colors[c2],\n    c2g = colors[c2 + 1],\n    c2b = colors[c2 + 2];\n  const c3r = colors[c3],\n    c3g = colors[c3 + 1],\n    c3b = colors[c3 + 2];\n\n  const minY = Math.round(y1),\n    maxY = Math.round(y3);\n  let xa, car, cag, cab;\n  let xb, cbr, cbg, cbb;\n  for (let y = minY; y <= maxY; y++) {\n    if (y < y2) {\n      let k;\n      if (y < y1) {\n        k = 0;\n      } else {\n        k = (y1 - y) / (y1 - y2);\n      }\n      xa = x1 - (x1 - x2) * k;\n      car = c1r - (c1r - c2r) * k;\n      cag = c1g - (c1g - c2g) * k;\n      cab = c1b - (c1b - c2b) * k;\n    } else {\n      let k;\n      if (y > y3) {\n        k = 1;\n      } else if (y2 === y3) {\n        k = 0;\n      } else {\n        k = (y2 - y) / (y2 - y3);\n      }\n      xa = x2 - (x2 - x3) * k;\n      car = c2r - (c2r - c3r) * k;\n      cag = c2g - (c2g - c3g) * k;\n      cab = c2b - (c2b - c3b) * k;\n    }\n\n    let k;\n    if (y < y1) {\n      k = 0;\n    } else if (y > y3) {\n      k = 1;\n    } else {\n      k = (y1 - y) / (y1 - y3);\n    }\n    xb = x1 - (x1 - x3) * k;\n    cbr = c1r - (c1r - c3r) * k;\n    cbg = c1g - (c1g - c3g) * k;\n    cbb = c1b - (c1b - c3b) * k;\n    const x1_ = Math.round(Math.min(xa, xb));\n    const x2_ = Math.round(Math.max(xa, xb));\n    let j = rowSize * y + x1_ * 4;\n    for (let x = x1_; x <= x2_; x++) {\n      k = (xa - x) / (xa - xb);\n      if (k < 0) {\n        k = 0;\n      } else if (k > 1) {\n        k = 1;\n      }\n      bytes[j++] = (car - (car - cbr) * k) | 0;\n      bytes[j++] = (cag - (cag - cbg) * k) | 0;\n      bytes[j++] = (cab - (cab - cbb) * k) | 0;\n      bytes[j++] = 255;\n    }\n  }\n}\n\nfunction drawFigure(data, figure, context) {\n  const ps = figure.coords;\n  const cs = figure.colors;\n  let i, ii;\n  switch (figure.type) {\n    case \"lattice\":\n      const verticesPerRow = figure.verticesPerRow;\n      const rows = Math.floor(ps.length / verticesPerRow) - 1;\n      const cols = verticesPerRow - 1;\n      for (i = 0; i < rows; i++) {\n        let q = i * verticesPerRow;\n        for (let j = 0; j < cols; j++, q++) {\n          drawTriangle(\n            data,\n            context,\n            ps[q],\n            ps[q + 1],\n            ps[q + verticesPerRow],\n            cs[q],\n            cs[q + 1],\n            cs[q + verticesPerRow]\n          );\n          drawTriangle(\n            data,\n            context,\n            ps[q + verticesPerRow + 1],\n            ps[q + 1],\n            ps[q + verticesPerRow],\n            cs[q + verticesPerRow + 1],\n            cs[q + 1],\n            cs[q + verticesPerRow]\n          );\n        }\n      }\n      break;\n    case \"triangles\":\n      for (i = 0, ii = ps.length; i < ii; i += 3) {\n        drawTriangle(\n          data,\n          context,\n          ps[i],\n          ps[i + 1],\n          ps[i + 2],\n          cs[i],\n          cs[i + 1],\n          cs[i + 2]\n        );\n      }\n      break;\n    default:\n      throw new Error(\"illegal figure\");\n  }\n}\n\nclass MeshShadingPattern extends BaseShadingPattern {\n  constructor(IR) {\n    super();\n    this._coords = IR[2];\n    this._colors = IR[3];\n    this._figures = IR[4];\n    this._bounds = IR[5];\n    this._bbox = IR[7];\n    this._background = IR[8];\n    this.matrix = null;\n  }\n\n  _createMeshCanvas(combinedScale, backgroundColor, cachedCanvases) {\n    // we will increase scale on some weird factor to let antialiasing take\n    // care of \"rough\" edges\n    const EXPECTED_SCALE = 1.1;\n    // MAX_PATTERN_SIZE is used to avoid OOM situation.\n    const MAX_PATTERN_SIZE = 3000; // 10in @ 300dpi shall be enough\n    // We need to keep transparent border around our pattern for fill():\n    // createPattern with 'no-repeat' will bleed edges across entire area.\n    const BORDER_SIZE = 2;\n\n    const offsetX = Math.floor(this._bounds[0]);\n    const offsetY = Math.floor(this._bounds[1]);\n    const boundsWidth = Math.ceil(this._bounds[2]) - offsetX;\n    const boundsHeight = Math.ceil(this._bounds[3]) - offsetY;\n\n    const width = Math.min(\n      Math.ceil(Math.abs(boundsWidth * combinedScale[0] * EXPECTED_SCALE)),\n      MAX_PATTERN_SIZE\n    );\n    const height = Math.min(\n      Math.ceil(Math.abs(boundsHeight * combinedScale[1] * EXPECTED_SCALE)),\n      MAX_PATTERN_SIZE\n    );\n    const scaleX = boundsWidth / width;\n    const scaleY = boundsHeight / height;\n\n    const context = {\n      coords: this._coords,\n      colors: this._colors,\n      offsetX: -offsetX,\n      offsetY: -offsetY,\n      scaleX: 1 / scaleX,\n      scaleY: 1 / scaleY,\n    };\n\n    const paddedWidth = width + BORDER_SIZE * 2;\n    const paddedHeight = height + BORDER_SIZE * 2;\n\n    const tmpCanvas = cachedCanvases.getCanvas(\n      \"mesh\",\n      paddedWidth,\n      paddedHeight,\n      false\n    );\n    const tmpCtx = tmpCanvas.context;\n\n    const data = tmpCtx.createImageData(width, height);\n    if (backgroundColor) {\n      const bytes = data.data;\n      for (let i = 0, ii = bytes.length; i < ii; i += 4) {\n        bytes[i] = backgroundColor[0];\n        bytes[i + 1] = backgroundColor[1];\n        bytes[i + 2] = backgroundColor[2];\n        bytes[i + 3] = 255;\n      }\n    }\n    for (const figure of this._figures) {\n      drawFigure(data, figure, context);\n    }\n    tmpCtx.putImageData(data, BORDER_SIZE, BORDER_SIZE);\n    const canvas = tmpCanvas.canvas;\n\n    return {\n      canvas,\n      offsetX: offsetX - BORDER_SIZE * scaleX,\n      offsetY: offsetY - BORDER_SIZE * scaleY,\n      scaleX,\n      scaleY,\n    };\n  }\n\n  getPattern(ctx, owner, inverse, pathType) {\n    applyBoundingBox(ctx, this._bbox);\n    let scale;\n    if (pathType === PathType.SHADING) {\n      scale = Util.singularValueDecompose2dScale(ctx.mozCurrentTransform);\n    } else {\n      // Obtain scale from matrix and current transformation matrix.\n      scale = Util.singularValueDecompose2dScale(owner.baseTransform);\n      if (this.matrix) {\n        const matrixScale = Util.singularValueDecompose2dScale(this.matrix);\n        scale = [scale[0] * matrixScale[0], scale[1] * matrixScale[1]];\n      }\n    }\n\n    // Rasterizing on the main thread since sending/queue large canvases\n    // might cause OOM.\n    const temporaryPatternCanvas = this._createMeshCanvas(\n      scale,\n      pathType === PathType.SHADING ? null : this._background,\n      owner.cachedCanvases\n    );\n\n    if (pathType !== PathType.SHADING) {\n      ctx.setTransform.apply(ctx, owner.baseTransform);\n      if (this.matrix) {\n        ctx.transform.apply(ctx, this.matrix);\n      }\n    }\n\n    ctx.translate(\n      temporaryPatternCanvas.offsetX,\n      temporaryPatternCanvas.offsetY\n    );\n    ctx.scale(temporaryPatternCanvas.scaleX, temporaryPatternCanvas.scaleY);\n\n    return ctx.createPattern(temporaryPatternCanvas.canvas, \"no-repeat\");\n  }\n}\n\nclass DummyShadingPattern extends BaseShadingPattern {\n  getPattern() {\n    return \"hotpink\";\n  }\n}\n\nfunction getShadingPattern(IR) {\n  switch (IR[0]) {\n    case \"RadialAxial\":\n      return new RadialAxialShadingPattern(IR);\n    case \"Mesh\":\n      return new MeshShadingPattern(IR);\n    case \"Dummy\":\n      return new DummyShadingPattern();\n  }\n  throw new Error(`Unknown IR type: ${IR[0]}`);\n}\n\nconst PaintType = {\n  COLORED: 1,\n  UNCOLORED: 2,\n};\n\nclass TilingPattern {\n  // 10in @ 300dpi shall be enough.\n  static get MAX_PATTERN_SIZE() {\n    return shadow(this, \"MAX_PATTERN_SIZE\", 3000);\n  }\n\n  constructor(IR, color, ctx, canvasGraphicsFactory, baseTransform) {\n    this.operatorList = IR[2];\n    this.matrix = IR[3] || [1, 0, 0, 1, 0, 0];\n    this.bbox = IR[4];\n    this.xstep = IR[5];\n    this.ystep = IR[6];\n    this.paintType = IR[7];\n    this.tilingType = IR[8];\n    this.color = color;\n    this.ctx = ctx;\n    this.canvasGraphicsFactory = canvasGraphicsFactory;\n    this.baseTransform = baseTransform;\n  }\n\n  createPatternCanvas(owner) {\n    const operatorList = this.operatorList;\n    const bbox = this.bbox;\n    const xstep = this.xstep;\n    const ystep = this.ystep;\n    const paintType = this.paintType;\n    const tilingType = this.tilingType;\n    const color = this.color;\n    const canvasGraphicsFactory = this.canvasGraphicsFactory;\n\n    info(\"TilingType: \" + tilingType);\n\n    // A tiling pattern as defined by PDF spec 8.7.2 is a cell whose size is\n    // described by bbox, and may repeat regularly by shifting the cell by\n    // xstep and ystep.\n    // Because the HTML5 canvas API does not support pattern repetition with\n    // gaps in between, we use the xstep/ystep instead of the bbox's size.\n    //\n    // This has the following consequences (similarly for ystep):\n    //\n    // - If xstep is the same as bbox, then there is no observable difference.\n    //\n    // - If xstep is larger than bbox, then the pattern canvas is partially\n    //   empty: the area bounded by bbox is painted, the outside area is void.\n    //\n    // - If xstep is smaller than bbox, then the pixels between xstep and the\n    //   bbox boundary will be missing. This is INCORRECT behavior.\n    //   \"Figures on adjacent tiles should not overlap\" (PDF spec 8.7.3.1),\n    //   but overlapping cells without common pixels are still valid.\n    //   TODO: Fix the implementation, to allow this scenario to be painted\n    //   correctly.\n\n    const x0 = bbox[0],\n      y0 = bbox[1],\n      x1 = bbox[2],\n      y1 = bbox[3];\n\n    // Obtain scale from matrix and current transformation matrix.\n    const matrixScale = Util.singularValueDecompose2dScale(this.matrix);\n    const curMatrixScale = Util.singularValueDecompose2dScale(\n      this.baseTransform\n    );\n    const combinedScale = [\n      matrixScale[0] * curMatrixScale[0],\n      matrixScale[1] * curMatrixScale[1],\n    ];\n\n    // Use width and height values that are as close as possible to the end\n    // result when the pattern is used. Too low value makes the pattern look\n    // blurry. Too large value makes it look too crispy.\n    const dimx = this.getSizeAndScale(\n      xstep,\n      this.ctx.canvas.width,\n      combinedScale[0]\n    );\n    const dimy = this.getSizeAndScale(\n      ystep,\n      this.ctx.canvas.height,\n      combinedScale[1]\n    );\n\n    const tmpCanvas = owner.cachedCanvases.getCanvas(\n      \"pattern\",\n      dimx.size,\n      dimy.size,\n      true\n    );\n    const tmpCtx = tmpCanvas.context;\n    const graphics = canvasGraphicsFactory.createCanvasGraphics(tmpCtx);\n    graphics.groupLevel = owner.groupLevel;\n\n    this.setFillAndStrokeStyleToContext(graphics, paintType, color);\n\n    let adjustedX0 = x0;\n    let adjustedY0 = y0;\n    let adjustedX1 = x1;\n    let adjustedY1 = y1;\n    // Some bounding boxes have negative x0/y0 coordinates which will cause the\n    // some of the drawing to be off of the canvas. To avoid this shift the\n    // bounding box over.\n    if (x0 < 0) {\n      adjustedX0 = 0;\n      adjustedX1 += Math.abs(x0);\n    }\n    if (y0 < 0) {\n      adjustedY0 = 0;\n      adjustedY1 += Math.abs(y0);\n    }\n    tmpCtx.translate(-(dimx.scale * adjustedX0), -(dimy.scale * adjustedY0));\n    graphics.transform(dimx.scale, 0, 0, dimy.scale, 0, 0);\n\n    // To match CanvasGraphics beginDrawing we must save the context here or\n    // else we end up with unbalanced save/restores.\n    tmpCtx.save();\n\n    this.clipBbox(graphics, adjustedX0, adjustedY0, adjustedX1, adjustedY1);\n\n    graphics.baseTransform = graphics.ctx.mozCurrentTransform.slice();\n\n    graphics.executeOperatorList(operatorList);\n\n    graphics.endDrawing();\n\n    return {\n      canvas: tmpCanvas.canvas,\n      scaleX: dimx.scale,\n      scaleY: dimy.scale,\n      offsetX: adjustedX0,\n      offsetY: adjustedY0,\n    };\n  }\n\n  getSizeAndScale(step, realOutputSize, scale) {\n    // xstep / ystep may be negative -- normalize.\n    step = Math.abs(step);\n    // MAX_PATTERN_SIZE is used to avoid OOM situation.\n    // Use the destination canvas's size if it is bigger than the hard-coded\n    // limit of MAX_PATTERN_SIZE to avoid clipping patterns that cover the\n    // whole canvas.\n    const maxSize = Math.max(TilingPattern.MAX_PATTERN_SIZE, realOutputSize);\n    let size = Math.ceil(step * scale);\n    if (size >= maxSize) {\n      size = maxSize;\n    } else {\n      scale = size / step;\n    }\n    return { scale, size };\n  }\n\n  clipBbox(graphics, x0, y0, x1, y1) {\n    const bboxWidth = x1 - x0;\n    const bboxHeight = y1 - y0;\n    graphics.ctx.rect(x0, y0, bboxWidth, bboxHeight);\n    graphics.current.updateRectMinMax(graphics.ctx.mozCurrentTransform, [\n      x0,\n      y0,\n      x1,\n      y1,\n    ]);\n    graphics.clip();\n    graphics.endPath();\n  }\n\n  setFillAndStrokeStyleToContext(graphics, paintType, color) {\n    const context = graphics.ctx,\n      current = graphics.current;\n    switch (paintType) {\n      case PaintType.COLORED:\n        const ctx = this.ctx;\n        context.fillStyle = ctx.fillStyle;\n        context.strokeStyle = ctx.strokeStyle;\n        current.fillColor = ctx.fillStyle;\n        current.strokeColor = ctx.strokeStyle;\n        break;\n      case PaintType.UNCOLORED:\n        const cssColor = Util.makeHexColor(color[0], color[1], color[2]);\n        context.fillStyle = cssColor;\n        context.strokeStyle = cssColor;\n        // Set color needed by image masks (fixes issues 3226 and 8741).\n        current.fillColor = cssColor;\n        current.strokeColor = cssColor;\n        break;\n      default:\n        throw new FormatError(`Unsupported paint type: ${paintType}`);\n    }\n  }\n\n  getPattern(ctx, owner, inverse, pathType) {\n    // PDF spec 8.7.2 NOTE 1: pattern's matrix is relative to initial matrix.\n    let matrix = inverse;\n    if (pathType !== PathType.SHADING) {\n      matrix = Util.transform(matrix, owner.baseTransform);\n      if (this.matrix) {\n        matrix = Util.transform(matrix, this.matrix);\n      }\n    }\n\n    const temporaryPatternCanvas = this.createPatternCanvas(owner);\n\n    let domMatrix = new DOMMatrix(matrix);\n    // Rescale and so that the ctx.createPattern call generates a pattern with\n    // the desired size.\n    domMatrix = domMatrix.translate(\n      temporaryPatternCanvas.offsetX,\n      temporaryPatternCanvas.offsetY\n    );\n    domMatrix = domMatrix.scale(\n      1 / temporaryPatternCanvas.scaleX,\n      1 / temporaryPatternCanvas.scaleY\n    );\n\n    const pattern = ctx.createPattern(temporaryPatternCanvas.canvas, \"repeat\");\n    try {\n      pattern.setTransform(domMatrix);\n    } catch (ex) {\n      // Avoid rendering breaking completely in Firefox 78 ESR,\n      // and in Node.js (see issue 13724).\n      warn(`TilingPattern.getPattern: \"${ex?.message}\".`);\n    }\n    return pattern;\n  }\n}\n\nexport { getShadingPattern, PathType, TilingPattern };\n","/* Copyright 2022 Mozilla Foundation\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { FeatureTest } from \"./util.js\";\n\nfunction applyMaskImageData({\n  src,\n  srcPos = 0,\n  dest,\n  destPos = 0,\n  width,\n  height,\n  inverseDecode = false,\n}) {\n  const opaque = FeatureTest.isLittleEndian ? 0xff000000 : 0x000000ff;\n  const [zeroMapping, oneMapping] = !inverseDecode ? [opaque, 0] : [0, opaque];\n  const widthInSource = width >> 3;\n  const widthRemainder = width & 7;\n  const srcLength = src.length;\n  dest = new Uint32Array(dest.buffer);\n\n  for (let i = 0; i < height; i++) {\n    for (const max = srcPos + widthInSource; srcPos < max; srcPos++) {\n      const elem = srcPos < srcLength ? src[srcPos] : 255;\n      dest[destPos++] = elem & 0b10000000 ? oneMapping : zeroMapping;\n      dest[destPos++] = elem & 0b1000000 ? oneMapping : zeroMapping;\n      dest[destPos++] = elem & 0b100000 ? oneMapping : zeroMapping;\n      dest[destPos++] = elem & 0b10000 ? oneMapping : zeroMapping;\n      dest[destPos++] = elem & 0b1000 ? oneMapping : zeroMapping;\n      dest[destPos++] = elem & 0b100 ? oneMapping : zeroMapping;\n      dest[destPos++] = elem & 0b10 ? oneMapping : zeroMapping;\n      dest[destPos++] = elem & 0b1 ? oneMapping : zeroMapping;\n    }\n    if (widthRemainder === 0) {\n      continue;\n    }\n    const elem = srcPos < srcLength ? src[srcPos++] : 255;\n    for (let j = 0; j < widthRemainder; j++) {\n      dest[destPos++] = elem & (1 << (7 - j)) ? oneMapping : zeroMapping;\n    }\n  }\n\n  return { srcPos, destPos };\n}\n\nexport { applyMaskImageData };\n","/* Copyright 2018 Mozilla Foundation\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n/**\n * @typedef {Object} GlobalWorkerOptionsType\n * @property {Worker | null} workerPort - Defines global port for worker\n *   process. Overrides the `workerSrc` option.\n * @property {string} workerSrc - A string containing the path and filename\n *   of the worker file.\n *\n *   NOTE: The `workerSrc` option should always be set, in order to prevent any\n *         issues when using the PDF.js library.\n */\n\n/** @type {GlobalWorkerOptionsType} */\nconst GlobalWorkerOptions = Object.create(null);\n\nGlobalWorkerOptions.workerPort =\n  GlobalWorkerOptions.workerPort === undefined\n    ? null\n    : GlobalWorkerOptions.workerPort;\n\nGlobalWorkerOptions.workerSrc =\n  GlobalWorkerOptions.workerSrc === undefined\n    ? \"\"\n    : GlobalWorkerOptions.workerSrc;\n\nexport { GlobalWorkerOptions };\n","/* Copyright 2018 Mozilla Foundation\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport {\n  AbortException,\n  assert,\n  createPromiseCapability,\n  MissingPDFException,\n  PasswordException,\n  UnexpectedResponseException,\n  UnknownErrorException,\n  unreachable,\n} from \"./util.js\";\n\nconst CallbackKind = {\n  UNKNOWN: 0,\n  DATA: 1,\n  ERROR: 2,\n};\n\nconst StreamKind = {\n  UNKNOWN: 0,\n  CANCEL: 1,\n  CANCEL_COMPLETE: 2,\n  CLOSE: 3,\n  ENQUEUE: 4,\n  ERROR: 5,\n  PULL: 6,\n  PULL_COMPLETE: 7,\n  START_COMPLETE: 8,\n};\n\nfunction wrapReason(reason) {\n  if (\n    !(\n      reason instanceof Error ||\n      (typeof reason === \"object\" && reason !== null)\n    )\n  ) {\n    unreachable(\n      'wrapReason: Expected \"reason\" to be a (possibly cloned) Error.'\n    );\n  }\n  switch (reason.name) {\n    case \"AbortException\":\n      return new AbortException(reason.message);\n    case \"MissingPDFException\":\n      return new MissingPDFException(reason.message);\n    case \"PasswordException\":\n      return new PasswordException(reason.message, reason.code);\n    case \"UnexpectedResponseException\":\n      return new UnexpectedResponseException(reason.message, reason.status);\n    case \"UnknownErrorException\":\n      return new UnknownErrorException(reason.message, reason.details);\n    default:\n      return new UnknownErrorException(reason.message, reason.toString());\n  }\n}\n\nclass MessageHandler {\n  constructor(sourceName, targetName, comObj) {\n    this.sourceName = sourceName;\n    this.targetName = targetName;\n    this.comObj = comObj;\n    this.callbackId = 1;\n    this.streamId = 1;\n    this.streamSinks = Object.create(null);\n    this.streamControllers = Object.create(null);\n    this.callbackCapabilities = Object.create(null);\n    this.actionHandler = Object.create(null);\n\n    this._onComObjOnMessage = event => {\n      const data = event.data;\n      if (data.targetName !== this.sourceName) {\n        return;\n      }\n      if (data.stream) {\n        this._processStreamMessage(data);\n        return;\n      }\n      if (data.callback) {\n        const callbackId = data.callbackId;\n        const capability = this.callbackCapabilities[callbackId];\n        if (!capability) {\n          throw new Error(`Cannot resolve callback ${callbackId}`);\n        }\n        delete this.callbackCapabilities[callbackId];\n\n        if (data.callback === CallbackKind.DATA) {\n          capability.resolve(data.data);\n        } else if (data.callback === CallbackKind.ERROR) {\n          capability.reject(wrapReason(data.reason));\n        } else {\n          throw new Error(\"Unexpected callback case\");\n        }\n        return;\n      }\n      const action = this.actionHandler[data.action];\n      if (!action) {\n        throw new Error(`Unknown action from worker: ${data.action}`);\n      }\n      if (data.callbackId) {\n        const cbSourceName = this.sourceName;\n        const cbTargetName = data.sourceName;\n\n        new Promise(function (resolve) {\n          resolve(action(data.data));\n        }).then(\n          function (result) {\n            comObj.postMessage({\n              sourceName: cbSourceName,\n              targetName: cbTargetName,\n              callback: CallbackKind.DATA,\n              callbackId: data.callbackId,\n              data: result,\n            });\n          },\n          function (reason) {\n            comObj.postMessage({\n              sourceName: cbSourceName,\n              targetName: cbTargetName,\n              callback: CallbackKind.ERROR,\n              callbackId: data.callbackId,\n              reason: wrapReason(reason),\n            });\n          }\n        );\n        return;\n      }\n      if (data.streamId) {\n        this._createStreamSink(data);\n        return;\n      }\n      action(data.data);\n    };\n    comObj.addEventListener(\"message\", this._onComObjOnMessage);\n  }\n\n  on(actionName, handler) {\n    if (\n      typeof PDFJSDev === \"undefined\" ||\n      PDFJSDev.test(\"!PRODUCTION || TESTING\")\n    ) {\n      assert(\n        typeof handler === \"function\",\n        'MessageHandler.on: Expected \"handler\" to be a function.'\n      );\n    }\n    const ah = this.actionHandler;\n    if (ah[actionName]) {\n      throw new Error(`There is already an actionName called \"${actionName}\"`);\n    }\n    ah[actionName] = handler;\n  }\n\n  /**\n   * Sends a message to the comObj to invoke the action with the supplied data.\n   * @param {string} actionName - Action to call.\n   * @param {JSON} data - JSON data to send.\n   * @param {Array} [transfers] - List of transfers/ArrayBuffers.\n   */\n  send(actionName, data, transfers) {\n    this.comObj.postMessage(\n      {\n        sourceName: this.sourceName,\n        targetName: this.targetName,\n        action: actionName,\n        data,\n      },\n      transfers\n    );\n  }\n\n  /**\n   * Sends a message to the comObj to invoke the action with the supplied data.\n   * Expects that the other side will callback with the response.\n   * @param {string} actionName - Action to call.\n   * @param {JSON} data - JSON data to send.\n   * @param {Array} [transfers] - List of transfers/ArrayBuffers.\n   * @returns {Promise} Promise to be resolved with response data.\n   */\n  sendWithPromise(actionName, data, transfers) {\n    const callbackId = this.callbackId++;\n    const capability = createPromiseCapability();\n    this.callbackCapabilities[callbackId] = capability;\n    try {\n      this.comObj.postMessage(\n        {\n          sourceName: this.sourceName,\n          targetName: this.targetName,\n          action: actionName,\n          callbackId,\n          data,\n        },\n        transfers\n      );\n    } catch (ex) {\n      capability.reject(ex);\n    }\n    return capability.promise;\n  }\n\n  /**\n   * Sends a message to the comObj to invoke the action with the supplied data.\n   * Expect that the other side will callback to signal 'start_complete'.\n   * @param {string} actionName - Action to call.\n   * @param {JSON} data - JSON data to send.\n   * @param {Object} queueingStrategy - Strategy to signal backpressure based on\n   *                 internal queue.\n   * @param {Array} [transfers] - List of transfers/ArrayBuffers.\n   * @returns {ReadableStream} ReadableStream to read data in chunks.\n   */\n  sendWithStream(actionName, data, queueingStrategy, transfers) {\n    const streamId = this.streamId++,\n      sourceName = this.sourceName,\n      targetName = this.targetName,\n      comObj = this.comObj;\n\n    return new ReadableStream(\n      {\n        start: controller => {\n          const startCapability = createPromiseCapability();\n          this.streamControllers[streamId] = {\n            controller,\n            startCall: startCapability,\n            pullCall: null,\n            cancelCall: null,\n            isClosed: false,\n          };\n          comObj.postMessage(\n            {\n              sourceName,\n              targetName,\n              action: actionName,\n              streamId,\n              data,\n              desiredSize: controller.desiredSize,\n            },\n            transfers\n          );\n          // Return Promise for Async process, to signal success/failure.\n          return startCapability.promise;\n        },\n\n        pull: controller => {\n          const pullCapability = createPromiseCapability();\n          this.streamControllers[streamId].pullCall = pullCapability;\n          comObj.postMessage({\n            sourceName,\n            targetName,\n            stream: StreamKind.PULL,\n            streamId,\n            desiredSize: controller.desiredSize,\n          });\n          // Returning Promise will not call \"pull\"\n          // again until current pull is resolved.\n          return pullCapability.promise;\n        },\n\n        cancel: reason => {\n          assert(reason instanceof Error, \"cancel must have a valid reason\");\n          const cancelCapability = createPromiseCapability();\n          this.streamControllers[streamId].cancelCall = cancelCapability;\n          this.streamControllers[streamId].isClosed = true;\n          comObj.postMessage({\n            sourceName,\n            targetName,\n            stream: StreamKind.CANCEL,\n            streamId,\n            reason: wrapReason(reason),\n          });\n          // Return Promise to signal success or failure.\n          return cancelCapability.promise;\n        },\n      },\n      queueingStrategy\n    );\n  }\n\n  /**\n   * @private\n   */\n  _createStreamSink(data) {\n    const streamId = data.streamId,\n      sourceName = this.sourceName,\n      targetName = data.sourceName,\n      comObj = this.comObj;\n    const self = this,\n      action = this.actionHandler[data.action];\n\n    const streamSink = {\n      enqueue(chunk, size = 1, transfers) {\n        if (this.isCancelled) {\n          return;\n        }\n        const lastDesiredSize = this.desiredSize;\n        this.desiredSize -= size;\n        // Enqueue decreases the desiredSize property of sink,\n        // so when it changes from positive to negative,\n        // set ready as unresolved promise.\n        if (lastDesiredSize > 0 && this.desiredSize <= 0) {\n          this.sinkCapability = createPromiseCapability();\n          this.ready = this.sinkCapability.promise;\n        }\n        comObj.postMessage(\n          {\n            sourceName,\n            targetName,\n            stream: StreamKind.ENQUEUE,\n            streamId,\n            chunk,\n          },\n          transfers\n        );\n      },\n\n      close() {\n        if (this.isCancelled) {\n          return;\n        }\n        this.isCancelled = true;\n        comObj.postMessage({\n          sourceName,\n          targetName,\n          stream: StreamKind.CLOSE,\n          streamId,\n        });\n        delete self.streamSinks[streamId];\n      },\n\n      error(reason) {\n        assert(reason instanceof Error, \"error must have a valid reason\");\n        if (this.isCancelled) {\n          return;\n        }\n        this.isCancelled = true;\n        comObj.postMessage({\n          sourceName,\n          targetName,\n          stream: StreamKind.ERROR,\n          streamId,\n          reason: wrapReason(reason),\n        });\n      },\n\n      sinkCapability: createPromiseCapability(),\n      onPull: null,\n      onCancel: null,\n      isCancelled: false,\n      desiredSize: data.desiredSize,\n      ready: null,\n    };\n\n    streamSink.sinkCapability.resolve();\n    streamSink.ready = streamSink.sinkCapability.promise;\n    this.streamSinks[streamId] = streamSink;\n\n    new Promise(function (resolve) {\n      resolve(action(data.data, streamSink));\n    }).then(\n      function () {\n        comObj.postMessage({\n          sourceName,\n          targetName,\n          stream: StreamKind.START_COMPLETE,\n          streamId,\n          success: true,\n        });\n      },\n      function (reason) {\n        comObj.postMessage({\n          sourceName,\n          targetName,\n          stream: StreamKind.START_COMPLETE,\n          streamId,\n          reason: wrapReason(reason),\n        });\n      }\n    );\n  }\n\n  /**\n   * @private\n   */\n  _processStreamMessage(data) {\n    const streamId = data.streamId,\n      sourceName = this.sourceName,\n      targetName = data.sourceName,\n      comObj = this.comObj;\n    const streamController = this.streamControllers[streamId],\n      streamSink = this.streamSinks[streamId];\n\n    switch (data.stream) {\n      case StreamKind.START_COMPLETE:\n        if (data.success) {\n          streamController.startCall.resolve();\n        } else {\n          streamController.startCall.reject(wrapReason(data.reason));\n        }\n        break;\n      case StreamKind.PULL_COMPLETE:\n        if (data.success) {\n          streamController.pullCall.resolve();\n        } else {\n          streamController.pullCall.reject(wrapReason(data.reason));\n        }\n        break;\n      case StreamKind.PULL:\n        // Ignore any pull after close is called.\n        if (!streamSink) {\n          comObj.postMessage({\n            sourceName,\n            targetName,\n            stream: StreamKind.PULL_COMPLETE,\n            streamId,\n            success: true,\n          });\n          break;\n        }\n        // Pull increases the desiredSize property of sink, so when it changes\n        // from negative to positive, set ready property as resolved promise.\n        if (streamSink.desiredSize <= 0 && data.desiredSize > 0) {\n          streamSink.sinkCapability.resolve();\n        }\n        // Reset desiredSize property of sink on every pull.\n        streamSink.desiredSize = data.desiredSize;\n\n        new Promise(function (resolve) {\n          resolve(streamSink.onPull && streamSink.onPull());\n        }).then(\n          function () {\n            comObj.postMessage({\n              sourceName,\n              targetName,\n              stream: StreamKind.PULL_COMPLETE,\n              streamId,\n              success: true,\n            });\n          },\n          function (reason) {\n            comObj.postMessage({\n              sourceName,\n              targetName,\n              stream: StreamKind.PULL_COMPLETE,\n              streamId,\n              reason: wrapReason(reason),\n            });\n          }\n        );\n        break;\n      case StreamKind.ENQUEUE:\n        assert(streamController, \"enqueue should have stream controller\");\n        if (streamController.isClosed) {\n          break;\n        }\n        streamController.controller.enqueue(data.chunk);\n        break;\n      case StreamKind.CLOSE:\n        assert(streamController, \"close should have stream controller\");\n        if (streamController.isClosed) {\n          break;\n        }\n        streamController.isClosed = true;\n        streamController.controller.close();\n        this._deleteStreamController(streamController, streamId);\n        break;\n      case StreamKind.ERROR:\n        assert(streamController, \"error should have stream controller\");\n        streamController.controller.error(wrapReason(data.reason));\n        this._deleteStreamController(streamController, streamId);\n        break;\n      case StreamKind.CANCEL_COMPLETE:\n        if (data.success) {\n          streamController.cancelCall.resolve();\n        } else {\n          streamController.cancelCall.reject(wrapReason(data.reason));\n        }\n        this._deleteStreamController(streamController, streamId);\n        break;\n      case StreamKind.CANCEL:\n        if (!streamSink) {\n          break;\n        }\n\n        new Promise(function (resolve) {\n          resolve(\n            streamSink.onCancel && streamSink.onCancel(wrapReason(data.reason))\n          );\n        }).then(\n          function () {\n            comObj.postMessage({\n              sourceName,\n              targetName,\n              stream: StreamKind.CANCEL_COMPLETE,\n              streamId,\n              success: true,\n            });\n          },\n          function (reason) {\n            comObj.postMessage({\n              sourceName,\n              targetName,\n              stream: StreamKind.CANCEL_COMPLETE,\n              streamId,\n              reason: wrapReason(reason),\n            });\n          }\n        );\n        streamSink.sinkCapability.reject(wrapReason(data.reason));\n        streamSink.isCancelled = true;\n        delete this.streamSinks[streamId];\n        break;\n      default:\n        throw new Error(\"Unexpected stream case\");\n    }\n  }\n\n  /**\n   * @private\n   */\n  async _deleteStreamController(streamController, streamId) {\n    // Delete the `streamController` only when the start, pull, and cancel\n    // capabilities have settled, to prevent `TypeError`s.\n    await Promise.allSettled([\n      streamController.startCall && streamController.startCall.promise,\n      streamController.pullCall && streamController.pullCall.promise,\n      streamController.cancelCall && streamController.cancelCall.promise,\n    ]);\n    delete this.streamControllers[streamId];\n  }\n\n  destroy() {\n    this.comObj.removeEventListener(\"message\", this._onComObjOnMessage);\n  }\n}\n\nexport { MessageHandler };\n","/* Copyright 2012 Mozilla Foundation\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { objectFromMap } from \"../shared/util.js\";\n\nclass Metadata {\n  #metadataMap;\n\n  #data;\n\n  constructor({ parsedData, rawData }) {\n    this.#metadataMap = parsedData;\n    this.#data = rawData;\n  }\n\n  getRaw() {\n    return this.#data;\n  }\n\n  get(name) {\n    return this.#metadataMap.get(name) ?? null;\n  }\n\n  getAll() {\n    return objectFromMap(this.#metadataMap);\n  }\n\n  has(name) {\n    return this.#metadataMap.has(name);\n  }\n}\n\nexport { Metadata };\n","/* Copyright 2020 Mozilla Foundation\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nimport { objectFromMap, warn } from \"../shared/util.js\";\n\nclass OptionalContentGroup {\n  constructor(name, intent) {\n    this.visible = true;\n    this.name = name;\n    this.intent = intent;\n  }\n}\n\nclass OptionalContentConfig {\n  constructor(data) {\n    this.name = null;\n    this.creator = null;\n    this._order = null;\n    this._groups = new Map();\n\n    if (data === null) {\n      return;\n    }\n    this.name = data.name;\n    this.creator = data.creator;\n    this._order = data.order;\n    for (const group of data.groups) {\n      this._groups.set(\n        group.id,\n        new OptionalContentGroup(group.name, group.intent)\n      );\n    }\n\n    if (data.baseState === \"OFF\") {\n      for (const group of this._groups) {\n        group.visible = false;\n      }\n    }\n\n    for (const on of data.on) {\n      this._groups.get(on).visible = true;\n    }\n\n    for (const off of data.off) {\n      this._groups.get(off).visible = false;\n    }\n  }\n\n  _evaluateVisibilityExpression(array) {\n    const length = array.length;\n    if (length < 2) {\n      return true;\n    }\n    const operator = array[0];\n    for (let i = 1; i < length; i++) {\n      const element = array[i];\n      let state;\n      if (Array.isArray(element)) {\n        state = this._evaluateVisibilityExpression(element);\n      } else if (this._groups.has(element)) {\n        state = this._groups.get(element).visible;\n      } else {\n        warn(`Optional content group not found: ${element}`);\n        return true;\n      }\n      switch (operator) {\n        case \"And\":\n          if (!state) {\n            return false;\n          }\n          break;\n        case \"Or\":\n          if (state) {\n            return true;\n          }\n          break;\n        case \"Not\":\n          return !state;\n        default:\n          return true;\n      }\n    }\n    return operator === \"And\";\n  }\n\n  isVisible(group) {\n    if (this._groups.size === 0) {\n      return true;\n    }\n    if (!group) {\n      warn(\"Optional content group not defined.\");\n      return true;\n    }\n    if (group.type === \"OCG\") {\n      if (!this._groups.has(group.id)) {\n        warn(`Optional content group not found: ${group.id}`);\n        return true;\n      }\n      return this._groups.get(group.id).visible;\n    } else if (group.type === \"OCMD\") {\n      // Per the spec, the expression should be preferred if available.\n      if (group.expression) {\n        return this._evaluateVisibilityExpression(group.expression);\n      }\n      if (!group.policy || group.policy === \"AnyOn\") {\n        // Default\n        for (const id of group.ids) {\n          if (!this._groups.has(id)) {\n            warn(`Optional content group not found: ${id}`);\n            return true;\n          }\n          if (this._groups.get(id).visible) {\n            return true;\n          }\n        }\n        return false;\n      } else if (group.policy === \"AllOn\") {\n        for (const id of group.ids) {\n          if (!this._groups.has(id)) {\n            warn(`Optional content group not found: ${id}`);\n            return true;\n          }\n          if (!this._groups.get(id).visible) {\n            return false;\n          }\n        }\n        return true;\n      } else if (group.policy === \"AnyOff\") {\n        for (const id of group.ids) {\n          if (!this._groups.has(id)) {\n            warn(`Optional content group not found: ${id}`);\n            return true;\n          }\n          if (!this._groups.get(id).visible) {\n            return true;\n          }\n        }\n        return false;\n      } else if (group.policy === \"AllOff\") {\n        for (const id of group.ids) {\n          if (!this._groups.has(id)) {\n            warn(`Optional content group not found: ${id}`);\n            return true;\n          }\n          if (this._groups.get(id).visible) {\n            return false;\n          }\n        }\n        return true;\n      }\n      warn(`Unknown optional content policy ${group.policy}.`);\n      return true;\n    }\n    warn(`Unknown group type ${group.type}.`);\n    return true;\n  }\n\n  setVisibility(id, visible = true) {\n    if (!this._groups.has(id)) {\n      warn(`Optional content group not found: ${id}`);\n      return;\n    }\n    this._groups.get(id).visible = !!visible;\n  }\n\n  getOrder() {\n    if (!this._groups.size) {\n      return null;\n    }\n    if (this._order) {\n      return this._order.slice();\n    }\n    return Array.from(this._groups.keys());\n  }\n\n  getGroups() {\n    return this._groups.size > 0 ? objectFromMap(this._groups) : null;\n  }\n\n  getGroup(id) {\n    return this._groups.get(id) || null;\n  }\n}\n\nexport { OptionalContentConfig };\n","/* Copyright 2012 Mozilla Foundation\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { assert, createPromiseCapability } from \"../shared/util.js\";\nimport { isPdfFile } from \"./display_utils.js\";\n\n/** @implements {IPDFStream} */\nclass PDFDataTransportStream {\n  constructor(params, pdfDataRangeTransport) {\n    assert(\n      pdfDataRangeTransport,\n      'PDFDataTransportStream - missing required \"pdfDataRangeTransport\" argument.'\n    );\n\n    this._queuedChunks = [];\n    this._progressiveDone = params.progressiveDone || false;\n    this._contentDispositionFilename =\n      params.contentDispositionFilename || null;\n\n    const initialData = params.initialData;\n    if (initialData?.length > 0) {\n      const buffer = new Uint8Array(initialData).buffer;\n      this._queuedChunks.push(buffer);\n    }\n\n    this._pdfDataRangeTransport = pdfDataRangeTransport;\n    this._isStreamingSupported = !params.disableStream;\n    this._isRangeSupported = !params.disableRange;\n    this._contentLength = params.length;\n\n    this._fullRequestReader = null;\n    this._rangeReaders = [];\n\n    this._pdfDataRangeTransport.addRangeListener((begin, chunk) => {\n      this._onReceiveData({ begin, chunk });\n    });\n\n    this._pdfDataRangeTransport.addProgressListener((loaded, total) => {\n      this._onProgress({ loaded, total });\n    });\n\n    this._pdfDataRangeTransport.addProgressiveReadListener(chunk => {\n      this._onReceiveData({ chunk });\n    });\n\n    this._pdfDataRangeTransport.addProgressiveDoneListener(() => {\n      this._onProgressiveDone();\n    });\n\n    this._pdfDataRangeTransport.transportReady();\n  }\n\n  _onReceiveData(args) {\n    const buffer = new Uint8Array(args.chunk).buffer;\n    if (args.begin === undefined) {\n      if (this._fullRequestReader) {\n        this._fullRequestReader._enqueue(buffer);\n      } else {\n        this._queuedChunks.push(buffer);\n      }\n    } else {\n      const found = this._rangeReaders.some(function (rangeReader) {\n        if (rangeReader._begin !== args.begin) {\n          return false;\n        }\n        rangeReader._enqueue(buffer);\n        return true;\n      });\n      assert(\n        found,\n        \"_onReceiveData - no `PDFDataTransportStreamRangeReader` instance found.\"\n      );\n    }\n  }\n\n  get _progressiveDataLength() {\n    return this._fullRequestReader?._loaded ?? 0;\n  }\n\n  _onProgress(evt) {\n    if (evt.total === undefined) {\n      // Reporting to first range reader, if it exists.\n      const firstReader = this._rangeReaders[0];\n      if (firstReader?.onProgress) {\n        firstReader.onProgress({ loaded: evt.loaded });\n      }\n    } else {\n      const fullReader = this._fullRequestReader;\n      if (fullReader?.onProgress) {\n        fullReader.onProgress({ loaded: evt.loaded, total: evt.total });\n      }\n    }\n  }\n\n  _onProgressiveDone() {\n    if (this._fullRequestReader) {\n      this._fullRequestReader.progressiveDone();\n    }\n    this._progressiveDone = true;\n  }\n\n  _removeRangeReader(reader) {\n    const i = this._rangeReaders.indexOf(reader);\n    if (i >= 0) {\n      this._rangeReaders.splice(i, 1);\n    }\n  }\n\n  getFullReader() {\n    assert(\n      !this._fullRequestReader,\n      \"PDFDataTransportStream.getFullReader can only be called once.\"\n    );\n    const queuedChunks = this._queuedChunks;\n    this._queuedChunks = null;\n    return new PDFDataTransportStreamReader(\n      this,\n      queuedChunks,\n      this._progressiveDone,\n      this._contentDispositionFilename\n    );\n  }\n\n  getRangeReader(begin, end) {\n    if (end <= this._progressiveDataLength) {\n      return null;\n    }\n    const reader = new PDFDataTransportStreamRangeReader(this, begin, end);\n    this._pdfDataRangeTransport.requestDataRange(begin, end);\n    this._rangeReaders.push(reader);\n    return reader;\n  }\n\n  cancelAllRequests(reason) {\n    if (this._fullRequestReader) {\n      this._fullRequestReader.cancel(reason);\n    }\n    for (const reader of this._rangeReaders.slice(0)) {\n      reader.cancel(reason);\n    }\n    this._pdfDataRangeTransport.abort();\n  }\n}\n\n/** @implements {IPDFStreamReader} */\nclass PDFDataTransportStreamReader {\n  constructor(\n    stream,\n    queuedChunks,\n    progressiveDone = false,\n    contentDispositionFilename = null\n  ) {\n    this._stream = stream;\n    this._done = progressiveDone || false;\n    this._filename = isPdfFile(contentDispositionFilename)\n      ? contentDispositionFilename\n      : null;\n    this._queuedChunks = queuedChunks || [];\n    this._loaded = 0;\n    for (const chunk of this._queuedChunks) {\n      this._loaded += chunk.byteLength;\n    }\n    this._requests = [];\n    this._headersReady = Promise.resolve();\n    stream._fullRequestReader = this;\n\n    this.onProgress = null;\n  }\n\n  _enqueue(chunk) {\n    if (this._done) {\n      return; // Ignore new data.\n    }\n    if (this._requests.length > 0) {\n      const requestCapability = this._requests.shift();\n      requestCapability.resolve({ value: chunk, done: false });\n    } else {\n      this._queuedChunks.push(chunk);\n    }\n    this._loaded += chunk.byteLength;\n  }\n\n  get headersReady() {\n    return this._headersReady;\n  }\n\n  get filename() {\n    return this._filename;\n  }\n\n  get isRangeSupported() {\n    return this._stream._isRangeSupported;\n  }\n\n  get isStreamingSupported() {\n    return this._stream._isStreamingSupported;\n  }\n\n  get contentLength() {\n    return this._stream._contentLength;\n  }\n\n  async read() {\n    if (this._queuedChunks.length > 0) {\n      const chunk = this._queuedChunks.shift();\n      return { value: chunk, done: false };\n    }\n    if (this._done) {\n      return { value: undefined, done: true };\n    }\n    const requestCapability = createPromiseCapability();\n    this._requests.push(requestCapability);\n    return requestCapability.promise;\n  }\n\n  cancel(reason) {\n    this._done = true;\n    for (const requestCapability of this._requests) {\n      requestCapability.resolve({ value: undefined, done: true });\n    }\n    this._requests.length = 0;\n  }\n\n  progressiveDone() {\n    if (this._done) {\n      return;\n    }\n    this._done = true;\n  }\n}\n\n/** @implements {IPDFStreamRangeReader} */\nclass PDFDataTransportStreamRangeReader {\n  constructor(stream, begin, end) {\n    this._stream = stream;\n    this._begin = begin;\n    this._end = end;\n    this._queuedChunk = null;\n    this._requests = [];\n    this._done = false;\n\n    this.onProgress = null;\n  }\n\n  _enqueue(chunk) {\n    if (this._done) {\n      return; // ignore new data\n    }\n    if (this._requests.length === 0) {\n      this._queuedChunk = chunk;\n    } else {\n      const requestsCapability = this._requests.shift();\n      requestsCapability.resolve({ value: chunk, done: false });\n      for (const requestCapability of this._requests) {\n        requestCapability.resolve({ value: undefined, done: true });\n      }\n      this._requests.length = 0;\n    }\n    this._done = true;\n    this._stream._removeRangeReader(this);\n  }\n\n  get isStreamingSupported() {\n    return false;\n  }\n\n  async read() {\n    if (this._queuedChunk) {\n      const chunk = this._queuedChunk;\n      this._queuedChunk = null;\n      return { value: chunk, done: false };\n    }\n    if (this._done) {\n      return { value: undefined, done: true };\n    }\n    const requestCapability = createPromiseCapability();\n    this._requests.push(requestCapability);\n    return requestCapability.promise;\n  }\n\n  cancel(reason) {\n    this._done = true;\n    for (const requestCapability of this._requests) {\n      requestCapability.resolve({ value: undefined, done: true });\n    }\n    this._requests.length = 0;\n    this._stream._removeRangeReader(this);\n  }\n}\n\nexport { PDFDataTransportStream };\n","/* Copyright 2021 Mozilla Foundation\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nclass XfaText {\n  /**\n   * Walk an XFA tree and create an array of text nodes that is compatible\n   * with a regular PDFs TextContent. Currently, only TextItem.str is supported,\n   * all other fields and styles haven't been implemented.\n   *\n   * @param {Object} xfa - An XFA fake DOM object.\n   *\n   * @returns {TextContent}\n   */\n  static textContent(xfa) {\n    const items = [];\n    const output = {\n      items,\n      styles: Object.create(null),\n    };\n    function walk(node) {\n      if (!node) {\n        return;\n      }\n      let str = null;\n      const name = node.name;\n      if (name === \"#text\") {\n        str = node.value;\n      } else if (!XfaText.shouldBuildText(name)) {\n        return;\n      } else if (node?.attributes?.textContent) {\n        str = node.attributes.textContent;\n      } else if (node.value) {\n        str = node.value;\n      }\n      if (str !== null) {\n        items.push({\n          str,\n        });\n      }\n      if (!node.children) {\n        return;\n      }\n      for (const child of node.children) {\n        walk(child);\n      }\n    }\n    walk(xfa);\n    return output;\n  }\n\n  /**\n   * @param {string} name - DOM node name. (lower case)\n   *\n   * @returns {boolean} true if the DOM node should have a corresponding text\n   * node.\n   */\n  static shouldBuildText(name) {\n    return !(\n      name === \"textarea\" ||\n      name === \"input\" ||\n      name === \"option\" ||\n      name === \"select\"\n    );\n  }\n}\n\nexport { XfaText };\n","/* Copyright 2020 Mozilla Foundation\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n/* globals __non_webpack_require__ */\n\nimport {\n  BaseCanvasFactory,\n  BaseCMapReaderFactory,\n  BaseStandardFontDataFactory,\n} from \"./base_factory.js\";\n\nif (typeof PDFJSDev !== \"undefined\" && PDFJSDev.test(\"MOZCENTRAL\")) {\n  throw new Error(\n    'Module \"./node_utils.js\" shall not be used with MOZCENTRAL builds.'\n  );\n}\n\nconst fetchData = function (url) {\n  return new Promise((resolve, reject) => {\n    const fs = __non_webpack_require__(\"fs\");\n    fs.readFile(url, (error, data) => {\n      if (error || !data) {\n        reject(new Error(error));\n        return;\n      }\n      resolve(new Uint8Array(data));\n    });\n  });\n};\n\nclass NodeCanvasFactory extends BaseCanvasFactory {\n  /**\n   * @ignore\n   */\n  _createCanvas(width, height) {\n    const Canvas = __non_webpack_require__(\"canvas\");\n    return Canvas.createCanvas(width, height);\n  }\n}\n\nclass NodeCMapReaderFactory extends BaseCMapReaderFactory {\n  /**\n   * @ignore\n   */\n  _fetchData(url, compressionType) {\n    return fetchData(url).then(data => {\n      return { cMapData: data, compressionType };\n    });\n  }\n}\n\nclass NodeStandardFontDataFactory extends BaseStandardFontDataFactory {\n  /**\n   * @ignore\n   */\n  _fetchData(url) {\n    return fetchData(url);\n  }\n}\n\nexport {\n  NodeCanvasFactory,\n  NodeCMapReaderFactory,\n  NodeStandardFontDataFactory,\n};\n","/* Copyright 2014 Mozilla Foundation\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n/** @typedef {import(\"./api\").PDFPageProxy} PDFPageProxy */\n/** @typedef {import(\"./display_utils\").PageViewport} PageViewport */\n/** @typedef {import(\"./interfaces\").IDownloadManager} IDownloadManager */\n/** @typedef {import(\"../../web/interfaces\").IPDFLinkService} IPDFLinkService */\n\nimport {\n  AnnotationBorderStyleType,\n  AnnotationType,\n  assert,\n  shadow,\n  unreachable,\n  Util,\n  warn,\n} from \"../shared/util.js\";\nimport {\n  DOMSVGFactory,\n  getFilenameFromUrl,\n  PDFDateString,\n} from \"./display_utils.js\";\nimport { AnnotationStorage } from \"./annotation_storage.js\";\nimport { ColorConverters } from \"../shared/scripting_utils.js\";\nimport { XfaLayer } from \"./xfa_layer.js\";\n\nconst DEFAULT_TAB_INDEX = 1000;\nconst GetElementsByNameSet = new WeakSet();\n\nfunction getRectDims(rect) {\n  return {\n    width: rect[2] - rect[0],\n    height: rect[3] - rect[1],\n  };\n}\n\n/**\n * @typedef {Object} AnnotationElementParameters\n * @property {Object} data\n * @property {HTMLDivElement} layer\n * @property {PDFPageProxy} page\n * @property {PageViewport} viewport\n * @property {IPDFLinkService} linkService\n * @property {IDownloadManager} downloadManager\n * @property {AnnotationStorage} [annotationStorage]\n * @property {string} [imageResourcesPath] - Path for image resources, mainly\n *   for annotation icons. Include trailing slash.\n * @property {boolean} renderForms\n * @property {Object} svgFactory\n * @property {boolean} [enableScripting]\n * @property {boolean} [hasJSActions]\n * @property {Object} [fieldObjects]\n * @property {Object} [mouseState]\n */\n\nclass AnnotationElementFactory {\n  /**\n   * @param {AnnotationElementParameters} parameters\n   * @returns {AnnotationElement}\n   */\n  static create(parameters) {\n    const subtype = parameters.data.annotationType;\n\n    switch (subtype) {\n      case AnnotationType.LINK:\n        return new LinkAnnotationElement(parameters);\n\n      case AnnotationType.TEXT:\n        return new TextAnnotationElement(parameters);\n\n      case AnnotationType.WIDGET:\n        const fieldType = parameters.data.fieldType;\n\n        switch (fieldType) {\n          case \"Tx\":\n            return new TextWidgetAnnotationElement(parameters);\n          case \"Btn\":\n            if (parameters.data.radioButton) {\n              return new RadioButtonWidgetAnnotationElement(parameters);\n            } else if (parameters.data.checkBox) {\n              return new CheckboxWidgetAnnotationElement(parameters);\n            }\n            return new PushButtonWidgetAnnotationElement(parameters);\n          case \"Ch\":\n            return new ChoiceWidgetAnnotationElement(parameters);\n        }\n        return new WidgetAnnotationElement(parameters);\n\n      case AnnotationType.POPUP:\n        return new PopupAnnotationElement(parameters);\n\n      case AnnotationType.FREETEXT:\n        return new FreeTextAnnotationElement(parameters);\n\n      case AnnotationType.LINE:\n        return new LineAnnotationElement(parameters);\n\n      case AnnotationType.SQUARE:\n        return new SquareAnnotationElement(parameters);\n\n      case AnnotationType.CIRCLE:\n        return new CircleAnnotationElement(parameters);\n\n      case AnnotationType.POLYLINE:\n        return new PolylineAnnotationElement(parameters);\n\n      case AnnotationType.CARET:\n        return new CaretAnnotationElement(parameters);\n\n      case AnnotationType.INK:\n        return new InkAnnotationElement(parameters);\n\n      case AnnotationType.POLYGON:\n        return new PolygonAnnotationElement(parameters);\n\n      case AnnotationType.HIGHLIGHT:\n        return new HighlightAnnotationElement(parameters);\n\n      case AnnotationType.UNDERLINE:\n        return new UnderlineAnnotationElement(parameters);\n\n      case AnnotationType.SQUIGGLY:\n        return new SquigglyAnnotationElement(parameters);\n\n      case AnnotationType.STRIKEOUT:\n        return new StrikeOutAnnotationElement(parameters);\n\n      case AnnotationType.STAMP:\n        return new StampAnnotationElement(parameters);\n\n      case AnnotationType.FILEATTACHMENT:\n        return new FileAttachmentAnnotationElement(parameters);\n\n      default:\n        return new AnnotationElement(parameters);\n    }\n  }\n}\n\nclass AnnotationElement {\n  constructor(\n    parameters,\n    {\n      isRenderable = false,\n      ignoreBorder = false,\n      createQuadrilaterals = false,\n    } = {}\n  ) {\n    this.isRenderable = isRenderable;\n    this.data = parameters.data;\n    this.layer = parameters.layer;\n    this.page = parameters.page;\n    this.viewport = parameters.viewport;\n    this.linkService = parameters.linkService;\n    this.downloadManager = parameters.downloadManager;\n    this.imageResourcesPath = parameters.imageResourcesPath;\n    this.renderForms = parameters.renderForms;\n    this.svgFactory = parameters.svgFactory;\n    this.annotationStorage = parameters.annotationStorage;\n    this.enableScripting = parameters.enableScripting;\n    this.hasJSActions = parameters.hasJSActions;\n    this._fieldObjects = parameters.fieldObjects;\n    this._mouseState = parameters.mouseState;\n\n    if (isRenderable) {\n      this.container = this._createContainer(ignoreBorder);\n    }\n    if (createQuadrilaterals) {\n      this.quadrilaterals = this._createQuadrilaterals(ignoreBorder);\n    }\n  }\n\n  /**\n   * Create an empty container for the annotation's HTML element.\n   *\n   * @private\n   * @param {boolean} ignoreBorder\n   * @memberof AnnotationElement\n   * @returns {HTMLSectionElement}\n   */\n  _createContainer(ignoreBorder = false) {\n    const data = this.data,\n      page = this.page,\n      viewport = this.viewport;\n    const container = document.createElement(\"section\");\n    let { width, height } = getRectDims(data.rect);\n\n    container.setAttribute(\"data-annotation-id\", data.id);\n\n    // Do *not* modify `data.rect`, since that will corrupt the annotation\n    // position on subsequent calls to `_createContainer` (see issue 6804).\n    const rect = Util.normalizeRect([\n      data.rect[0],\n      page.view[3] - data.rect[1] + page.view[1],\n      data.rect[2],\n      page.view[3] - data.rect[3] + page.view[1],\n    ]);\n\n    if (data.hasOwnCanvas) {\n      const transform = viewport.transform.slice();\n      const [scaleX, scaleY] = Util.singularValueDecompose2dScale(transform);\n      width = Math.ceil(width * scaleX);\n      height = Math.ceil(height * scaleY);\n      rect[0] *= scaleX;\n      rect[1] *= scaleY;\n      // Reset the scale part of the transform matrix (which must be diagonal\n      // or anti-diagonal) in order to avoid to rescale the canvas.\n      // The canvas for the annotation is correctly scaled when it is drawn\n      // (see `beginAnnotation` in canvas.js).\n      for (let i = 0; i < 4; i++) {\n        transform[i] = Math.sign(transform[i]);\n      }\n      container.style.transform = `matrix(${transform.join(\",\")})`;\n    } else {\n      container.style.transform = `matrix(${viewport.transform.join(\",\")})`;\n    }\n\n    container.style.transformOrigin = `${-rect[0]}px ${-rect[1]}px`;\n\n    if (!ignoreBorder && data.borderStyle.width > 0) {\n      container.style.borderWidth = `${data.borderStyle.width}px`;\n      if (data.borderStyle.style !== AnnotationBorderStyleType.UNDERLINE) {\n        // Underline styles only have a bottom border, so we do not need\n        // to adjust for all borders. This yields a similar result as\n        // Adobe Acrobat/Reader.\n        width -= 2 * data.borderStyle.width;\n        height -= 2 * data.borderStyle.width;\n      }\n\n      const horizontalRadius = data.borderStyle.horizontalCornerRadius;\n      const verticalRadius = data.borderStyle.verticalCornerRadius;\n      if (horizontalRadius > 0 || verticalRadius > 0) {\n        const radius = `${horizontalRadius}px / ${verticalRadius}px`;\n        container.style.borderRadius = radius;\n      }\n\n      switch (data.borderStyle.style) {\n        case AnnotationBorderStyleType.SOLID:\n          container.style.borderStyle = \"solid\";\n          break;\n\n        case AnnotationBorderStyleType.DASHED:\n          container.style.borderStyle = \"dashed\";\n          break;\n\n        case AnnotationBorderStyleType.BEVELED:\n          warn(\"Unimplemented border style: beveled\");\n          break;\n\n        case AnnotationBorderStyleType.INSET:\n          warn(\"Unimplemented border style: inset\");\n          break;\n\n        case AnnotationBorderStyleType.UNDERLINE:\n          container.style.borderBottomStyle = \"solid\";\n          break;\n\n        default:\n          break;\n      }\n\n      const borderColor = data.borderColor || data.color || null;\n      if (borderColor) {\n        container.style.borderColor = Util.makeHexColor(\n          data.color[0] | 0,\n          data.color[1] | 0,\n          data.color[2] | 0\n        );\n      } else {\n        // Transparent (invisible) border, so do not draw it at all.\n        container.style.borderWidth = 0;\n      }\n    }\n\n    container.style.left = `${rect[0]}px`;\n    container.style.top = `${rect[1]}px`;\n\n    if (data.hasOwnCanvas) {\n      container.style.width = container.style.height = \"auto\";\n    } else {\n      container.style.width = `${width}px`;\n      container.style.height = `${height}px`;\n    }\n    return container;\n  }\n\n  get _commonActions() {\n    const setColor = (jsName, styleName, event) => {\n      const color = event.detail[jsName];\n      event.target.style[styleName] = ColorConverters[`${color[0]}_HTML`](\n        color.slice(1)\n      );\n    };\n\n    return shadow(this, \"_commonActions\", {\n      display: event => {\n        const hidden = event.detail.display % 2 === 1;\n        event.target.style.visibility = hidden ? \"hidden\" : \"visible\";\n        this.annotationStorage.setValue(this.data.id, {\n          hidden,\n          print: event.detail.display === 0 || event.detail.display === 3,\n        });\n      },\n      print: event => {\n        this.annotationStorage.setValue(this.data.id, {\n          print: event.detail.print,\n        });\n      },\n      hidden: event => {\n        event.target.style.visibility = event.detail.hidden\n          ? \"hidden\"\n          : \"visible\";\n        this.annotationStorage.setValue(this.data.id, {\n          hidden: event.detail.hidden,\n        });\n      },\n      focus: event => {\n        setTimeout(() => event.target.focus({ preventScroll: false }), 0);\n      },\n      userName: event => {\n        // tooltip\n        event.target.title = event.detail.userName;\n      },\n      readonly: event => {\n        if (event.detail.readonly) {\n          event.target.setAttribute(\"readonly\", \"\");\n        } else {\n          event.target.removeAttribute(\"readonly\");\n        }\n      },\n      required: event => {\n        if (event.detail.required) {\n          event.target.setAttribute(\"required\", \"\");\n        } else {\n          event.target.removeAttribute(\"required\");\n        }\n      },\n      bgColor: event => {\n        setColor(\"bgColor\", \"backgroundColor\", event);\n      },\n      fillColor: event => {\n        setColor(\"fillColor\", \"backgroundColor\", event);\n      },\n      fgColor: event => {\n        setColor(\"fgColor\", \"color\", event);\n      },\n      textColor: event => {\n        setColor(\"textColor\", \"color\", event);\n      },\n      borderColor: event => {\n        setColor(\"borderColor\", \"borderColor\", event);\n      },\n      strokeColor: event => {\n        setColor(\"strokeColor\", \"borderColor\", event);\n      },\n    });\n  }\n\n  _dispatchEventFromSandbox(actions, jsEvent) {\n    const commonActions = this._commonActions;\n    for (const name of Object.keys(jsEvent.detail)) {\n      const action = actions[name] || commonActions[name];\n      if (action) {\n        action(jsEvent);\n      }\n    }\n  }\n\n  _setDefaultPropertiesFromJS(element) {\n    if (!this.enableScripting) {\n      return;\n    }\n\n    // Some properties may have been updated thanks to JS.\n    const storedData = this.annotationStorage.getRawValue(this.data.id);\n    if (!storedData) {\n      return;\n    }\n\n    const commonActions = this._commonActions;\n    for (const [actionName, detail] of Object.entries(storedData)) {\n      const action = commonActions[actionName];\n      if (action) {\n        action({ detail, target: element });\n        // The action has been consumed: no need to keep it.\n        delete storedData[actionName];\n      }\n    }\n  }\n\n  /**\n   * Create quadrilaterals from the annotation's quadpoints.\n   *\n   * @private\n   * @param {boolean} ignoreBorder\n   * @memberof AnnotationElement\n   * @returns {Array<HTMLSectionElement>}\n   */\n  _createQuadrilaterals(ignoreBorder = false) {\n    if (!this.data.quadPoints) {\n      return null;\n    }\n\n    const quadrilaterals = [];\n    const savedRect = this.data.rect;\n    for (const quadPoint of this.data.quadPoints) {\n      this.data.rect = [\n        quadPoint[2].x,\n        quadPoint[2].y,\n        quadPoint[1].x,\n        quadPoint[1].y,\n      ];\n      quadrilaterals.push(this._createContainer(ignoreBorder));\n    }\n    this.data.rect = savedRect;\n    return quadrilaterals;\n  }\n\n  /**\n   * Create a popup for the annotation's HTML element. This is used for\n   * annotations that do not have a Popup entry in the dictionary, but\n   * are of a type that works with popups (such as Highlight annotations).\n   *\n   * @private\n   * @param {HTMLDivElement|HTMLImageElement|null} trigger\n   * @param {Object} data\n   * @memberof AnnotationElement\n   */\n  _createPopup(trigger, data) {\n    let container = this.container;\n    if (this.quadrilaterals) {\n      trigger = trigger || this.quadrilaterals;\n      container = this.quadrilaterals[0];\n    }\n\n    // If no trigger element is specified, create it.\n    if (!trigger) {\n      trigger = document.createElement(\"div\");\n      trigger.style.height = container.style.height;\n      trigger.style.width = container.style.width;\n      container.appendChild(trigger);\n    }\n\n    const popupElement = new PopupElement({\n      container,\n      trigger,\n      color: data.color,\n      titleObj: data.titleObj,\n      modificationDate: data.modificationDate,\n      contentsObj: data.contentsObj,\n      richText: data.richText,\n      hideWrapper: true,\n    });\n    const popup = popupElement.render();\n\n    // Position the popup next to the annotation's container.\n    popup.style.left = container.style.width;\n\n    container.appendChild(popup);\n  }\n\n  /**\n   * Render the quadrilaterals of the annotation.\n   *\n   * @private\n   * @param {string} className\n   * @memberof AnnotationElement\n   * @returns {Array<HTMLSectionElement>}\n   */\n  _renderQuadrilaterals(className) {\n    if (\n      typeof PDFJSDev === \"undefined\" ||\n      PDFJSDev.test(\"!PRODUCTION || TESTING\")\n    ) {\n      assert(this.quadrilaterals, \"Missing quadrilaterals during rendering\");\n    }\n\n    for (const quadrilateral of this.quadrilaterals) {\n      quadrilateral.className = className;\n    }\n    return this.quadrilaterals;\n  }\n\n  /**\n   * Render the annotation's HTML element(s).\n   *\n   * @public\n   * @memberof AnnotationElement\n   * @returns {HTMLSectionElement|Array<HTMLSectionElement>}\n   */\n  render() {\n    unreachable(\"Abstract method `AnnotationElement.render` called\");\n  }\n\n  /**\n   * @private\n   * @returns {Array}\n   */\n  _getElementsByName(name, skipId = null) {\n    const fields = [];\n\n    if (this._fieldObjects) {\n      const fieldObj = this._fieldObjects[name];\n      if (fieldObj) {\n        for (const { page, id, exportValues } of fieldObj) {\n          if (page === -1) {\n            continue;\n          }\n          if (id === skipId) {\n            continue;\n          }\n          const exportValue =\n            typeof exportValues === \"string\" ? exportValues : null;\n\n          const domElement = document.getElementById(id);\n          if (domElement && !GetElementsByNameSet.has(domElement)) {\n            warn(`_getElementsByName - element not allowed: ${id}`);\n            continue;\n          }\n          fields.push({ id, exportValue, domElement });\n        }\n      }\n      return fields;\n    }\n    // Fallback to a regular DOM lookup, to ensure that the standalone\n    // viewer components won't break.\n    for (const domElement of document.getElementsByName(name)) {\n      const { id, exportValue } = domElement;\n      if (id === skipId) {\n        continue;\n      }\n      if (!GetElementsByNameSet.has(domElement)) {\n        continue;\n      }\n      fields.push({ id, exportValue, domElement });\n    }\n    return fields;\n  }\n\n  static get platform() {\n    const platform = typeof navigator !== \"undefined\" ? navigator.platform : \"\";\n\n    return shadow(this, \"platform\", {\n      isWin: platform.includes(\"Win\"),\n      isMac: platform.includes(\"Mac\"),\n    });\n  }\n}\n\nclass LinkAnnotationElement extends AnnotationElement {\n  constructor(parameters, options = null) {\n    const isRenderable = !!(\n      parameters.data.url ||\n      parameters.data.dest ||\n      parameters.data.action ||\n      parameters.data.isTooltipOnly ||\n      parameters.data.resetForm ||\n      (parameters.data.actions &&\n        (parameters.data.actions.Action ||\n          parameters.data.actions[\"Mouse Up\"] ||\n          parameters.data.actions[\"Mouse Down\"]))\n    );\n    super(parameters, {\n      isRenderable,\n      ignoreBorder: !!options?.ignoreBorder,\n      createQuadrilaterals: true,\n    });\n  }\n\n  render() {\n    const { data, linkService } = this;\n    const link = document.createElement(\"a\");\n\n    if (data.url) {\n      linkService.addLinkAttributes(link, data.url, data.newWindow);\n    } else if (data.action) {\n      this._bindNamedAction(link, data.action);\n    } else if (data.dest) {\n      this._bindLink(link, data.dest);\n    } else {\n      let hasClickAction = false;\n      if (\n        data.actions &&\n        (data.actions.Action ||\n          data.actions[\"Mouse Up\"] ||\n          data.actions[\"Mouse Down\"]) &&\n        this.enableScripting &&\n        this.hasJSActions\n      ) {\n        hasClickAction = true;\n        this._bindJSAction(link, data);\n      }\n\n      if (data.resetForm) {\n        this._bindResetFormAction(link, data.resetForm);\n      } else if (!hasClickAction) {\n        this._bindLink(link, \"\");\n      }\n    }\n\n    if (this.quadrilaterals) {\n      return this._renderQuadrilaterals(\"linkAnnotation\").map(\n        (quadrilateral, index) => {\n          const linkElement = index === 0 ? link : link.cloneNode();\n          quadrilateral.appendChild(linkElement);\n          return quadrilateral;\n        }\n      );\n    }\n\n    this.container.className = \"linkAnnotation\";\n    this.container.appendChild(link);\n    return this.container;\n  }\n\n  /**\n   * Bind internal links to the link element.\n   *\n   * @private\n   * @param {Object} link\n   * @param {Object} destination\n   * @memberof LinkAnnotationElement\n   */\n  _bindLink(link, destination) {\n    link.href = this.linkService.getDestinationHash(destination);\n    link.onclick = () => {\n      if (destination) {\n        this.linkService.goToDestination(destination);\n      }\n      return false;\n    };\n    if (destination || destination === /* isTooltipOnly = */ \"\") {\n      link.className = \"internalLink\";\n    }\n  }\n\n  /**\n   * Bind named actions to the link element.\n   *\n   * @private\n   * @param {Object} link\n   * @param {Object} action\n   * @memberof LinkAnnotationElement\n   */\n  _bindNamedAction(link, action) {\n    link.href = this.linkService.getAnchorUrl(\"\");\n    link.onclick = () => {\n      this.linkService.executeNamedAction(action);\n      return false;\n    };\n    link.className = \"internalLink\";\n  }\n\n  /**\n   * Bind JS actions to the link element.\n   *\n   * @private\n   * @param {Object} link\n   * @param {Object} data\n   * @memberof LinkAnnotationElement\n   */\n  _bindJSAction(link, data) {\n    link.href = this.linkService.getAnchorUrl(\"\");\n    const map = new Map([\n      [\"Action\", \"onclick\"],\n      [\"Mouse Up\", \"onmouseup\"],\n      [\"Mouse Down\", \"onmousedown\"],\n    ]);\n    for (const name of Object.keys(data.actions)) {\n      const jsName = map.get(name);\n      if (!jsName) {\n        continue;\n      }\n      link[jsName] = () => {\n        this.linkService.eventBus?.dispatch(\"dispatcheventinsandbox\", {\n          source: this,\n          detail: {\n            id: data.id,\n            name,\n          },\n        });\n        return false;\n      };\n    }\n\n    if (!link.onclick) {\n      link.onclick = () => false;\n    }\n    link.className = \"internalLink\";\n  }\n\n  _bindResetFormAction(link, resetForm) {\n    const otherClickAction = link.onclick;\n    if (!otherClickAction) {\n      link.href = this.linkService.getAnchorUrl(\"\");\n    }\n    link.className = \"internalLink\";\n\n    if (!this._fieldObjects) {\n      warn(\n        `_bindResetFormAction - \"resetForm\" action not supported, ` +\n          \"ensure that the `fieldObjects` parameter is provided.\"\n      );\n      if (!otherClickAction) {\n        link.onclick = () => false;\n      }\n      return;\n    }\n\n    link.onclick = () => {\n      if (otherClickAction) {\n        otherClickAction();\n      }\n\n      const {\n        fields: resetFormFields,\n        refs: resetFormRefs,\n        include,\n      } = resetForm;\n\n      const allFields = [];\n      if (resetFormFields.length !== 0 || resetFormRefs.length !== 0) {\n        const fieldIds = new Set(resetFormRefs);\n        for (const fieldName of resetFormFields) {\n          const fields = this._fieldObjects[fieldName] || [];\n          for (const { id } of fields) {\n            fieldIds.add(id);\n          }\n        }\n        for (const fields of Object.values(this._fieldObjects)) {\n          for (const field of fields) {\n            if (fieldIds.has(field.id) === include) {\n              allFields.push(field);\n            }\n          }\n        }\n      } else {\n        for (const fields of Object.values(this._fieldObjects)) {\n          allFields.push(...fields);\n        }\n      }\n\n      const storage = this.annotationStorage;\n      const allIds = [];\n      for (const field of allFields) {\n        const { id } = field;\n        allIds.push(id);\n        switch (field.type) {\n          case \"text\": {\n            const value = field.defaultValue || \"\";\n            storage.setValue(id, { value });\n            break;\n          }\n          case \"checkbox\":\n          case \"radiobutton\": {\n            const value = field.defaultValue === field.exportValues;\n            storage.setValue(id, { value });\n            break;\n          }\n          case \"combobox\":\n          case \"listbox\": {\n            const value = field.defaultValue || \"\";\n            storage.setValue(id, { value });\n            break;\n          }\n          default:\n            continue;\n        }\n        const domElement = document.getElementById(id);\n        if (!domElement || !GetElementsByNameSet.has(domElement)) {\n          continue;\n        }\n        domElement.dispatchEvent(new Event(\"resetform\"));\n      }\n\n      if (this.enableScripting) {\n        // Update the values in the sandbox.\n        this.linkService.eventBus?.dispatch(\"dispatcheventinsandbox\", {\n          source: this,\n          detail: {\n            id: \"app\",\n            ids: allIds,\n            name: \"ResetForm\",\n          },\n        });\n      }\n\n      return false;\n    };\n  }\n}\n\nclass TextAnnotationElement extends AnnotationElement {\n  constructor(parameters) {\n    const isRenderable = !!(\n      parameters.data.hasPopup ||\n      parameters.data.titleObj?.str ||\n      parameters.data.contentsObj?.str ||\n      parameters.data.richText?.str\n    );\n    super(parameters, { isRenderable });\n  }\n\n  render() {\n    this.container.className = \"textAnnotation\";\n\n    const image = document.createElement(\"img\");\n    image.style.height = this.container.style.height;\n    image.style.width = this.container.style.width;\n    image.src =\n      this.imageResourcesPath +\n      \"annotation-\" +\n      this.data.name.toLowerCase() +\n      \".svg\";\n    image.alt = \"[{{type}} Annotation]\";\n    image.dataset.l10nId = \"text_annotation_type\";\n    image.dataset.l10nArgs = JSON.stringify({ type: this.data.name });\n\n    if (!this.data.hasPopup) {\n      this._createPopup(image, this.data);\n    }\n\n    this.container.appendChild(image);\n    return this.container;\n  }\n}\n\nclass WidgetAnnotationElement extends AnnotationElement {\n  render() {\n    // Show only the container for unsupported field types.\n    if (this.data.alternativeText) {\n      this.container.title = this.data.alternativeText;\n    }\n\n    return this.container;\n  }\n\n  _getKeyModifier(event) {\n    const { isWin, isMac } = AnnotationElement.platform;\n    return (isWin && event.ctrlKey) || (isMac && event.metaKey);\n  }\n\n  _setEventListener(element, baseName, eventName, valueGetter) {\n    if (baseName.includes(\"mouse\")) {\n      // Mouse events\n      element.addEventListener(baseName, event => {\n        this.linkService.eventBus?.dispatch(\"dispatcheventinsandbox\", {\n          source: this,\n          detail: {\n            id: this.data.id,\n            name: eventName,\n            value: valueGetter(event),\n            shift: event.shiftKey,\n            modifier: this._getKeyModifier(event),\n          },\n        });\n      });\n    } else {\n      // Non mouse event\n      element.addEventListener(baseName, event => {\n        this.linkService.eventBus?.dispatch(\"dispatcheventinsandbox\", {\n          source: this,\n          detail: {\n            id: this.data.id,\n            name: eventName,\n            value: valueGetter(event),\n          },\n        });\n      });\n    }\n  }\n\n  _setEventListeners(element, names, getter) {\n    for (const [baseName, eventName] of names) {\n      if (eventName === \"Action\" || this.data.actions?.[eventName]) {\n        this._setEventListener(element, baseName, eventName, getter);\n      }\n    }\n  }\n\n  _setBackgroundColor(element) {\n    const color = this.data.backgroundColor || null;\n    element.style.backgroundColor =\n      color === null\n        ? \"transparent\"\n        : Util.makeHexColor(color[0], color[1], color[2]);\n  }\n}\n\nclass TextWidgetAnnotationElement extends WidgetAnnotationElement {\n  constructor(parameters) {\n    const isRenderable =\n      parameters.renderForms ||\n      (!parameters.data.hasAppearance && !!parameters.data.fieldValue);\n    super(parameters, { isRenderable });\n  }\n\n  setPropertyOnSiblings(base, key, value, keyInStorage) {\n    const storage = this.annotationStorage;\n    for (const element of this._getElementsByName(\n      base.name,\n      /* skipId = */ base.id\n    )) {\n      if (element.domElement) {\n        element.domElement[key] = value;\n      }\n      storage.setValue(element.id, { [keyInStorage]: value });\n    }\n  }\n\n  render() {\n    const storage = this.annotationStorage;\n    const id = this.data.id;\n\n    this.container.className = \"textWidgetAnnotation\";\n\n    let element = null;\n    if (this.renderForms) {\n      // NOTE: We cannot set the values using `element.value` below, since it\n      //       prevents the AnnotationLayer rasterizer in `test/driver.js`\n      //       from parsing the elements correctly for the reference tests.\n      const storedData = storage.getValue(id, {\n        value: this.data.fieldValue,\n      });\n      const textContent = storedData.formattedValue || storedData.value || \"\";\n      const elementData = {\n        userValue: null,\n        formattedValue: null,\n        valueOnFocus: \"\",\n      };\n\n      if (this.data.multiLine) {\n        element = document.createElement(\"textarea\");\n        element.textContent = textContent;\n      } else {\n        element = document.createElement(\"input\");\n        element.type = \"text\";\n        element.setAttribute(\"value\", textContent);\n      }\n      GetElementsByNameSet.add(element);\n      element.disabled = this.data.readOnly;\n      element.name = this.data.fieldName;\n      element.tabIndex = DEFAULT_TAB_INDEX;\n\n      elementData.userValue = textContent;\n      element.setAttribute(\"id\", id);\n\n      element.addEventListener(\"input\", event => {\n        storage.setValue(id, { value: event.target.value });\n        this.setPropertyOnSiblings(\n          element,\n          \"value\",\n          event.target.value,\n          \"value\"\n        );\n      });\n\n      element.addEventListener(\"resetform\", event => {\n        const defaultValue = this.data.defaultFieldValue ?? \"\";\n        element.value = elementData.userValue = defaultValue;\n        elementData.formattedValue = null;\n      });\n\n      let blurListener = event => {\n        const { formattedValue } = elementData;\n        if (formattedValue !== null && formattedValue !== undefined) {\n          event.target.value = formattedValue;\n        }\n        // Reset the cursor position to the start of the field (issue 12359).\n        event.target.scrollLeft = 0;\n      };\n\n      if (this.enableScripting && this.hasJSActions) {\n        element.addEventListener(\"focus\", event => {\n          if (elementData.userValue) {\n            event.target.value = elementData.userValue;\n          }\n          elementData.valueOnFocus = event.target.value;\n        });\n\n        element.addEventListener(\"updatefromsandbox\", jsEvent => {\n          const actions = {\n            value(event) {\n              elementData.userValue = event.detail.value ?? \"\";\n              storage.setValue(id, { value: elementData.userValue.toString() });\n              event.target.value = elementData.userValue;\n            },\n            formattedValue(event) {\n              const { formattedValue } = event.detail;\n              elementData.formattedValue = formattedValue;\n              if (\n                formattedValue !== null &&\n                formattedValue !== undefined &&\n                event.target !== document.activeElement\n              ) {\n                // Input hasn't the focus so display formatted string\n                event.target.value = formattedValue;\n              }\n              storage.setValue(id, {\n                formattedValue,\n              });\n            },\n            selRange(event) {\n              event.target.setSelectionRange(...event.detail.selRange);\n            },\n          };\n          this._dispatchEventFromSandbox(actions, jsEvent);\n        });\n\n        // Even if the field hasn't any actions\n        // leaving it can still trigger some actions with Calculate\n        element.addEventListener(\"keydown\", event => {\n          // if the key is one of Escape, Enter or Tab\n          // then the data are committed\n          let commitKey = -1;\n          if (event.key === \"Escape\") {\n            commitKey = 0;\n          } else if (event.key === \"Enter\") {\n            commitKey = 2;\n          } else if (event.key === \"Tab\") {\n            commitKey = 3;\n          }\n          if (commitKey === -1) {\n            return;\n          }\n          const { value } = event.target;\n          if (elementData.valueOnFocus === value) {\n            return;\n          }\n          // Save the entered value\n          elementData.userValue = value;\n          this.linkService.eventBus?.dispatch(\"dispatcheventinsandbox\", {\n            source: this,\n            detail: {\n              id,\n              name: \"Keystroke\",\n              value,\n              willCommit: true,\n              commitKey,\n              selStart: event.target.selectionStart,\n              selEnd: event.target.selectionEnd,\n            },\n          });\n        });\n        const _blurListener = blurListener;\n        blurListener = null;\n        element.addEventListener(\"blur\", event => {\n          const { value } = event.target;\n          elementData.userValue = value;\n          if (this._mouseState.isDown && elementData.valueOnFocus !== value) {\n            // Focus out using the mouse: data are committed\n            this.linkService.eventBus?.dispatch(\"dispatcheventinsandbox\", {\n              source: this,\n              detail: {\n                id,\n                name: \"Keystroke\",\n                value,\n                willCommit: true,\n                commitKey: 1,\n                selStart: event.target.selectionStart,\n                selEnd: event.target.selectionEnd,\n              },\n            });\n          }\n          _blurListener(event);\n        });\n\n        if (this.data.actions?.Keystroke) {\n          element.addEventListener(\"beforeinput\", event => {\n            const { data, target } = event;\n            const { value, selectionStart, selectionEnd } = target;\n\n            let selStart = selectionStart,\n              selEnd = selectionEnd;\n\n            switch (event.inputType) {\n              // https://rawgit.com/w3c/input-events/v1/index.html#interface-InputEvent-Attributes\n              case \"deleteWordBackward\": {\n                const match = value\n                  .substring(0, selectionStart)\n                  .match(/\\w*[^\\w]*$/);\n                if (match) {\n                  selStart -= match[0].length;\n                }\n                break;\n              }\n              case \"deleteWordForward\": {\n                const match = value\n                  .substring(selectionStart)\n                  .match(/^[^\\w]*\\w*/);\n                if (match) {\n                  selEnd += match[0].length;\n                }\n                break;\n              }\n              case \"deleteContentBackward\":\n                if (selectionStart === selectionEnd) {\n                  selStart -= 1;\n                }\n                break;\n              case \"deleteContentForward\":\n                if (selectionStart === selectionEnd) {\n                  selEnd += 1;\n                }\n                break;\n            }\n\n            // We handle the event ourselves.\n            event.preventDefault();\n            this.linkService.eventBus?.dispatch(\"dispatcheventinsandbox\", {\n              source: this,\n              detail: {\n                id,\n                name: \"Keystroke\",\n                value,\n                change: data || \"\",\n                willCommit: false,\n                selStart,\n                selEnd,\n              },\n            });\n          });\n        }\n\n        this._setEventListeners(\n          element,\n          [\n            [\"focus\", \"Focus\"],\n            [\"blur\", \"Blur\"],\n            [\"mousedown\", \"Mouse Down\"],\n            [\"mouseenter\", \"Mouse Enter\"],\n            [\"mouseleave\", \"Mouse Exit\"],\n            [\"mouseup\", \"Mouse Up\"],\n          ],\n          event => event.target.value\n        );\n      }\n\n      if (blurListener) {\n        element.addEventListener(\"blur\", blurListener);\n      }\n\n      if (this.data.maxLen !== null) {\n        element.maxLength = this.data.maxLen;\n      }\n\n      if (this.data.comb) {\n        const fieldWidth = this.data.rect[2] - this.data.rect[0];\n        const combWidth = fieldWidth / this.data.maxLen;\n\n        element.classList.add(\"comb\");\n        element.style.letterSpacing = `calc(${combWidth}px - 1ch)`;\n      }\n    } else {\n      element = document.createElement(\"div\");\n      element.textContent = this.data.fieldValue;\n      element.style.verticalAlign = \"middle\";\n      element.style.display = \"table-cell\";\n    }\n\n    this._setTextStyle(element);\n    this._setBackgroundColor(element);\n    this._setDefaultPropertiesFromJS(element);\n\n    this.container.appendChild(element);\n    return this.container;\n  }\n\n  /**\n   * Apply text styles to the text in the element.\n   *\n   * @private\n   * @param {HTMLDivElement} element\n   * @memberof TextWidgetAnnotationElement\n   */\n  _setTextStyle(element) {\n    const TEXT_ALIGNMENT = [\"left\", \"center\", \"right\"];\n    const { fontSize, fontColor } = this.data.defaultAppearanceData;\n    const style = element.style;\n\n    // TODO: If the font-size is zero, calculate it based on the height and\n    //       width of the element.\n    // Not setting `style.fontSize` will use the default font-size for now.\n    if (fontSize) {\n      style.fontSize = `${fontSize}px`;\n    }\n\n    style.color = Util.makeHexColor(fontColor[0], fontColor[1], fontColor[2]);\n\n    if (this.data.textAlignment !== null) {\n      style.textAlign = TEXT_ALIGNMENT[this.data.textAlignment];\n    }\n  }\n}\n\nclass CheckboxWidgetAnnotationElement extends WidgetAnnotationElement {\n  constructor(parameters) {\n    super(parameters, { isRenderable: parameters.renderForms });\n  }\n\n  render() {\n    const storage = this.annotationStorage;\n    const data = this.data;\n    const id = data.id;\n    let value = storage.getValue(id, {\n      value: data.exportValue === data.fieldValue,\n    }).value;\n    if (typeof value === \"string\") {\n      // The value has been changed through js and set in annotationStorage.\n      value = value !== \"Off\";\n      storage.setValue(id, { value });\n    }\n\n    this.container.className = \"buttonWidgetAnnotation checkBox\";\n\n    const element = document.createElement(\"input\");\n    GetElementsByNameSet.add(element);\n    element.disabled = data.readOnly;\n    element.type = \"checkbox\";\n    element.name = data.fieldName;\n    if (value) {\n      element.setAttribute(\"checked\", true);\n    }\n    element.setAttribute(\"id\", id);\n    element.setAttribute(\"exportValue\", data.exportValue);\n    element.tabIndex = DEFAULT_TAB_INDEX;\n\n    element.addEventListener(\"change\", event => {\n      const { name, checked } = event.target;\n      for (const checkbox of this._getElementsByName(name, /* skipId = */ id)) {\n        const curChecked = checked && checkbox.exportValue === data.exportValue;\n        if (checkbox.domElement) {\n          checkbox.domElement.checked = curChecked;\n        }\n        storage.setValue(checkbox.id, { value: curChecked });\n      }\n      storage.setValue(id, { value: checked });\n    });\n\n    element.addEventListener(\"resetform\", event => {\n      const defaultValue = data.defaultFieldValue || \"Off\";\n      event.target.checked = defaultValue === data.exportValue;\n    });\n\n    if (this.enableScripting && this.hasJSActions) {\n      element.addEventListener(\"updatefromsandbox\", jsEvent => {\n        const actions = {\n          value(event) {\n            event.target.checked = event.detail.value !== \"Off\";\n            storage.setValue(id, { value: event.target.checked });\n          },\n        };\n        this._dispatchEventFromSandbox(actions, jsEvent);\n      });\n\n      this._setEventListeners(\n        element,\n        [\n          [\"change\", \"Validate\"],\n          [\"change\", \"Action\"],\n          [\"focus\", \"Focus\"],\n          [\"blur\", \"Blur\"],\n          [\"mousedown\", \"Mouse Down\"],\n          [\"mouseenter\", \"Mouse Enter\"],\n          [\"mouseleave\", \"Mouse Exit\"],\n          [\"mouseup\", \"Mouse Up\"],\n        ],\n        event => event.target.checked\n      );\n    }\n\n    this._setBackgroundColor(element);\n    this._setDefaultPropertiesFromJS(element);\n\n    this.container.appendChild(element);\n    return this.container;\n  }\n}\n\nclass RadioButtonWidgetAnnotationElement extends WidgetAnnotationElement {\n  constructor(parameters) {\n    super(parameters, { isRenderable: parameters.renderForms });\n  }\n\n  render() {\n    this.container.className = \"buttonWidgetAnnotation radioButton\";\n    const storage = this.annotationStorage;\n    const data = this.data;\n    const id = data.id;\n    let value = storage.getValue(id, {\n      value: data.fieldValue === data.buttonValue,\n    }).value;\n    if (typeof value === \"string\") {\n      // The value has been changed through js and set in annotationStorage.\n      value = value !== data.buttonValue;\n      storage.setValue(id, { value });\n    }\n\n    const element = document.createElement(\"input\");\n    GetElementsByNameSet.add(element);\n    element.disabled = data.readOnly;\n    element.type = \"radio\";\n    element.name = data.fieldName;\n    if (value) {\n      element.setAttribute(\"checked\", true);\n    }\n    element.setAttribute(\"id\", id);\n    element.tabIndex = DEFAULT_TAB_INDEX;\n\n    element.addEventListener(\"change\", event => {\n      const { name, checked } = event.target;\n      for (const radio of this._getElementsByName(name, /* skipId = */ id)) {\n        storage.setValue(radio.id, { value: false });\n      }\n      storage.setValue(id, { value: checked });\n    });\n\n    element.addEventListener(\"resetform\", event => {\n      const defaultValue = data.defaultFieldValue;\n      event.target.checked =\n        defaultValue !== null &&\n        defaultValue !== undefined &&\n        defaultValue === data.buttonValue;\n    });\n\n    if (this.enableScripting && this.hasJSActions) {\n      const pdfButtonValue = data.buttonValue;\n      element.addEventListener(\"updatefromsandbox\", jsEvent => {\n        const actions = {\n          value: event => {\n            const checked = pdfButtonValue === event.detail.value;\n            for (const radio of this._getElementsByName(event.target.name)) {\n              const curChecked = checked && radio.id === id;\n              if (radio.domElement) {\n                radio.domElement.checked = curChecked;\n              }\n              storage.setValue(radio.id, { value: curChecked });\n            }\n          },\n        };\n        this._dispatchEventFromSandbox(actions, jsEvent);\n      });\n\n      this._setEventListeners(\n        element,\n        [\n          [\"change\", \"Validate\"],\n          [\"change\", \"Action\"],\n          [\"focus\", \"Focus\"],\n          [\"blur\", \"Blur\"],\n          [\"mousedown\", \"Mouse Down\"],\n          [\"mouseenter\", \"Mouse Enter\"],\n          [\"mouseleave\", \"Mouse Exit\"],\n          [\"mouseup\", \"Mouse Up\"],\n        ],\n        event => event.target.checked\n      );\n    }\n\n    this._setBackgroundColor(element);\n    this._setDefaultPropertiesFromJS(element);\n\n    this.container.appendChild(element);\n    return this.container;\n  }\n}\n\nclass PushButtonWidgetAnnotationElement extends LinkAnnotationElement {\n  constructor(parameters) {\n    super(parameters, { ignoreBorder: parameters.data.hasAppearance });\n  }\n\n  render() {\n    // The rendering and functionality of a push button widget annotation is\n    // equal to that of a link annotation, but may have more functionality, such\n    // as performing actions on form fields (resetting, submitting, et cetera).\n    const container = super.render();\n    container.className = \"buttonWidgetAnnotation pushButton\";\n\n    if (this.data.alternativeText) {\n      container.title = this.data.alternativeText;\n    }\n\n    this._setDefaultPropertiesFromJS(container);\n\n    return container;\n  }\n}\n\nclass ChoiceWidgetAnnotationElement extends WidgetAnnotationElement {\n  constructor(parameters) {\n    super(parameters, { isRenderable: parameters.renderForms });\n  }\n\n  render() {\n    this.container.className = \"choiceWidgetAnnotation\";\n    const storage = this.annotationStorage;\n    const id = this.data.id;\n\n    const storedData = storage.getValue(id, {\n      value: this.data.fieldValue,\n    });\n\n    let { fontSize } = this.data.defaultAppearanceData;\n    if (!fontSize) {\n      fontSize = 9;\n    }\n    const fontSizeStyle = `calc(${fontSize}px * var(--zoom-factor))`;\n\n    const selectElement = document.createElement(\"select\");\n    GetElementsByNameSet.add(selectElement);\n    selectElement.disabled = this.data.readOnly;\n    selectElement.name = this.data.fieldName;\n    selectElement.setAttribute(\"id\", id);\n    selectElement.tabIndex = DEFAULT_TAB_INDEX;\n\n    selectElement.style.fontSize = `${fontSize}px`;\n\n    if (!this.data.combo) {\n      // List boxes have a size and (optionally) multiple selection.\n      selectElement.size = this.data.options.length;\n      if (this.data.multiSelect) {\n        selectElement.multiple = true;\n      }\n    }\n\n    selectElement.addEventListener(\"resetform\", event => {\n      const defaultValue = this.data.defaultFieldValue;\n      for (const option of selectElement.options) {\n        option.selected = option.value === defaultValue;\n      }\n    });\n\n    // Insert the options into the choice field.\n    for (const option of this.data.options) {\n      const optionElement = document.createElement(\"option\");\n      optionElement.textContent = option.displayValue;\n      optionElement.value = option.exportValue;\n      if (this.data.combo) {\n        optionElement.style.fontSize = fontSizeStyle;\n      }\n      if (storedData.value.includes(option.exportValue)) {\n        optionElement.setAttribute(\"selected\", true);\n      }\n      selectElement.appendChild(optionElement);\n    }\n\n    const getValue = (event, isExport) => {\n      const name = isExport ? \"value\" : \"textContent\";\n      const options = event.target.options;\n      if (!event.target.multiple) {\n        return options.selectedIndex === -1\n          ? null\n          : options[options.selectedIndex][name];\n      }\n      return Array.prototype.filter\n        .call(options, option => option.selected)\n        .map(option => option[name]);\n    };\n\n    const getItems = event => {\n      const options = event.target.options;\n      return Array.prototype.map.call(options, option => {\n        return { displayValue: option.textContent, exportValue: option.value };\n      });\n    };\n\n    if (this.enableScripting && this.hasJSActions) {\n      selectElement.addEventListener(\"updatefromsandbox\", jsEvent => {\n        const actions = {\n          value(event) {\n            const value = event.detail.value;\n            const values = new Set(Array.isArray(value) ? value : [value]);\n            for (const option of selectElement.options) {\n              option.selected = values.has(option.value);\n            }\n            storage.setValue(id, {\n              value: getValue(event, /* isExport */ true),\n            });\n          },\n          multipleSelection(event) {\n            selectElement.multiple = true;\n          },\n          remove(event) {\n            const options = selectElement.options;\n            const index = event.detail.remove;\n            options[index].selected = false;\n            selectElement.remove(index);\n            if (options.length > 0) {\n              const i = Array.prototype.findIndex.call(\n                options,\n                option => option.selected\n              );\n              if (i === -1) {\n                options[0].selected = true;\n              }\n            }\n            storage.setValue(id, {\n              value: getValue(event, /* isExport */ true),\n              items: getItems(event),\n            });\n          },\n          clear(event) {\n            while (selectElement.length !== 0) {\n              selectElement.remove(0);\n            }\n            storage.setValue(id, { value: null, items: [] });\n          },\n          insert(event) {\n            const { index, displayValue, exportValue } = event.detail.insert;\n            const optionElement = document.createElement(\"option\");\n            optionElement.textContent = displayValue;\n            optionElement.value = exportValue;\n            selectElement.insertBefore(\n              optionElement,\n              selectElement.children[index]\n            );\n            storage.setValue(id, {\n              value: getValue(event, /* isExport */ true),\n              items: getItems(event),\n            });\n          },\n          items(event) {\n            const { items } = event.detail;\n            while (selectElement.length !== 0) {\n              selectElement.remove(0);\n            }\n            for (const item of items) {\n              const { displayValue, exportValue } = item;\n              const optionElement = document.createElement(\"option\");\n              optionElement.textContent = displayValue;\n              optionElement.value = exportValue;\n              selectElement.appendChild(optionElement);\n            }\n            if (selectElement.options.length > 0) {\n              selectElement.options[0].selected = true;\n            }\n            storage.setValue(id, {\n              value: getValue(event, /* isExport */ true),\n              items: getItems(event),\n            });\n          },\n          indices(event) {\n            const indices = new Set(event.detail.indices);\n            for (const option of event.target.options) {\n              option.selected = indices.has(option.index);\n            }\n            storage.setValue(id, {\n              value: getValue(event, /* isExport */ true),\n            });\n          },\n          editable(event) {\n            event.target.disabled = !event.detail.editable;\n          },\n        };\n        this._dispatchEventFromSandbox(actions, jsEvent);\n      });\n\n      selectElement.addEventListener(\"input\", event => {\n        const exportValue = getValue(event, /* isExport */ true);\n        const value = getValue(event, /* isExport */ false);\n        storage.setValue(id, { value: exportValue });\n\n        this.linkService.eventBus?.dispatch(\"dispatcheventinsandbox\", {\n          source: this,\n          detail: {\n            id,\n            name: \"Keystroke\",\n            value,\n            changeEx: exportValue,\n            willCommit: true,\n            commitKey: 1,\n            keyDown: false,\n          },\n        });\n      });\n\n      this._setEventListeners(\n        selectElement,\n        [\n          [\"focus\", \"Focus\"],\n          [\"blur\", \"Blur\"],\n          [\"mousedown\", \"Mouse Down\"],\n          [\"mouseenter\", \"Mouse Enter\"],\n          [\"mouseleave\", \"Mouse Exit\"],\n          [\"mouseup\", \"Mouse Up\"],\n          [\"input\", \"Action\"],\n        ],\n        event => event.target.checked\n      );\n    } else {\n      selectElement.addEventListener(\"input\", function (event) {\n        storage.setValue(id, { value: getValue(event, /* isExport */ true) });\n      });\n    }\n\n    this._setBackgroundColor(selectElement);\n    this._setDefaultPropertiesFromJS(selectElement);\n\n    this.container.appendChild(selectElement);\n    return this.container;\n  }\n}\n\nclass PopupAnnotationElement extends AnnotationElement {\n  constructor(parameters) {\n    const isRenderable = !!(\n      parameters.data.titleObj?.str ||\n      parameters.data.contentsObj?.str ||\n      parameters.data.richText?.str\n    );\n    super(parameters, { isRenderable });\n  }\n\n  render() {\n    // Do not render popup annotations for parent elements with these types as\n    // they create the popups themselves (because of custom trigger divs).\n    const IGNORE_TYPES = [\n      \"Line\",\n      \"Square\",\n      \"Circle\",\n      \"PolyLine\",\n      \"Polygon\",\n      \"Ink\",\n    ];\n\n    this.container.className = \"popupAnnotation\";\n\n    if (IGNORE_TYPES.includes(this.data.parentType)) {\n      return this.container;\n    }\n\n    const selector = `[data-annotation-id=\"${this.data.parentId}\"]`;\n    const parentElements = this.layer.querySelectorAll(selector);\n    if (parentElements.length === 0) {\n      return this.container;\n    }\n\n    const popup = new PopupElement({\n      container: this.container,\n      trigger: Array.from(parentElements),\n      color: this.data.color,\n      titleObj: this.data.titleObj,\n      modificationDate: this.data.modificationDate,\n      contentsObj: this.data.contentsObj,\n      richText: this.data.richText,\n    });\n\n    // Position the popup next to the parent annotation's container.\n    // PDF viewers ignore a popup annotation's rectangle.\n    const page = this.page;\n    const rect = Util.normalizeRect([\n      this.data.parentRect[0],\n      page.view[3] - this.data.parentRect[1] + page.view[1],\n      this.data.parentRect[2],\n      page.view[3] - this.data.parentRect[3] + page.view[1],\n    ]);\n    const popupLeft =\n      rect[0] + this.data.parentRect[2] - this.data.parentRect[0];\n    const popupTop = rect[1];\n\n    this.container.style.transformOrigin = `${-popupLeft}px ${-popupTop}px`;\n    this.container.style.left = `${popupLeft}px`;\n    this.container.style.top = `${popupTop}px`;\n\n    this.container.appendChild(popup.render());\n    return this.container;\n  }\n}\n\nclass PopupElement {\n  constructor(parameters) {\n    this.container = parameters.container;\n    this.trigger = parameters.trigger;\n    this.color = parameters.color;\n    this.titleObj = parameters.titleObj;\n    this.modificationDate = parameters.modificationDate;\n    this.contentsObj = parameters.contentsObj;\n    this.richText = parameters.richText;\n    this.hideWrapper = parameters.hideWrapper || false;\n\n    this.pinned = false;\n  }\n\n  render() {\n    const BACKGROUND_ENLIGHT = 0.7;\n\n    const wrapper = document.createElement(\"div\");\n    wrapper.className = \"popupWrapper\";\n\n    // For Popup annotations we hide the entire section because it contains\n    // only the popup. However, for Text annotations without a separate Popup\n    // annotation, we cannot hide the entire container as the image would\n    // disappear too. In that special case, hiding the wrapper suffices.\n    this.hideElement = this.hideWrapper ? wrapper : this.container;\n    this.hideElement.hidden = true;\n\n    const popup = document.createElement(\"div\");\n    popup.className = \"popup\";\n\n    const color = this.color;\n    if (color) {\n      // Enlighten the color.\n      const r = BACKGROUND_ENLIGHT * (255 - color[0]) + color[0];\n      const g = BACKGROUND_ENLIGHT * (255 - color[1]) + color[1];\n      const b = BACKGROUND_ENLIGHT * (255 - color[2]) + color[2];\n      popup.style.backgroundColor = Util.makeHexColor(r | 0, g | 0, b | 0);\n    }\n\n    const title = document.createElement(\"h1\");\n    title.dir = this.titleObj.dir;\n    title.textContent = this.titleObj.str;\n    popup.appendChild(title);\n\n    // The modification date is shown in the popup instead of the creation\n    // date if it is available and can be parsed correctly, which is\n    // consistent with other viewers such as Adobe Acrobat.\n    const dateObject = PDFDateString.toDateObject(this.modificationDate);\n    if (dateObject) {\n      const modificationDate = document.createElement(\"span\");\n      modificationDate.className = \"popupDate\";\n      modificationDate.textContent = \"{{date}}, {{time}}\";\n      modificationDate.dataset.l10nId = \"annotation_date_string\";\n      modificationDate.dataset.l10nArgs = JSON.stringify({\n        date: dateObject.toLocaleDateString(),\n        time: dateObject.toLocaleTimeString(),\n      });\n      popup.appendChild(modificationDate);\n    }\n\n    if (\n      this.richText?.str &&\n      (!this.contentsObj?.str || this.contentsObj.str === this.richText.str)\n    ) {\n      XfaLayer.render({\n        xfaHtml: this.richText.html,\n        intent: \"richText\",\n        div: popup,\n      });\n      popup.lastChild.className = \"richText popupContent\";\n    } else {\n      const contents = this._formatContents(this.contentsObj);\n      popup.appendChild(contents);\n    }\n\n    if (!Array.isArray(this.trigger)) {\n      this.trigger = [this.trigger];\n    }\n\n    // Attach the event listeners to the trigger element.\n    for (const element of this.trigger) {\n      element.addEventListener(\"click\", this._toggle.bind(this));\n      element.addEventListener(\"mouseover\", this._show.bind(this, false));\n      element.addEventListener(\"mouseout\", this._hide.bind(this, false));\n    }\n    popup.addEventListener(\"click\", this._hide.bind(this, true));\n\n    wrapper.appendChild(popup);\n    return wrapper;\n  }\n\n  /**\n   * Format the contents of the popup by adding newlines where necessary.\n   *\n   * @private\n   * @param {Object<string, string>} contentsObj\n   * @memberof PopupElement\n   * @returns {HTMLParagraphElement}\n   */\n  _formatContents({ str, dir }) {\n    const p = document.createElement(\"p\");\n    p.className = \"popupContent\";\n    p.dir = dir;\n    const lines = str.split(/(?:\\r\\n?|\\n)/);\n    for (let i = 0, ii = lines.length; i < ii; ++i) {\n      const line = lines[i];\n      p.appendChild(document.createTextNode(line));\n      if (i < ii - 1) {\n        p.appendChild(document.createElement(\"br\"));\n      }\n    }\n    return p;\n  }\n\n  /**\n   * Toggle the visibility of the popup.\n   *\n   * @private\n   * @memberof PopupElement\n   */\n  _toggle() {\n    if (this.pinned) {\n      this._hide(true);\n    } else {\n      this._show(true);\n    }\n  }\n\n  /**\n   * Show the popup.\n   *\n   * @private\n   * @param {boolean} pin\n   * @memberof PopupElement\n   */\n  _show(pin = false) {\n    if (pin) {\n      this.pinned = true;\n    }\n    if (this.hideElement.hidden) {\n      this.hideElement.hidden = false;\n      this.container.style.zIndex += 1;\n    }\n  }\n\n  /**\n   * Hide the popup.\n   *\n   * @private\n   * @param {boolean} unpin\n   * @memberof PopupElement\n   */\n  _hide(unpin = true) {\n    if (unpin) {\n      this.pinned = false;\n    }\n    if (!this.hideElement.hidden && !this.pinned) {\n      this.hideElement.hidden = true;\n      this.container.style.zIndex -= 1;\n    }\n  }\n}\n\nclass FreeTextAnnotationElement extends AnnotationElement {\n  constructor(parameters) {\n    const isRenderable = !!(\n      parameters.data.hasPopup ||\n      parameters.data.titleObj?.str ||\n      parameters.data.contentsObj?.str ||\n      parameters.data.richText?.str\n    );\n    super(parameters, { isRenderable, ignoreBorder: true });\n  }\n\n  render() {\n    this.container.className = \"freeTextAnnotation\";\n\n    if (!this.data.hasPopup) {\n      this._createPopup(null, this.data);\n    }\n    return this.container;\n  }\n}\n\nclass LineAnnotationElement extends AnnotationElement {\n  constructor(parameters) {\n    const isRenderable = !!(\n      parameters.data.hasPopup ||\n      parameters.data.titleObj?.str ||\n      parameters.data.contentsObj?.str ||\n      parameters.data.richText?.str\n    );\n    super(parameters, { isRenderable, ignoreBorder: true });\n  }\n\n  render() {\n    this.container.className = \"lineAnnotation\";\n\n    // Create an invisible line with the same starting and ending coordinates\n    // that acts as the trigger for the popup. Only the line itself should\n    // trigger the popup, not the entire container.\n    const data = this.data;\n    const { width, height } = getRectDims(data.rect);\n    const svg = this.svgFactory.create(width, height);\n\n    // PDF coordinates are calculated from a bottom left origin, so transform\n    // the line coordinates to a top left origin for the SVG element.\n    const line = this.svgFactory.createElement(\"svg:line\");\n    line.setAttribute(\"x1\", data.rect[2] - data.lineCoordinates[0]);\n    line.setAttribute(\"y1\", data.rect[3] - data.lineCoordinates[1]);\n    line.setAttribute(\"x2\", data.rect[2] - data.lineCoordinates[2]);\n    line.setAttribute(\"y2\", data.rect[3] - data.lineCoordinates[3]);\n    // Ensure that the 'stroke-width' is always non-zero, since otherwise it\n    // won't be possible to open/close the popup (note e.g. issue 11122).\n    line.setAttribute(\"stroke-width\", data.borderStyle.width || 1);\n    line.setAttribute(\"stroke\", \"transparent\");\n    line.setAttribute(\"fill\", \"transparent\");\n\n    svg.appendChild(line);\n    this.container.append(svg);\n\n    // Create the popup ourselves so that we can bind it to the line instead\n    // of to the entire container (which is the default).\n    this._createPopup(line, data);\n\n    return this.container;\n  }\n}\n\nclass SquareAnnotationElement extends AnnotationElement {\n  constructor(parameters) {\n    const isRenderable = !!(\n      parameters.data.hasPopup ||\n      parameters.data.titleObj?.str ||\n      parameters.data.contentsObj?.str ||\n      parameters.data.richText?.str\n    );\n    super(parameters, { isRenderable, ignoreBorder: true });\n  }\n\n  render() {\n    this.container.className = \"squareAnnotation\";\n\n    // Create an invisible square with the same rectangle that acts as the\n    // trigger for the popup. Only the square itself should trigger the\n    // popup, not the entire container.\n    const data = this.data;\n    const { width, height } = getRectDims(data.rect);\n    const svg = this.svgFactory.create(width, height);\n\n    // The browser draws half of the borders inside the square and half of\n    // the borders outside the square by default. This behavior cannot be\n    // changed programmatically, so correct for that here.\n    const borderWidth = data.borderStyle.width;\n    const square = this.svgFactory.createElement(\"svg:rect\");\n    square.setAttribute(\"x\", borderWidth / 2);\n    square.setAttribute(\"y\", borderWidth / 2);\n    square.setAttribute(\"width\", width - borderWidth);\n    square.setAttribute(\"height\", height - borderWidth);\n    // Ensure that the 'stroke-width' is always non-zero, since otherwise it\n    // won't be possible to open/close the popup (note e.g. issue 11122).\n    square.setAttribute(\"stroke-width\", borderWidth || 1);\n    square.setAttribute(\"stroke\", \"transparent\");\n    square.setAttribute(\"fill\", \"transparent\");\n\n    svg.appendChild(square);\n    this.container.append(svg);\n\n    // Create the popup ourselves so that we can bind it to the square instead\n    // of to the entire container (which is the default).\n    this._createPopup(square, data);\n\n    return this.container;\n  }\n}\n\nclass CircleAnnotationElement extends AnnotationElement {\n  constructor(parameters) {\n    const isRenderable = !!(\n      parameters.data.hasPopup ||\n      parameters.data.titleObj?.str ||\n      parameters.data.contentsObj?.str ||\n      parameters.data.richText?.str\n    );\n    super(parameters, { isRenderable, ignoreBorder: true });\n  }\n\n  render() {\n    this.container.className = \"circleAnnotation\";\n\n    // Create an invisible circle with the same ellipse that acts as the\n    // trigger for the popup. Only the circle itself should trigger the\n    // popup, not the entire container.\n    const data = this.data;\n    const { width, height } = getRectDims(data.rect);\n    const svg = this.svgFactory.create(width, height);\n\n    // The browser draws half of the borders inside the circle and half of\n    // the borders outside the circle by default. This behavior cannot be\n    // changed programmatically, so correct for that here.\n    const borderWidth = data.borderStyle.width;\n    const circle = this.svgFactory.createElement(\"svg:ellipse\");\n    circle.setAttribute(\"cx\", width / 2);\n    circle.setAttribute(\"cy\", height / 2);\n    circle.setAttribute(\"rx\", width / 2 - borderWidth / 2);\n    circle.setAttribute(\"ry\", height / 2 - borderWidth / 2);\n    // Ensure that the 'stroke-width' is always non-zero, since otherwise it\n    // won't be possible to open/close the popup (note e.g. issue 11122).\n    circle.setAttribute(\"stroke-width\", borderWidth || 1);\n    circle.setAttribute(\"stroke\", \"transparent\");\n    circle.setAttribute(\"fill\", \"transparent\");\n\n    svg.appendChild(circle);\n    this.container.append(svg);\n\n    // Create the popup ourselves so that we can bind it to the circle instead\n    // of to the entire container (which is the default).\n    this._createPopup(circle, data);\n\n    return this.container;\n  }\n}\n\nclass PolylineAnnotationElement extends AnnotationElement {\n  constructor(parameters) {\n    const isRenderable = !!(\n      parameters.data.hasPopup ||\n      parameters.data.titleObj?.str ||\n      parameters.data.contentsObj?.str ||\n      parameters.data.richText?.str\n    );\n    super(parameters, { isRenderable, ignoreBorder: true });\n\n    this.containerClassName = \"polylineAnnotation\";\n    this.svgElementName = \"svg:polyline\";\n  }\n\n  render() {\n    this.container.className = this.containerClassName;\n\n    // Create an invisible polyline with the same points that acts as the\n    // trigger for the popup. Only the polyline itself should trigger the\n    // popup, not the entire container.\n    const data = this.data;\n    const { width, height } = getRectDims(data.rect);\n    const svg = this.svgFactory.create(width, height);\n\n    // Convert the vertices array to a single points string that the SVG\n    // polyline element expects (\"x1,y1 x2,y2 ...\"). PDF coordinates are\n    // calculated from a bottom left origin, so transform the polyline\n    // coordinates to a top left origin for the SVG element.\n    let points = [];\n    for (const coordinate of data.vertices) {\n      const x = coordinate.x - data.rect[0];\n      const y = data.rect[3] - coordinate.y;\n      points.push(x + \",\" + y);\n    }\n    points = points.join(\" \");\n\n    const polyline = this.svgFactory.createElement(this.svgElementName);\n    polyline.setAttribute(\"points\", points);\n    // Ensure that the 'stroke-width' is always non-zero, since otherwise it\n    // won't be possible to open/close the popup (note e.g. issue 11122).\n    polyline.setAttribute(\"stroke-width\", data.borderStyle.width || 1);\n    polyline.setAttribute(\"stroke\", \"transparent\");\n    polyline.setAttribute(\"fill\", \"transparent\");\n\n    svg.appendChild(polyline);\n    this.container.append(svg);\n\n    // Create the popup ourselves so that we can bind it to the polyline\n    // instead of to the entire container (which is the default).\n    this._createPopup(polyline, data);\n\n    return this.container;\n  }\n}\n\nclass PolygonAnnotationElement extends PolylineAnnotationElement {\n  constructor(parameters) {\n    // Polygons are specific forms of polylines, so reuse their logic.\n    super(parameters);\n\n    this.containerClassName = \"polygonAnnotation\";\n    this.svgElementName = \"svg:polygon\";\n  }\n}\n\nclass CaretAnnotationElement extends AnnotationElement {\n  constructor(parameters) {\n    const isRenderable = !!(\n      parameters.data.hasPopup ||\n      parameters.data.titleObj?.str ||\n      parameters.data.contentsObj?.str ||\n      parameters.data.richText?.str\n    );\n    super(parameters, { isRenderable, ignoreBorder: true });\n  }\n\n  render() {\n    this.container.className = \"caretAnnotation\";\n\n    if (!this.data.hasPopup) {\n      this._createPopup(null, this.data);\n    }\n    return this.container;\n  }\n}\n\nclass InkAnnotationElement extends AnnotationElement {\n  constructor(parameters) {\n    const isRenderable = !!(\n      parameters.data.hasPopup ||\n      parameters.data.titleObj?.str ||\n      parameters.data.contentsObj?.str ||\n      parameters.data.richText?.str\n    );\n    super(parameters, { isRenderable, ignoreBorder: true });\n\n    this.containerClassName = \"inkAnnotation\";\n\n    // Use the polyline SVG element since it allows us to use coordinates\n    // directly and to draw both straight lines and curves.\n    this.svgElementName = \"svg:polyline\";\n  }\n\n  render() {\n    this.container.className = this.containerClassName;\n\n    // Create an invisible polyline with the same points that acts as the\n    // trigger for the popup.\n    const data = this.data;\n    const { width, height } = getRectDims(data.rect);\n    const svg = this.svgFactory.create(width, height);\n\n    for (const inkList of data.inkLists) {\n      // Convert the ink list to a single points string that the SVG\n      // polyline element expects (\"x1,y1 x2,y2 ...\"). PDF coordinates are\n      // calculated from a bottom left origin, so transform the polyline\n      // coordinates to a top left origin for the SVG element.\n      let points = [];\n      for (const coordinate of inkList) {\n        const x = coordinate.x - data.rect[0];\n        const y = data.rect[3] - coordinate.y;\n        points.push(`${x},${y}`);\n      }\n      points = points.join(\" \");\n\n      const polyline = this.svgFactory.createElement(this.svgElementName);\n      polyline.setAttribute(\"points\", points);\n      // Ensure that the 'stroke-width' is always non-zero, since otherwise it\n      // won't be possible to open/close the popup (note e.g. issue 11122).\n      polyline.setAttribute(\"stroke-width\", data.borderStyle.width || 1);\n      polyline.setAttribute(\"stroke\", \"transparent\");\n      polyline.setAttribute(\"fill\", \"transparent\");\n\n      // Create the popup ourselves so that we can bind it to the polyline\n      // instead of to the entire container (which is the default).\n      this._createPopup(polyline, data);\n\n      svg.appendChild(polyline);\n    }\n\n    this.container.append(svg);\n    return this.container;\n  }\n}\n\nclass HighlightAnnotationElement extends AnnotationElement {\n  constructor(parameters) {\n    const isRenderable = !!(\n      parameters.data.hasPopup ||\n      parameters.data.titleObj?.str ||\n      parameters.data.contentsObj?.str ||\n      parameters.data.richText?.str\n    );\n    super(parameters, {\n      isRenderable,\n      ignoreBorder: true,\n      createQuadrilaterals: true,\n    });\n  }\n\n  render() {\n    if (!this.data.hasPopup) {\n      this._createPopup(null, this.data);\n    }\n\n    if (this.quadrilaterals) {\n      return this._renderQuadrilaterals(\"highlightAnnotation\");\n    }\n\n    this.container.className = \"highlightAnnotation\";\n    return this.container;\n  }\n}\n\nclass UnderlineAnnotationElement extends AnnotationElement {\n  constructor(parameters) {\n    const isRenderable = !!(\n      parameters.data.hasPopup ||\n      parameters.data.titleObj?.str ||\n      parameters.data.contentsObj?.str ||\n      parameters.data.richText?.str\n    );\n    super(parameters, {\n      isRenderable,\n      ignoreBorder: true,\n      createQuadrilaterals: true,\n    });\n  }\n\n  render() {\n    if (!this.data.hasPopup) {\n      this._createPopup(null, this.data);\n    }\n\n    if (this.quadrilaterals) {\n      return this._renderQuadrilaterals(\"underlineAnnotation\");\n    }\n\n    this.container.className = \"underlineAnnotation\";\n    return this.container;\n  }\n}\n\nclass SquigglyAnnotationElement extends AnnotationElement {\n  constructor(parameters) {\n    const isRenderable = !!(\n      parameters.data.hasPopup ||\n      parameters.data.titleObj?.str ||\n      parameters.data.contentsObj?.str ||\n      parameters.data.richText?.str\n    );\n    super(parameters, {\n      isRenderable,\n      ignoreBorder: true,\n      createQuadrilaterals: true,\n    });\n  }\n\n  render() {\n    if (!this.data.hasPopup) {\n      this._createPopup(null, this.data);\n    }\n\n    if (this.quadrilaterals) {\n      return this._renderQuadrilaterals(\"squigglyAnnotation\");\n    }\n\n    this.container.className = \"squigglyAnnotation\";\n    return this.container;\n  }\n}\n\nclass StrikeOutAnnotationElement extends AnnotationElement {\n  constructor(parameters) {\n    const isRenderable = !!(\n      parameters.data.hasPopup ||\n      parameters.data.titleObj?.str ||\n      parameters.data.contentsObj?.str ||\n      parameters.data.richText?.str\n    );\n    super(parameters, {\n      isRenderable,\n      ignoreBorder: true,\n      createQuadrilaterals: true,\n    });\n  }\n\n  render() {\n    if (!this.data.hasPopup) {\n      this._createPopup(null, this.data);\n    }\n\n    if (this.quadrilaterals) {\n      return this._renderQuadrilaterals(\"strikeoutAnnotation\");\n    }\n\n    this.container.className = \"strikeoutAnnotation\";\n    return this.container;\n  }\n}\n\nclass StampAnnotationElement extends AnnotationElement {\n  constructor(parameters) {\n    const isRenderable = !!(\n      parameters.data.hasPopup ||\n      parameters.data.titleObj?.str ||\n      parameters.data.contentsObj?.str ||\n      parameters.data.richText?.str\n    );\n    super(parameters, { isRenderable, ignoreBorder: true });\n  }\n\n  render() {\n    this.container.className = \"stampAnnotation\";\n\n    if (!this.data.hasPopup) {\n      this._createPopup(null, this.data);\n    }\n    return this.container;\n  }\n}\n\nclass FileAttachmentAnnotationElement extends AnnotationElement {\n  constructor(parameters) {\n    super(parameters, { isRenderable: true });\n\n    const { filename, content } = this.data.file;\n    this.filename = getFilenameFromUrl(filename);\n    this.content = content;\n\n    this.linkService.eventBus?.dispatch(\"fileattachmentannotation\", {\n      source: this,\n      filename,\n      content,\n    });\n  }\n\n  render() {\n    this.container.className = \"fileAttachmentAnnotation\";\n\n    const trigger = document.createElement(\"div\");\n    trigger.style.height = this.container.style.height;\n    trigger.style.width = this.container.style.width;\n    trigger.addEventListener(\"dblclick\", this._download.bind(this));\n\n    if (\n      !this.data.hasPopup &&\n      (this.data.titleObj?.str ||\n        this.data.contentsObj?.str ||\n        this.data.richText)\n    ) {\n      this._createPopup(trigger, this.data);\n    }\n\n    this.container.appendChild(trigger);\n    return this.container;\n  }\n\n  /**\n   * Download the file attachment associated with this annotation.\n   *\n   * @private\n   * @memberof FileAttachmentAnnotationElement\n   */\n  _download() {\n    this.downloadManager?.openOrDownloadData(\n      this.container,\n      this.content,\n      this.filename\n    );\n  }\n}\n\n/**\n * @typedef {Object} AnnotationLayerParameters\n * @property {PageViewport} viewport\n * @property {HTMLDivElement} div\n * @property {Array} annotations\n * @property {PDFPageProxy} page\n * @property {IPDFLinkService} linkService\n * @property {IDownloadManager} downloadManager\n * @property {string} [imageResourcesPath] - Path for image resources, mainly\n *   for annotation icons. Include trailing slash.\n * @property {boolean} renderForms\n * @property {boolean} [enableScripting] - Enable embedded script execution.\n * @property {boolean} [hasJSActions] - Some fields have JS actions.\n *   The default value is `false`.\n * @property {Map<string, HTMLCanvasElement>} [annotationCanvasMap]\n */\n\nclass AnnotationLayer {\n  /**\n   * Render a new annotation layer with all annotation elements.\n   *\n   * @public\n   * @param {AnnotationLayerParameters} parameters\n   * @memberof AnnotationLayer\n   */\n  static render(parameters) {\n    const sortedAnnotations = [],\n      popupAnnotations = [];\n    // Ensure that Popup annotations are handled last, since they're dependant\n    // upon the parent annotation having already been rendered (please refer to\n    // the `PopupAnnotationElement.render` method); fixes issue 11362.\n    for (const data of parameters.annotations) {\n      if (!data) {\n        continue;\n      }\n      const { width, height } = getRectDims(data.rect);\n      if (width <= 0 || height <= 0) {\n        continue;\n      }\n      if (data.annotationType === AnnotationType.POPUP) {\n        popupAnnotations.push(data);\n        continue;\n      }\n      sortedAnnotations.push(data);\n    }\n    if (popupAnnotations.length) {\n      sortedAnnotations.push(...popupAnnotations);\n    }\n\n    const div = parameters.div;\n\n    for (const data of sortedAnnotations) {\n      const element = AnnotationElementFactory.create({\n        data,\n        layer: div,\n        page: parameters.page,\n        viewport: parameters.viewport,\n        linkService: parameters.linkService,\n        downloadManager: parameters.downloadManager,\n        imageResourcesPath: parameters.imageResourcesPath || \"\",\n        renderForms: parameters.renderForms !== false,\n        svgFactory: new DOMSVGFactory(),\n        annotationStorage:\n          parameters.annotationStorage || new AnnotationStorage(),\n        enableScripting: parameters.enableScripting,\n        hasJSActions: parameters.hasJSActions,\n        fieldObjects: parameters.fieldObjects,\n        mouseState: parameters.mouseState || { isDown: false },\n      });\n      if (element.isRenderable) {\n        const rendered = element.render();\n        if (data.hidden) {\n          rendered.style.visibility = \"hidden\";\n        }\n        if (Array.isArray(rendered)) {\n          for (const renderedElement of rendered) {\n            div.appendChild(renderedElement);\n          }\n        } else {\n          if (element instanceof PopupAnnotationElement) {\n            // Popup annotation elements should not be on top of other\n            // annotation elements to prevent interfering with mouse events.\n            div.prepend(rendered);\n          } else {\n            div.appendChild(rendered);\n          }\n        }\n      }\n    }\n\n    this.#setAnnotationCanvasMap(div, parameters.annotationCanvasMap);\n  }\n\n  /**\n   * Update the annotation elements on existing annotation layer.\n   *\n   * @public\n   * @param {AnnotationLayerParameters} parameters\n   * @memberof AnnotationLayer\n   */\n  static update(parameters) {\n    const { page, viewport, annotations, annotationCanvasMap, div } =\n      parameters;\n    const transform = viewport.transform;\n    const matrix = `matrix(${transform.join(\",\")})`;\n\n    let scale, ownMatrix;\n    for (const data of annotations) {\n      const elements = div.querySelectorAll(\n        `[data-annotation-id=\"${data.id}\"]`\n      );\n      if (elements) {\n        for (const element of elements) {\n          if (data.hasOwnCanvas) {\n            const rect = Util.normalizeRect([\n              data.rect[0],\n              page.view[3] - data.rect[1] + page.view[1],\n              data.rect[2],\n              page.view[3] - data.rect[3] + page.view[1],\n            ]);\n\n            if (!ownMatrix) {\n              // When an annotation has its own canvas, then\n              // the scale has been already applied to the canvas,\n              // so we musn't scale it twice.\n              scale = Math.abs(transform[0] || transform[1]);\n              const ownTransform = transform.slice();\n              for (let i = 0; i < 4; i++) {\n                ownTransform[i] = Math.sign(ownTransform[i]);\n              }\n              ownMatrix = `matrix(${ownTransform.join(\",\")})`;\n            }\n\n            const left = rect[0] * scale;\n            const top = rect[1] * scale;\n            element.style.left = `${left}px`;\n            element.style.top = `${top}px`;\n            element.style.transformOrigin = `${-left}px ${-top}px`;\n            element.style.transform = ownMatrix;\n          } else {\n            element.style.transform = matrix;\n          }\n        }\n      }\n    }\n\n    this.#setAnnotationCanvasMap(div, annotationCanvasMap);\n    div.hidden = false;\n  }\n\n  static #setAnnotationCanvasMap(div, annotationCanvasMap) {\n    if (!annotationCanvasMap) {\n      return;\n    }\n    for (const [id, canvas] of annotationCanvasMap) {\n      const element = div.querySelector(`[data-annotation-id=\"${id}\"]`);\n      if (!element) {\n        continue;\n      }\n\n      const { firstChild } = element;\n      if (firstChild.nodeName === \"CANVAS\") {\n        element.replaceChild(canvas, firstChild);\n      } else {\n        element.insertBefore(canvas, firstChild);\n      }\n    }\n    annotationCanvasMap.clear();\n  }\n}\n\nexport { AnnotationLayer };\n","/* Copyright 2020 Mozilla Foundation\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n/**\n * PLEASE NOTE: This file is currently imported in both the `../display/` and\n *              `../scripting_api/` folders, hence be EXTREMELY careful about\n *              introducing any dependencies here since that can lead to an\n *              unexpected/unnecessary size increase of the *built* files.\n */\n\nfunction makeColorComp(n) {\n  return Math.floor(Math.max(0, Math.min(1, n)) * 255)\n    .toString(16)\n    .padStart(2, \"0\");\n}\n\n// PDF specifications section 10.3\nclass ColorConverters {\n  static CMYK_G([c, y, m, k]) {\n    return [\"G\", 1 - Math.min(1, 0.3 * c + 0.59 * m + 0.11 * y + k)];\n  }\n\n  static G_CMYK([g]) {\n    return [\"CMYK\", 0, 0, 0, 1 - g];\n  }\n\n  static G_RGB([g]) {\n    return [\"RGB\", g, g, g];\n  }\n\n  static G_HTML([g]) {\n    const G = makeColorComp(g);\n    return `#${G}${G}${G}`;\n  }\n\n  static RGB_G([r, g, b]) {\n    return [\"G\", 0.3 * r + 0.59 * g + 0.11 * b];\n  }\n\n  static RGB_HTML([r, g, b]) {\n    const R = makeColorComp(r);\n    const G = makeColorComp(g);\n    const B = makeColorComp(b);\n    return `#${R}${G}${B}`;\n  }\n\n  static T_HTML() {\n    return \"#00000000\";\n  }\n\n  static CMYK_RGB([c, y, m, k]) {\n    return [\n      \"RGB\",\n      1 - Math.min(1, c + k),\n      1 - Math.min(1, m + k),\n      1 - Math.min(1, y + k),\n    ];\n  }\n\n  static CMYK_HTML(components) {\n    return this.RGB_HTML(this.CMYK_RGB(components));\n  }\n\n  static RGB_CMYK([r, g, b]) {\n    const c = 1 - r;\n    const m = 1 - g;\n    const y = 1 - b;\n    const k = Math.min(c, m, y);\n    return [\"CMYK\", c, m, y, k];\n  }\n}\n\nexport { ColorConverters };\n","/* Copyright 2021 Mozilla Foundation\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n/** @typedef {import(\"./display_utils\").PageViewport} PageViewport */\n/** @typedef {import(\"../../web/interfaces\").IPDFLinkService} IPDFLinkService */\n\nimport { XfaText } from \"./xfa_text.js\";\n\n/**\n * @typedef {Object} XfaLayerParameters\n * @property {PageViewport} viewport\n * @property {HTMLDivElement} div\n * @property {Object} xfaHtml\n * @property {AnnotationStorage} [annotationStorage]\n * @property {IPDFLinkService} linkService\n * @property {string} [intent] - (default value is 'display').\n */\n\nclass XfaLayer {\n  static setupStorage(html, id, element, storage, intent) {\n    const storedData = storage.getValue(id, { value: null });\n    switch (element.name) {\n      case \"textarea\":\n        if (storedData.value !== null) {\n          html.textContent = storedData.value;\n        }\n        if (intent === \"print\") {\n          break;\n        }\n        html.addEventListener(\"input\", event => {\n          storage.setValue(id, { value: event.target.value });\n        });\n        break;\n      case \"input\":\n        if (\n          element.attributes.type === \"radio\" ||\n          element.attributes.type === \"checkbox\"\n        ) {\n          if (storedData.value === element.attributes.xfaOn) {\n            html.setAttribute(\"checked\", true);\n          } else if (storedData.value === element.attributes.xfaOff) {\n            // The checked attribute may have been set when opening the file,\n            // unset through the UI and we're here because of printing.\n            html.removeAttribute(\"checked\");\n          }\n          if (intent === \"print\") {\n            break;\n          }\n          html.addEventListener(\"change\", event => {\n            storage.setValue(id, {\n              value: event.target.checked\n                ? event.target.getAttribute(\"xfaOn\")\n                : event.target.getAttribute(\"xfaOff\"),\n            });\n          });\n        } else {\n          if (storedData.value !== null) {\n            html.setAttribute(\"value\", storedData.value);\n          }\n          if (intent === \"print\") {\n            break;\n          }\n          html.addEventListener(\"input\", event => {\n            storage.setValue(id, { value: event.target.value });\n          });\n        }\n        break;\n      case \"select\":\n        if (storedData.value !== null) {\n          for (const option of element.children) {\n            if (option.attributes.value === storedData.value) {\n              option.attributes.selected = true;\n            }\n          }\n        }\n        html.addEventListener(\"input\", event => {\n          const options = event.target.options;\n          const value =\n            options.selectedIndex === -1\n              ? \"\"\n              : options[options.selectedIndex].value;\n          storage.setValue(id, { value });\n        });\n        break;\n    }\n  }\n\n  static setAttributes({ html, element, storage = null, intent, linkService }) {\n    const { attributes } = element;\n    const isHTMLAnchorElement = html instanceof HTMLAnchorElement;\n\n    if (attributes.type === \"radio\") {\n      // Avoid to have a radio group when printing with the same as one\n      // already displayed.\n      attributes.name = `${attributes.name}-${intent}`;\n    }\n    for (const [key, value] of Object.entries(attributes)) {\n      // We don't need to add dataId in the html object but it can\n      // be useful to know its value when writing printing tests:\n      // in this case, don't skip dataId to have its value.\n      if (value === null || value === undefined || key === \"dataId\") {\n        continue;\n      }\n\n      if (key !== \"style\") {\n        if (key === \"textContent\") {\n          html.textContent = value;\n        } else if (key === \"class\") {\n          if (value.length) {\n            html.setAttribute(key, value.join(\" \"));\n          }\n        } else {\n          if (isHTMLAnchorElement && (key === \"href\" || key === \"newWindow\")) {\n            continue; // Handled below.\n          }\n          html.setAttribute(key, value);\n        }\n      } else {\n        Object.assign(html.style, value);\n      }\n    }\n\n    if (isHTMLAnchorElement) {\n      linkService.addLinkAttributes(\n        html,\n        attributes.href,\n        attributes.newWindow\n      );\n    }\n\n    // Set the value after the others to be sure overwrite\n    // any other values.\n    if (storage && attributes.dataId) {\n      this.setupStorage(html, attributes.dataId, element, storage);\n    }\n  }\n\n  /**\n   * Render the XFA layer.\n   *\n   * @param {XfaLayerParameters} parameters\n   */\n  static render(parameters) {\n    const storage = parameters.annotationStorage;\n    const linkService = parameters.linkService;\n    const root = parameters.xfaHtml;\n    const intent = parameters.intent || \"display\";\n    const rootHtml = document.createElement(root.name);\n    if (root.attributes) {\n      this.setAttributes({\n        html: rootHtml,\n        element: root,\n        intent,\n        linkService,\n      });\n    }\n    const stack = [[root, -1, rootHtml]];\n\n    const rootDiv = parameters.div;\n    rootDiv.appendChild(rootHtml);\n\n    if (parameters.viewport) {\n      const transform = `matrix(${parameters.viewport.transform.join(\",\")})`;\n      rootDiv.style.transform = transform;\n    }\n\n    // Set defaults.\n    if (intent !== \"richText\") {\n      rootDiv.setAttribute(\"class\", \"xfaLayer xfaFont\");\n    }\n\n    // Text nodes used for the text highlighter.\n    const textDivs = [];\n\n    while (stack.length > 0) {\n      const [parent, i, html] = stack[stack.length - 1];\n      if (i + 1 === parent.children.length) {\n        stack.pop();\n        continue;\n      }\n\n      const child = parent.children[++stack[stack.length - 1][1]];\n      if (child === null) {\n        continue;\n      }\n\n      const { name } = child;\n      if (name === \"#text\") {\n        const node = document.createTextNode(child.value);\n        textDivs.push(node);\n        html.appendChild(node);\n        continue;\n      }\n\n      let childHtml;\n      if (child?.attributes?.xmlns) {\n        childHtml = document.createElementNS(child.attributes.xmlns, name);\n      } else {\n        childHtml = document.createElement(name);\n      }\n\n      html.appendChild(childHtml);\n      if (child.attributes) {\n        this.setAttributes({\n          html: childHtml,\n          element: child,\n          storage,\n          intent,\n          linkService,\n        });\n      }\n\n      if (child.children && child.children.length > 0) {\n        stack.push([child, -1, childHtml]);\n      } else if (child.value) {\n        const node = document.createTextNode(child.value);\n        if (XfaText.shouldBuildText(name)) {\n          textDivs.push(node);\n        }\n        childHtml.appendChild(node);\n      }\n    }\n\n    /**\n     * TODO: re-enable that stuff once we've JS implementation.\n     * See https://bugzilla.mozilla.org/show_bug.cgi?id=1719465.\n     *\n     * for (const el of rootDiv.querySelectorAll(\n     * \".xfaDisabled input, .xfaDisabled textarea\"\n     * )) {\n     * el.setAttribute(\"disabled\", true);\n     * }\n     * for (const el of rootDiv.querySelectorAll(\n     * \".xfaReadOnly input, .xfaReadOnly textarea\"\n     * )) {\n     * el.setAttribute(\"readOnly\", true);\n     * }\n     */\n\n    for (const el of rootDiv.querySelectorAll(\n      \".xfaNonInteractive input, .xfaNonInteractive textarea\"\n    )) {\n      el.setAttribute(\"readOnly\", true);\n    }\n\n    return {\n      textDivs,\n    };\n  }\n\n  /**\n   * Update the XFA layer.\n   *\n   * @param {XfaLayerParameters} parameters\n   */\n  static update(parameters) {\n    const transform = `matrix(${parameters.viewport.transform.join(\",\")})`;\n    parameters.div.style.transform = transform;\n    parameters.div.hidden = false;\n  }\n}\n\nexport { XfaLayer };\n","/* Copyright 2015 Mozilla Foundation\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport {\n  AbortException,\n  createPromiseCapability,\n  Util,\n} from \"../shared/util.js\";\n\n/**\n * Text layer render parameters.\n *\n * @typedef {Object} TextLayerRenderParameters\n * @property {import(\"./api\").TextContent} [textContent] - Text content to\n *   render (the object is returned by the page's `getTextContent` method).\n * @property {ReadableStream} [textContentStream] - Text content stream to\n *   render (the stream is returned by the page's `streamTextContent` method).\n * @property {DocumentFragment} container - The DOM node that will contain the\n *   text runs.\n * @property {import(\"./display_utils\").PageViewport} viewport - The target\n *   viewport to properly layout the text runs.\n * @property {Array<HTMLElement>} [textDivs] - HTML elements that correspond to\n *   the text items of the textContent input.\n *   This is output and shall initially be set to an empty array.\n * @property {Array<string>} [textContentItemsStr] - Strings that correspond to\n *   the `str` property of the text items of the textContent input.\n *   This is output and shall initially be set to an empty array.\n * @property {number} [timeout] - Delay in milliseconds before rendering of the\n *   text runs occurs.\n * @property {boolean} [enhanceTextSelection] - Whether to turn on the text\n *   selection enhancement.\n */\n\nconst MAX_TEXT_DIVS_TO_RENDER = 100000;\nconst DEFAULT_FONT_SIZE = 30;\nconst DEFAULT_FONT_ASCENT = 0.8;\nconst ascentCache = new Map();\nconst AllWhitespaceRegexp = /^\\s+$/g;\n\nfunction getAscent(fontFamily, ctx) {\n  const cachedAscent = ascentCache.get(fontFamily);\n  if (cachedAscent) {\n    return cachedAscent;\n  }\n\n  ctx.save();\n  ctx.font = `${DEFAULT_FONT_SIZE}px ${fontFamily}`;\n  const metrics = ctx.measureText(\"\");\n\n  // Both properties aren't available by default in Firefox.\n  let ascent = metrics.fontBoundingBoxAscent;\n  let descent = Math.abs(metrics.fontBoundingBoxDescent);\n  if (ascent) {\n    ctx.restore();\n    const ratio = ascent / (ascent + descent);\n    ascentCache.set(fontFamily, ratio);\n    return ratio;\n  }\n\n  // Try basic heuristic to guess ascent/descent.\n  // Draw a g with baseline at 0,0 and then get the line\n  // number where a pixel has non-null red component (starting\n  // from bottom).\n  ctx.strokeStyle = \"red\";\n  ctx.clearRect(0, 0, DEFAULT_FONT_SIZE, DEFAULT_FONT_SIZE);\n  ctx.strokeText(\"g\", 0, 0);\n  let pixels = ctx.getImageData(\n    0,\n    0,\n    DEFAULT_FONT_SIZE,\n    DEFAULT_FONT_SIZE\n  ).data;\n  descent = 0;\n  for (let i = pixels.length - 1 - 3; i >= 0; i -= 4) {\n    if (pixels[i] > 0) {\n      descent = Math.ceil(i / 4 / DEFAULT_FONT_SIZE);\n      break;\n    }\n  }\n\n  // Draw an A with baseline at 0,DEFAULT_FONT_SIZE and then get the line\n  // number where a pixel has non-null red component (starting\n  // from top).\n  ctx.clearRect(0, 0, DEFAULT_FONT_SIZE, DEFAULT_FONT_SIZE);\n  ctx.strokeText(\"A\", 0, DEFAULT_FONT_SIZE);\n  pixels = ctx.getImageData(0, 0, DEFAULT_FONT_SIZE, DEFAULT_FONT_SIZE).data;\n  ascent = 0;\n  for (let i = 0, ii = pixels.length; i < ii; i += 4) {\n    if (pixels[i] > 0) {\n      ascent = DEFAULT_FONT_SIZE - Math.floor(i / 4 / DEFAULT_FONT_SIZE);\n      break;\n    }\n  }\n\n  ctx.restore();\n\n  if (ascent) {\n    const ratio = ascent / (ascent + descent);\n    ascentCache.set(fontFamily, ratio);\n    return ratio;\n  }\n\n  ascentCache.set(fontFamily, DEFAULT_FONT_ASCENT);\n  return DEFAULT_FONT_ASCENT;\n}\n\nfunction appendText(task, geom, styles, ctx) {\n  // Initialize all used properties to keep the caches monomorphic.\n  const textDiv = document.createElement(\"span\");\n  const textDivProperties = task._enhanceTextSelection\n    ? {\n        angle: 0,\n        canvasWidth: 0,\n        hasText: geom.str !== \"\",\n        hasEOL: geom.hasEOL,\n        originalTransform: null,\n        paddingBottom: 0,\n        paddingLeft: 0,\n        paddingRight: 0,\n        paddingTop: 0,\n        scale: 1,\n      }\n    : {\n        angle: 0,\n        canvasWidth: 0,\n        hasText: geom.str !== \"\",\n        hasEOL: geom.hasEOL,\n      };\n\n  task._textDivs.push(textDiv);\n\n  const tx = Util.transform(task._viewport.transform, geom.transform);\n  let angle = Math.atan2(tx[1], tx[0]);\n  const style = styles[geom.fontName];\n  if (style.vertical) {\n    angle += Math.PI / 2;\n  }\n  const fontHeight = Math.hypot(tx[2], tx[3]);\n  const fontAscent = fontHeight * getAscent(style.fontFamily, ctx);\n\n  let left, top;\n  if (angle === 0) {\n    left = tx[4];\n    top = tx[5] - fontAscent;\n  } else {\n    left = tx[4] + fontAscent * Math.sin(angle);\n    top = tx[5] - fontAscent * Math.cos(angle);\n  }\n  // Setting the style properties individually, rather than all at once,\n  // should be OK since the `textDiv` isn't appended to the document yet.\n  textDiv.style.left = `${left}px`;\n  textDiv.style.top = `${top}px`;\n  textDiv.style.fontSize = `${fontHeight}px`;\n  textDiv.style.fontFamily = style.fontFamily;\n\n  // Keeps screen readers from pausing on every new text span.\n  textDiv.setAttribute(\"role\", \"presentation\");\n\n  textDiv.textContent = geom.str;\n  // geom.dir may be 'ttb' for vertical texts.\n  textDiv.dir = geom.dir;\n\n  // `fontName` is only used by the FontInspector, and we only use `dataset`\n  // here to make the font name available in the debugger.\n  if (task._fontInspectorEnabled) {\n    textDiv.dataset.fontName = geom.fontName;\n  }\n  if (angle !== 0) {\n    textDivProperties.angle = angle * (180 / Math.PI);\n  }\n  // We don't bother scaling single-char text divs, because it has very\n  // little effect on text highlighting. This makes scrolling on docs with\n  // lots of such divs a lot faster.\n  let shouldScaleText = false;\n  if (\n    geom.str.length > 1 ||\n    (task._enhanceTextSelection && AllWhitespaceRegexp.test(geom.str))\n  ) {\n    shouldScaleText = true;\n  } else if (geom.str !== \" \" && geom.transform[0] !== geom.transform[3]) {\n    const absScaleX = Math.abs(geom.transform[0]),\n      absScaleY = Math.abs(geom.transform[3]);\n    // When the horizontal/vertical scaling differs significantly, also scale\n    // even single-char text to improve highlighting (fixes issue11713.pdf).\n    if (\n      absScaleX !== absScaleY &&\n      Math.max(absScaleX, absScaleY) / Math.min(absScaleX, absScaleY) > 1.5\n    ) {\n      shouldScaleText = true;\n    }\n  }\n  if (shouldScaleText) {\n    if (style.vertical) {\n      textDivProperties.canvasWidth = geom.height * task._viewport.scale;\n    } else {\n      textDivProperties.canvasWidth = geom.width * task._viewport.scale;\n    }\n  }\n  task._textDivProperties.set(textDiv, textDivProperties);\n  if (task._textContentStream) {\n    task._layoutText(textDiv);\n  }\n\n  if (task._enhanceTextSelection && textDivProperties.hasText) {\n    let angleCos = 1,\n      angleSin = 0;\n    if (angle !== 0) {\n      angleCos = Math.cos(angle);\n      angleSin = Math.sin(angle);\n    }\n    const divWidth =\n      (style.vertical ? geom.height : geom.width) * task._viewport.scale;\n    const divHeight = fontHeight;\n\n    let m, b;\n    if (angle !== 0) {\n      m = [angleCos, angleSin, -angleSin, angleCos, left, top];\n      b = Util.getAxialAlignedBoundingBox([0, 0, divWidth, divHeight], m);\n    } else {\n      b = [left, top, left + divWidth, top + divHeight];\n    }\n\n    task._bounds.push({\n      left: b[0],\n      top: b[1],\n      right: b[2],\n      bottom: b[3],\n      div: textDiv,\n      size: [divWidth, divHeight],\n      m,\n    });\n  }\n}\n\nfunction render(task) {\n  if (task._canceled) {\n    return;\n  }\n  const textDivs = task._textDivs;\n  const capability = task._capability;\n  const textDivsLength = textDivs.length;\n\n  // No point in rendering many divs as it would make the browser\n  // unusable even after the divs are rendered.\n  if (textDivsLength > MAX_TEXT_DIVS_TO_RENDER) {\n    task._renderingDone = true;\n    capability.resolve();\n    return;\n  }\n\n  if (!task._textContentStream) {\n    for (let i = 0; i < textDivsLength; i++) {\n      task._layoutText(textDivs[i]);\n    }\n  }\n\n  task._renderingDone = true;\n  capability.resolve();\n}\n\nfunction findPositiveMin(ts, offset, count) {\n  let result = 0;\n  for (let i = 0; i < count; i++) {\n    const t = ts[offset++];\n    if (t > 0) {\n      result = result ? Math.min(t, result) : t;\n    }\n  }\n  return result;\n}\n\nfunction expand(task) {\n  const bounds = task._bounds;\n  const viewport = task._viewport;\n\n  const expanded = expandBounds(viewport.width, viewport.height, bounds);\n  for (let i = 0; i < expanded.length; i++) {\n    const div = bounds[i].div;\n    const divProperties = task._textDivProperties.get(div);\n    if (divProperties.angle === 0) {\n      divProperties.paddingLeft = bounds[i].left - expanded[i].left;\n      divProperties.paddingTop = bounds[i].top - expanded[i].top;\n      divProperties.paddingRight = expanded[i].right - bounds[i].right;\n      divProperties.paddingBottom = expanded[i].bottom - bounds[i].bottom;\n      task._textDivProperties.set(div, divProperties);\n      continue;\n    }\n    // Box is rotated -- trying to find padding so rotated div will not\n    // exceed its expanded bounds.\n    const e = expanded[i],\n      b = bounds[i];\n    const m = b.m,\n      c = m[0],\n      s = m[1];\n    // Finding intersections with expanded box.\n    const points = [[0, 0], [0, b.size[1]], [b.size[0], 0], b.size];\n    const ts = new Float64Array(64);\n    for (let j = 0, jj = points.length; j < jj; j++) {\n      const t = Util.applyTransform(points[j], m);\n      ts[j + 0] = c && (e.left - t[0]) / c;\n      ts[j + 4] = s && (e.top - t[1]) / s;\n      ts[j + 8] = c && (e.right - t[0]) / c;\n      ts[j + 12] = s && (e.bottom - t[1]) / s;\n\n      ts[j + 16] = s && (e.left - t[0]) / -s;\n      ts[j + 20] = c && (e.top - t[1]) / c;\n      ts[j + 24] = s && (e.right - t[0]) / -s;\n      ts[j + 28] = c && (e.bottom - t[1]) / c;\n\n      ts[j + 32] = c && (e.left - t[0]) / -c;\n      ts[j + 36] = s && (e.top - t[1]) / -s;\n      ts[j + 40] = c && (e.right - t[0]) / -c;\n      ts[j + 44] = s && (e.bottom - t[1]) / -s;\n\n      ts[j + 48] = s && (e.left - t[0]) / s;\n      ts[j + 52] = c && (e.top - t[1]) / -c;\n      ts[j + 56] = s && (e.right - t[0]) / s;\n      ts[j + 60] = c && (e.bottom - t[1]) / -c;\n    }\n    // Not based on math, but to simplify calculations, using cos and sin\n    // absolute values to not exceed the box (it can but insignificantly).\n    const boxScale = 1 + Math.min(Math.abs(c), Math.abs(s));\n    divProperties.paddingLeft = findPositiveMin(ts, 32, 16) / boxScale;\n    divProperties.paddingTop = findPositiveMin(ts, 48, 16) / boxScale;\n    divProperties.paddingRight = findPositiveMin(ts, 0, 16) / boxScale;\n    divProperties.paddingBottom = findPositiveMin(ts, 16, 16) / boxScale;\n    task._textDivProperties.set(div, divProperties);\n  }\n}\n\nfunction expandBounds(width, height, boxes) {\n  const bounds = boxes.map(function (box, i) {\n    return {\n      x1: box.left,\n      y1: box.top,\n      x2: box.right,\n      y2: box.bottom,\n      index: i,\n      x1New: undefined,\n      x2New: undefined,\n    };\n  });\n  expandBoundsLTR(width, bounds);\n\n  const expanded = new Array(boxes.length);\n  for (const b of bounds) {\n    const i = b.index;\n    expanded[i] = {\n      left: b.x1New,\n      top: 0,\n      right: b.x2New,\n      bottom: 0,\n    };\n  }\n\n  // Rotating on 90 degrees and extending extended boxes. Reusing the bounds\n  // array and objects.\n  boxes.map(function (box, i) {\n    const e = expanded[i],\n      b = bounds[i];\n    b.x1 = box.top;\n    b.y1 = width - e.right;\n    b.x2 = box.bottom;\n    b.y2 = width - e.left;\n    b.index = i;\n    b.x1New = undefined;\n    b.x2New = undefined;\n  });\n  expandBoundsLTR(height, bounds);\n\n  for (const b of bounds) {\n    const i = b.index;\n    expanded[i].top = b.x1New;\n    expanded[i].bottom = b.x2New;\n  }\n  return expanded;\n}\n\nfunction expandBoundsLTR(width, bounds) {\n  // Sorting by x1 coordinate and walk by the bounds in the same order.\n  bounds.sort(function (a, b) {\n    return a.x1 - b.x1 || a.index - b.index;\n  });\n\n  // First we see on the horizon is a fake boundary.\n  const fakeBoundary = {\n    x1: -Infinity,\n    y1: -Infinity,\n    x2: 0,\n    y2: Infinity,\n    index: -1,\n    x1New: 0,\n    x2New: 0,\n  };\n  const horizon = [\n    {\n      start: -Infinity,\n      end: Infinity,\n      boundary: fakeBoundary,\n    },\n  ];\n\n  for (const boundary of bounds) {\n    // Searching for the affected part of horizon.\n    // TODO red-black tree or simple binary search\n    let i = 0;\n    while (i < horizon.length && horizon[i].end <= boundary.y1) {\n      i++;\n    }\n    let j = horizon.length - 1;\n    while (j >= 0 && horizon[j].start >= boundary.y2) {\n      j--;\n    }\n\n    let horizonPart, affectedBoundary;\n    let q,\n      k,\n      maxXNew = -Infinity;\n    for (q = i; q <= j; q++) {\n      horizonPart = horizon[q];\n      affectedBoundary = horizonPart.boundary;\n      let xNew;\n      if (affectedBoundary.x2 > boundary.x1) {\n        // In the middle of the previous element, new x shall be at the\n        // boundary start. Extending if further if the affected boundary\n        // placed on top of the current one.\n        xNew =\n          affectedBoundary.index > boundary.index\n            ? affectedBoundary.x1New\n            : boundary.x1;\n      } else if (affectedBoundary.x2New === undefined) {\n        // We have some space in between, new x in middle will be a fair\n        // choice.\n        xNew = (affectedBoundary.x2 + boundary.x1) / 2;\n      } else {\n        // Affected boundary has x2new set, using it as new x.\n        xNew = affectedBoundary.x2New;\n      }\n      if (xNew > maxXNew) {\n        maxXNew = xNew;\n      }\n    }\n\n    // Set new x1 for current boundary.\n    boundary.x1New = maxXNew;\n\n    // Adjusts new x2 for the affected boundaries.\n    for (q = i; q <= j; q++) {\n      horizonPart = horizon[q];\n      affectedBoundary = horizonPart.boundary;\n      if (affectedBoundary.x2New === undefined) {\n        // Was not set yet, choosing new x if possible.\n        if (affectedBoundary.x2 > boundary.x1) {\n          // Current and affected boundaries intersect. If affected boundary\n          // is placed on top of the current, shrinking the affected.\n          if (affectedBoundary.index > boundary.index) {\n            affectedBoundary.x2New = affectedBoundary.x2;\n          }\n        } else {\n          affectedBoundary.x2New = maxXNew;\n        }\n      } else if (affectedBoundary.x2New > maxXNew) {\n        // Affected boundary is touching new x, pushing it back.\n        affectedBoundary.x2New = Math.max(maxXNew, affectedBoundary.x2);\n      }\n    }\n\n    // Fixing the horizon.\n    const changedHorizon = [];\n    let lastBoundary = null;\n    for (q = i; q <= j; q++) {\n      horizonPart = horizon[q];\n      affectedBoundary = horizonPart.boundary;\n      // Checking which boundary will be visible.\n      const useBoundary =\n        affectedBoundary.x2 > boundary.x2 ? affectedBoundary : boundary;\n      if (lastBoundary === useBoundary) {\n        // Merging with previous.\n        changedHorizon[changedHorizon.length - 1].end = horizonPart.end;\n      } else {\n        changedHorizon.push({\n          start: horizonPart.start,\n          end: horizonPart.end,\n          boundary: useBoundary,\n        });\n        lastBoundary = useBoundary;\n      }\n    }\n    if (horizon[i].start < boundary.y1) {\n      changedHorizon[0].start = boundary.y1;\n      changedHorizon.unshift({\n        start: horizon[i].start,\n        end: boundary.y1,\n        boundary: horizon[i].boundary,\n      });\n    }\n    if (boundary.y2 < horizon[j].end) {\n      changedHorizon[changedHorizon.length - 1].end = boundary.y2;\n      changedHorizon.push({\n        start: boundary.y2,\n        end: horizon[j].end,\n        boundary: horizon[j].boundary,\n      });\n    }\n\n    // Set x2 new of boundary that is no longer visible (see overlapping case\n    // above).\n    // TODO more efficient, e.g. via reference counting.\n    for (q = i; q <= j; q++) {\n      horizonPart = horizon[q];\n      affectedBoundary = horizonPart.boundary;\n      if (affectedBoundary.x2New !== undefined) {\n        continue;\n      }\n      let used = false;\n      for (\n        k = i - 1;\n        !used && k >= 0 && horizon[k].start >= affectedBoundary.y1;\n        k--\n      ) {\n        used = horizon[k].boundary === affectedBoundary;\n      }\n      for (\n        k = j + 1;\n        !used && k < horizon.length && horizon[k].end <= affectedBoundary.y2;\n        k++\n      ) {\n        used = horizon[k].boundary === affectedBoundary;\n      }\n      for (k = 0; !used && k < changedHorizon.length; k++) {\n        used = changedHorizon[k].boundary === affectedBoundary;\n      }\n      if (!used) {\n        affectedBoundary.x2New = maxXNew;\n      }\n    }\n\n    Array.prototype.splice.apply(\n      horizon,\n      [i, j - i + 1].concat(changedHorizon)\n    );\n  }\n\n  // Set new x2 for all unset boundaries.\n  for (const horizonPart of horizon) {\n    const affectedBoundary = horizonPart.boundary;\n    if (affectedBoundary.x2New === undefined) {\n      affectedBoundary.x2New = Math.max(width, affectedBoundary.x2);\n    }\n  }\n}\n\nclass TextLayerRenderTask {\n  constructor({\n    textContent,\n    textContentStream,\n    container,\n    viewport,\n    textDivs,\n    textContentItemsStr,\n    enhanceTextSelection,\n  }) {\n    this._textContent = textContent;\n    this._textContentStream = textContentStream;\n    this._container = container;\n    this._document = container.ownerDocument;\n    this._viewport = viewport;\n    this._textDivs = textDivs || [];\n    this._textContentItemsStr = textContentItemsStr || [];\n    this._enhanceTextSelection = !!enhanceTextSelection;\n    this._fontInspectorEnabled = !!globalThis.FontInspector?.enabled;\n\n    this._reader = null;\n    this._layoutTextLastFontSize = null;\n    this._layoutTextLastFontFamily = null;\n    this._layoutTextCtx = null;\n    this._textDivProperties = new WeakMap();\n    this._renderingDone = false;\n    this._canceled = false;\n    this._capability = createPromiseCapability();\n    this._renderTimer = null;\n    this._bounds = [];\n\n    // Always clean-up the temporary canvas once rendering is no longer pending.\n    this._capability.promise\n      .finally(() => {\n        if (!this._enhanceTextSelection) {\n          // The `textDiv` properties are no longer needed.\n          this._textDivProperties = null;\n        }\n\n        if (this._layoutTextCtx) {\n          // Zeroing the width and height cause Firefox to release graphics\n          // resources immediately, which can greatly reduce memory consumption.\n          this._layoutTextCtx.canvas.width = 0;\n          this._layoutTextCtx.canvas.height = 0;\n          this._layoutTextCtx = null;\n        }\n      })\n      .catch(() => {\n        // Avoid \"Uncaught promise\" messages in the console.\n      });\n  }\n\n  /**\n   * Promise for textLayer rendering task completion.\n   * @type {Promise<void>}\n   */\n  get promise() {\n    return this._capability.promise;\n  }\n\n  /**\n   * Cancel rendering of the textLayer.\n   */\n  cancel() {\n    this._canceled = true;\n    if (this._reader) {\n      this._reader\n        .cancel(new AbortException(\"TextLayer task cancelled.\"))\n        .catch(() => {\n          // Avoid \"Uncaught promise\" messages in the console.\n        });\n      this._reader = null;\n    }\n    if (this._renderTimer !== null) {\n      clearTimeout(this._renderTimer);\n      this._renderTimer = null;\n    }\n    this._capability.reject(new Error(\"TextLayer task cancelled.\"));\n  }\n\n  /**\n   * @private\n   */\n  _processItems(items, styleCache) {\n    for (let i = 0, len = items.length; i < len; i++) {\n      if (items[i].str === undefined) {\n        if (\n          items[i].type === \"beginMarkedContentProps\" ||\n          items[i].type === \"beginMarkedContent\"\n        ) {\n          const parent = this._container;\n          this._container = document.createElement(\"span\");\n          this._container.classList.add(\"markedContent\");\n          if (items[i].id !== null) {\n            this._container.setAttribute(\"id\", `${items[i].id}`);\n          }\n          parent.appendChild(this._container);\n        } else if (items[i].type === \"endMarkedContent\") {\n          this._container = this._container.parentNode;\n        }\n        continue;\n      }\n      this._textContentItemsStr.push(items[i].str);\n      appendText(this, items[i], styleCache, this._layoutTextCtx);\n    }\n  }\n\n  /**\n   * @private\n   */\n  _layoutText(textDiv) {\n    const textDivProperties = this._textDivProperties.get(textDiv);\n\n    let transform = \"\";\n    if (textDivProperties.canvasWidth !== 0 && textDivProperties.hasText) {\n      const { fontSize, fontFamily } = textDiv.style;\n\n      // Only build font string and set to context if different from last.\n      if (\n        fontSize !== this._layoutTextLastFontSize ||\n        fontFamily !== this._layoutTextLastFontFamily\n      ) {\n        this._layoutTextCtx.font = `${fontSize} ${fontFamily}`;\n        this._layoutTextLastFontSize = fontSize;\n        this._layoutTextLastFontFamily = fontFamily;\n      }\n      // Only measure the width for multi-char text divs, see `appendText`.\n      const { width } = this._layoutTextCtx.measureText(textDiv.textContent);\n\n      if (width > 0) {\n        const scale = textDivProperties.canvasWidth / width;\n        if (this._enhanceTextSelection) {\n          textDivProperties.scale = scale;\n        }\n        transform = `scaleX(${scale})`;\n      }\n    }\n    if (textDivProperties.angle !== 0) {\n      transform = `rotate(${textDivProperties.angle}deg) ${transform}`;\n    }\n    if (transform.length > 0) {\n      if (this._enhanceTextSelection) {\n        textDivProperties.originalTransform = transform;\n      }\n      textDiv.style.transform = transform;\n    }\n\n    if (textDivProperties.hasText) {\n      this._container.appendChild(textDiv);\n    }\n    if (textDivProperties.hasEOL) {\n      const br = document.createElement(\"br\");\n      br.setAttribute(\"role\", \"presentation\");\n      this._container.appendChild(br);\n    }\n  }\n\n  /**\n   * @private\n   */\n  _render(timeout = 0) {\n    const capability = createPromiseCapability();\n    let styleCache = Object.create(null);\n\n    // The temporary canvas is used to measure text length in the DOM.\n    const canvas = this._document.createElement(\"canvas\");\n    canvas.height = canvas.width = DEFAULT_FONT_SIZE;\n\n    this._layoutTextCtx = canvas.getContext(\"2d\", { alpha: false });\n\n    if (this._textContent) {\n      const textItems = this._textContent.items;\n      const textStyles = this._textContent.styles;\n      this._processItems(textItems, textStyles);\n      capability.resolve();\n    } else if (this._textContentStream) {\n      const pump = () => {\n        this._reader.read().then(({ value, done }) => {\n          if (done) {\n            capability.resolve();\n            return;\n          }\n\n          Object.assign(styleCache, value.styles);\n          this._processItems(value.items, styleCache);\n          pump();\n        }, capability.reject);\n      };\n\n      this._reader = this._textContentStream.getReader();\n      pump();\n    } else {\n      throw new Error(\n        'Neither \"textContent\" nor \"textContentStream\" parameters specified.'\n      );\n    }\n\n    capability.promise.then(() => {\n      styleCache = null;\n      if (!timeout) {\n        // Render right away\n        render(this);\n      } else {\n        // Schedule\n        this._renderTimer = setTimeout(() => {\n          render(this);\n          this._renderTimer = null;\n        }, timeout);\n      }\n    }, this._capability.reject);\n  }\n\n  /**\n   * @param {boolean} [expandDivs]\n   */\n  expandTextDivs(expandDivs = false) {\n    if (!this._enhanceTextSelection || !this._renderingDone) {\n      return;\n    }\n    if (this._bounds !== null) {\n      expand(this);\n      this._bounds = null;\n    }\n    const transformBuf = [],\n      paddingBuf = [];\n\n    for (let i = 0, ii = this._textDivs.length; i < ii; i++) {\n      const div = this._textDivs[i];\n      const divProps = this._textDivProperties.get(div);\n\n      if (!divProps.hasText) {\n        continue;\n      }\n      if (expandDivs) {\n        transformBuf.length = 0;\n        paddingBuf.length = 0;\n\n        if (divProps.originalTransform) {\n          transformBuf.push(divProps.originalTransform);\n        }\n        if (divProps.paddingTop > 0) {\n          paddingBuf.push(`${divProps.paddingTop}px`);\n          transformBuf.push(`translateY(${-divProps.paddingTop}px)`);\n        } else {\n          paddingBuf.push(0);\n        }\n        if (divProps.paddingRight > 0) {\n          paddingBuf.push(`${divProps.paddingRight / divProps.scale}px`);\n        } else {\n          paddingBuf.push(0);\n        }\n        if (divProps.paddingBottom > 0) {\n          paddingBuf.push(`${divProps.paddingBottom}px`);\n        } else {\n          paddingBuf.push(0);\n        }\n        if (divProps.paddingLeft > 0) {\n          paddingBuf.push(`${divProps.paddingLeft / divProps.scale}px`);\n          transformBuf.push(\n            `translateX(${-divProps.paddingLeft / divProps.scale}px)`\n          );\n        } else {\n          paddingBuf.push(0);\n        }\n\n        div.style.padding = paddingBuf.join(\" \");\n        if (transformBuf.length) {\n          div.style.transform = transformBuf.join(\" \");\n        }\n      } else {\n        div.style.padding = null;\n        div.style.transform = divProps.originalTransform;\n      }\n    }\n  }\n}\n\n/**\n * @param {TextLayerRenderParameters} renderParameters\n * @returns {TextLayerRenderTask}\n */\nfunction renderTextLayer(renderParameters) {\n  const task = new TextLayerRenderTask({\n    textContent: renderParameters.textContent,\n    textContentStream: renderParameters.textContentStream,\n    container: renderParameters.container,\n    viewport: renderParameters.viewport,\n    textDivs: renderParameters.textDivs,\n    textContentItemsStr: renderParameters.textContentItemsStr,\n    enhanceTextSelection: renderParameters.enhanceTextSelection,\n  });\n  task._render(renderParameters.timeout);\n  return task;\n}\n\nexport { renderTextLayer };\n","/* Copyright 2012 Mozilla Foundation\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n/* globals __non_webpack_require__ */\n\nimport {\n  FONT_IDENTITY_MATRIX,\n  IDENTITY_MATRIX,\n  ImageKind,\n  OPS,\n  TextRenderingMode,\n  unreachable,\n  Util,\n  warn,\n} from \"../shared/util.js\";\nimport { DOMSVGFactory } from \"./display_utils.js\";\nimport { isNodeJS } from \"../shared/is_node.js\";\n\n/** @type {any} */\nlet SVGGraphics = class {\n  constructor() {\n    unreachable(\"Not implemented: SVGGraphics\");\n  }\n};\n\nif (\n  typeof PDFJSDev === \"undefined\" ||\n  PDFJSDev.test(\"!PRODUCTION || GENERIC\")\n) {\n  const SVG_DEFAULTS = {\n    fontStyle: \"normal\",\n    fontWeight: \"normal\",\n    fillColor: \"#000000\",\n  };\n  const XML_NS = \"http://www.w3.org/XML/1998/namespace\";\n  const XLINK_NS = \"http://www.w3.org/1999/xlink\";\n  const LINE_CAP_STYLES = [\"butt\", \"round\", \"square\"];\n  const LINE_JOIN_STYLES = [\"miter\", \"round\", \"bevel\"];\n\n  const createObjectURL = function (\n    data,\n    contentType = \"\",\n    forceDataSchema = false\n  ) {\n    if (\n      URL.createObjectURL &&\n      typeof Blob !== \"undefined\" &&\n      !forceDataSchema\n    ) {\n      return URL.createObjectURL(new Blob([data], { type: contentType }));\n    }\n    // Blob/createObjectURL is not available, falling back to data schema.\n    const digits =\n      \"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=\";\n\n    let buffer = `data:${contentType};base64,`;\n    for (let i = 0, ii = data.length; i < ii; i += 3) {\n      const b1 = data[i] & 0xff;\n      const b2 = data[i + 1] & 0xff;\n      const b3 = data[i + 2] & 0xff;\n      const d1 = b1 >> 2,\n        d2 = ((b1 & 3) << 4) | (b2 >> 4);\n      const d3 = i + 1 < ii ? ((b2 & 0xf) << 2) | (b3 >> 6) : 64;\n      const d4 = i + 2 < ii ? b3 & 0x3f : 64;\n      buffer += digits[d1] + digits[d2] + digits[d3] + digits[d4];\n    }\n    return buffer;\n  };\n\n  const convertImgDataToPng = (function () {\n    const PNG_HEADER = new Uint8Array([\n      0x89, 0x50, 0x4e, 0x47, 0x0d, 0x0a, 0x1a, 0x0a,\n    ]);\n    const CHUNK_WRAPPER_SIZE = 12;\n\n    const crcTable = new Int32Array(256);\n    for (let i = 0; i < 256; i++) {\n      let c = i;\n      for (let h = 0; h < 8; h++) {\n        if (c & 1) {\n          c = 0xedb88320 ^ ((c >> 1) & 0x7fffffff);\n        } else {\n          c = (c >> 1) & 0x7fffffff;\n        }\n      }\n      crcTable[i] = c;\n    }\n\n    function crc32(data, start, end) {\n      let crc = -1;\n      for (let i = start; i < end; i++) {\n        const a = (crc ^ data[i]) & 0xff;\n        const b = crcTable[a];\n        crc = (crc >>> 8) ^ b;\n      }\n      return crc ^ -1;\n    }\n\n    function writePngChunk(type, body, data, offset) {\n      let p = offset;\n      const len = body.length;\n\n      data[p] = (len >> 24) & 0xff;\n      data[p + 1] = (len >> 16) & 0xff;\n      data[p + 2] = (len >> 8) & 0xff;\n      data[p + 3] = len & 0xff;\n      p += 4;\n\n      data[p] = type.charCodeAt(0) & 0xff;\n      data[p + 1] = type.charCodeAt(1) & 0xff;\n      data[p + 2] = type.charCodeAt(2) & 0xff;\n      data[p + 3] = type.charCodeAt(3) & 0xff;\n      p += 4;\n\n      data.set(body, p);\n      p += body.length;\n\n      const crc = crc32(data, offset + 4, p);\n      data[p] = (crc >> 24) & 0xff;\n      data[p + 1] = (crc >> 16) & 0xff;\n      data[p + 2] = (crc >> 8) & 0xff;\n      data[p + 3] = crc & 0xff;\n    }\n\n    function adler32(data, start, end) {\n      let a = 1;\n      let b = 0;\n      for (let i = start; i < end; ++i) {\n        a = (a + (data[i] & 0xff)) % 65521;\n        b = (b + a) % 65521;\n      }\n      return (b << 16) | a;\n    }\n\n    /**\n     * @param {Uint8Array} literals The input data.\n     * @returns {Uint8Array} The DEFLATE-compressed data stream in zlib format.\n     *   This is the required format for compressed streams in the PNG format:\n     *   http://www.libpng.org/pub/png/spec/1.2/PNG-Compression.html\n     */\n    function deflateSync(literals) {\n      if (!isNodeJS) {\n        // zlib is certainly not available outside of Node.js. We can either use\n        // the pako library for client-side DEFLATE compression, or use the\n        // canvas API of the browser to obtain a more optimal PNG file.\n        return deflateSyncUncompressed(literals);\n      }\n      try {\n        // NOTE: This implementation is far from perfect, but already way better\n        // than not applying any compression.\n        //\n        // A better algorithm will try to choose a good predictor/filter and\n        // then choose a suitable zlib compression strategy (e.g. 3,Z_RLE).\n        //\n        // Node v0.11.12 zlib.deflateSync is introduced (and returns a Buffer).\n        // Node v3.0.0   Buffer inherits from Uint8Array.\n        // Node v8.0.0   zlib.deflateSync accepts Uint8Array as input.\n        let input;\n        // eslint-disable-next-line no-undef\n        if (parseInt(process.versions.node) >= 8) {\n          input = literals;\n        } else {\n          // eslint-disable-next-line no-undef\n          input = Buffer.from(literals);\n        }\n        const output = __non_webpack_require__(\"zlib\").deflateSync(input, {\n          level: 9,\n        });\n        return output instanceof Uint8Array ? output : new Uint8Array(output);\n      } catch (e) {\n        warn(\n          \"Not compressing PNG because zlib.deflateSync is unavailable: \" + e\n        );\n      }\n\n      return deflateSyncUncompressed(literals);\n    }\n\n    // An implementation of DEFLATE with compression level 0 (Z_NO_COMPRESSION).\n    function deflateSyncUncompressed(literals) {\n      let len = literals.length;\n      const maxBlockLength = 0xffff;\n\n      const deflateBlocks = Math.ceil(len / maxBlockLength);\n      const idat = new Uint8Array(2 + len + deflateBlocks * 5 + 4);\n      let pi = 0;\n      idat[pi++] = 0x78; // compression method and flags\n      idat[pi++] = 0x9c; // flags\n\n      let pos = 0;\n      while (len > maxBlockLength) {\n        // writing non-final DEFLATE blocks type 0 and length of 65535\n        idat[pi++] = 0x00;\n        idat[pi++] = 0xff;\n        idat[pi++] = 0xff;\n        idat[pi++] = 0x00;\n        idat[pi++] = 0x00;\n        idat.set(literals.subarray(pos, pos + maxBlockLength), pi);\n        pi += maxBlockLength;\n        pos += maxBlockLength;\n        len -= maxBlockLength;\n      }\n\n      // writing non-final DEFLATE blocks type 0\n      idat[pi++] = 0x01;\n      idat[pi++] = len & 0xff;\n      idat[pi++] = (len >> 8) & 0xff;\n      idat[pi++] = ~len & 0xffff & 0xff;\n      idat[pi++] = ((~len & 0xffff) >> 8) & 0xff;\n      idat.set(literals.subarray(pos), pi);\n      pi += literals.length - pos;\n\n      const adler = adler32(literals, 0, literals.length); // checksum\n      idat[pi++] = (adler >> 24) & 0xff;\n      idat[pi++] = (adler >> 16) & 0xff;\n      idat[pi++] = (adler >> 8) & 0xff;\n      idat[pi++] = adler & 0xff;\n      return idat;\n    }\n\n    function encode(imgData, kind, forceDataSchema, isMask) {\n      const width = imgData.width;\n      const height = imgData.height;\n      let bitDepth, colorType, lineSize;\n      const bytes = imgData.data;\n\n      switch (kind) {\n        case ImageKind.GRAYSCALE_1BPP:\n          colorType = 0;\n          bitDepth = 1;\n          lineSize = (width + 7) >> 3;\n          break;\n        case ImageKind.RGB_24BPP:\n          colorType = 2;\n          bitDepth = 8;\n          lineSize = width * 3;\n          break;\n        case ImageKind.RGBA_32BPP:\n          colorType = 6;\n          bitDepth = 8;\n          lineSize = width * 4;\n          break;\n        default:\n          throw new Error(\"invalid format\");\n      }\n\n      // prefix every row with predictor 0\n      const literals = new Uint8Array((1 + lineSize) * height);\n      let offsetLiterals = 0,\n        offsetBytes = 0;\n      for (let y = 0; y < height; ++y) {\n        literals[offsetLiterals++] = 0; // no prediction\n        literals.set(\n          bytes.subarray(offsetBytes, offsetBytes + lineSize),\n          offsetLiterals\n        );\n        offsetBytes += lineSize;\n        offsetLiterals += lineSize;\n      }\n\n      if (kind === ImageKind.GRAYSCALE_1BPP && isMask) {\n        // inverting for image masks\n        offsetLiterals = 0;\n        for (let y = 0; y < height; y++) {\n          offsetLiterals++; // skipping predictor\n          for (let i = 0; i < lineSize; i++) {\n            literals[offsetLiterals++] ^= 0xff;\n          }\n        }\n      }\n\n      const ihdr = new Uint8Array([\n        (width >> 24) & 0xff,\n        (width >> 16) & 0xff,\n        (width >> 8) & 0xff,\n        width & 0xff,\n        (height >> 24) & 0xff,\n        (height >> 16) & 0xff,\n        (height >> 8) & 0xff,\n        height & 0xff,\n        bitDepth, // bit depth\n        colorType, // color type\n        0x00, // compression method\n        0x00, // filter method\n        0x00, // interlace method\n      ]);\n      const idat = deflateSync(literals);\n\n      // PNG consists of: header, IHDR+data, IDAT+data, and IEND.\n      const pngLength =\n        PNG_HEADER.length + CHUNK_WRAPPER_SIZE * 3 + ihdr.length + idat.length;\n      const data = new Uint8Array(pngLength);\n      let offset = 0;\n      data.set(PNG_HEADER, offset);\n      offset += PNG_HEADER.length;\n      writePngChunk(\"IHDR\", ihdr, data, offset);\n      offset += CHUNK_WRAPPER_SIZE + ihdr.length;\n      writePngChunk(\"IDATA\", idat, data, offset);\n      offset += CHUNK_WRAPPER_SIZE + idat.length;\n      writePngChunk(\"IEND\", new Uint8Array(0), data, offset);\n\n      return createObjectURL(data, \"image/png\", forceDataSchema);\n    }\n\n    // eslint-disable-next-line no-shadow\n    return function convertImgDataToPng(imgData, forceDataSchema, isMask) {\n      const kind =\n        imgData.kind === undefined ? ImageKind.GRAYSCALE_1BPP : imgData.kind;\n      return encode(imgData, kind, forceDataSchema, isMask);\n    };\n  })();\n\n  class SVGExtraState {\n    constructor() {\n      this.fontSizeScale = 1;\n      this.fontWeight = SVG_DEFAULTS.fontWeight;\n      this.fontSize = 0;\n\n      this.textMatrix = IDENTITY_MATRIX;\n      this.fontMatrix = FONT_IDENTITY_MATRIX;\n      this.leading = 0;\n      this.textRenderingMode = TextRenderingMode.FILL;\n      this.textMatrixScale = 1;\n\n      // Current point (in user coordinates)\n      this.x = 0;\n      this.y = 0;\n\n      // Start of text line (in text coordinates)\n      this.lineX = 0;\n      this.lineY = 0;\n\n      // Character and word spacing\n      this.charSpacing = 0;\n      this.wordSpacing = 0;\n      this.textHScale = 1;\n      this.textRise = 0;\n\n      // Default foreground and background colors\n      this.fillColor = SVG_DEFAULTS.fillColor;\n      this.strokeColor = \"#000000\";\n\n      this.fillAlpha = 1;\n      this.strokeAlpha = 1;\n      this.lineWidth = 1;\n      this.lineJoin = \"\";\n      this.lineCap = \"\";\n      this.miterLimit = 0;\n\n      this.dashArray = [];\n      this.dashPhase = 0;\n\n      this.dependencies = [];\n\n      // Clipping\n      this.activeClipUrl = null;\n      this.clipGroup = null;\n\n      this.maskId = \"\";\n    }\n\n    clone() {\n      return Object.create(this);\n    }\n\n    setCurrentPoint(x, y) {\n      this.x = x;\n      this.y = y;\n    }\n  }\n\n  // eslint-disable-next-line no-inner-declarations\n  function opListToTree(opList) {\n    let opTree = [];\n    const tmp = [];\n\n    for (const opListElement of opList) {\n      if (opListElement.fn === \"save\") {\n        opTree.push({ fnId: 92, fn: \"group\", items: [] });\n        tmp.push(opTree);\n        opTree = opTree[opTree.length - 1].items;\n        continue;\n      }\n\n      if (opListElement.fn === \"restore\") {\n        opTree = tmp.pop();\n      } else {\n        opTree.push(opListElement);\n      }\n    }\n    return opTree;\n  }\n\n  /**\n   * Format a float number as a string.\n   *\n   * @param value {number} - The float number to format.\n   * @returns {string}\n   */\n  // eslint-disable-next-line no-inner-declarations\n  function pf(value) {\n    if (Number.isInteger(value)) {\n      return value.toString();\n    }\n    const s = value.toFixed(10);\n    let i = s.length - 1;\n    if (s[i] !== \"0\") {\n      return s;\n    }\n\n    // Remove trailing zeros.\n    do {\n      i--;\n    } while (s[i] === \"0\");\n    return s.substring(0, s[i] === \".\" ? i : i + 1);\n  }\n\n  /**\n   * Format a transform matrix as a string. The standard rotation, scale and\n   * translation matrices are replaced by their shorter forms, and for\n   * identity matrices an empty string is returned to save memory.\n   *\n   * @param m {Array} - The transform matrix to format.\n   * @returns {string}\n   */\n  // eslint-disable-next-line no-inner-declarations\n  function pm(m) {\n    if (m[4] === 0 && m[5] === 0) {\n      if (m[1] === 0 && m[2] === 0) {\n        if (m[0] === 1 && m[3] === 1) {\n          return \"\";\n        }\n        return `scale(${pf(m[0])} ${pf(m[3])})`;\n      }\n      if (m[0] === m[3] && m[1] === -m[2]) {\n        const a = (Math.acos(m[0]) * 180) / Math.PI;\n        return `rotate(${pf(a)})`;\n      }\n    } else {\n      if (m[0] === 1 && m[1] === 0 && m[2] === 0 && m[3] === 1) {\n        return `translate(${pf(m[4])} ${pf(m[5])})`;\n      }\n    }\n    return (\n      `matrix(${pf(m[0])} ${pf(m[1])} ${pf(m[2])} ${pf(m[3])} ${pf(m[4])} ` +\n      `${pf(m[5])})`\n    );\n  }\n\n  // The counts below are relevant for all pages, so they have to be global\n  // instead of being members of `SVGGraphics` (which is recreated for\n  // each page).\n  let clipCount = 0;\n  let maskCount = 0;\n  let shadingCount = 0;\n\n  SVGGraphics = class {\n    constructor(commonObjs, objs, forceDataSchema = false) {\n      this.svgFactory = new DOMSVGFactory();\n\n      this.current = new SVGExtraState();\n      this.transformMatrix = IDENTITY_MATRIX; // Graphics state matrix\n      this.transformStack = [];\n      this.extraStack = [];\n      this.commonObjs = commonObjs;\n      this.objs = objs;\n      this.pendingClip = null;\n      this.pendingEOFill = false;\n\n      this.embedFonts = false;\n      this.embeddedFonts = Object.create(null);\n      this.cssStyle = null;\n      this.forceDataSchema = !!forceDataSchema;\n\n      // In `src/shared/util.js` the operator names are mapped to IDs.\n      // The list below represents the reverse of that, i.e., it maps IDs\n      // to operator names.\n      this._operatorIdMapping = [];\n      for (const op in OPS) {\n        this._operatorIdMapping[OPS[op]] = op;\n      }\n    }\n\n    save() {\n      this.transformStack.push(this.transformMatrix);\n      const old = this.current;\n      this.extraStack.push(old);\n      this.current = old.clone();\n    }\n\n    restore() {\n      this.transformMatrix = this.transformStack.pop();\n      this.current = this.extraStack.pop();\n      this.pendingClip = null;\n      this.tgrp = null;\n    }\n\n    group(items) {\n      this.save();\n      this.executeOpTree(items);\n      this.restore();\n    }\n\n    loadDependencies(operatorList) {\n      const fnArray = operatorList.fnArray;\n      const argsArray = operatorList.argsArray;\n\n      for (let i = 0, ii = fnArray.length; i < ii; i++) {\n        if (fnArray[i] !== OPS.dependency) {\n          continue;\n        }\n\n        for (const obj of argsArray[i]) {\n          const objsPool = obj.startsWith(\"g_\") ? this.commonObjs : this.objs;\n          const promise = new Promise(resolve => {\n            objsPool.get(obj, resolve);\n          });\n          this.current.dependencies.push(promise);\n        }\n      }\n      return Promise.all(this.current.dependencies);\n    }\n\n    transform(a, b, c, d, e, f) {\n      const transformMatrix = [a, b, c, d, e, f];\n      this.transformMatrix = Util.transform(\n        this.transformMatrix,\n        transformMatrix\n      );\n      this.tgrp = null;\n    }\n\n    getSVG(operatorList, viewport) {\n      this.viewport = viewport;\n\n      const svgElement = this._initialize(viewport);\n      return this.loadDependencies(operatorList).then(() => {\n        this.transformMatrix = IDENTITY_MATRIX;\n        this.executeOpTree(this.convertOpList(operatorList));\n        return svgElement;\n      });\n    }\n\n    convertOpList(operatorList) {\n      const operatorIdMapping = this._operatorIdMapping;\n      const argsArray = operatorList.argsArray;\n      const fnArray = operatorList.fnArray;\n      const opList = [];\n      for (let i = 0, ii = fnArray.length; i < ii; i++) {\n        const fnId = fnArray[i];\n        opList.push({\n          fnId,\n          fn: operatorIdMapping[fnId],\n          args: argsArray[i],\n        });\n      }\n      return opListToTree(opList);\n    }\n\n    executeOpTree(opTree) {\n      for (const opTreeElement of opTree) {\n        const fn = opTreeElement.fn;\n        const fnId = opTreeElement.fnId;\n        const args = opTreeElement.args;\n\n        switch (fnId | 0) {\n          case OPS.beginText:\n            this.beginText();\n            break;\n          case OPS.dependency:\n            // Handled in `loadDependencies`, so no warning should be shown.\n            break;\n          case OPS.setLeading:\n            this.setLeading(args);\n            break;\n          case OPS.setLeadingMoveText:\n            this.setLeadingMoveText(args[0], args[1]);\n            break;\n          case OPS.setFont:\n            this.setFont(args);\n            break;\n          case OPS.showText:\n            this.showText(args[0]);\n            break;\n          case OPS.showSpacedText:\n            this.showText(args[0]);\n            break;\n          case OPS.endText:\n            this.endText();\n            break;\n          case OPS.moveText:\n            this.moveText(args[0], args[1]);\n            break;\n          case OPS.setCharSpacing:\n            this.setCharSpacing(args[0]);\n            break;\n          case OPS.setWordSpacing:\n            this.setWordSpacing(args[0]);\n            break;\n          case OPS.setHScale:\n            this.setHScale(args[0]);\n            break;\n          case OPS.setTextMatrix:\n            this.setTextMatrix(\n              args[0],\n              args[1],\n              args[2],\n              args[3],\n              args[4],\n              args[5]\n            );\n            break;\n          case OPS.setTextRise:\n            this.setTextRise(args[0]);\n            break;\n          case OPS.setTextRenderingMode:\n            this.setTextRenderingMode(args[0]);\n            break;\n          case OPS.setLineWidth:\n            this.setLineWidth(args[0]);\n            break;\n          case OPS.setLineJoin:\n            this.setLineJoin(args[0]);\n            break;\n          case OPS.setLineCap:\n            this.setLineCap(args[0]);\n            break;\n          case OPS.setMiterLimit:\n            this.setMiterLimit(args[0]);\n            break;\n          case OPS.setFillRGBColor:\n            this.setFillRGBColor(args[0], args[1], args[2]);\n            break;\n          case OPS.setStrokeRGBColor:\n            this.setStrokeRGBColor(args[0], args[1], args[2]);\n            break;\n          case OPS.setStrokeColorN:\n            this.setStrokeColorN(args);\n            break;\n          case OPS.setFillColorN:\n            this.setFillColorN(args);\n            break;\n          case OPS.shadingFill:\n            this.shadingFill(args[0]);\n            break;\n          case OPS.setDash:\n            this.setDash(args[0], args[1]);\n            break;\n          case OPS.setRenderingIntent:\n            this.setRenderingIntent(args[0]);\n            break;\n          case OPS.setFlatness:\n            this.setFlatness(args[0]);\n            break;\n          case OPS.setGState:\n            this.setGState(args[0]);\n            break;\n          case OPS.fill:\n            this.fill();\n            break;\n          case OPS.eoFill:\n            this.eoFill();\n            break;\n          case OPS.stroke:\n            this.stroke();\n            break;\n          case OPS.fillStroke:\n            this.fillStroke();\n            break;\n          case OPS.eoFillStroke:\n            this.eoFillStroke();\n            break;\n          case OPS.clip:\n            this.clip(\"nonzero\");\n            break;\n          case OPS.eoClip:\n            this.clip(\"evenodd\");\n            break;\n          case OPS.paintSolidColorImageMask:\n            this.paintSolidColorImageMask();\n            break;\n          case OPS.paintImageXObject:\n            this.paintImageXObject(args[0]);\n            break;\n          case OPS.paintInlineImageXObject:\n            this.paintInlineImageXObject(args[0]);\n            break;\n          case OPS.paintImageMaskXObject:\n            this.paintImageMaskXObject(args[0]);\n            break;\n          case OPS.paintFormXObjectBegin:\n            this.paintFormXObjectBegin(args[0], args[1]);\n            break;\n          case OPS.paintFormXObjectEnd:\n            this.paintFormXObjectEnd();\n            break;\n          case OPS.closePath:\n            this.closePath();\n            break;\n          case OPS.closeStroke:\n            this.closeStroke();\n            break;\n          case OPS.closeFillStroke:\n            this.closeFillStroke();\n            break;\n          case OPS.closeEOFillStroke:\n            this.closeEOFillStroke();\n            break;\n          case OPS.nextLine:\n            this.nextLine();\n            break;\n          case OPS.transform:\n            this.transform(\n              args[0],\n              args[1],\n              args[2],\n              args[3],\n              args[4],\n              args[5]\n            );\n            break;\n          case OPS.constructPath:\n            this.constructPath(args[0], args[1]);\n            break;\n          case OPS.endPath:\n            this.endPath();\n            break;\n          case 92:\n            this.group(opTreeElement.items);\n            break;\n          default:\n            warn(`Unimplemented operator ${fn}`);\n            break;\n        }\n      }\n    }\n\n    setWordSpacing(wordSpacing) {\n      this.current.wordSpacing = wordSpacing;\n    }\n\n    setCharSpacing(charSpacing) {\n      this.current.charSpacing = charSpacing;\n    }\n\n    nextLine() {\n      this.moveText(0, this.current.leading);\n    }\n\n    setTextMatrix(a, b, c, d, e, f) {\n      const current = this.current;\n      current.textMatrix = current.lineMatrix = [a, b, c, d, e, f];\n      current.textMatrixScale = Math.hypot(a, b);\n\n      current.x = current.lineX = 0;\n      current.y = current.lineY = 0;\n\n      current.xcoords = [];\n      current.ycoords = [];\n      current.tspan = this.svgFactory.createElement(\"svg:tspan\");\n      current.tspan.setAttributeNS(null, \"font-family\", current.fontFamily);\n      current.tspan.setAttributeNS(\n        null,\n        \"font-size\",\n        `${pf(current.fontSize)}px`\n      );\n      current.tspan.setAttributeNS(null, \"y\", pf(-current.y));\n\n      current.txtElement = this.svgFactory.createElement(\"svg:text\");\n      current.txtElement.appendChild(current.tspan);\n    }\n\n    beginText() {\n      const current = this.current;\n      current.x = current.lineX = 0;\n      current.y = current.lineY = 0;\n      current.textMatrix = IDENTITY_MATRIX;\n      current.lineMatrix = IDENTITY_MATRIX;\n      current.textMatrixScale = 1;\n      current.tspan = this.svgFactory.createElement(\"svg:tspan\");\n      current.txtElement = this.svgFactory.createElement(\"svg:text\");\n      current.txtgrp = this.svgFactory.createElement(\"svg:g\");\n      current.xcoords = [];\n      current.ycoords = [];\n    }\n\n    moveText(x, y) {\n      const current = this.current;\n      current.x = current.lineX += x;\n      current.y = current.lineY += y;\n\n      current.xcoords = [];\n      current.ycoords = [];\n      current.tspan = this.svgFactory.createElement(\"svg:tspan\");\n      current.tspan.setAttributeNS(null, \"font-family\", current.fontFamily);\n      current.tspan.setAttributeNS(\n        null,\n        \"font-size\",\n        `${pf(current.fontSize)}px`\n      );\n      current.tspan.setAttributeNS(null, \"y\", pf(-current.y));\n    }\n\n    showText(glyphs) {\n      const current = this.current;\n      const font = current.font;\n      const fontSize = current.fontSize;\n      if (fontSize === 0) {\n        return;\n      }\n\n      const fontSizeScale = current.fontSizeScale;\n      const charSpacing = current.charSpacing;\n      const wordSpacing = current.wordSpacing;\n      const fontDirection = current.fontDirection;\n      const textHScale = current.textHScale * fontDirection;\n      const vertical = font.vertical;\n      const spacingDir = vertical ? 1 : -1;\n      const defaultVMetrics = font.defaultVMetrics;\n      const widthAdvanceScale = fontSize * current.fontMatrix[0];\n\n      let x = 0;\n      for (const glyph of glyphs) {\n        if (glyph === null) {\n          // Word break\n          x += fontDirection * wordSpacing;\n          continue;\n        } else if (typeof glyph === \"number\") {\n          x += (spacingDir * glyph * fontSize) / 1000;\n          continue;\n        }\n\n        const spacing = (glyph.isSpace ? wordSpacing : 0) + charSpacing;\n        const character = glyph.fontChar;\n        let scaledX, scaledY;\n        let width = glyph.width;\n        if (vertical) {\n          let vx;\n          const vmetric = glyph.vmetric || defaultVMetrics;\n          vx = glyph.vmetric ? vmetric[1] : width * 0.5;\n          vx = -vx * widthAdvanceScale;\n          const vy = vmetric[2] * widthAdvanceScale;\n\n          width = vmetric ? -vmetric[0] : width;\n          scaledX = vx / fontSizeScale;\n          scaledY = (x + vy) / fontSizeScale;\n        } else {\n          scaledX = x / fontSizeScale;\n          scaledY = 0;\n        }\n\n        if (glyph.isInFont || font.missingFile) {\n          current.xcoords.push(current.x + scaledX);\n          if (vertical) {\n            current.ycoords.push(-current.y + scaledY);\n          }\n          current.tspan.textContent += character;\n        } else {\n          // TODO: To assist with text selection, we should replace the missing\n          // character with a space character if charWidth is not zero.\n          // But we cannot just do \"character = ' '\", because the ' ' character\n          // might actually map to a different glyph.\n        }\n\n        let charWidth;\n        if (vertical) {\n          charWidth = width * widthAdvanceScale - spacing * fontDirection;\n        } else {\n          charWidth = width * widthAdvanceScale + spacing * fontDirection;\n        }\n\n        x += charWidth;\n      }\n      current.tspan.setAttributeNS(\n        null,\n        \"x\",\n        current.xcoords.map(pf).join(\" \")\n      );\n      if (vertical) {\n        current.tspan.setAttributeNS(\n          null,\n          \"y\",\n          current.ycoords.map(pf).join(\" \")\n        );\n      } else {\n        current.tspan.setAttributeNS(null, \"y\", pf(-current.y));\n      }\n\n      if (vertical) {\n        current.y -= x;\n      } else {\n        current.x += x * textHScale;\n      }\n\n      current.tspan.setAttributeNS(null, \"font-family\", current.fontFamily);\n      current.tspan.setAttributeNS(\n        null,\n        \"font-size\",\n        `${pf(current.fontSize)}px`\n      );\n      if (current.fontStyle !== SVG_DEFAULTS.fontStyle) {\n        current.tspan.setAttributeNS(null, \"font-style\", current.fontStyle);\n      }\n      if (current.fontWeight !== SVG_DEFAULTS.fontWeight) {\n        current.tspan.setAttributeNS(null, \"font-weight\", current.fontWeight);\n      }\n\n      const fillStrokeMode =\n        current.textRenderingMode & TextRenderingMode.FILL_STROKE_MASK;\n      if (\n        fillStrokeMode === TextRenderingMode.FILL ||\n        fillStrokeMode === TextRenderingMode.FILL_STROKE\n      ) {\n        if (current.fillColor !== SVG_DEFAULTS.fillColor) {\n          current.tspan.setAttributeNS(null, \"fill\", current.fillColor);\n        }\n        if (current.fillAlpha < 1) {\n          current.tspan.setAttributeNS(null, \"fill-opacity\", current.fillAlpha);\n        }\n      } else if (current.textRenderingMode === TextRenderingMode.ADD_TO_PATH) {\n        // Workaround for Firefox: We must set fill=\"transparent\" because\n        // fill=\"none\" would generate an empty clipping path.\n        current.tspan.setAttributeNS(null, \"fill\", \"transparent\");\n      } else {\n        current.tspan.setAttributeNS(null, \"fill\", \"none\");\n      }\n\n      if (\n        fillStrokeMode === TextRenderingMode.STROKE ||\n        fillStrokeMode === TextRenderingMode.FILL_STROKE\n      ) {\n        const lineWidthScale = 1 / (current.textMatrixScale || 1);\n        this._setStrokeAttributes(current.tspan, lineWidthScale);\n      }\n\n      // Include the text rise in the text matrix since the `pm` function\n      // creates the SVG element's `translate` entry (work on a copy to avoid\n      // altering the original text matrix).\n      let textMatrix = current.textMatrix;\n      if (current.textRise !== 0) {\n        textMatrix = textMatrix.slice();\n        textMatrix[5] += current.textRise;\n      }\n\n      current.txtElement.setAttributeNS(\n        null,\n        \"transform\",\n        `${pm(textMatrix)} scale(${pf(textHScale)}, -1)`\n      );\n      current.txtElement.setAttributeNS(XML_NS, \"xml:space\", \"preserve\");\n      current.txtElement.appendChild(current.tspan);\n      current.txtgrp.appendChild(current.txtElement);\n\n      this._ensureTransformGroup().appendChild(current.txtElement);\n    }\n\n    setLeadingMoveText(x, y) {\n      this.setLeading(-y);\n      this.moveText(x, y);\n    }\n\n    addFontStyle(fontObj) {\n      if (!fontObj.data) {\n        throw new Error(\n          \"addFontStyle: No font data available, \" +\n            'ensure that the \"fontExtraProperties\" API parameter is set.'\n        );\n      }\n      if (!this.cssStyle) {\n        this.cssStyle = this.svgFactory.createElement(\"svg:style\");\n        this.cssStyle.setAttributeNS(null, \"type\", \"text/css\");\n        this.defs.appendChild(this.cssStyle);\n      }\n\n      const url = createObjectURL(\n        fontObj.data,\n        fontObj.mimetype,\n        this.forceDataSchema\n      );\n      this.cssStyle.textContent +=\n        `@font-face { font-family: \"${fontObj.loadedName}\";` +\n        ` src: url(${url}); }\\n`;\n    }\n\n    setFont(details) {\n      const current = this.current;\n      const fontObj = this.commonObjs.get(details[0]);\n      let size = details[1];\n      current.font = fontObj;\n\n      if (\n        this.embedFonts &&\n        !fontObj.missingFile &&\n        !this.embeddedFonts[fontObj.loadedName]\n      ) {\n        this.addFontStyle(fontObj);\n        this.embeddedFonts[fontObj.loadedName] = fontObj;\n      }\n      current.fontMatrix = fontObj.fontMatrix || FONT_IDENTITY_MATRIX;\n\n      let bold = \"normal\";\n      if (fontObj.black) {\n        bold = \"900\";\n      } else if (fontObj.bold) {\n        bold = \"bold\";\n      }\n      const italic = fontObj.italic ? \"italic\" : \"normal\";\n\n      if (size < 0) {\n        size = -size;\n        current.fontDirection = -1;\n      } else {\n        current.fontDirection = 1;\n      }\n      current.fontSize = size;\n      current.fontFamily = fontObj.loadedName;\n      current.fontWeight = bold;\n      current.fontStyle = italic;\n\n      current.tspan = this.svgFactory.createElement(\"svg:tspan\");\n      current.tspan.setAttributeNS(null, \"y\", pf(-current.y));\n      current.xcoords = [];\n      current.ycoords = [];\n    }\n\n    endText() {\n      const current = this.current;\n      if (\n        current.textRenderingMode & TextRenderingMode.ADD_TO_PATH_FLAG &&\n        current.txtElement?.hasChildNodes()\n      ) {\n        // If no glyphs are shown (i.e. no child nodes), no clipping occurs.\n        current.element = current.txtElement;\n        this.clip(\"nonzero\");\n        this.endPath();\n      }\n    }\n\n    // Path properties\n    setLineWidth(width) {\n      if (width > 0) {\n        this.current.lineWidth = width;\n      }\n    }\n\n    setLineCap(style) {\n      this.current.lineCap = LINE_CAP_STYLES[style];\n    }\n\n    setLineJoin(style) {\n      this.current.lineJoin = LINE_JOIN_STYLES[style];\n    }\n\n    setMiterLimit(limit) {\n      this.current.miterLimit = limit;\n    }\n\n    setStrokeAlpha(strokeAlpha) {\n      this.current.strokeAlpha = strokeAlpha;\n    }\n\n    setStrokeRGBColor(r, g, b) {\n      this.current.strokeColor = Util.makeHexColor(r, g, b);\n    }\n\n    setFillAlpha(fillAlpha) {\n      this.current.fillAlpha = fillAlpha;\n    }\n\n    setFillRGBColor(r, g, b) {\n      this.current.fillColor = Util.makeHexColor(r, g, b);\n      this.current.tspan = this.svgFactory.createElement(\"svg:tspan\");\n      this.current.xcoords = [];\n      this.current.ycoords = [];\n    }\n\n    setStrokeColorN(args) {\n      this.current.strokeColor = this._makeColorN_Pattern(args);\n    }\n\n    setFillColorN(args) {\n      this.current.fillColor = this._makeColorN_Pattern(args);\n    }\n\n    shadingFill(args) {\n      const width = this.viewport.width;\n      const height = this.viewport.height;\n      const inv = Util.inverseTransform(this.transformMatrix);\n      const bl = Util.applyTransform([0, 0], inv);\n      const br = Util.applyTransform([0, height], inv);\n      const ul = Util.applyTransform([width, 0], inv);\n      const ur = Util.applyTransform([width, height], inv);\n      const x0 = Math.min(bl[0], br[0], ul[0], ur[0]);\n      const y0 = Math.min(bl[1], br[1], ul[1], ur[1]);\n      const x1 = Math.max(bl[0], br[0], ul[0], ur[0]);\n      const y1 = Math.max(bl[1], br[1], ul[1], ur[1]);\n\n      const rect = this.svgFactory.createElement(\"svg:rect\");\n      rect.setAttributeNS(null, \"x\", x0);\n      rect.setAttributeNS(null, \"y\", y0);\n      rect.setAttributeNS(null, \"width\", x1 - x0);\n      rect.setAttributeNS(null, \"height\", y1 - y0);\n      rect.setAttributeNS(null, \"fill\", this._makeShadingPattern(args));\n      if (this.current.fillAlpha < 1) {\n        rect.setAttributeNS(null, \"fill-opacity\", this.current.fillAlpha);\n      }\n      this._ensureTransformGroup().appendChild(rect);\n    }\n\n    /**\n     * @private\n     */\n    _makeColorN_Pattern(args) {\n      if (args[0] === \"TilingPattern\") {\n        return this._makeTilingPattern(args);\n      }\n      return this._makeShadingPattern(args);\n    }\n\n    /**\n     * @private\n     */\n    _makeTilingPattern(args) {\n      const color = args[1];\n      const operatorList = args[2];\n      const matrix = args[3] || IDENTITY_MATRIX;\n      const [x0, y0, x1, y1] = args[4];\n      const xstep = args[5];\n      const ystep = args[6];\n      const paintType = args[7];\n\n      const tilingId = `shading${shadingCount++}`;\n      const [tx0, ty0, tx1, ty1] = Util.normalizeRect([\n        ...Util.applyTransform([x0, y0], matrix),\n        ...Util.applyTransform([x1, y1], matrix),\n      ]);\n      const [xscale, yscale] = Util.singularValueDecompose2dScale(matrix);\n      const txstep = xstep * xscale;\n      const tystep = ystep * yscale;\n\n      const tiling = this.svgFactory.createElement(\"svg:pattern\");\n      tiling.setAttributeNS(null, \"id\", tilingId);\n      tiling.setAttributeNS(null, \"patternUnits\", \"userSpaceOnUse\");\n      tiling.setAttributeNS(null, \"width\", txstep);\n      tiling.setAttributeNS(null, \"height\", tystep);\n      tiling.setAttributeNS(null, \"x\", `${tx0}`);\n      tiling.setAttributeNS(null, \"y\", `${ty0}`);\n\n      // Save current state.\n      const svg = this.svg;\n      const transformMatrix = this.transformMatrix;\n      const fillColor = this.current.fillColor;\n      const strokeColor = this.current.strokeColor;\n\n      const bbox = this.svgFactory.create(tx1 - tx0, ty1 - ty0);\n      this.svg = bbox;\n      this.transformMatrix = matrix;\n      if (paintType === 2) {\n        const cssColor = Util.makeHexColor(...color);\n        this.current.fillColor = cssColor;\n        this.current.strokeColor = cssColor;\n      }\n      this.executeOpTree(this.convertOpList(operatorList));\n\n      // Restore saved state.\n      this.svg = svg;\n      this.transformMatrix = transformMatrix;\n      this.current.fillColor = fillColor;\n      this.current.strokeColor = strokeColor;\n\n      tiling.appendChild(bbox.childNodes[0]);\n      this.defs.appendChild(tiling);\n      return `url(#${tilingId})`;\n    }\n\n    /**\n     * @private\n     */\n    _makeShadingPattern(args) {\n      if (typeof args === \"string\") {\n        args = this.objs.get(args);\n      }\n      switch (args[0]) {\n        case \"RadialAxial\":\n          const shadingId = `shading${shadingCount++}`;\n          const colorStops = args[3];\n          let gradient;\n\n          switch (args[1]) {\n            case \"axial\":\n              const point0 = args[4];\n              const point1 = args[5];\n              gradient = this.svgFactory.createElement(\"svg:linearGradient\");\n              gradient.setAttributeNS(null, \"id\", shadingId);\n              gradient.setAttributeNS(null, \"gradientUnits\", \"userSpaceOnUse\");\n              gradient.setAttributeNS(null, \"x1\", point0[0]);\n              gradient.setAttributeNS(null, \"y1\", point0[1]);\n              gradient.setAttributeNS(null, \"x2\", point1[0]);\n              gradient.setAttributeNS(null, \"y2\", point1[1]);\n              break;\n            case \"radial\":\n              const focalPoint = args[4];\n              const circlePoint = args[5];\n              const focalRadius = args[6];\n              const circleRadius = args[7];\n              gradient = this.svgFactory.createElement(\"svg:radialGradient\");\n              gradient.setAttributeNS(null, \"id\", shadingId);\n              gradient.setAttributeNS(null, \"gradientUnits\", \"userSpaceOnUse\");\n              gradient.setAttributeNS(null, \"cx\", circlePoint[0]);\n              gradient.setAttributeNS(null, \"cy\", circlePoint[1]);\n              gradient.setAttributeNS(null, \"r\", circleRadius);\n              gradient.setAttributeNS(null, \"fx\", focalPoint[0]);\n              gradient.setAttributeNS(null, \"fy\", focalPoint[1]);\n              gradient.setAttributeNS(null, \"fr\", focalRadius);\n              break;\n            default:\n              throw new Error(`Unknown RadialAxial type: ${args[1]}`);\n          }\n          for (const colorStop of colorStops) {\n            const stop = this.svgFactory.createElement(\"svg:stop\");\n            stop.setAttributeNS(null, \"offset\", colorStop[0]);\n            stop.setAttributeNS(null, \"stop-color\", colorStop[1]);\n            gradient.appendChild(stop);\n          }\n          this.defs.appendChild(gradient);\n          return `url(#${shadingId})`;\n        case \"Mesh\":\n          warn(\"Unimplemented pattern Mesh\");\n          return null;\n        case \"Dummy\":\n          return \"hotpink\";\n        default:\n          throw new Error(`Unknown IR type: ${args[0]}`);\n      }\n    }\n\n    setDash(dashArray, dashPhase) {\n      this.current.dashArray = dashArray;\n      this.current.dashPhase = dashPhase;\n    }\n\n    constructPath(ops, args) {\n      const current = this.current;\n      let x = current.x,\n        y = current.y;\n      let d = [];\n      let j = 0;\n\n      for (const op of ops) {\n        switch (op | 0) {\n          case OPS.rectangle:\n            x = args[j++];\n            y = args[j++];\n            const width = args[j++];\n            const height = args[j++];\n            const xw = x + width;\n            const yh = y + height;\n            d.push(\n              \"M\",\n              pf(x),\n              pf(y),\n              \"L\",\n              pf(xw),\n              pf(y),\n              \"L\",\n              pf(xw),\n              pf(yh),\n              \"L\",\n              pf(x),\n              pf(yh),\n              \"Z\"\n            );\n            break;\n          case OPS.moveTo:\n            x = args[j++];\n            y = args[j++];\n            d.push(\"M\", pf(x), pf(y));\n            break;\n          case OPS.lineTo:\n            x = args[j++];\n            y = args[j++];\n            d.push(\"L\", pf(x), pf(y));\n            break;\n          case OPS.curveTo:\n            x = args[j + 4];\n            y = args[j + 5];\n            d.push(\n              \"C\",\n              pf(args[j]),\n              pf(args[j + 1]),\n              pf(args[j + 2]),\n              pf(args[j + 3]),\n              pf(x),\n              pf(y)\n            );\n            j += 6;\n            break;\n          case OPS.curveTo2:\n            d.push(\n              \"C\",\n              pf(x),\n              pf(y),\n              pf(args[j]),\n              pf(args[j + 1]),\n              pf(args[j + 2]),\n              pf(args[j + 3])\n            );\n            x = args[j + 2];\n            y = args[j + 3];\n            j += 4;\n            break;\n          case OPS.curveTo3:\n            x = args[j + 2];\n            y = args[j + 3];\n            d.push(\n              \"C\",\n              pf(args[j]),\n              pf(args[j + 1]),\n              pf(x),\n              pf(y),\n              pf(x),\n              pf(y)\n            );\n            j += 4;\n            break;\n          case OPS.closePath:\n            d.push(\"Z\");\n            break;\n        }\n      }\n\n      d = d.join(\" \");\n\n      if (\n        current.path &&\n        ops.length > 0 &&\n        ops[0] !== OPS.rectangle &&\n        ops[0] !== OPS.moveTo\n      ) {\n        // If a path does not start with an OPS.rectangle or OPS.moveTo, it has\n        // probably been divided into two OPS.constructPath operators by\n        // OperatorList. Append the commands to the previous path element.\n        d = current.path.getAttributeNS(null, \"d\") + d;\n      } else {\n        current.path = this.svgFactory.createElement(\"svg:path\");\n        this._ensureTransformGroup().appendChild(current.path);\n      }\n\n      current.path.setAttributeNS(null, \"d\", d);\n      current.path.setAttributeNS(null, \"fill\", \"none\");\n\n      // Saving a reference in current.element so that it can be addressed\n      // in 'fill' and 'stroke'\n      current.element = current.path;\n      current.setCurrentPoint(x, y);\n    }\n\n    endPath() {\n      const current = this.current;\n\n      // Painting operators end a path.\n      current.path = null;\n\n      if (!this.pendingClip) {\n        return;\n      }\n      if (!current.element) {\n        this.pendingClip = null;\n        return;\n      }\n\n      // Add the current path to a clipping path.\n      const clipId = `clippath${clipCount++}`;\n      const clipPath = this.svgFactory.createElement(\"svg:clipPath\");\n      clipPath.setAttributeNS(null, \"id\", clipId);\n      clipPath.setAttributeNS(null, \"transform\", pm(this.transformMatrix));\n\n      // A deep clone is needed when text is used as a clipping path.\n      const clipElement = current.element.cloneNode(true);\n      if (this.pendingClip === \"evenodd\") {\n        clipElement.setAttributeNS(null, \"clip-rule\", \"evenodd\");\n      } else {\n        clipElement.setAttributeNS(null, \"clip-rule\", \"nonzero\");\n      }\n      this.pendingClip = null;\n      clipPath.appendChild(clipElement);\n      this.defs.appendChild(clipPath);\n\n      if (current.activeClipUrl) {\n        // The previous clipping group content can go out of order -- resetting\n        // cached clipGroups.\n        current.clipGroup = null;\n        for (const prev of this.extraStack) {\n          prev.clipGroup = null;\n        }\n        // Intersect with the previous clipping path.\n        clipPath.setAttributeNS(null, \"clip-path\", current.activeClipUrl);\n      }\n      current.activeClipUrl = `url(#${clipId})`;\n\n      this.tgrp = null;\n    }\n\n    clip(type) {\n      this.pendingClip = type;\n    }\n\n    closePath() {\n      const current = this.current;\n      if (current.path) {\n        const d = `${current.path.getAttributeNS(null, \"d\")}Z`;\n        current.path.setAttributeNS(null, \"d\", d);\n      }\n    }\n\n    setLeading(leading) {\n      this.current.leading = -leading;\n    }\n\n    setTextRise(textRise) {\n      this.current.textRise = textRise;\n    }\n\n    setTextRenderingMode(textRenderingMode) {\n      this.current.textRenderingMode = textRenderingMode;\n    }\n\n    setHScale(scale) {\n      this.current.textHScale = scale / 100;\n    }\n\n    setRenderingIntent(intent) {\n      // This operation is ignored since we haven't found a use case for it yet.\n    }\n\n    setFlatness(flatness) {\n      // This operation is ignored since we haven't found a use case for it yet.\n    }\n\n    setGState(states) {\n      for (const [key, value] of states) {\n        switch (key) {\n          case \"LW\":\n            this.setLineWidth(value);\n            break;\n          case \"LC\":\n            this.setLineCap(value);\n            break;\n          case \"LJ\":\n            this.setLineJoin(value);\n            break;\n          case \"ML\":\n            this.setMiterLimit(value);\n            break;\n          case \"D\":\n            this.setDash(value[0], value[1]);\n            break;\n          case \"RI\":\n            this.setRenderingIntent(value);\n            break;\n          case \"FL\":\n            this.setFlatness(value);\n            break;\n          case \"Font\":\n            this.setFont(value);\n            break;\n          case \"CA\":\n            this.setStrokeAlpha(value);\n            break;\n          case \"ca\":\n            this.setFillAlpha(value);\n            break;\n          default:\n            warn(`Unimplemented graphic state operator ${key}`);\n            break;\n        }\n      }\n    }\n\n    fill() {\n      const current = this.current;\n      if (current.element) {\n        current.element.setAttributeNS(null, \"fill\", current.fillColor);\n        current.element.setAttributeNS(null, \"fill-opacity\", current.fillAlpha);\n        this.endPath();\n      }\n    }\n\n    stroke() {\n      const current = this.current;\n      if (current.element) {\n        this._setStrokeAttributes(current.element);\n        current.element.setAttributeNS(null, \"fill\", \"none\");\n        this.endPath();\n      }\n    }\n\n    /**\n     * @private\n     */\n    _setStrokeAttributes(element, lineWidthScale = 1) {\n      const current = this.current;\n      let dashArray = current.dashArray;\n      if (lineWidthScale !== 1 && dashArray.length > 0) {\n        dashArray = dashArray.map(function (value) {\n          return lineWidthScale * value;\n        });\n      }\n      element.setAttributeNS(null, \"stroke\", current.strokeColor);\n      element.setAttributeNS(null, \"stroke-opacity\", current.strokeAlpha);\n      element.setAttributeNS(null, \"stroke-miterlimit\", pf(current.miterLimit));\n      element.setAttributeNS(null, \"stroke-linecap\", current.lineCap);\n      element.setAttributeNS(null, \"stroke-linejoin\", current.lineJoin);\n      element.setAttributeNS(\n        null,\n        \"stroke-width\",\n        pf(lineWidthScale * current.lineWidth) + \"px\"\n      );\n      element.setAttributeNS(\n        null,\n        \"stroke-dasharray\",\n        dashArray.map(pf).join(\" \")\n      );\n      element.setAttributeNS(\n        null,\n        \"stroke-dashoffset\",\n        pf(lineWidthScale * current.dashPhase) + \"px\"\n      );\n    }\n\n    eoFill() {\n      if (this.current.element) {\n        this.current.element.setAttributeNS(null, \"fill-rule\", \"evenodd\");\n      }\n      this.fill();\n    }\n\n    fillStroke() {\n      // Order is important since stroke wants fill to be none.\n      // First stroke, then if fill needed, it will be overwritten.\n      this.stroke();\n      this.fill();\n    }\n\n    eoFillStroke() {\n      if (this.current.element) {\n        this.current.element.setAttributeNS(null, \"fill-rule\", \"evenodd\");\n      }\n      this.fillStroke();\n    }\n\n    closeStroke() {\n      this.closePath();\n      this.stroke();\n    }\n\n    closeFillStroke() {\n      this.closePath();\n      this.fillStroke();\n    }\n\n    closeEOFillStroke() {\n      this.closePath();\n      this.eoFillStroke();\n    }\n\n    paintSolidColorImageMask() {\n      const rect = this.svgFactory.createElement(\"svg:rect\");\n      rect.setAttributeNS(null, \"x\", \"0\");\n      rect.setAttributeNS(null, \"y\", \"0\");\n      rect.setAttributeNS(null, \"width\", \"1px\");\n      rect.setAttributeNS(null, \"height\", \"1px\");\n      rect.setAttributeNS(null, \"fill\", this.current.fillColor);\n\n      this._ensureTransformGroup().appendChild(rect);\n    }\n\n    paintImageXObject(objId) {\n      const imgData = objId.startsWith(\"g_\")\n        ? this.commonObjs.get(objId)\n        : this.objs.get(objId);\n      if (!imgData) {\n        warn(`Dependent image with object ID ${objId} is not ready yet`);\n        return;\n      }\n      this.paintInlineImageXObject(imgData);\n    }\n\n    paintInlineImageXObject(imgData, mask) {\n      const width = imgData.width;\n      const height = imgData.height;\n\n      const imgSrc = convertImgDataToPng(imgData, this.forceDataSchema, !!mask);\n      const cliprect = this.svgFactory.createElement(\"svg:rect\");\n      cliprect.setAttributeNS(null, \"x\", \"0\");\n      cliprect.setAttributeNS(null, \"y\", \"0\");\n      cliprect.setAttributeNS(null, \"width\", pf(width));\n      cliprect.setAttributeNS(null, \"height\", pf(height));\n      this.current.element = cliprect;\n      this.clip(\"nonzero\");\n\n      const imgEl = this.svgFactory.createElement(\"svg:image\");\n      imgEl.setAttributeNS(XLINK_NS, \"xlink:href\", imgSrc);\n      imgEl.setAttributeNS(null, \"x\", \"0\");\n      imgEl.setAttributeNS(null, \"y\", pf(-height));\n      imgEl.setAttributeNS(null, \"width\", pf(width) + \"px\");\n      imgEl.setAttributeNS(null, \"height\", pf(height) + \"px\");\n      imgEl.setAttributeNS(\n        null,\n        \"transform\",\n        `scale(${pf(1 / width)} ${pf(-1 / height)})`\n      );\n      if (mask) {\n        mask.appendChild(imgEl);\n      } else {\n        this._ensureTransformGroup().appendChild(imgEl);\n      }\n    }\n\n    paintImageMaskXObject(imgData) {\n      const current = this.current;\n      const width = imgData.width;\n      const height = imgData.height;\n      const fillColor = current.fillColor;\n\n      current.maskId = `mask${maskCount++}`;\n      const mask = this.svgFactory.createElement(\"svg:mask\");\n      mask.setAttributeNS(null, \"id\", current.maskId);\n\n      const rect = this.svgFactory.createElement(\"svg:rect\");\n      rect.setAttributeNS(null, \"x\", \"0\");\n      rect.setAttributeNS(null, \"y\", \"0\");\n      rect.setAttributeNS(null, \"width\", pf(width));\n      rect.setAttributeNS(null, \"height\", pf(height));\n      rect.setAttributeNS(null, \"fill\", fillColor);\n      rect.setAttributeNS(null, \"mask\", `url(#${current.maskId})`);\n\n      this.defs.appendChild(mask);\n      this._ensureTransformGroup().appendChild(rect);\n\n      this.paintInlineImageXObject(imgData, mask);\n    }\n\n    paintFormXObjectBegin(matrix, bbox) {\n      if (Array.isArray(matrix) && matrix.length === 6) {\n        this.transform(\n          matrix[0],\n          matrix[1],\n          matrix[2],\n          matrix[3],\n          matrix[4],\n          matrix[5]\n        );\n      }\n\n      if (bbox) {\n        const width = bbox[2] - bbox[0];\n        const height = bbox[3] - bbox[1];\n\n        const cliprect = this.svgFactory.createElement(\"svg:rect\");\n        cliprect.setAttributeNS(null, \"x\", bbox[0]);\n        cliprect.setAttributeNS(null, \"y\", bbox[1]);\n        cliprect.setAttributeNS(null, \"width\", pf(width));\n        cliprect.setAttributeNS(null, \"height\", pf(height));\n        this.current.element = cliprect;\n        this.clip(\"nonzero\");\n        this.endPath();\n      }\n    }\n\n    paintFormXObjectEnd() {}\n\n    /**\n     * @private\n     */\n    _initialize(viewport) {\n      const svg = this.svgFactory.create(viewport.width, viewport.height);\n\n      // Create the definitions element.\n      const definitions = this.svgFactory.createElement(\"svg:defs\");\n      svg.appendChild(definitions);\n      this.defs = definitions;\n\n      // Create the root group element, which acts a container for all other\n      // groups and applies the viewport transform.\n      const rootGroup = this.svgFactory.createElement(\"svg:g\");\n      rootGroup.setAttributeNS(null, \"transform\", pm(viewport.transform));\n      svg.appendChild(rootGroup);\n\n      // For the construction of the SVG image we are only interested in the\n      // root group, so we expose it as the entry point of the SVG image for\n      // the other code in this class.\n      this.svg = rootGroup;\n\n      return svg;\n    }\n\n    /**\n     * @private\n     */\n    _ensureClipGroup() {\n      if (!this.current.clipGroup) {\n        const clipGroup = this.svgFactory.createElement(\"svg:g\");\n        clipGroup.setAttributeNS(null, \"clip-path\", this.current.activeClipUrl);\n        this.svg.appendChild(clipGroup);\n        this.current.clipGroup = clipGroup;\n      }\n      return this.current.clipGroup;\n    }\n\n    /**\n     * @private\n     */\n    _ensureTransformGroup() {\n      if (!this.tgrp) {\n        this.tgrp = this.svgFactory.createElement(\"svg:g\");\n        this.tgrp.setAttributeNS(null, \"transform\", pm(this.transformMatrix));\n        if (this.current.activeClipUrl) {\n          this._ensureClipGroup().appendChild(this.tgrp);\n        } else {\n          this.svg.appendChild(this.tgrp);\n        }\n      }\n      return this.tgrp;\n    }\n  };\n}\n\nexport { SVGGraphics };\n","/* Copyright 2012 Mozilla Foundation\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n/* globals __non_webpack_require__ */\n\nimport {\n  AbortException,\n  assert,\n  createPromiseCapability,\n  MissingPDFException,\n} from \"../shared/util.js\";\nimport {\n  extractFilenameFromHeader,\n  validateRangeRequestCapabilities,\n} from \"./network_utils.js\";\n\nif (typeof PDFJSDev !== \"undefined\" && PDFJSDev.test(\"MOZCENTRAL\")) {\n  throw new Error(\n    'Module \"./node_stream.js\" shall not be used with MOZCENTRAL builds.'\n  );\n}\n\nconst fs = __non_webpack_require__(\"fs\");\nconst http = __non_webpack_require__(\"http\");\nconst https = __non_webpack_require__(\"https\");\nconst url = __non_webpack_require__(\"url\");\n\nconst fileUriRegex = /^file:\\/\\/\\/[a-zA-Z]:\\//;\n\nfunction parseUrl(sourceUrl) {\n  const parsedUrl = url.parse(sourceUrl);\n  if (parsedUrl.protocol === \"file:\" || parsedUrl.host) {\n    return parsedUrl;\n  }\n  // Prepending 'file:///' to Windows absolute path.\n  if (/^[a-z]:[/\\\\]/i.test(sourceUrl)) {\n    return url.parse(`file:///${sourceUrl}`);\n  }\n  // Changes protocol to 'file:' if url refers to filesystem.\n  if (!parsedUrl.host) {\n    parsedUrl.protocol = \"file:\";\n  }\n  return parsedUrl;\n}\n\nclass PDFNodeStream {\n  constructor(source) {\n    this.source = source;\n    this.url = parseUrl(source.url);\n    this.isHttp =\n      this.url.protocol === \"http:\" || this.url.protocol === \"https:\";\n    // Check if url refers to filesystem.\n    this.isFsUrl = this.url.protocol === \"file:\";\n    this.httpHeaders = (this.isHttp && source.httpHeaders) || {};\n\n    this._fullRequestReader = null;\n    this._rangeRequestReaders = [];\n  }\n\n  get _progressiveDataLength() {\n    return this._fullRequestReader?._loaded ?? 0;\n  }\n\n  getFullReader() {\n    assert(\n      !this._fullRequestReader,\n      \"PDFNodeStream.getFullReader can only be called once.\"\n    );\n    this._fullRequestReader = this.isFsUrl\n      ? new PDFNodeStreamFsFullReader(this)\n      : new PDFNodeStreamFullReader(this);\n    return this._fullRequestReader;\n  }\n\n  getRangeReader(start, end) {\n    if (end <= this._progressiveDataLength) {\n      return null;\n    }\n    const rangeReader = this.isFsUrl\n      ? new PDFNodeStreamFsRangeReader(this, start, end)\n      : new PDFNodeStreamRangeReader(this, start, end);\n    this._rangeRequestReaders.push(rangeReader);\n    return rangeReader;\n  }\n\n  cancelAllRequests(reason) {\n    if (this._fullRequestReader) {\n      this._fullRequestReader.cancel(reason);\n    }\n    for (const reader of this._rangeRequestReaders.slice(0)) {\n      reader.cancel(reason);\n    }\n  }\n}\n\nclass BaseFullReader {\n  constructor(stream) {\n    this._url = stream.url;\n    this._done = false;\n    this._storedError = null;\n    this.onProgress = null;\n    const source = stream.source;\n    this._contentLength = source.length; // optional\n    this._loaded = 0;\n    this._filename = null;\n\n    this._disableRange = source.disableRange || false;\n    this._rangeChunkSize = source.rangeChunkSize;\n    if (!this._rangeChunkSize && !this._disableRange) {\n      this._disableRange = true;\n    }\n\n    this._isStreamingSupported = !source.disableStream;\n    this._isRangeSupported = !source.disableRange;\n\n    this._readableStream = null;\n    this._readCapability = createPromiseCapability();\n    this._headersCapability = createPromiseCapability();\n  }\n\n  get headersReady() {\n    return this._headersCapability.promise;\n  }\n\n  get filename() {\n    return this._filename;\n  }\n\n  get contentLength() {\n    return this._contentLength;\n  }\n\n  get isRangeSupported() {\n    return this._isRangeSupported;\n  }\n\n  get isStreamingSupported() {\n    return this._isStreamingSupported;\n  }\n\n  async read() {\n    await this._readCapability.promise;\n    if (this._done) {\n      return { value: undefined, done: true };\n    }\n    if (this._storedError) {\n      throw this._storedError;\n    }\n\n    const chunk = this._readableStream.read();\n    if (chunk === null) {\n      this._readCapability = createPromiseCapability();\n      return this.read();\n    }\n    this._loaded += chunk.length;\n    if (this.onProgress) {\n      this.onProgress({\n        loaded: this._loaded,\n        total: this._contentLength,\n      });\n    }\n    // Ensure that `read()` method returns ArrayBuffer.\n    const buffer = new Uint8Array(chunk).buffer;\n    return { value: buffer, done: false };\n  }\n\n  cancel(reason) {\n    // Call `this._error()` method when cancel is called\n    // before _readableStream is set.\n    if (!this._readableStream) {\n      this._error(reason);\n      return;\n    }\n    this._readableStream.destroy(reason);\n  }\n\n  _error(reason) {\n    this._storedError = reason;\n    this._readCapability.resolve();\n  }\n\n  _setReadableStream(readableStream) {\n    this._readableStream = readableStream;\n    readableStream.on(\"readable\", () => {\n      this._readCapability.resolve();\n    });\n\n    readableStream.on(\"end\", () => {\n      // Destroy readable to minimize resource usage.\n      readableStream.destroy();\n      this._done = true;\n      this._readCapability.resolve();\n    });\n\n    readableStream.on(\"error\", reason => {\n      this._error(reason);\n    });\n\n    // We need to stop reading when range is supported and streaming is\n    // disabled.\n    if (!this._isStreamingSupported && this._isRangeSupported) {\n      this._error(new AbortException(\"streaming is disabled\"));\n    }\n\n    // Destroy ReadableStream if already in errored state.\n    if (this._storedError) {\n      this._readableStream.destroy(this._storedError);\n    }\n  }\n}\n\nclass BaseRangeReader {\n  constructor(stream) {\n    this._url = stream.url;\n    this._done = false;\n    this._storedError = null;\n    this.onProgress = null;\n    this._loaded = 0;\n    this._readableStream = null;\n    this._readCapability = createPromiseCapability();\n    const source = stream.source;\n    this._isStreamingSupported = !source.disableStream;\n  }\n\n  get isStreamingSupported() {\n    return this._isStreamingSupported;\n  }\n\n  async read() {\n    await this._readCapability.promise;\n    if (this._done) {\n      return { value: undefined, done: true };\n    }\n    if (this._storedError) {\n      throw this._storedError;\n    }\n\n    const chunk = this._readableStream.read();\n    if (chunk === null) {\n      this._readCapability = createPromiseCapability();\n      return this.read();\n    }\n    this._loaded += chunk.length;\n    if (this.onProgress) {\n      this.onProgress({ loaded: this._loaded });\n    }\n    // Ensure that `read()` method returns ArrayBuffer.\n    const buffer = new Uint8Array(chunk).buffer;\n    return { value: buffer, done: false };\n  }\n\n  cancel(reason) {\n    // Call `this._error()` method when cancel is called\n    // before _readableStream is set.\n    if (!this._readableStream) {\n      this._error(reason);\n      return;\n    }\n    this._readableStream.destroy(reason);\n  }\n\n  _error(reason) {\n    this._storedError = reason;\n    this._readCapability.resolve();\n  }\n\n  _setReadableStream(readableStream) {\n    this._readableStream = readableStream;\n    readableStream.on(\"readable\", () => {\n      this._readCapability.resolve();\n    });\n\n    readableStream.on(\"end\", () => {\n      // Destroy readableStream to minimize resource usage.\n      readableStream.destroy();\n      this._done = true;\n      this._readCapability.resolve();\n    });\n\n    readableStream.on(\"error\", reason => {\n      this._error(reason);\n    });\n\n    // Destroy readableStream if already in errored state.\n    if (this._storedError) {\n      this._readableStream.destroy(this._storedError);\n    }\n  }\n}\n\nfunction createRequestOptions(parsedUrl, headers) {\n  return {\n    protocol: parsedUrl.protocol,\n    auth: parsedUrl.auth,\n    host: parsedUrl.hostname,\n    port: parsedUrl.port,\n    path: parsedUrl.path,\n    method: \"GET\",\n    headers,\n  };\n}\n\nclass PDFNodeStreamFullReader extends BaseFullReader {\n  constructor(stream) {\n    super(stream);\n\n    const handleResponse = response => {\n      if (response.statusCode === 404) {\n        const error = new MissingPDFException(`Missing PDF \"${this._url}\".`);\n        this._storedError = error;\n        this._headersCapability.reject(error);\n        return;\n      }\n      this._headersCapability.resolve();\n      this._setReadableStream(response);\n\n      const getResponseHeader = name => {\n        // Make sure that headers name are in lower case, as mentioned\n        // here: https://nodejs.org/api/http.html#http_message_headers.\n        return this._readableStream.headers[name.toLowerCase()];\n      };\n      const { allowRangeRequests, suggestedLength } =\n        validateRangeRequestCapabilities({\n          getResponseHeader,\n          isHttp: stream.isHttp,\n          rangeChunkSize: this._rangeChunkSize,\n          disableRange: this._disableRange,\n        });\n\n      this._isRangeSupported = allowRangeRequests;\n      // Setting right content length.\n      this._contentLength = suggestedLength || this._contentLength;\n\n      this._filename = extractFilenameFromHeader(getResponseHeader);\n    };\n\n    this._request = null;\n    if (this._url.protocol === \"http:\") {\n      this._request = http.request(\n        createRequestOptions(this._url, stream.httpHeaders),\n        handleResponse\n      );\n    } else {\n      this._request = https.request(\n        createRequestOptions(this._url, stream.httpHeaders),\n        handleResponse\n      );\n    }\n\n    this._request.on(\"error\", reason => {\n      this._storedError = reason;\n      this._headersCapability.reject(reason);\n    });\n    // Note: `request.end(data)` is used to write `data` to request body\n    // and notify end of request. But one should always call `request.end()`\n    // even if there is no data to write -- (to notify the end of request).\n    this._request.end();\n  }\n}\n\nclass PDFNodeStreamRangeReader extends BaseRangeReader {\n  constructor(stream, start, end) {\n    super(stream);\n\n    this._httpHeaders = {};\n    for (const property in stream.httpHeaders) {\n      const value = stream.httpHeaders[property];\n      if (typeof value === \"undefined\") {\n        continue;\n      }\n      this._httpHeaders[property] = value;\n    }\n    this._httpHeaders.Range = `bytes=${start}-${end - 1}`;\n\n    const handleResponse = response => {\n      if (response.statusCode === 404) {\n        const error = new MissingPDFException(`Missing PDF \"${this._url}\".`);\n        this._storedError = error;\n        return;\n      }\n      this._setReadableStream(response);\n    };\n\n    this._request = null;\n    if (this._url.protocol === \"http:\") {\n      this._request = http.request(\n        createRequestOptions(this._url, this._httpHeaders),\n        handleResponse\n      );\n    } else {\n      this._request = https.request(\n        createRequestOptions(this._url, this._httpHeaders),\n        handleResponse\n      );\n    }\n\n    this._request.on(\"error\", reason => {\n      this._storedError = reason;\n    });\n    this._request.end();\n  }\n}\n\nclass PDFNodeStreamFsFullReader extends BaseFullReader {\n  constructor(stream) {\n    super(stream);\n\n    let path = decodeURIComponent(this._url.path);\n\n    // Remove the extra slash to get right path from url like `file:///C:/`\n    if (fileUriRegex.test(this._url.href)) {\n      path = path.replace(/^\\//, \"\");\n    }\n\n    fs.lstat(path, (error, stat) => {\n      if (error) {\n        if (error.code === \"ENOENT\") {\n          error = new MissingPDFException(`Missing PDF \"${path}\".`);\n        }\n        this._storedError = error;\n        this._headersCapability.reject(error);\n        return;\n      }\n      // Setting right content length.\n      this._contentLength = stat.size;\n\n      this._setReadableStream(fs.createReadStream(path));\n      this._headersCapability.resolve();\n    });\n  }\n}\n\nclass PDFNodeStreamFsRangeReader extends BaseRangeReader {\n  constructor(stream, start, end) {\n    super(stream);\n\n    let path = decodeURIComponent(this._url.path);\n\n    // Remove the extra slash to get right path from url like `file:///C:/`\n    if (fileUriRegex.test(this._url.href)) {\n      path = path.replace(/^\\//, \"\");\n    }\n\n    this._setReadableStream(fs.createReadStream(path, { start, end: end - 1 }));\n  }\n}\n\nexport { PDFNodeStream };\n","/* Copyright 2012 Mozilla Foundation\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport {\n  assert,\n  MissingPDFException,\n  UnexpectedResponseException,\n} from \"../shared/util.js\";\nimport { getFilenameFromContentDispositionHeader } from \"./content_disposition.js\";\nimport { isPdfFile } from \"./display_utils.js\";\n\nfunction validateRangeRequestCapabilities({\n  getResponseHeader,\n  isHttp,\n  rangeChunkSize,\n  disableRange,\n}) {\n  if (\n    typeof PDFJSDev === \"undefined\" ||\n    PDFJSDev.test(\"!PRODUCTION || TESTING\")\n  ) {\n    assert(\n      Number.isInteger(rangeChunkSize) && rangeChunkSize > 0,\n      \"rangeChunkSize must be an integer larger than zero.\"\n    );\n  }\n  const returnValues = {\n    allowRangeRequests: false,\n    suggestedLength: undefined,\n  };\n\n  const length = parseInt(getResponseHeader(\"Content-Length\"), 10);\n  if (!Number.isInteger(length)) {\n    return returnValues;\n  }\n\n  returnValues.suggestedLength = length;\n\n  if (length <= 2 * rangeChunkSize) {\n    // The file size is smaller than the size of two chunks, so it does not\n    // make any sense to abort the request and retry with a range request.\n    return returnValues;\n  }\n\n  if (disableRange || !isHttp) {\n    return returnValues;\n  }\n  if (getResponseHeader(\"Accept-Ranges\") !== \"bytes\") {\n    return returnValues;\n  }\n\n  const contentEncoding = getResponseHeader(\"Content-Encoding\") || \"identity\";\n  if (contentEncoding !== \"identity\") {\n    return returnValues;\n  }\n\n  returnValues.allowRangeRequests = true;\n  return returnValues;\n}\n\nfunction extractFilenameFromHeader(getResponseHeader) {\n  const contentDisposition = getResponseHeader(\"Content-Disposition\");\n  if (contentDisposition) {\n    let filename = getFilenameFromContentDispositionHeader(contentDisposition);\n    if (filename.includes(\"%\")) {\n      try {\n        filename = decodeURIComponent(filename);\n      } catch (ex) {}\n    }\n    if (isPdfFile(filename)) {\n      return filename;\n    }\n  }\n  return null;\n}\n\nfunction createResponseStatusError(status, url) {\n  if (status === 404 || (status === 0 && url.startsWith(\"file:\"))) {\n    return new MissingPDFException('Missing PDF \"' + url + '\".');\n  }\n  return new UnexpectedResponseException(\n    `Unexpected server response (${status}) while retrieving PDF \"${url}\".`,\n    status\n  );\n}\n\nfunction validateResponseStatus(status) {\n  return status === 200 || status === 206;\n}\n\nexport {\n  createResponseStatusError,\n  extractFilenameFromHeader,\n  validateRangeRequestCapabilities,\n  validateResponseStatus,\n};\n","/* Copyright 2017 Mozilla Foundation\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { stringToBytes } from \"../shared/util.js\";\n\n// This getFilenameFromContentDispositionHeader function is adapted from\n// https://github.com/Rob--W/open-in-browser/blob/7e2e35a38b8b4e981b11da7b2f01df0149049e92/extension/content-disposition.js\n// with the following changes:\n// - Modified to conform to PDF.js's coding style.\n// - Move return to the end of the function to prevent Babel from dropping the\n//   function declarations.\n\n/**\n * Extract file name from the Content-Disposition HTTP response header.\n *\n * @param {string} contentDisposition\n * @returns {string} Filename, if found in the Content-Disposition header.\n */\nfunction getFilenameFromContentDispositionHeader(contentDisposition) {\n  let needsEncodingFixup = true;\n\n  // filename*=ext-value (\"ext-value\" from RFC 5987, referenced by RFC 6266).\n  let tmp = toParamRegExp(\"filename\\\\*\", \"i\").exec(contentDisposition);\n  if (tmp) {\n    tmp = tmp[1];\n    let filename = rfc2616unquote(tmp);\n    filename = unescape(filename);\n    filename = rfc5987decode(filename);\n    filename = rfc2047decode(filename);\n    return fixupEncoding(filename);\n  }\n\n  // Continuations (RFC 2231 section 3, referenced by RFC 5987 section 3.1).\n  // filename*n*=part\n  // filename*n=part\n  tmp = rfc2231getparam(contentDisposition);\n  if (tmp) {\n    // RFC 2047, section\n    const filename = rfc2047decode(tmp);\n    return fixupEncoding(filename);\n  }\n\n  // filename=value (RFC 5987, section 4.1).\n  tmp = toParamRegExp(\"filename\", \"i\").exec(contentDisposition);\n  if (tmp) {\n    tmp = tmp[1];\n    let filename = rfc2616unquote(tmp);\n    filename = rfc2047decode(filename);\n    return fixupEncoding(filename);\n  }\n\n  // After this line there are only function declarations. We cannot put\n  // \"return\" here for readability because babel would then drop the function\n  // declarations...\n  function toParamRegExp(attributePattern, flags) {\n    return new RegExp(\n      \"(?:^|;)\\\\s*\" +\n        attributePattern +\n        \"\\\\s*=\\\\s*\" +\n        // Captures: value = token | quoted-string\n        // (RFC 2616, section 3.6 and referenced by RFC 6266 4.1)\n        \"(\" +\n        '[^\";\\\\s][^;\\\\s]*' +\n        \"|\" +\n        '\"(?:[^\"\\\\\\\\]|\\\\\\\\\"?)+\"?' +\n        \")\",\n      flags\n    );\n  }\n  function textdecode(encoding, value) {\n    if (encoding) {\n      if (!/^[\\x00-\\xFF]+$/.test(value)) {\n        return value;\n      }\n      try {\n        const decoder = new TextDecoder(encoding, { fatal: true });\n        const buffer = stringToBytes(value);\n        value = decoder.decode(buffer);\n        needsEncodingFixup = false;\n      } catch (e) {\n        // TextDecoder constructor threw - unrecognized encoding.\n      }\n    }\n    return value;\n  }\n  function fixupEncoding(value) {\n    if (needsEncodingFixup && /[\\x80-\\xff]/.test(value)) {\n      // Maybe multi-byte UTF-8.\n      value = textdecode(\"utf-8\", value);\n      if (needsEncodingFixup) {\n        // Try iso-8859-1 encoding.\n        value = textdecode(\"iso-8859-1\", value);\n      }\n    }\n    return value;\n  }\n  function rfc2231getparam(contentDispositionStr) {\n    const matches = [];\n    let match;\n    // Iterate over all filename*n= and filename*n*= with n being an integer\n    // of at least zero. Any non-zero number must not start with '0'.\n    const iter = toParamRegExp(\"filename\\\\*((?!0\\\\d)\\\\d+)(\\\\*?)\", \"ig\");\n    while ((match = iter.exec(contentDispositionStr)) !== null) {\n      let [, n, quot, part] = match; // eslint-disable-line prefer-const\n      n = parseInt(n, 10);\n      if (n in matches) {\n        // Ignore anything after the invalid second filename*0.\n        if (n === 0) {\n          break;\n        }\n        continue;\n      }\n      matches[n] = [quot, part];\n    }\n    const parts = [];\n    for (let n = 0; n < matches.length; ++n) {\n      if (!(n in matches)) {\n        // Numbers must be consecutive. Truncate when there is a hole.\n        break;\n      }\n      let [quot, part] = matches[n]; // eslint-disable-line prefer-const\n      part = rfc2616unquote(part);\n      if (quot) {\n        part = unescape(part);\n        if (n === 0) {\n          part = rfc5987decode(part);\n        }\n      }\n      parts.push(part);\n    }\n    return parts.join(\"\");\n  }\n  function rfc2616unquote(value) {\n    if (value.startsWith('\"')) {\n      const parts = value.slice(1).split('\\\\\"');\n      // Find the first unescaped \" and terminate there.\n      for (let i = 0; i < parts.length; ++i) {\n        const quotindex = parts[i].indexOf('\"');\n        if (quotindex !== -1) {\n          parts[i] = parts[i].slice(0, quotindex);\n          parts.length = i + 1; // Truncates and stop the iteration.\n        }\n        parts[i] = parts[i].replace(/\\\\(.)/g, \"$1\");\n      }\n      value = parts.join('\"');\n    }\n    return value;\n  }\n  function rfc5987decode(extvalue) {\n    // Decodes \"ext-value\" from RFC 5987.\n    const encodingend = extvalue.indexOf(\"'\");\n    if (encodingend === -1) {\n      // Some servers send \"filename*=\" without encoding 'language' prefix,\n      // e.g. in https://github.com/Rob--W/open-in-browser/issues/26\n      // Let's accept the value like Firefox (57) (Chrome 62 rejects it).\n      return extvalue;\n    }\n    const encoding = extvalue.slice(0, encodingend);\n    const langvalue = extvalue.slice(encodingend + 1);\n    // Ignore language (RFC 5987 section 3.2.1, and RFC 6266 section 4.1 ).\n    const value = langvalue.replace(/^[^']*'/, \"\");\n    return textdecode(encoding, value);\n  }\n  function rfc2047decode(value) {\n    // RFC 2047-decode the result. Firefox tried to drop support for it, but\n    // backed out because some servers use it - https://bugzil.la/875615\n    // Firefox's condition for decoding is here: https://searchfox.org/mozilla-central/rev/4a590a5a15e35d88a3b23dd6ac3c471cf85b04a8/netwerk/mime/nsMIMEHeaderParamImpl.cpp#742-748\n\n    // We are more strict and only recognize RFC 2047-encoding if the value\n    // starts with \"=?\", since then it is likely that the full value is\n    // RFC 2047-encoded.\n\n    // Firefox also decodes words even where RFC 2047 section 5 states:\n    // \"An 'encoded-word' MUST NOT appear within a 'quoted-string'.\"\n    if (!value.startsWith(\"=?\") || /[\\x00-\\x19\\x80-\\xff]/.test(value)) {\n      return value;\n    }\n    // RFC 2047, section 2.4\n    // encoded-word = \"=?\" charset \"?\" encoding \"?\" encoded-text \"?=\"\n    // charset = token (but let's restrict to characters that denote a\n    //       possibly valid encoding).\n    // encoding = q or b\n    // encoded-text = any printable ASCII character other than ? or space.\n    //        ... but Firefox permits ? and space.\n    return value.replace(\n      /=\\?([\\w-]*)\\?([QqBb])\\?((?:[^?]|\\?(?!=))*)\\?=/g,\n      function (matches, charset, encoding, text) {\n        if (encoding === \"q\" || encoding === \"Q\") {\n          // RFC 2047 section 4.2.\n          text = text.replace(/_/g, \" \");\n          text = text.replace(/=([0-9a-fA-F]{2})/g, function (match, hex) {\n            return String.fromCharCode(parseInt(hex, 16));\n          });\n          return textdecode(charset, text);\n        } // else encoding is b or B - base64 (RFC 2047 section 4.1)\n        try {\n          text = atob(text);\n        } catch (e) {}\n        return textdecode(charset, text);\n      }\n    );\n  }\n\n  return \"\";\n}\n\nexport { getFilenameFromContentDispositionHeader };\n","/* Copyright 2012 Mozilla Foundation\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport {\n  assert,\n  createPromiseCapability,\n  stringToBytes,\n} from \"../shared/util.js\";\nimport {\n  createResponseStatusError,\n  extractFilenameFromHeader,\n  validateRangeRequestCapabilities,\n} from \"./network_utils.js\";\n\nif (typeof PDFJSDev !== \"undefined\" && PDFJSDev.test(\"MOZCENTRAL\")) {\n  throw new Error(\n    'Module \"./network.js\" shall not be used with MOZCENTRAL builds.'\n  );\n}\n\nconst OK_RESPONSE = 200;\nconst PARTIAL_CONTENT_RESPONSE = 206;\n\nfunction getArrayBuffer(xhr) {\n  const data = xhr.response;\n  if (typeof data !== \"string\") {\n    return data;\n  }\n  const array = stringToBytes(data);\n  return array.buffer;\n}\n\nclass NetworkManager {\n  constructor(url, args = {}) {\n    this.url = url;\n    this.isHttp = /^https?:/i.test(url);\n    this.httpHeaders = (this.isHttp && args.httpHeaders) || Object.create(null);\n    this.withCredentials = args.withCredentials || false;\n    this.getXhr =\n      args.getXhr ||\n      function NetworkManager_getXhr() {\n        return new XMLHttpRequest();\n      };\n\n    this.currXhrId = 0;\n    this.pendingRequests = Object.create(null);\n  }\n\n  requestRange(begin, end, listeners) {\n    const args = {\n      begin,\n      end,\n    };\n    for (const prop in listeners) {\n      args[prop] = listeners[prop];\n    }\n    return this.request(args);\n  }\n\n  requestFull(listeners) {\n    return this.request(listeners);\n  }\n\n  request(args) {\n    const xhr = this.getXhr();\n    const xhrId = this.currXhrId++;\n    const pendingRequest = (this.pendingRequests[xhrId] = { xhr });\n\n    xhr.open(\"GET\", this.url);\n    xhr.withCredentials = this.withCredentials;\n    for (const property in this.httpHeaders) {\n      const value = this.httpHeaders[property];\n      if (typeof value === \"undefined\") {\n        continue;\n      }\n      xhr.setRequestHeader(property, value);\n    }\n    if (this.isHttp && \"begin\" in args && \"end\" in args) {\n      xhr.setRequestHeader(\"Range\", `bytes=${args.begin}-${args.end - 1}`);\n      pendingRequest.expectedStatus = PARTIAL_CONTENT_RESPONSE;\n    } else {\n      pendingRequest.expectedStatus = OK_RESPONSE;\n    }\n    xhr.responseType = \"arraybuffer\";\n\n    if (args.onError) {\n      xhr.onerror = function (evt) {\n        args.onError(xhr.status);\n      };\n    }\n    xhr.onreadystatechange = this.onStateChange.bind(this, xhrId);\n    xhr.onprogress = this.onProgress.bind(this, xhrId);\n\n    pendingRequest.onHeadersReceived = args.onHeadersReceived;\n    pendingRequest.onDone = args.onDone;\n    pendingRequest.onError = args.onError;\n    pendingRequest.onProgress = args.onProgress;\n\n    xhr.send(null);\n\n    return xhrId;\n  }\n\n  onProgress(xhrId, evt) {\n    const pendingRequest = this.pendingRequests[xhrId];\n    if (!pendingRequest) {\n      return; // Maybe abortRequest was called...\n    }\n    pendingRequest.onProgress?.(evt);\n  }\n\n  onStateChange(xhrId, evt) {\n    const pendingRequest = this.pendingRequests[xhrId];\n    if (!pendingRequest) {\n      return; // Maybe abortRequest was called...\n    }\n\n    const xhr = pendingRequest.xhr;\n    if (xhr.readyState >= 2 && pendingRequest.onHeadersReceived) {\n      pendingRequest.onHeadersReceived();\n      delete pendingRequest.onHeadersReceived;\n    }\n\n    if (xhr.readyState !== 4) {\n      return;\n    }\n\n    if (!(xhrId in this.pendingRequests)) {\n      // The XHR request might have been aborted in onHeadersReceived()\n      // callback, in which case we should abort request.\n      return;\n    }\n\n    delete this.pendingRequests[xhrId];\n\n    // Success status == 0 can be on ftp, file and other protocols.\n    if (xhr.status === 0 && this.isHttp) {\n      pendingRequest.onError?.(xhr.status);\n      return;\n    }\n    const xhrStatus = xhr.status || OK_RESPONSE;\n\n    // From http://www.w3.org/Protocols/rfc2616/rfc2616-sec14.html#sec14.35.2:\n    // \"A server MAY ignore the Range header\". This means it's possible to\n    // get a 200 rather than a 206 response from a range request.\n    const ok_response_on_range_request =\n      xhrStatus === OK_RESPONSE &&\n      pendingRequest.expectedStatus === PARTIAL_CONTENT_RESPONSE;\n\n    if (\n      !ok_response_on_range_request &&\n      xhrStatus !== pendingRequest.expectedStatus\n    ) {\n      pendingRequest.onError?.(xhr.status);\n      return;\n    }\n\n    const chunk = getArrayBuffer(xhr);\n    if (xhrStatus === PARTIAL_CONTENT_RESPONSE) {\n      const rangeHeader = xhr.getResponseHeader(\"Content-Range\");\n      const matches = /bytes (\\d+)-(\\d+)\\/(\\d+)/.exec(rangeHeader);\n      pendingRequest.onDone({\n        begin: parseInt(matches[1], 10),\n        chunk,\n      });\n    } else if (chunk) {\n      pendingRequest.onDone({\n        begin: 0,\n        chunk,\n      });\n    } else {\n      pendingRequest.onError?.(xhr.status);\n    }\n  }\n\n  getRequestXhr(xhrId) {\n    return this.pendingRequests[xhrId].xhr;\n  }\n\n  isPendingRequest(xhrId) {\n    return xhrId in this.pendingRequests;\n  }\n\n  abortRequest(xhrId) {\n    const xhr = this.pendingRequests[xhrId].xhr;\n    delete this.pendingRequests[xhrId];\n    xhr.abort();\n  }\n}\n\n/** @implements {IPDFStream} */\nclass PDFNetworkStream {\n  constructor(source) {\n    this._source = source;\n    this._manager = new NetworkManager(source.url, {\n      httpHeaders: source.httpHeaders,\n      withCredentials: source.withCredentials,\n    });\n    this._rangeChunkSize = source.rangeChunkSize;\n    this._fullRequestReader = null;\n    this._rangeRequestReaders = [];\n  }\n\n  _onRangeRequestReaderClosed(reader) {\n    const i = this._rangeRequestReaders.indexOf(reader);\n    if (i >= 0) {\n      this._rangeRequestReaders.splice(i, 1);\n    }\n  }\n\n  getFullReader() {\n    assert(\n      !this._fullRequestReader,\n      \"PDFNetworkStream.getFullReader can only be called once.\"\n    );\n    this._fullRequestReader = new PDFNetworkStreamFullRequestReader(\n      this._manager,\n      this._source\n    );\n    return this._fullRequestReader;\n  }\n\n  getRangeReader(begin, end) {\n    const reader = new PDFNetworkStreamRangeRequestReader(\n      this._manager,\n      begin,\n      end\n    );\n    reader.onClosed = this._onRangeRequestReaderClosed.bind(this);\n    this._rangeRequestReaders.push(reader);\n    return reader;\n  }\n\n  cancelAllRequests(reason) {\n    this._fullRequestReader?.cancel(reason);\n\n    for (const reader of this._rangeRequestReaders.slice(0)) {\n      reader.cancel(reason);\n    }\n  }\n}\n\n/** @implements {IPDFStreamReader} */\nclass PDFNetworkStreamFullRequestReader {\n  constructor(manager, source) {\n    this._manager = manager;\n\n    const args = {\n      onHeadersReceived: this._onHeadersReceived.bind(this),\n      onDone: this._onDone.bind(this),\n      onError: this._onError.bind(this),\n      onProgress: this._onProgress.bind(this),\n    };\n    this._url = source.url;\n    this._fullRequestId = manager.requestFull(args);\n    this._headersReceivedCapability = createPromiseCapability();\n    this._disableRange = source.disableRange || false;\n    this._contentLength = source.length; // Optional\n    this._rangeChunkSize = source.rangeChunkSize;\n    if (!this._rangeChunkSize && !this._disableRange) {\n      this._disableRange = true;\n    }\n\n    this._isStreamingSupported = false;\n    this._isRangeSupported = false;\n\n    this._cachedChunks = [];\n    this._requests = [];\n    this._done = false;\n    this._storedError = undefined;\n    this._filename = null;\n\n    this.onProgress = null;\n  }\n\n  _onHeadersReceived() {\n    const fullRequestXhrId = this._fullRequestId;\n    const fullRequestXhr = this._manager.getRequestXhr(fullRequestXhrId);\n\n    const getResponseHeader = name => {\n      return fullRequestXhr.getResponseHeader(name);\n    };\n    const { allowRangeRequests, suggestedLength } =\n      validateRangeRequestCapabilities({\n        getResponseHeader,\n        isHttp: this._manager.isHttp,\n        rangeChunkSize: this._rangeChunkSize,\n        disableRange: this._disableRange,\n      });\n\n    if (allowRangeRequests) {\n      this._isRangeSupported = true;\n    }\n    // Setting right content length.\n    this._contentLength = suggestedLength || this._contentLength;\n\n    this._filename = extractFilenameFromHeader(getResponseHeader);\n\n    if (this._isRangeSupported) {\n      // NOTE: by cancelling the full request, and then issuing range\n      // requests, there will be an issue for sites where you can only\n      // request the pdf once. However, if this is the case, then the\n      // server should not be returning that it can support range requests.\n      this._manager.abortRequest(fullRequestXhrId);\n    }\n\n    this._headersReceivedCapability.resolve();\n  }\n\n  _onDone(data) {\n    if (data) {\n      if (this._requests.length > 0) {\n        const requestCapability = this._requests.shift();\n        requestCapability.resolve({ value: data.chunk, done: false });\n      } else {\n        this._cachedChunks.push(data.chunk);\n      }\n    }\n    this._done = true;\n    if (this._cachedChunks.length > 0) {\n      return;\n    }\n    for (const requestCapability of this._requests) {\n      requestCapability.resolve({ value: undefined, done: true });\n    }\n    this._requests.length = 0;\n  }\n\n  _onError(status) {\n    this._storedError = createResponseStatusError(status, this._url);\n    this._headersReceivedCapability.reject(this._storedError);\n    for (const requestCapability of this._requests) {\n      requestCapability.reject(this._storedError);\n    }\n    this._requests.length = 0;\n    this._cachedChunks.length = 0;\n  }\n\n  _onProgress(evt) {\n    this.onProgress?.({\n      loaded: evt.loaded,\n      total: evt.lengthComputable ? evt.total : this._contentLength,\n    });\n  }\n\n  get filename() {\n    return this._filename;\n  }\n\n  get isRangeSupported() {\n    return this._isRangeSupported;\n  }\n\n  get isStreamingSupported() {\n    return this._isStreamingSupported;\n  }\n\n  get contentLength() {\n    return this._contentLength;\n  }\n\n  get headersReady() {\n    return this._headersReceivedCapability.promise;\n  }\n\n  async read() {\n    if (this._storedError) {\n      throw this._storedError;\n    }\n    if (this._cachedChunks.length > 0) {\n      const chunk = this._cachedChunks.shift();\n      return { value: chunk, done: false };\n    }\n    if (this._done) {\n      return { value: undefined, done: true };\n    }\n    const requestCapability = createPromiseCapability();\n    this._requests.push(requestCapability);\n    return requestCapability.promise;\n  }\n\n  cancel(reason) {\n    this._done = true;\n    this._headersReceivedCapability.reject(reason);\n    for (const requestCapability of this._requests) {\n      requestCapability.resolve({ value: undefined, done: true });\n    }\n    this._requests.length = 0;\n    if (this._manager.isPendingRequest(this._fullRequestId)) {\n      this._manager.abortRequest(this._fullRequestId);\n    }\n    this._fullRequestReader = null;\n  }\n}\n\n/** @implements {IPDFStreamRangeReader} */\nclass PDFNetworkStreamRangeRequestReader {\n  constructor(manager, begin, end) {\n    this._manager = manager;\n\n    const args = {\n      onDone: this._onDone.bind(this),\n      onError: this._onError.bind(this),\n      onProgress: this._onProgress.bind(this),\n    };\n    this._url = manager.url;\n    this._requestId = manager.requestRange(begin, end, args);\n    this._requests = [];\n    this._queuedChunk = null;\n    this._done = false;\n    this._storedError = undefined;\n\n    this.onProgress = null;\n    this.onClosed = null;\n  }\n\n  _close() {\n    this.onClosed?.(this);\n  }\n\n  _onDone(data) {\n    const chunk = data.chunk;\n    if (this._requests.length > 0) {\n      const requestCapability = this._requests.shift();\n      requestCapability.resolve({ value: chunk, done: false });\n    } else {\n      this._queuedChunk = chunk;\n    }\n    this._done = true;\n    for (const requestCapability of this._requests) {\n      requestCapability.resolve({ value: undefined, done: true });\n    }\n    this._requests.length = 0;\n    this._close();\n  }\n\n  _onError(status) {\n    this._storedError = createResponseStatusError(status, this._url);\n    for (const requestCapability of this._requests) {\n      requestCapability.reject(this._storedError);\n    }\n    this._requests.length = 0;\n    this._queuedChunk = null;\n  }\n\n  _onProgress(evt) {\n    if (!this.isStreamingSupported) {\n      this.onProgress?.({ loaded: evt.loaded });\n    }\n  }\n\n  get isStreamingSupported() {\n    return false;\n  }\n\n  async read() {\n    if (this._storedError) {\n      throw this._storedError;\n    }\n    if (this._queuedChunk !== null) {\n      const chunk = this._queuedChunk;\n      this._queuedChunk = null;\n      return { value: chunk, done: false };\n    }\n    if (this._done) {\n      return { value: undefined, done: true };\n    }\n    const requestCapability = createPromiseCapability();\n    this._requests.push(requestCapability);\n    return requestCapability.promise;\n  }\n\n  cancel(reason) {\n    this._done = true;\n    for (const requestCapability of this._requests) {\n      requestCapability.resolve({ value: undefined, done: true });\n    }\n    this._requests.length = 0;\n    if (this._manager.isPendingRequest(this._requestId)) {\n      this._manager.abortRequest(this._requestId);\n    }\n    this._close();\n  }\n}\n\nexport { PDFNetworkStream };\n","/* Copyright 2012 Mozilla Foundation\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport {\n  AbortException,\n  assert,\n  createPromiseCapability,\n} from \"../shared/util.js\";\nimport {\n  createResponseStatusError,\n  extractFilenameFromHeader,\n  validateRangeRequestCapabilities,\n  validateResponseStatus,\n} from \"./network_utils.js\";\n\nif (typeof PDFJSDev !== \"undefined\" && PDFJSDev.test(\"MOZCENTRAL\")) {\n  throw new Error(\n    'Module \"./fetch_stream.js\" shall not be used with MOZCENTRAL builds.'\n  );\n}\n\nfunction createFetchOptions(headers, withCredentials, abortController) {\n  return {\n    method: \"GET\",\n    headers,\n    signal: abortController?.signal,\n    mode: \"cors\",\n    credentials: withCredentials ? \"include\" : \"same-origin\",\n    redirect: \"follow\",\n  };\n}\n\nfunction createHeaders(httpHeaders) {\n  const headers = new Headers();\n  for (const property in httpHeaders) {\n    const value = httpHeaders[property];\n    if (typeof value === \"undefined\") {\n      continue;\n    }\n    headers.append(property, value);\n  }\n  return headers;\n}\n\n/** @implements {IPDFStream} */\nclass PDFFetchStream {\n  constructor(source) {\n    this.source = source;\n    this.isHttp = /^https?:/i.test(source.url);\n    this.httpHeaders = (this.isHttp && source.httpHeaders) || {};\n\n    this._fullRequestReader = null;\n    this._rangeRequestReaders = [];\n  }\n\n  get _progressiveDataLength() {\n    return this._fullRequestReader?._loaded ?? 0;\n  }\n\n  getFullReader() {\n    assert(\n      !this._fullRequestReader,\n      \"PDFFetchStream.getFullReader can only be called once.\"\n    );\n    this._fullRequestReader = new PDFFetchStreamReader(this);\n    return this._fullRequestReader;\n  }\n\n  getRangeReader(begin, end) {\n    if (end <= this._progressiveDataLength) {\n      return null;\n    }\n    const reader = new PDFFetchStreamRangeReader(this, begin, end);\n    this._rangeRequestReaders.push(reader);\n    return reader;\n  }\n\n  cancelAllRequests(reason) {\n    if (this._fullRequestReader) {\n      this._fullRequestReader.cancel(reason);\n    }\n    for (const reader of this._rangeRequestReaders.slice(0)) {\n      reader.cancel(reason);\n    }\n  }\n}\n\n/** @implements {IPDFStreamReader} */\nclass PDFFetchStreamReader {\n  constructor(stream) {\n    this._stream = stream;\n    this._reader = null;\n    this._loaded = 0;\n    this._filename = null;\n    const source = stream.source;\n    this._withCredentials = source.withCredentials || false;\n    this._contentLength = source.length;\n    this._headersCapability = createPromiseCapability();\n    this._disableRange = source.disableRange || false;\n    this._rangeChunkSize = source.rangeChunkSize;\n    if (!this._rangeChunkSize && !this._disableRange) {\n      this._disableRange = true;\n    }\n\n    if (typeof AbortController !== \"undefined\") {\n      this._abortController = new AbortController();\n    }\n    this._isStreamingSupported = !source.disableStream;\n    this._isRangeSupported = !source.disableRange;\n\n    this._headers = createHeaders(this._stream.httpHeaders);\n\n    const url = source.url;\n    fetch(\n      url,\n      createFetchOptions(\n        this._headers,\n        this._withCredentials,\n        this._abortController\n      )\n    )\n      .then(response => {\n        if (!validateResponseStatus(response.status)) {\n          throw createResponseStatusError(response.status, url);\n        }\n        this._reader = response.body.getReader();\n        this._headersCapability.resolve();\n\n        const getResponseHeader = name => {\n          return response.headers.get(name);\n        };\n        const { allowRangeRequests, suggestedLength } =\n          validateRangeRequestCapabilities({\n            getResponseHeader,\n            isHttp: this._stream.isHttp,\n            rangeChunkSize: this._rangeChunkSize,\n            disableRange: this._disableRange,\n          });\n\n        this._isRangeSupported = allowRangeRequests;\n        // Setting right content length.\n        this._contentLength = suggestedLength || this._contentLength;\n\n        this._filename = extractFilenameFromHeader(getResponseHeader);\n\n        // We need to stop reading when range is supported and streaming is\n        // disabled.\n        if (!this._isStreamingSupported && this._isRangeSupported) {\n          this.cancel(new AbortException(\"Streaming is disabled.\"));\n        }\n      })\n      .catch(this._headersCapability.reject);\n\n    this.onProgress = null;\n  }\n\n  get headersReady() {\n    return this._headersCapability.promise;\n  }\n\n  get filename() {\n    return this._filename;\n  }\n\n  get contentLength() {\n    return this._contentLength;\n  }\n\n  get isRangeSupported() {\n    return this._isRangeSupported;\n  }\n\n  get isStreamingSupported() {\n    return this._isStreamingSupported;\n  }\n\n  async read() {\n    await this._headersCapability.promise;\n    const { value, done } = await this._reader.read();\n    if (done) {\n      return { value, done };\n    }\n    this._loaded += value.byteLength;\n    if (this.onProgress) {\n      this.onProgress({\n        loaded: this._loaded,\n        total: this._contentLength,\n      });\n    }\n    const buffer = new Uint8Array(value).buffer;\n    return { value: buffer, done: false };\n  }\n\n  cancel(reason) {\n    if (this._reader) {\n      this._reader.cancel(reason);\n    }\n    if (this._abortController) {\n      this._abortController.abort();\n    }\n  }\n}\n\n/** @implements {IPDFStreamRangeReader} */\nclass PDFFetchStreamRangeReader {\n  constructor(stream, begin, end) {\n    this._stream = stream;\n    this._reader = null;\n    this._loaded = 0;\n    const source = stream.source;\n    this._withCredentials = source.withCredentials || false;\n    this._readCapability = createPromiseCapability();\n    this._isStreamingSupported = !source.disableStream;\n\n    if (typeof AbortController !== \"undefined\") {\n      this._abortController = new AbortController();\n    }\n\n    this._headers = createHeaders(this._stream.httpHeaders);\n    this._headers.append(\"Range\", `bytes=${begin}-${end - 1}`);\n\n    const url = source.url;\n    fetch(\n      url,\n      createFetchOptions(\n        this._headers,\n        this._withCredentials,\n        this._abortController\n      )\n    )\n      .then(response => {\n        if (!validateResponseStatus(response.status)) {\n          throw createResponseStatusError(response.status, url);\n        }\n        this._readCapability.resolve();\n        this._reader = response.body.getReader();\n      })\n      .catch(this._readCapability.reject);\n\n    this.onProgress = null;\n  }\n\n  get isStreamingSupported() {\n    return this._isStreamingSupported;\n  }\n\n  async read() {\n    await this._readCapability.promise;\n    const { value, done } = await this._reader.read();\n    if (done) {\n      return { value, done };\n    }\n    this._loaded += value.byteLength;\n    if (this.onProgress) {\n      this.onProgress({ loaded: this._loaded });\n    }\n    const buffer = new Uint8Array(value).buffer;\n    return { value: buffer, done: false };\n  }\n\n  cancel(reason) {\n    if (this._reader) {\n      this._reader.cancel(reason);\n    }\n    if (this._abortController) {\n      this._abortController.abort();\n    }\n  }\n}\n\nexport { PDFFetchStream };\n","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __w_pdfjs_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId](module, module.exports, __w_pdfjs_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","/* Copyright 2012 Mozilla Foundation\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n// eslint-disable-next-line max-len\n/** @typedef {import(\"./display/api\").PDFDocumentLoadingTask} PDFDocumentLoadingTask */\n/** @typedef {import(\"./display/api\").PDFDocumentProxy} PDFDocumentProxy */\n/** @typedef {import(\"./display/api\").PDFPageProxy} PDFPageProxy */\n/** @typedef {import(\"./display/api\").RenderTask} RenderTask */\n/** @typedef {import(\"./display/display_utils\").PageViewport} PageViewport */\n\nimport {\n  AnnotationMode,\n  CMapCompressionType,\n  createPromiseCapability,\n  createValidAbsoluteUrl,\n  InvalidPDFException,\n  MissingPDFException,\n  OPS,\n  PasswordResponses,\n  PermissionFlag,\n  shadow,\n  UnexpectedResponseException,\n  UNSUPPORTED_FEATURES,\n  Util,\n  VerbosityLevel,\n} from \"./shared/util.js\";\nimport {\n  build,\n  getDocument,\n  LoopbackPort,\n  PDFDataRangeTransport,\n  PDFWorker,\n  setPDFNetworkStreamFactory,\n  version,\n} from \"./display/api.js\";\nimport {\n  getFilenameFromUrl,\n  getPdfFilenameFromUrl,\n  getXfaPageViewport,\n  isPdfFile,\n  isValidFetchUrl,\n  loadScript,\n  PDFDateString,\n  PixelsPerInch,\n  RenderingCancelledException,\n} from \"./display/display_utils.js\";\nimport { AnnotationLayer } from \"./display/annotation_layer.js\";\nimport { GlobalWorkerOptions } from \"./display/worker_options.js\";\nimport { isNodeJS } from \"./shared/is_node.js\";\nimport { renderTextLayer } from \"./display/text_layer.js\";\nimport { SVGGraphics } from \"./display/svg.js\";\nimport { XfaLayer } from \"./display/xfa_layer.js\";\n\n/* eslint-disable-next-line no-unused-vars */\nconst pdfjsVersion =\n  typeof PDFJSDev !== \"undefined\" ? PDFJSDev.eval(\"BUNDLE_VERSION\") : void 0;\n/* eslint-disable-next-line no-unused-vars */\nconst pdfjsBuild =\n  typeof PDFJSDev !== \"undefined\" ? PDFJSDev.eval(\"BUNDLE_BUILD\") : void 0;\n\nif (typeof PDFJSDev === \"undefined\" || !PDFJSDev.test(\"PRODUCTION\")) {\n  const streamsPromise = Promise.all([\n    import(\"pdfjs/display/network.js\"),\n    import(\"pdfjs/display/fetch_stream.js\"),\n  ]);\n\n  setPDFNetworkStreamFactory(async params => {\n    const [{ PDFNetworkStream }, { PDFFetchStream }] = await streamsPromise;\n    if (isValidFetchUrl(params.url)) {\n      return new PDFFetchStream(params);\n    }\n    return new PDFNetworkStream(params);\n  });\n} else if (PDFJSDev.test(\"GENERIC || CHROME\")) {\n  if (PDFJSDev.test(\"GENERIC\") && isNodeJS) {\n    const { PDFNodeStream } = require(\"./display/node_stream.js\");\n\n    setPDFNetworkStreamFactory(params => {\n      return new PDFNodeStream(params);\n    });\n  } else {\n    const { PDFNetworkStream } = require(\"./display/network.js\");\n    const { PDFFetchStream } = require(\"./display/fetch_stream.js\");\n\n    setPDFNetworkStreamFactory(params => {\n      if (isValidFetchUrl(params.url)) {\n        return new PDFFetchStream(params);\n      }\n      return new PDFNetworkStream(params);\n    });\n  }\n}\n\nexport {\n  AnnotationLayer,\n  AnnotationMode,\n  build,\n  CMapCompressionType,\n  createPromiseCapability,\n  createValidAbsoluteUrl,\n  getDocument,\n  getFilenameFromUrl,\n  getPdfFilenameFromUrl,\n  getXfaPageViewport,\n  GlobalWorkerOptions,\n  InvalidPDFException,\n  isPdfFile,\n  loadScript,\n  LoopbackPort,\n  MissingPDFException,\n  OPS,\n  PasswordResponses,\n  PDFDataRangeTransport,\n  PDFDateString,\n  PDFWorker,\n  PermissionFlag,\n  PixelsPerInch,\n  RenderingCancelledException,\n  renderTextLayer,\n  shadow,\n  SVGGraphics,\n  UnexpectedResponseException,\n  UNSUPPORTED_FEATURES,\n  Util,\n  VerbosityLevel,\n  version,\n  XfaLayer,\n};\n","(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine(\"pdfjs-dist/web/pdf_viewer\", [], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"pdfjs-dist/web/pdf_viewer\"] = factory();\n\telse\n\t\troot[\"pdfjs-dist/web/pdf_viewer\"] = factory();\n})(this, () => {\nreturn ","/* Copyright 2014 Mozilla Foundation\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n/** @typedef {import(\"../src/display/api\").PDFPageProxy} PDFPageProxy */\n// eslint-disable-next-line max-len\n/** @typedef {import(\"../src/display/display_utils\").PageViewport} PageViewport */\n/** @typedef {import(\"./event_utils\").EventBus} EventBus */\n/** @typedef {import(\"./interfaces\").IDownloadManager} IDownloadManager */\n/** @typedef {import(\"./interfaces\").IL10n} IL10n */\n// eslint-disable-next-line max-len\n/** @typedef {import(\"./interfaces\").IPDFAnnotationLayerFactory} IPDFAnnotationLayerFactory */\n/** @typedef {import(\"./interfaces\").IPDFLinkService} IPDFLinkService */\n// eslint-disable-next-line max-len\n/** @typedef {import(\"./interfaces\").IPDFStructTreeLayerFactory} IPDFStructTreeLayerFactory */\n// eslint-disable-next-line max-len\n/** @typedef {import(\"./interfaces\").IPDFTextLayerFactory} IPDFTextLayerFactory */\n/** @typedef {import(\"./interfaces\").IPDFXfaLayerFactory} IPDFXfaLayerFactory */\n/** @typedef {import(\"./text_highlighter\").TextHighlighter} TextHighlighter */\n\nimport { AnnotationLayerBuilder } from \"./annotation_layer_builder.js\";\nimport { NullL10n } from \"./l10n_utils.js\";\nimport { SimpleLinkService } from \"./pdf_link_service.js\";\nimport { StructTreeLayerBuilder } from \"./struct_tree_layer_builder.js\";\nimport { TextLayerBuilder } from \"./text_layer_builder.js\";\nimport { XfaLayerBuilder } from \"./xfa_layer_builder.js\";\n\n/**\n * @implements IPDFAnnotationLayerFactory\n */\nclass DefaultAnnotationLayerFactory {\n  /**\n   * @param {HTMLDivElement} pageDiv\n   * @param {PDFPageProxy} pdfPage\n   * @param {AnnotationStorage} [annotationStorage]\n   * @param {string} [imageResourcesPath] - Path for image resources, mainly\n   *   for annotation icons. Include trailing slash.\n   * @param {boolean} renderForms\n   * @param {IL10n} l10n\n   * @param {boolean} [enableScripting]\n   * @param {Promise<boolean>} [hasJSActionsPromise]\n   * @param {Object} [mouseState]\n   * @param {Promise<Object<string, Array<Object>> | null>}\n   *   [fieldObjectsPromise]\n   * @param {Map<string, HTMLCanvasElement>} [annotationCanvasMap] - Map some\n   *   annotation ids with canvases used to render them.\n   * @returns {AnnotationLayerBuilder}\n   */\n  createAnnotationLayerBuilder(\n    pageDiv,\n    pdfPage,\n    annotationStorage = null,\n    imageResourcesPath = \"\",\n    renderForms = true,\n    l10n = NullL10n,\n    enableScripting = false,\n    hasJSActionsPromise = null,\n    mouseState = null,\n    fieldObjectsPromise = null,\n    annotationCanvasMap = null\n  ) {\n    return new AnnotationLayerBuilder({\n      pageDiv,\n      pdfPage,\n      imageResourcesPath,\n      renderForms,\n      linkService: new SimpleLinkService(),\n      l10n,\n      annotationStorage,\n      enableScripting,\n      hasJSActionsPromise,\n      fieldObjectsPromise,\n      mouseState,\n      annotationCanvasMap,\n    });\n  }\n}\n\n/**\n * @implements IPDFStructTreeLayerFactory\n */\nclass DefaultStructTreeLayerFactory {\n  /**\n   * @param {PDFPageProxy} pdfPage\n   * @returns {StructTreeLayerBuilder}\n   */\n  createStructTreeLayerBuilder(pdfPage) {\n    return new StructTreeLayerBuilder({\n      pdfPage,\n    });\n  }\n}\n\n/**\n * @implements IPDFTextLayerFactory\n */\nclass DefaultTextLayerFactory {\n  /**\n   * @param {HTMLDivElement} textLayerDiv\n   * @param {number} pageIndex\n   * @param {PageViewport} viewport\n   * @param {boolean} enhanceTextSelection\n   * @param {EventBus} eventBus\n   * @param {TextHighlighter} highlighter\n   * @returns {TextLayerBuilder}\n   */\n  createTextLayerBuilder(\n    textLayerDiv,\n    pageIndex,\n    viewport,\n    enhanceTextSelection = false,\n    eventBus,\n    highlighter\n  ) {\n    return new TextLayerBuilder({\n      textLayerDiv,\n      pageIndex,\n      viewport,\n      enhanceTextSelection,\n      eventBus,\n      highlighter,\n    });\n  }\n}\n\n/**\n * @implements IPDFXfaLayerFactory\n */\nclass DefaultXfaLayerFactory {\n  /**\n   * @param {HTMLDivElement} pageDiv\n   * @param {PDFPageProxy} pdfPage\n   * @param {AnnotationStorage} [annotationStorage]\n   * @param {Object} [xfaHtml]\n   */\n  createXfaLayerBuilder(\n    pageDiv,\n    pdfPage,\n    annotationStorage = null,\n    xfaHtml = null\n  ) {\n    return new XfaLayerBuilder({\n      pageDiv,\n      pdfPage,\n      annotationStorage,\n      linkService: new SimpleLinkService(),\n      xfaHtml,\n    });\n  }\n}\n\nexport {\n  DefaultAnnotationLayerFactory,\n  DefaultStructTreeLayerFactory,\n  DefaultTextLayerFactory,\n  DefaultXfaLayerFactory,\n};\n","/* Copyright 2014 Mozilla Foundation\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n/** @typedef {import(\"../src/display/api\").PDFPageProxy} PDFPageProxy */\n// eslint-disable-next-line max-len\n/** @typedef {import(\"../src/display/display_utils\").PageViewport} PageViewport */\n/** @typedef {import(\"./interfaces\").IDownloadManager} IDownloadManager */\n/** @typedef {import(\"./interfaces\").IL10n} IL10n */\n/** @typedef {import(\"./interfaces\").IPDFLinkService} IPDFLinkService */\n\nimport { AnnotationLayer } from \"pdfjs-lib\";\nimport { NullL10n } from \"./l10n_utils.js\";\n\n/**\n * @typedef {Object} AnnotationLayerBuilderOptions\n * @property {HTMLDivElement} pageDiv\n * @property {PDFPageProxy} pdfPage\n * @property {AnnotationStorage} [annotationStorage]\n * @property {string} [imageResourcesPath] - Path for image resources, mainly\n *   for annotation icons. Include trailing slash.\n * @property {boolean} renderForms\n * @property {IPDFLinkService} linkService\n * @property {IDownloadManager} downloadManager\n * @property {IL10n} l10n - Localization service.\n * @property {boolean} [enableScripting]\n * @property {Promise<boolean>} [hasJSActionsPromise]\n * @property {Promise<Object<string, Array<Object>> | null>}\n *   [fieldObjectsPromise]\n * @property {Object} [mouseState]\n * @property {Map<string, HTMLCanvasElement>} [annotationCanvasMap]\n */\n\nclass AnnotationLayerBuilder {\n  /**\n   * @param {AnnotationLayerBuilderOptions} options\n   */\n  constructor({\n    pageDiv,\n    pdfPage,\n    linkService,\n    downloadManager,\n    annotationStorage = null,\n    imageResourcesPath = \"\",\n    renderForms = true,\n    l10n = NullL10n,\n    enableScripting = false,\n    hasJSActionsPromise = null,\n    fieldObjectsPromise = null,\n    mouseState = null,\n    annotationCanvasMap = null,\n  }) {\n    this.pageDiv = pageDiv;\n    this.pdfPage = pdfPage;\n    this.linkService = linkService;\n    this.downloadManager = downloadManager;\n    this.imageResourcesPath = imageResourcesPath;\n    this.renderForms = renderForms;\n    this.l10n = l10n;\n    this.annotationStorage = annotationStorage;\n    this.enableScripting = enableScripting;\n    this._hasJSActionsPromise = hasJSActionsPromise;\n    this._fieldObjectsPromise = fieldObjectsPromise;\n    this._mouseState = mouseState;\n    this._annotationCanvasMap = annotationCanvasMap;\n\n    this.div = null;\n    this._cancelled = false;\n  }\n\n  /**\n   * @param {PageViewport} viewport\n   * @param {string} intent (default value is 'display')\n   * @returns {Promise<void>} A promise that is resolved when rendering of the\n   *   annotations is complete.\n   */\n  async render(viewport, intent = \"display\") {\n    const [annotations, hasJSActions = false, fieldObjects = null] =\n      await Promise.all([\n        this.pdfPage.getAnnotations({ intent }),\n        this._hasJSActionsPromise,\n        this._fieldObjectsPromise,\n      ]);\n\n    if (this._cancelled || annotations.length === 0) {\n      return;\n    }\n\n    const parameters = {\n      viewport: viewport.clone({ dontFlip: true }),\n      div: this.div,\n      annotations,\n      page: this.pdfPage,\n      imageResourcesPath: this.imageResourcesPath,\n      renderForms: this.renderForms,\n      linkService: this.linkService,\n      downloadManager: this.downloadManager,\n      annotationStorage: this.annotationStorage,\n      enableScripting: this.enableScripting,\n      hasJSActions,\n      fieldObjects,\n      mouseState: this._mouseState,\n      annotationCanvasMap: this._annotationCanvasMap,\n    };\n\n    if (this.div) {\n      // If an annotationLayer already exists, refresh its children's\n      // transformation matrices.\n      AnnotationLayer.update(parameters);\n    } else {\n      // Create an annotation layer div and render the annotations\n      // if there is at least one annotation.\n      this.div = document.createElement(\"div\");\n      this.div.className = \"annotationLayer\";\n      this.pageDiv.appendChild(this.div);\n      parameters.div = this.div;\n\n      AnnotationLayer.render(parameters);\n      this.l10n.translate(this.div);\n    }\n  }\n\n  cancel() {\n    this._cancelled = true;\n  }\n\n  hide() {\n    if (!this.div) {\n      return;\n    }\n    this.div.hidden = true;\n  }\n}\n\nexport { AnnotationLayerBuilder };\n","/* Copyright 2016 Mozilla Foundation\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n/* globals module, __non_webpack_require__ */\n\n\"use strict\";\n\nlet pdfjsLib;\nif (typeof window !== \"undefined\" && window[\"pdfjs-dist/build/pdf\"]) {\n  pdfjsLib = window[\"pdfjs-dist/build/pdf\"];\n} else {\n  pdfjsLib = __non_webpack_require__(\"../build/pdf.js\");\n}\nmodule.exports = pdfjsLib;\n","/* Copyright 2021 Mozilla Foundation\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n/**\n * A subset of the l10n strings in the `l10n/en-US/viewer.properties` file.\n */\nconst DEFAULT_L10N_STRINGS = {\n  of_pages: \"of {{pagesCount}}\",\n  page_of_pages: \"({{pageNumber}} of {{pagesCount}})\",\n\n  document_properties_kb: \"{{size_kb}} KB ({{size_b}} bytes)\",\n  document_properties_mb: \"{{size_mb}} MB ({{size_b}} bytes)\",\n  document_properties_date_string: \"{{date}}, {{time}}\",\n  document_properties_page_size_unit_inches: \"in\",\n  document_properties_page_size_unit_millimeters: \"mm\",\n  document_properties_page_size_orientation_portrait: \"portrait\",\n  document_properties_page_size_orientation_landscape: \"landscape\",\n  document_properties_page_size_name_a3: \"A3\",\n  document_properties_page_size_name_a4: \"A4\",\n  document_properties_page_size_name_letter: \"Letter\",\n  document_properties_page_size_name_legal: \"Legal\",\n  document_properties_page_size_dimension_string:\n    \"{{width}}  {{height}} {{unit}} ({{orientation}})\",\n  document_properties_page_size_dimension_name_string:\n    \"{{width}}  {{height}} {{unit}} ({{name}}, {{orientation}})\",\n  document_properties_linearized_yes: \"Yes\",\n  document_properties_linearized_no: \"No\",\n\n  print_progress_percent: \"{{progress}}%\",\n\n  \"toggle_sidebar.title\": \"Toggle Sidebar\",\n  \"toggle_sidebar_notification2.title\":\n    \"Toggle Sidebar (document contains outline/attachments/layers)\",\n\n  additional_layers: \"Additional Layers\",\n  page_landmark: \"Page {{page}}\",\n  thumb_page_title: \"Page {{page}}\",\n  thumb_page_canvas: \"Thumbnail of Page {{page}}\",\n\n  find_reached_top: \"Reached top of document, continued from bottom\",\n  find_reached_bottom: \"Reached end of document, continued from top\",\n  \"find_match_count[one]\": \"{{current}} of {{total}} match\",\n  \"find_match_count[other]\": \"{{current}} of {{total}} matches\",\n  \"find_match_count_limit[one]\": \"More than {{limit}} match\",\n  \"find_match_count_limit[other]\": \"More than {{limit}} matches\",\n  find_not_found: \"Phrase not found\",\n\n  error_version_info: \"PDF.js v{{version}} (build: {{build}})\",\n  error_message: \"Message: {{message}}\",\n  error_stack: \"Stack: {{stack}}\",\n  error_file: \"File: {{file}}\",\n  error_line: \"Line: {{line}}\",\n  rendering_error: \"An error occurred while rendering the page.\",\n\n  page_scale_width: \"Page Width\",\n  page_scale_fit: \"Page Fit\",\n  page_scale_auto: \"Automatic Zoom\",\n  page_scale_actual: \"Actual Size\",\n  page_scale_percent: \"{{scale}}%\",\n\n  loading: \"Loading\",\n  loading_error: \"An error occurred while loading the PDF.\",\n  invalid_file_error: \"Invalid or corrupted PDF file.\",\n  missing_file_error: \"Missing PDF file.\",\n  unexpected_response_error: \"Unexpected server response.\",\n\n  printing_not_supported:\n    \"Warning: Printing is not fully supported by this browser.\",\n  printing_not_ready: \"Warning: The PDF is not fully loaded for printing.\",\n  web_fonts_disabled:\n    \"Web fonts are disabled: unable to use embedded PDF fonts.\",\n};\n\nfunction getL10nFallback(key, args) {\n  switch (key) {\n    case \"find_match_count\":\n      key = `find_match_count[${args.total === 1 ? \"one\" : \"other\"}]`;\n      break;\n    case \"find_match_count_limit\":\n      key = `find_match_count_limit[${args.limit === 1 ? \"one\" : \"other\"}]`;\n      break;\n  }\n  return DEFAULT_L10N_STRINGS[key] || \"\";\n}\n\nconst PARTIAL_LANG_CODES = {\n  en: \"en-US\",\n  es: \"es-ES\",\n  fy: \"fy-NL\",\n  ga: \"ga-IE\",\n  gu: \"gu-IN\",\n  hi: \"hi-IN\",\n  hy: \"hy-AM\",\n  nb: \"nb-NO\",\n  ne: \"ne-NP\",\n  nn: \"nn-NO\",\n  pa: \"pa-IN\",\n  pt: \"pt-PT\",\n  sv: \"sv-SE\",\n  zh: \"zh-CN\",\n};\n\n// Try to support \"incompletely\" specified language codes (see issue 13689).\nfunction fixupLangCode(langCode) {\n  return PARTIAL_LANG_CODES[langCode?.toLowerCase()] || langCode;\n}\n\n// Replaces {{arguments}} with their values.\nfunction formatL10nValue(text, args) {\n  if (!args) {\n    return text;\n  }\n  return text.replace(/\\{\\{\\s*(\\w+)\\s*\\}\\}/g, (all, name) => {\n    return name in args ? args[name] : \"{{\" + name + \"}}\";\n  });\n}\n\n/**\n * No-op implementation of the localization service.\n * @implements {IL10n}\n */\nconst NullL10n = {\n  async getLanguage() {\n    return \"en-us\";\n  },\n\n  async getDirection() {\n    return \"ltr\";\n  },\n\n  async get(key, args = null, fallback = getL10nFallback(key, args)) {\n    return formatL10nValue(fallback, args);\n  },\n\n  async translate(element) {},\n};\n\nexport { fixupLangCode, getL10nFallback, NullL10n };\n","/* Copyright 2015 Mozilla Foundation\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n/** @typedef {import(\"./event_utils\").EventBus} EventBus */\n/** @typedef {import(\"./interfaces\").IPDFLinkService} IPDFLinkService */\n\nimport { parseQueryString, removeNullCharacters } from \"./ui_utils.js\";\n\nconst DEFAULT_LINK_REL = \"noopener noreferrer nofollow\";\n\nconst LinkTarget = {\n  NONE: 0, // Default value.\n  SELF: 1,\n  BLANK: 2,\n  PARENT: 3,\n  TOP: 4,\n};\n\n/**\n * @typedef {Object} ExternalLinkParameters\n * @property {string} url - An absolute URL.\n * @property {LinkTarget} [target] - The link target. The default value is\n *   `LinkTarget.NONE`.\n * @property {string} [rel] - The link relationship. The default value is\n *   `DEFAULT_LINK_REL`.\n * @property {boolean} [enabled] - Whether the link should be enabled. The\n *   default value is true.\n */\n\n/**\n * Adds various attributes (href, title, target, rel) to hyperlinks.\n * @param {HTMLAnchorElement} link - The link element.\n * @param {ExternalLinkParameters} params\n */\nfunction addLinkAttributes(link, { url, target, rel, enabled = true } = {}) {\n  if (!url || typeof url !== \"string\") {\n    throw new Error('A valid \"url\" parameter must provided.');\n  }\n\n  const urlNullRemoved = removeNullCharacters(url);\n  if (enabled) {\n    link.href = link.title = urlNullRemoved;\n  } else {\n    link.href = \"\";\n    link.title = `Disabled: ${urlNullRemoved}`;\n    link.onclick = () => {\n      return false;\n    };\n  }\n\n  let targetStr = \"\"; // LinkTarget.NONE\n  switch (target) {\n    case LinkTarget.NONE:\n      break;\n    case LinkTarget.SELF:\n      targetStr = \"_self\";\n      break;\n    case LinkTarget.BLANK:\n      targetStr = \"_blank\";\n      break;\n    case LinkTarget.PARENT:\n      targetStr = \"_parent\";\n      break;\n    case LinkTarget.TOP:\n      targetStr = \"_top\";\n      break;\n  }\n  link.target = targetStr;\n\n  link.rel = typeof rel === \"string\" ? rel : DEFAULT_LINK_REL;\n}\n\n/**\n * @typedef {Object} PDFLinkServiceOptions\n * @property {EventBus} eventBus - The application event bus.\n * @property {number} [externalLinkTarget] - Specifies the `target` attribute\n *   for external links. Must use one of the values from {LinkTarget}.\n *   Defaults to using no target.\n * @property {string} [externalLinkRel] - Specifies the `rel` attribute for\n *   external links. Defaults to stripping the referrer.\n * @property {boolean} [ignoreDestinationZoom] - Ignores the zoom argument,\n *   thus preserving the current zoom level in the viewer, when navigating\n *   to internal destinations. The default value is `false`.\n */\n\n/**\n * Performs navigation functions inside PDF, such as opening specified page,\n * or destination.\n * @implements {IPDFLinkService}\n */\nclass PDFLinkService {\n  #pagesRefCache = new Map();\n\n  /**\n   * @param {PDFLinkServiceOptions} options\n   */\n  constructor({\n    eventBus,\n    externalLinkTarget = null,\n    externalLinkRel = null,\n    ignoreDestinationZoom = false,\n  } = {}) {\n    this.eventBus = eventBus;\n    this.externalLinkTarget = externalLinkTarget;\n    this.externalLinkRel = externalLinkRel;\n    this.externalLinkEnabled = true;\n    this._ignoreDestinationZoom = ignoreDestinationZoom;\n\n    this.baseUrl = null;\n    this.pdfDocument = null;\n    this.pdfViewer = null;\n    this.pdfHistory = null;\n  }\n\n  setDocument(pdfDocument, baseUrl = null) {\n    this.baseUrl = baseUrl;\n    this.pdfDocument = pdfDocument;\n    this.#pagesRefCache.clear();\n  }\n\n  setViewer(pdfViewer) {\n    this.pdfViewer = pdfViewer;\n  }\n\n  setHistory(pdfHistory) {\n    this.pdfHistory = pdfHistory;\n  }\n\n  /**\n   * @type {number}\n   */\n  get pagesCount() {\n    return this.pdfDocument ? this.pdfDocument.numPages : 0;\n  }\n\n  /**\n   * @type {number}\n   */\n  get page() {\n    return this.pdfViewer.currentPageNumber;\n  }\n\n  /**\n   * @param {number} value\n   */\n  set page(value) {\n    this.pdfViewer.currentPageNumber = value;\n  }\n\n  /**\n   * @type {number}\n   */\n  get rotation() {\n    return this.pdfViewer.pagesRotation;\n  }\n\n  /**\n   * @param {number} value\n   */\n  set rotation(value) {\n    this.pdfViewer.pagesRotation = value;\n  }\n\n  #goToDestinationHelper(rawDest, namedDest = null, explicitDest) {\n    // Dest array looks like that: <page-ref> </XYZ|/FitXXX> <args..>\n    const destRef = explicitDest[0];\n    let pageNumber;\n\n    if (typeof destRef === \"object\" && destRef !== null) {\n      pageNumber = this._cachedPageNumber(destRef);\n\n      if (!pageNumber) {\n        // Fetch the page reference if it's not yet available. This could\n        // only occur during loading, before all pages have been resolved.\n        this.pdfDocument\n          .getPageIndex(destRef)\n          .then(pageIndex => {\n            this.cachePageRef(pageIndex + 1, destRef);\n            this.#goToDestinationHelper(rawDest, namedDest, explicitDest);\n          })\n          .catch(() => {\n            console.error(\n              `PDFLinkService.#goToDestinationHelper: \"${destRef}\" is not ` +\n                `a valid page reference, for dest=\"${rawDest}\".`\n            );\n          });\n        return;\n      }\n    } else if (Number.isInteger(destRef)) {\n      pageNumber = destRef + 1;\n    } else {\n      console.error(\n        `PDFLinkService.#goToDestinationHelper: \"${destRef}\" is not ` +\n          `a valid destination reference, for dest=\"${rawDest}\".`\n      );\n      return;\n    }\n    if (!pageNumber || pageNumber < 1 || pageNumber > this.pagesCount) {\n      console.error(\n        `PDFLinkService.#goToDestinationHelper: \"${pageNumber}\" is not ` +\n          `a valid page number, for dest=\"${rawDest}\".`\n      );\n      return;\n    }\n\n    if (this.pdfHistory) {\n      // Update the browser history before scrolling the new destination into\n      // view, to be able to accurately capture the current document position.\n      this.pdfHistory.pushCurrentPosition();\n      this.pdfHistory.push({ namedDest, explicitDest, pageNumber });\n    }\n\n    this.pdfViewer.scrollPageIntoView({\n      pageNumber,\n      destArray: explicitDest,\n      ignoreDestinationZoom: this._ignoreDestinationZoom,\n    });\n  }\n\n  /**\n   * This method will, when available, also update the browser history.\n   *\n   * @param {string|Array} dest - The named, or explicit, PDF destination.\n   */\n  async goToDestination(dest) {\n    if (!this.pdfDocument) {\n      return;\n    }\n    let namedDest, explicitDest;\n    if (typeof dest === \"string\") {\n      namedDest = dest;\n      explicitDest = await this.pdfDocument.getDestination(dest);\n    } else {\n      namedDest = null;\n      explicitDest = await dest;\n    }\n    if (!Array.isArray(explicitDest)) {\n      console.error(\n        `PDFLinkService.goToDestination: \"${explicitDest}\" is not ` +\n          `a valid destination array, for dest=\"${dest}\".`\n      );\n      return;\n    }\n    this.#goToDestinationHelper(dest, namedDest, explicitDest);\n  }\n\n  /**\n   * This method will, when available, also update the browser history.\n   *\n   * @param {number|string} val - The page number, or page label.\n   */\n  goToPage(val) {\n    if (!this.pdfDocument) {\n      return;\n    }\n    const pageNumber =\n      (typeof val === \"string\" && this.pdfViewer.pageLabelToPageNumber(val)) ||\n      val | 0;\n    if (\n      !(\n        Number.isInteger(pageNumber) &&\n        pageNumber > 0 &&\n        pageNumber <= this.pagesCount\n      )\n    ) {\n      console.error(`PDFLinkService.goToPage: \"${val}\" is not a valid page.`);\n      return;\n    }\n\n    if (this.pdfHistory) {\n      // Update the browser history before scrolling the new page into view,\n      // to be able to accurately capture the current document position.\n      this.pdfHistory.pushCurrentPosition();\n      this.pdfHistory.pushPage(pageNumber);\n    }\n\n    this.pdfViewer.scrollPageIntoView({ pageNumber });\n  }\n\n  /**\n   * Wrapper around the `addLinkAttributes` helper function.\n   * @param {HTMLAnchorElement} link\n   * @param {string} url\n   * @param {boolean} [newWindow]\n   */\n  addLinkAttributes(link, url, newWindow = false) {\n    addLinkAttributes(link, {\n      url,\n      target: newWindow ? LinkTarget.BLANK : this.externalLinkTarget,\n      rel: this.externalLinkRel,\n      enabled: this.externalLinkEnabled,\n    });\n  }\n\n  /**\n   * @param {string|Array} dest - The PDF destination object.\n   * @returns {string} The hyperlink to the PDF object.\n   */\n  getDestinationHash(dest) {\n    if (typeof dest === \"string\") {\n      if (dest.length > 0) {\n        return this.getAnchorUrl(\"#\" + escape(dest));\n      }\n    } else if (Array.isArray(dest)) {\n      const str = JSON.stringify(dest);\n      if (str.length > 0) {\n        return this.getAnchorUrl(\"#\" + escape(str));\n      }\n    }\n    return this.getAnchorUrl(\"\");\n  }\n\n  /**\n   * Prefix the full url on anchor links to make sure that links are resolved\n   * relative to the current URL instead of the one defined in <base href>.\n   * @param {string} anchor - The anchor hash, including the #.\n   * @returns {string} The hyperlink to the PDF object.\n   */\n  getAnchorUrl(anchor) {\n    return (this.baseUrl || \"\") + anchor;\n  }\n\n  /**\n   * @param {string} hash\n   */\n  setHash(hash) {\n    if (!this.pdfDocument) {\n      return;\n    }\n    let pageNumber, dest;\n    if (hash.includes(\"=\")) {\n      const params = parseQueryString(hash);\n      if (params.has(\"search\")) {\n        this.eventBus.dispatch(\"findfromurlhash\", {\n          source: this,\n          query: params.get(\"search\").replace(/\"/g, \"\"),\n          phraseSearch: params.get(\"phrase\") === \"true\",\n        });\n      }\n      // borrowing syntax from \"Parameters for Opening PDF Files\"\n      if (params.has(\"page\")) {\n        pageNumber = params.get(\"page\") | 0 || 1;\n      }\n      if (params.has(\"zoom\")) {\n        // Build the destination array.\n        const zoomArgs = params.get(\"zoom\").split(\",\"); // scale,left,top\n        const zoomArg = zoomArgs[0];\n        const zoomArgNumber = parseFloat(zoomArg);\n\n        if (!zoomArg.includes(\"Fit\")) {\n          // If the zoomArg is a number, it has to get divided by 100. If it's\n          // a string, it should stay as it is.\n          dest = [\n            null,\n            { name: \"XYZ\" },\n            zoomArgs.length > 1 ? zoomArgs[1] | 0 : null,\n            zoomArgs.length > 2 ? zoomArgs[2] | 0 : null,\n            zoomArgNumber ? zoomArgNumber / 100 : zoomArg,\n          ];\n        } else {\n          if (zoomArg === \"Fit\" || zoomArg === \"FitB\") {\n            dest = [null, { name: zoomArg }];\n          } else if (\n            zoomArg === \"FitH\" ||\n            zoomArg === \"FitBH\" ||\n            zoomArg === \"FitV\" ||\n            zoomArg === \"FitBV\"\n          ) {\n            dest = [\n              null,\n              { name: zoomArg },\n              zoomArgs.length > 1 ? zoomArgs[1] | 0 : null,\n            ];\n          } else if (zoomArg === \"FitR\") {\n            if (zoomArgs.length !== 5) {\n              console.error(\n                'PDFLinkService.setHash: Not enough parameters for \"FitR\".'\n              );\n            } else {\n              dest = [\n                null,\n                { name: zoomArg },\n                zoomArgs[1] | 0,\n                zoomArgs[2] | 0,\n                zoomArgs[3] | 0,\n                zoomArgs[4] | 0,\n              ];\n            }\n          } else {\n            console.error(\n              `PDFLinkService.setHash: \"${zoomArg}\" is not a valid zoom value.`\n            );\n          }\n        }\n      }\n      if (dest) {\n        this.pdfViewer.scrollPageIntoView({\n          pageNumber: pageNumber || this.page,\n          destArray: dest,\n          allowNegativeOffset: true,\n        });\n      } else if (pageNumber) {\n        this.page = pageNumber; // simple page\n      }\n      if (params.has(\"pagemode\")) {\n        this.eventBus.dispatch(\"pagemode\", {\n          source: this,\n          mode: params.get(\"pagemode\"),\n        });\n      }\n      // Ensure that this parameter is *always* handled last, in order to\n      // guarantee that it won't be overridden (e.g. by the \"page\" parameter).\n      if (params.has(\"nameddest\")) {\n        this.goToDestination(params.get(\"nameddest\"));\n      }\n    } else {\n      // Named (or explicit) destination.\n      dest = unescape(hash);\n      try {\n        dest = JSON.parse(dest);\n\n        if (!Array.isArray(dest)) {\n          // Avoid incorrectly rejecting a valid named destination, such as\n          // e.g. \"4.3\" or \"true\", because `JSON.parse` converted its type.\n          dest = dest.toString();\n        }\n      } catch (ex) {}\n\n      if (\n        typeof dest === \"string\" ||\n        PDFLinkService.#isValidExplicitDestination(dest)\n      ) {\n        this.goToDestination(dest);\n        return;\n      }\n      console.error(\n        `PDFLinkService.setHash: \"${unescape(\n          hash\n        )}\" is not a valid destination.`\n      );\n    }\n  }\n\n  /**\n   * @param {string} action\n   */\n  executeNamedAction(action) {\n    // See PDF reference, table 8.45 - Named action\n    switch (action) {\n      case \"GoBack\":\n        this.pdfHistory?.back();\n        break;\n\n      case \"GoForward\":\n        this.pdfHistory?.forward();\n        break;\n\n      case \"NextPage\":\n        this.pdfViewer.nextPage();\n        break;\n\n      case \"PrevPage\":\n        this.pdfViewer.previousPage();\n        break;\n\n      case \"LastPage\":\n        this.page = this.pagesCount;\n        break;\n\n      case \"FirstPage\":\n        this.page = 1;\n        break;\n\n      default:\n        break; // No action according to spec\n    }\n\n    this.eventBus.dispatch(\"namedaction\", {\n      source: this,\n      action,\n    });\n  }\n\n  /**\n   * @param {number} pageNum - page number.\n   * @param {Object} pageRef - reference to the page.\n   */\n  cachePageRef(pageNum, pageRef) {\n    if (!pageRef) {\n      return;\n    }\n    const refStr =\n      pageRef.gen === 0 ? `${pageRef.num}R` : `${pageRef.num}R${pageRef.gen}`;\n    this.#pagesRefCache.set(refStr, pageNum);\n  }\n\n  /**\n   * @ignore\n   */\n  _cachedPageNumber(pageRef) {\n    if (!pageRef) {\n      return null;\n    }\n    const refStr =\n      pageRef.gen === 0 ? `${pageRef.num}R` : `${pageRef.num}R${pageRef.gen}`;\n    return this.#pagesRefCache.get(refStr) || null;\n  }\n\n  /**\n   * @param {number} pageNumber\n   */\n  isPageVisible(pageNumber) {\n    return this.pdfViewer.isPageVisible(pageNumber);\n  }\n\n  /**\n   * @param {number} pageNumber\n   */\n  isPageCached(pageNumber) {\n    return this.pdfViewer.isPageCached(pageNumber);\n  }\n\n  static #isValidExplicitDestination(dest) {\n    if (!Array.isArray(dest)) {\n      return false;\n    }\n    const destLength = dest.length;\n    if (destLength < 2) {\n      return false;\n    }\n    const page = dest[0];\n    if (\n      !(\n        typeof page === \"object\" &&\n        Number.isInteger(page.num) &&\n        Number.isInteger(page.gen)\n      ) &&\n      !(Number.isInteger(page) && page >= 0)\n    ) {\n      return false;\n    }\n    const zoom = dest[1];\n    if (!(typeof zoom === \"object\" && typeof zoom.name === \"string\")) {\n      return false;\n    }\n    let allowNull = true;\n    switch (zoom.name) {\n      case \"XYZ\":\n        if (destLength !== 5) {\n          return false;\n        }\n        break;\n      case \"Fit\":\n      case \"FitB\":\n        return destLength === 2;\n      case \"FitH\":\n      case \"FitBH\":\n      case \"FitV\":\n      case \"FitBV\":\n        if (destLength !== 3) {\n          return false;\n        }\n        break;\n      case \"FitR\":\n        if (destLength !== 6) {\n          return false;\n        }\n        allowNull = false;\n        break;\n      default:\n        return false;\n    }\n    for (let i = 2; i < destLength; i++) {\n      const param = dest[i];\n      if (!(typeof param === \"number\" || (allowNull && param === null))) {\n        return false;\n      }\n    }\n    return true;\n  }\n}\n\n/**\n * @implements {IPDFLinkService}\n */\nclass SimpleLinkService {\n  constructor() {\n    this.externalLinkEnabled = true;\n  }\n\n  /**\n   * @type {number}\n   */\n  get pagesCount() {\n    return 0;\n  }\n\n  /**\n   * @type {number}\n   */\n  get page() {\n    return 0;\n  }\n\n  /**\n   * @param {number} value\n   */\n  set page(value) {}\n\n  /**\n   * @type {number}\n   */\n  get rotation() {\n    return 0;\n  }\n\n  /**\n   * @param {number} value\n   */\n  set rotation(value) {}\n\n  /**\n   * @param {string|Array} dest - The named, or explicit, PDF destination.\n   */\n  async goToDestination(dest) {}\n\n  /**\n   * @param {number|string} val - The page number, or page label.\n   */\n  goToPage(val) {}\n\n  /**\n   * @param {HTMLAnchorElement} link\n   * @param {string} url\n   * @param {boolean} [newWindow]\n   */\n  addLinkAttributes(link, url, newWindow = false) {\n    addLinkAttributes(link, { url, enabled: this.externalLinkEnabled });\n  }\n\n  /**\n   * @param dest - The PDF destination object.\n   * @returns {string} The hyperlink to the PDF object.\n   */\n  getDestinationHash(dest) {\n    return \"#\";\n  }\n\n  /**\n   * @param hash - The PDF parameters/hash.\n   * @returns {string} The hyperlink to the PDF object.\n   */\n  getAnchorUrl(hash) {\n    return \"#\";\n  }\n\n  /**\n   * @param {string} hash\n   */\n  setHash(hash) {}\n\n  /**\n   * @param {string} action\n   */\n  executeNamedAction(action) {}\n\n  /**\n   * @param {number} pageNum - page number.\n   * @param {Object} pageRef - reference to the page.\n   */\n  cachePageRef(pageNum, pageRef) {}\n\n  /**\n   * @param {number} pageNumber\n   */\n  isPageVisible(pageNumber) {\n    return true;\n  }\n\n  /**\n   * @param {number} pageNumber\n   */\n  isPageCached(pageNumber) {\n    return true;\n  }\n}\n\nexport { LinkTarget, PDFLinkService, SimpleLinkService };\n","/* Copyright 2012 Mozilla Foundation\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nconst DEFAULT_SCALE_VALUE = \"auto\";\nconst DEFAULT_SCALE = 1.0;\nconst DEFAULT_SCALE_DELTA = 1.1;\nconst MIN_SCALE = 0.1;\nconst MAX_SCALE = 10.0;\nconst UNKNOWN_SCALE = 0;\nconst MAX_AUTO_SCALE = 1.25;\nconst SCROLLBAR_PADDING = 40;\nconst VERTICAL_PADDING = 5;\n\nconst RenderingStates = {\n  INITIAL: 0,\n  RUNNING: 1,\n  PAUSED: 2,\n  FINISHED: 3,\n};\n\nconst PresentationModeState = {\n  UNKNOWN: 0,\n  NORMAL: 1,\n  CHANGING: 2,\n  FULLSCREEN: 3,\n};\n\nconst SidebarView = {\n  UNKNOWN: -1,\n  NONE: 0,\n  THUMBS: 1, // Default value.\n  OUTLINE: 2,\n  ATTACHMENTS: 3,\n  LAYERS: 4,\n};\n\nconst RendererType = {\n  CANVAS: \"canvas\",\n  SVG: \"svg\",\n};\n\nconst TextLayerMode = {\n  DISABLE: 0,\n  ENABLE: 1,\n  ENABLE_ENHANCE: 2,\n};\n\nconst ScrollMode = {\n  UNKNOWN: -1,\n  VERTICAL: 0, // Default value.\n  HORIZONTAL: 1,\n  WRAPPED: 2,\n  PAGE: 3,\n};\n\nconst SpreadMode = {\n  UNKNOWN: -1,\n  NONE: 0, // Default value.\n  ODD: 1,\n  EVEN: 2,\n};\n\n// Used by `PDFViewerApplication`, and by the API unit-tests.\nconst AutoPrintRegExp = /\\bprint\\s*\\(/;\n\n/**\n * Scale factors for the canvas, necessary with HiDPI displays.\n */\nclass OutputScale {\n  constructor() {\n    const pixelRatio = window.devicePixelRatio || 1;\n\n    /**\n     * @type {number} Horizontal scale.\n     */\n    this.sx = pixelRatio;\n\n    /**\n     * @type {number} Vertical scale.\n     */\n    this.sy = pixelRatio;\n  }\n\n  /**\n   * @type {boolean} Returns `true` when scaling is required, `false` otherwise.\n   */\n  get scaled() {\n    return this.sx !== 1 || this.sy !== 1;\n  }\n}\n\n/**\n * Scrolls specified element into view of its parent.\n * @param {Object} element - The element to be visible.\n * @param {Object} spot - An object with optional top and left properties,\n *   specifying the offset from the top left edge.\n * @param {boolean} [scrollMatches] - When scrolling search results into view,\n *   ignore elements that either: Contains marked content identifiers,\n *   or have the CSS-rule `overflow: hidden;` set. The default value is `false`.\n */\nfunction scrollIntoView(element, spot, scrollMatches = false) {\n  // Assuming offsetParent is available (it's not available when viewer is in\n  // hidden iframe or object). We have to scroll: if the offsetParent is not set\n  // producing the error. See also animationStarted.\n  let parent = element.offsetParent;\n  if (!parent) {\n    console.error(\"offsetParent is not set -- cannot scroll\");\n    return;\n  }\n  let offsetY = element.offsetTop + element.clientTop;\n  let offsetX = element.offsetLeft + element.clientLeft;\n  while (\n    (parent.clientHeight === parent.scrollHeight &&\n      parent.clientWidth === parent.scrollWidth) ||\n    (scrollMatches &&\n      (parent.classList.contains(\"markedContent\") ||\n        getComputedStyle(parent).overflow === \"hidden\"))\n  ) {\n    offsetY += parent.offsetTop;\n    offsetX += parent.offsetLeft;\n\n    parent = parent.offsetParent;\n    if (!parent) {\n      return; // no need to scroll\n    }\n  }\n  if (spot) {\n    if (spot.top !== undefined) {\n      offsetY += spot.top;\n    }\n    if (spot.left !== undefined) {\n      offsetX += spot.left;\n      parent.scrollLeft = offsetX;\n    }\n  }\n  parent.scrollTop = offsetY;\n}\n\n/**\n * Helper function to start monitoring the scroll event and converting them into\n * PDF.js friendly one: with scroll debounce and scroll direction.\n */\nfunction watchScroll(viewAreaElement, callback) {\n  const debounceScroll = function (evt) {\n    if (rAF) {\n      return;\n    }\n    // schedule an invocation of scroll for next animation frame.\n    rAF = window.requestAnimationFrame(function viewAreaElementScrolled() {\n      rAF = null;\n\n      const currentX = viewAreaElement.scrollLeft;\n      const lastX = state.lastX;\n      if (currentX !== lastX) {\n        state.right = currentX > lastX;\n      }\n      state.lastX = currentX;\n      const currentY = viewAreaElement.scrollTop;\n      const lastY = state.lastY;\n      if (currentY !== lastY) {\n        state.down = currentY > lastY;\n      }\n      state.lastY = currentY;\n      callback(state);\n    });\n  };\n\n  const state = {\n    right: true,\n    down: true,\n    lastX: viewAreaElement.scrollLeft,\n    lastY: viewAreaElement.scrollTop,\n    _eventHandler: debounceScroll,\n  };\n\n  let rAF = null;\n  viewAreaElement.addEventListener(\"scroll\", debounceScroll, true);\n  return state;\n}\n\n/**\n * Helper function to parse query string (e.g. ?param1=value&param2=...).\n * @param {string}\n * @returns {Map}\n */\nfunction parseQueryString(query) {\n  const params = new Map();\n  for (const [key, value] of new URLSearchParams(query)) {\n    params.set(key.toLowerCase(), value);\n  }\n  return params;\n}\n\nconst NullCharactersRegExp = /\\x00/g;\nconst InvisibleCharactersRegExp = /[\\x01-\\x1F]/g;\n\n/**\n * @param {string} str\n * @param {boolean} [replaceInvisible]\n */\nfunction removeNullCharacters(str, replaceInvisible = false) {\n  if (typeof str !== \"string\") {\n    console.error(`The argument must be a string.`);\n    return str;\n  }\n  if (replaceInvisible) {\n    str = str.replace(InvisibleCharactersRegExp, \" \");\n  }\n  return str.replace(NullCharactersRegExp, \"\");\n}\n\n/**\n * Use binary search to find the index of the first item in a given array which\n * passes a given condition. The items are expected to be sorted in the sense\n * that if the condition is true for one item in the array, then it is also true\n * for all following items.\n *\n * @returns {number} Index of the first array element to pass the test,\n *                   or |items.length| if no such element exists.\n */\nfunction binarySearchFirstItem(items, condition, start = 0) {\n  let minIndex = start;\n  let maxIndex = items.length - 1;\n\n  if (maxIndex < 0 || !condition(items[maxIndex])) {\n    return items.length;\n  }\n  if (condition(items[minIndex])) {\n    return minIndex;\n  }\n\n  while (minIndex < maxIndex) {\n    const currentIndex = (minIndex + maxIndex) >> 1;\n    const currentItem = items[currentIndex];\n    if (condition(currentItem)) {\n      maxIndex = currentIndex;\n    } else {\n      minIndex = currentIndex + 1;\n    }\n  }\n  return minIndex; /* === maxIndex */\n}\n\n/**\n *  Approximates float number as a fraction using Farey sequence (max order\n *  of 8).\n *  @param {number} x - Positive float number.\n *  @returns {Array} Estimated fraction: the first array item is a numerator,\n *                   the second one is a denominator.\n */\nfunction approximateFraction(x) {\n  // Fast paths for int numbers or their inversions.\n  if (Math.floor(x) === x) {\n    return [x, 1];\n  }\n  const xinv = 1 / x;\n  const limit = 8;\n  if (xinv > limit) {\n    return [1, limit];\n  } else if (Math.floor(xinv) === xinv) {\n    return [1, xinv];\n  }\n\n  const x_ = x > 1 ? xinv : x;\n  // a/b and c/d are neighbours in Farey sequence.\n  let a = 0,\n    b = 1,\n    c = 1,\n    d = 1;\n  // Limiting search to order 8.\n  while (true) {\n    // Generating next term in sequence (order of q).\n    const p = a + c,\n      q = b + d;\n    if (q > limit) {\n      break;\n    }\n    if (x_ <= p / q) {\n      c = p;\n      d = q;\n    } else {\n      a = p;\n      b = q;\n    }\n  }\n  let result;\n  // Select closest of the neighbours to x.\n  if (x_ - a / b < c / d - x_) {\n    result = x_ === x ? [a, b] : [b, a];\n  } else {\n    result = x_ === x ? [c, d] : [d, c];\n  }\n  return result;\n}\n\nfunction roundToDivide(x, div) {\n  const r = x % div;\n  return r === 0 ? x : Math.round(x - r + div);\n}\n\n/**\n * @typedef {Object} GetPageSizeInchesParameters\n * @property {number[]} view\n * @property {number} userUnit\n * @property {number} rotate\n */\n\n/**\n * @typedef {Object} PageSize\n * @property {number} width - In inches.\n * @property {number} height - In inches.\n */\n\n/**\n * Gets the size of the specified page, converted from PDF units to inches.\n * @param {GetPageSizeInchesParameters} params\n * @returns {PageSize}\n */\nfunction getPageSizeInches({ view, userUnit, rotate }) {\n  const [x1, y1, x2, y2] = view;\n  // We need to take the page rotation into account as well.\n  const changeOrientation = rotate % 180 !== 0;\n\n  const width = ((x2 - x1) / 72) * userUnit;\n  const height = ((y2 - y1) / 72) * userUnit;\n\n  return {\n    width: changeOrientation ? height : width,\n    height: changeOrientation ? width : height,\n  };\n}\n\n/**\n * Helper function for getVisibleElements.\n *\n * @param {number} index - initial guess at the first visible element\n * @param {Array} views - array of pages, into which `index` is an index\n * @param {number} top - the top of the scroll pane\n * @returns {number} less than or equal to `index` that is definitely at or\n *   before the first visible element in `views`, but not by too much. (Usually,\n *   this will be the first element in the first partially visible row in\n *   `views`, although sometimes it goes back one row further.)\n */\nfunction backtrackBeforeAllVisibleElements(index, views, top) {\n  // binarySearchFirstItem's assumption is that the input is ordered, with only\n  // one index where the conditions flips from false to true: [false ...,\n  // true...]. With vertical scrolling and spreads, it is possible to have\n  // [false ..., true, false, true ...]. With wrapped scrolling we can have a\n  // similar sequence, with many more mixed true and false in the middle.\n  //\n  // So there is no guarantee that the binary search yields the index of the\n  // first visible element. It could have been any of the other visible elements\n  // that were preceded by a hidden element.\n\n  // Of course, if either this element or the previous (hidden) element is also\n  // the first element, there's nothing to worry about.\n  if (index < 2) {\n    return index;\n  }\n\n  // That aside, the possible cases are represented below.\n  //\n  //     ****  = fully hidden\n  //     A*B*  = mix of partially visible and/or hidden pages\n  //     CDEF  = fully visible\n  //\n  // (1) Binary search could have returned A, in which case we can stop.\n  // (2) Binary search could also have returned B, in which case we need to\n  // check the whole row.\n  // (3) Binary search could also have returned C, in which case we need to\n  // check the whole previous row.\n  //\n  // There's one other possibility:\n  //\n  //     ****  = fully hidden\n  //     ABCD  = mix of fully and/or partially visible pages\n  //\n  // (4) Binary search could only have returned A.\n\n  // Initially assume that we need to find the beginning of the current row\n  // (case 1, 2, or 4), which means finding a page that is above the current\n  // page's top. If the found page is partially visible, we're definitely not in\n  // case 3, and this assumption is correct.\n  let elt = views[index].div;\n  let pageTop = elt.offsetTop + elt.clientTop;\n\n  if (pageTop >= top) {\n    // The found page is fully visible, so we're actually either in case 3 or 4,\n    // and unfortunately we can't tell the difference between them without\n    // scanning the entire previous row, so we just conservatively assume that\n    // we do need to backtrack to that row. In both cases, the previous page is\n    // in the previous row, so use its top instead.\n    elt = views[index - 1].div;\n    pageTop = elt.offsetTop + elt.clientTop;\n  }\n\n  // Now we backtrack to the first page that still has its bottom below\n  // `pageTop`, which is the top of a page in the first visible row (unless\n  // we're in case 4, in which case it's the row before that).\n  // `index` is found by binary search, so the page at `index - 1` is\n  // invisible and we can start looking for potentially visible pages from\n  // `index - 2`. (However, if this loop terminates on its first iteration,\n  // which is the case when pages are stacked vertically, `index` should remain\n  // unchanged, so we use a distinct loop variable.)\n  for (let i = index - 2; i >= 0; --i) {\n    elt = views[i].div;\n    if (elt.offsetTop + elt.clientTop + elt.clientHeight <= pageTop) {\n      // We have reached the previous row, so stop now.\n      // This loop is expected to terminate relatively quickly because the\n      // number of pages per row is expected to be small.\n      break;\n    }\n    index = i;\n  }\n  return index;\n}\n\n/**\n * @typedef {Object} GetVisibleElementsParameters\n * @property {HTMLElement} scrollEl - A container that can possibly scroll.\n * @property {Array} views - Objects with a `div` property that contains an\n *   HTMLElement, which should all be descendants of `scrollEl` satisfying the\n *   relevant layout assumptions.\n * @property {boolean} sortByVisibility - If `true`, the returned elements are\n *   sorted in descending order of the percent of their padding box that is\n *   visible. The default value is `false`.\n * @property {boolean} horizontal - If `true`, the elements are assumed to be\n *   laid out horizontally instead of vertically. The default value is `false`.\n * @property {boolean} rtl - If `true`, the `scrollEl` container is assumed to\n *   be in right-to-left mode. The default value is `false`.\n */\n\n/**\n * Generic helper to find out what elements are visible within a scroll pane.\n *\n * Well, pretty generic. There are some assumptions placed on the elements\n * referenced by `views`:\n *   - If `horizontal`, no left of any earlier element is to the right of the\n *     left of any later element.\n *   - Otherwise, `views` can be split into contiguous rows where, within a row,\n *     no top of any element is below the bottom of any other element, and\n *     between rows, no bottom of any element in an earlier row is below the\n *     top of any element in a later row.\n *\n * (Here, top, left, etc. all refer to the padding edge of the element in\n * question. For pages, that ends up being equivalent to the bounding box of the\n * rendering canvas. Earlier and later refer to index in `views`, not page\n * layout.)\n *\n * @param {GetVisibleElementsParameters}\n * @returns {Object} `{ first, last, views: [{ id, x, y, view, percent }] }`\n */\nfunction getVisibleElements({\n  scrollEl,\n  views,\n  sortByVisibility = false,\n  horizontal = false,\n  rtl = false,\n}) {\n  const top = scrollEl.scrollTop,\n    bottom = top + scrollEl.clientHeight;\n  const left = scrollEl.scrollLeft,\n    right = left + scrollEl.clientWidth;\n\n  // Throughout this \"generic\" function, comments will assume we're working with\n  // PDF document pages, which is the most important and complex case. In this\n  // case, the visible elements we're actually interested is the page canvas,\n  // which is contained in a wrapper which adds no padding/border/margin, which\n  // is itself contained in `view.div` which adds no padding (but does add a\n  // border). So, as specified in this function's doc comment, this function\n  // does all of its work on the padding edge of the provided views, starting at\n  // offsetLeft/Top (which includes margin) and adding clientLeft/Top (which is\n  // the border). Adding clientWidth/Height gets us the bottom-right corner of\n  // the padding edge.\n  function isElementBottomAfterViewTop(view) {\n    const element = view.div;\n    const elementBottom =\n      element.offsetTop + element.clientTop + element.clientHeight;\n    return elementBottom > top;\n  }\n  function isElementNextAfterViewHorizontally(view) {\n    const element = view.div;\n    const elementLeft = element.offsetLeft + element.clientLeft;\n    const elementRight = elementLeft + element.clientWidth;\n    return rtl ? elementLeft < right : elementRight > left;\n  }\n\n  const visible = [],\n    ids = new Set(),\n    numViews = views.length;\n  let firstVisibleElementInd = binarySearchFirstItem(\n    views,\n    horizontal\n      ? isElementNextAfterViewHorizontally\n      : isElementBottomAfterViewTop\n  );\n\n  // Please note the return value of the `binarySearchFirstItem` function when\n  // no valid element is found (hence the `firstVisibleElementInd` check below).\n  if (\n    firstVisibleElementInd > 0 &&\n    firstVisibleElementInd < numViews &&\n    !horizontal\n  ) {\n    // In wrapped scrolling (or vertical scrolling with spreads), with some page\n    // sizes, isElementBottomAfterViewTop doesn't satisfy the binary search\n    // condition: there can be pages with bottoms above the view top between\n    // pages with bottoms below. This function detects and corrects that error;\n    // see it for more comments.\n    firstVisibleElementInd = backtrackBeforeAllVisibleElements(\n      firstVisibleElementInd,\n      views,\n      top\n    );\n  }\n\n  // lastEdge acts as a cutoff for us to stop looping, because we know all\n  // subsequent pages will be hidden.\n  //\n  // When using wrapped scrolling or vertical scrolling with spreads, we can't\n  // simply stop the first time we reach a page below the bottom of the view;\n  // the tops of subsequent pages on the same row could still be visible. In\n  // horizontal scrolling, we don't have that issue, so we can stop as soon as\n  // we pass `right`, without needing the code below that handles the -1 case.\n  let lastEdge = horizontal ? right : -1;\n\n  for (let i = firstVisibleElementInd; i < numViews; i++) {\n    const view = views[i],\n      element = view.div;\n    const currentWidth = element.offsetLeft + element.clientLeft;\n    const currentHeight = element.offsetTop + element.clientTop;\n    const viewWidth = element.clientWidth,\n      viewHeight = element.clientHeight;\n    const viewRight = currentWidth + viewWidth;\n    const viewBottom = currentHeight + viewHeight;\n\n    if (lastEdge === -1) {\n      // As commented above, this is only needed in non-horizontal cases.\n      // Setting lastEdge to the bottom of the first page that is partially\n      // visible ensures that the next page fully below lastEdge is on the\n      // next row, which has to be fully hidden along with all subsequent rows.\n      if (viewBottom >= bottom) {\n        lastEdge = viewBottom;\n      }\n    } else if ((horizontal ? currentWidth : currentHeight) > lastEdge) {\n      break;\n    }\n\n    if (\n      viewBottom <= top ||\n      currentHeight >= bottom ||\n      viewRight <= left ||\n      currentWidth >= right\n    ) {\n      continue;\n    }\n\n    const hiddenHeight =\n      Math.max(0, top - currentHeight) + Math.max(0, viewBottom - bottom);\n    const hiddenWidth =\n      Math.max(0, left - currentWidth) + Math.max(0, viewRight - right);\n\n    const fractionHeight = (viewHeight - hiddenHeight) / viewHeight,\n      fractionWidth = (viewWidth - hiddenWidth) / viewWidth;\n    const percent = (fractionHeight * fractionWidth * 100) | 0;\n\n    visible.push({\n      id: view.id,\n      x: currentWidth,\n      y: currentHeight,\n      view,\n      percent,\n      widthPercent: (fractionWidth * 100) | 0,\n    });\n    ids.add(view.id);\n  }\n\n  const first = visible[0],\n    last = visible[visible.length - 1];\n\n  if (sortByVisibility) {\n    visible.sort(function (a, b) {\n      const pc = a.percent - b.percent;\n      if (Math.abs(pc) > 0.001) {\n        return -pc;\n      }\n      return a.id - b.id; // ensure stability\n    });\n  }\n  return { first, last, views: visible, ids };\n}\n\n/**\n * Event handler to suppress context menu.\n */\nfunction noContextMenuHandler(evt) {\n  evt.preventDefault();\n}\n\nfunction normalizeWheelEventDirection(evt) {\n  let delta = Math.hypot(evt.deltaX, evt.deltaY);\n  const angle = Math.atan2(evt.deltaY, evt.deltaX);\n  if (-0.25 * Math.PI < angle && angle < 0.75 * Math.PI) {\n    // All that is left-up oriented has to change the sign.\n    delta = -delta;\n  }\n  return delta;\n}\n\nfunction normalizeWheelEventDelta(evt) {\n  let delta = normalizeWheelEventDirection(evt);\n\n  const MOUSE_DOM_DELTA_PIXEL_MODE = 0;\n  const MOUSE_DOM_DELTA_LINE_MODE = 1;\n  const MOUSE_PIXELS_PER_LINE = 30;\n  const MOUSE_LINES_PER_PAGE = 30;\n\n  // Converts delta to per-page units\n  if (evt.deltaMode === MOUSE_DOM_DELTA_PIXEL_MODE) {\n    delta /= MOUSE_PIXELS_PER_LINE * MOUSE_LINES_PER_PAGE;\n  } else if (evt.deltaMode === MOUSE_DOM_DELTA_LINE_MODE) {\n    delta /= MOUSE_LINES_PER_PAGE;\n  }\n  return delta;\n}\n\nfunction isValidRotation(angle) {\n  return Number.isInteger(angle) && angle % 90 === 0;\n}\n\nfunction isValidScrollMode(mode) {\n  return (\n    Number.isInteger(mode) &&\n    Object.values(ScrollMode).includes(mode) &&\n    mode !== ScrollMode.UNKNOWN\n  );\n}\n\nfunction isValidSpreadMode(mode) {\n  return (\n    Number.isInteger(mode) &&\n    Object.values(SpreadMode).includes(mode) &&\n    mode !== SpreadMode.UNKNOWN\n  );\n}\n\nfunction isPortraitOrientation(size) {\n  return size.width <= size.height;\n}\n\n/**\n * Promise that is resolved when DOM window becomes visible.\n */\nconst animationStarted = new Promise(function (resolve) {\n  if (\n    typeof PDFJSDev !== \"undefined\" &&\n    PDFJSDev.test(\"LIB\") &&\n    typeof window === \"undefined\"\n  ) {\n    // Prevent \"ReferenceError: window is not defined\" errors when running the\n    // unit-tests in Node.js environments.\n    setTimeout(resolve, 20);\n    return;\n  }\n  window.requestAnimationFrame(resolve);\n});\n\nfunction clamp(v, min, max) {\n  return Math.min(Math.max(v, min), max);\n}\n\nclass ProgressBar {\n  constructor(id) {\n    if (\n      (typeof PDFJSDev === \"undefined\" || PDFJSDev.test(\"GENERIC\")) &&\n      arguments.length > 1\n    ) {\n      throw new Error(\n        \"ProgressBar no longer accepts any additional options, \" +\n          \"please use CSS rules to modify its appearance instead.\"\n      );\n    }\n    this.visible = true;\n\n    // Fetch the sub-elements for later.\n    this.div = document.querySelector(id + \" .progress\");\n    // Get the loading bar element, so it can be resized to fit the viewer.\n    this.bar = this.div.parentNode;\n\n    this.percent = 0;\n  }\n\n  #updateBar() {\n    if (this._indeterminate) {\n      this.div.classList.add(\"indeterminate\");\n      return;\n    }\n    this.div.classList.remove(\"indeterminate\");\n\n    const doc = document.documentElement;\n    doc.style.setProperty(\"--progressBar-percent\", `${this._percent}%`);\n  }\n\n  get percent() {\n    return this._percent;\n  }\n\n  set percent(val) {\n    this._indeterminate = isNaN(val);\n    this._percent = clamp(val, 0, 100);\n    this.#updateBar();\n  }\n\n  setWidth(viewer) {\n    if (!viewer) {\n      return;\n    }\n    const container = viewer.parentNode;\n    const scrollbarWidth = container.offsetWidth - viewer.offsetWidth;\n    if (scrollbarWidth > 0) {\n      const doc = document.documentElement;\n      doc.style.setProperty(\"--progressBar-end-offset\", `${scrollbarWidth}px`);\n    }\n  }\n\n  hide() {\n    if (!this.visible) {\n      return;\n    }\n    this.visible = false;\n    this.bar.classList.add(\"hidden\");\n  }\n\n  show() {\n    if (this.visible) {\n      return;\n    }\n    this.visible = true;\n    this.bar.classList.remove(\"hidden\");\n  }\n}\n\n/**\n * Get the active or focused element in current DOM.\n *\n * Recursively search for the truly active or focused element in case there are\n * shadow DOMs.\n *\n * @returns {Element} the truly active or focused element.\n */\nfunction getActiveOrFocusedElement() {\n  let curRoot = document;\n  let curActiveOrFocused =\n    curRoot.activeElement || curRoot.querySelector(\":focus\");\n\n  while (curActiveOrFocused?.shadowRoot) {\n    curRoot = curActiveOrFocused.shadowRoot;\n    curActiveOrFocused =\n      curRoot.activeElement || curRoot.querySelector(\":focus\");\n  }\n\n  return curActiveOrFocused;\n}\n\n/**\n * Converts API PageLayout values to the format used by `BaseViewer`.\n * NOTE: This is supported to the extent that the viewer implements the\n *       necessary Scroll/Spread modes (since SinglePage, TwoPageLeft,\n *       and TwoPageRight all suggests using non-continuous scrolling).\n * @param {string} mode - The API PageLayout value.\n * @returns {Object}\n */\nfunction apiPageLayoutToViewerModes(layout) {\n  let scrollMode = ScrollMode.VERTICAL,\n    spreadMode = SpreadMode.NONE;\n\n  switch (layout) {\n    case \"SinglePage\":\n      scrollMode = ScrollMode.PAGE;\n      break;\n    case \"OneColumn\":\n      break;\n    case \"TwoPageLeft\":\n      scrollMode = ScrollMode.PAGE;\n    /* falls through */\n    case \"TwoColumnLeft\":\n      spreadMode = SpreadMode.ODD;\n      break;\n    case \"TwoPageRight\":\n      scrollMode = ScrollMode.PAGE;\n    /* falls through */\n    case \"TwoColumnRight\":\n      spreadMode = SpreadMode.EVEN;\n      break;\n  }\n  return { scrollMode, spreadMode };\n}\n\n/**\n * Converts API PageMode values to the format used by `PDFSidebar`.\n * NOTE: There's also a \"FullScreen\" parameter which is not possible to support,\n *       since the Fullscreen API used in browsers requires that entering\n *       fullscreen mode only occurs as a result of a user-initiated event.\n * @param {string} mode - The API PageMode value.\n * @returns {number} A value from {SidebarView}.\n */\nfunction apiPageModeToSidebarView(mode) {\n  switch (mode) {\n    case \"UseNone\":\n      return SidebarView.NONE;\n    case \"UseThumbs\":\n      return SidebarView.THUMBS;\n    case \"UseOutlines\":\n      return SidebarView.OUTLINE;\n    case \"UseAttachments\":\n      return SidebarView.ATTACHMENTS;\n    case \"UseOC\":\n      return SidebarView.LAYERS;\n  }\n  return SidebarView.NONE; // Default value.\n}\n\nexport {\n  animationStarted,\n  apiPageLayoutToViewerModes,\n  apiPageModeToSidebarView,\n  approximateFraction,\n  AutoPrintRegExp,\n  backtrackBeforeAllVisibleElements, // only exported for testing\n  binarySearchFirstItem,\n  DEFAULT_SCALE,\n  DEFAULT_SCALE_DELTA,\n  DEFAULT_SCALE_VALUE,\n  getActiveOrFocusedElement,\n  getPageSizeInches,\n  getVisibleElements,\n  isPortraitOrientation,\n  isValidRotation,\n  isValidScrollMode,\n  isValidSpreadMode,\n  MAX_AUTO_SCALE,\n  MAX_SCALE,\n  MIN_SCALE,\n  noContextMenuHandler,\n  normalizeWheelEventDelta,\n  normalizeWheelEventDirection,\n  OutputScale,\n  parseQueryString,\n  PresentationModeState,\n  ProgressBar,\n  removeNullCharacters,\n  RendererType,\n  RenderingStates,\n  roundToDivide,\n  SCROLLBAR_PADDING,\n  scrollIntoView,\n  ScrollMode,\n  SidebarView,\n  SpreadMode,\n  TextLayerMode,\n  UNKNOWN_SCALE,\n  VERTICAL_PADDING,\n  watchScroll,\n};\n","/* Copyright 2021 Mozilla Foundation\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n/** @typedef {import(\"../src/display/api\").PDFPageProxy} PDFPageProxy */\n\nconst PDF_ROLE_TO_HTML_ROLE = {\n  // Document level structure types\n  Document: null, // There's a \"document\" role, but it doesn't make sense here.\n  DocumentFragment: null,\n  // Grouping level structure types\n  Part: \"group\",\n  Sect: \"group\", // XXX: There's a \"section\" role, but it's abstract.\n  Div: \"group\",\n  Aside: \"note\",\n  NonStruct: \"none\",\n  // Block level structure types\n  P: null,\n  // H<n>,\n  H: \"heading\",\n  Title: null,\n  FENote: \"note\",\n  // Sub-block level structure type\n  Sub: \"group\",\n  // General inline level structure types\n  Lbl: null,\n  Span: null,\n  Em: null,\n  Strong: null,\n  Link: \"link\",\n  Annot: \"note\",\n  Form: \"form\",\n  // Ruby and Warichu structure types\n  Ruby: null,\n  RB: null,\n  RT: null,\n  RP: null,\n  Warichu: null,\n  WT: null,\n  WP: null,\n  // List standard structure types\n  L: \"list\",\n  LI: \"listitem\",\n  LBody: null,\n  // Table standard structure types\n  Table: \"table\",\n  TR: \"row\",\n  TH: \"columnheader\",\n  TD: \"cell\",\n  THead: \"columnheader\",\n  TBody: null,\n  TFoot: null,\n  // Standard structure type Caption\n  Caption: null,\n  // Standard structure type Figure\n  Figure: \"figure\",\n  // Standard structure type Formula\n  Formula: null,\n  // standard structure type Artifact\n  Artifact: null,\n};\n\nconst HEADING_PATTERN = /^H(\\d+)$/;\n\n/**\n * @typedef {Object} StructTreeLayerBuilderOptions\n * @property {PDFPageProxy} pdfPage\n */\n\nclass StructTreeLayerBuilder {\n  /**\n   * @param {StructTreeLayerBuilderOptions} options\n   */\n  constructor({ pdfPage }) {\n    this.pdfPage = pdfPage;\n  }\n\n  render(structTree) {\n    return this._walk(structTree);\n  }\n\n  _setAttributes(structElement, htmlElement) {\n    if (structElement.alt !== undefined) {\n      htmlElement.setAttribute(\"aria-label\", structElement.alt);\n    }\n    if (structElement.id !== undefined) {\n      htmlElement.setAttribute(\"aria-owns\", structElement.id);\n    }\n    if (structElement.lang !== undefined) {\n      htmlElement.setAttribute(\"lang\", structElement.lang);\n    }\n  }\n\n  _walk(node) {\n    if (!node) {\n      return null;\n    }\n\n    const element = document.createElement(\"span\");\n    if (\"role\" in node) {\n      const { role } = node;\n      const match = role.match(HEADING_PATTERN);\n      if (match) {\n        element.setAttribute(\"role\", \"heading\");\n        element.setAttribute(\"aria-level\", match[1]);\n      } else if (PDF_ROLE_TO_HTML_ROLE[role]) {\n        element.setAttribute(\"role\", PDF_ROLE_TO_HTML_ROLE[role]);\n      }\n    }\n\n    this._setAttributes(node, element);\n\n    if (node.children) {\n      if (node.children.length === 1 && \"id\" in node.children[0]) {\n        // Often there is only one content node so just set the values on the\n        // parent node to avoid creating an extra span.\n        this._setAttributes(node.children[0], element);\n      } else {\n        for (const kid of node.children) {\n          element.appendChild(this._walk(kid));\n        }\n      }\n    }\n    return element;\n  }\n}\n\nexport { StructTreeLayerBuilder };\n","/* Copyright 2012 Mozilla Foundation\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n// eslint-disable-next-line max-len\n/** @typedef {import(\"../src/display/display_utils\").PageViewport} PageViewport */\n/** @typedef {import(\"./event_utils\").EventBus} EventBus */\n/** @typedef {import(\"./text_highlighter\").TextHighlighter} TextHighlighter */\n\nimport { renderTextLayer } from \"pdfjs-lib\";\n\nconst EXPAND_DIVS_TIMEOUT = 300; // ms\n\n/**\n * @typedef {Object} TextLayerBuilderOptions\n * @property {HTMLDivElement} textLayerDiv - The text layer container.\n * @property {EventBus} eventBus - The application event bus.\n * @property {number} pageIndex - The page index.\n * @property {PageViewport} viewport - The viewport of the text layer.\n * @property {TextHighlighter} highlighter - Optional object that will handle\n *   highlighting text from the find controller.\n * @property {boolean} enhanceTextSelection - Option to turn on improved\n *   text selection.\n */\n\n/**\n * The text layer builder provides text selection functionality for the PDF.\n * It does this by creating overlay divs over the PDF's text. These divs\n * contain text that matches the PDF text they are overlaying.\n */\nclass TextLayerBuilder {\n  constructor({\n    textLayerDiv,\n    eventBus,\n    pageIndex,\n    viewport,\n    highlighter = null,\n    enhanceTextSelection = false,\n  }) {\n    this.textLayerDiv = textLayerDiv;\n    this.eventBus = eventBus;\n    this.textContent = null;\n    this.textContentItemsStr = [];\n    this.textContentStream = null;\n    this.renderingDone = false;\n    this.pageNumber = pageIndex + 1;\n    this.viewport = viewport;\n    this.textDivs = [];\n    this.textLayerRenderTask = null;\n    this.highlighter = highlighter;\n    this.enhanceTextSelection = enhanceTextSelection;\n\n    this._bindMouse();\n  }\n\n  /**\n   * @private\n   */\n  _finishRendering() {\n    this.renderingDone = true;\n\n    if (!this.enhanceTextSelection) {\n      const endOfContent = document.createElement(\"div\");\n      endOfContent.className = \"endOfContent\";\n      this.textLayerDiv.appendChild(endOfContent);\n    }\n\n    this.eventBus.dispatch(\"textlayerrendered\", {\n      source: this,\n      pageNumber: this.pageNumber,\n      numTextDivs: this.textDivs.length,\n    });\n  }\n\n  /**\n   * Renders the text layer.\n   *\n   * @param {number} [timeout] - Wait for a specified amount of milliseconds\n   *                             before rendering.\n   */\n  render(timeout = 0) {\n    if (!(this.textContent || this.textContentStream) || this.renderingDone) {\n      return;\n    }\n    this.cancel();\n\n    this.textDivs.length = 0;\n    this.highlighter?.setTextMapping(this.textDivs, this.textContentItemsStr);\n\n    const textLayerFrag = document.createDocumentFragment();\n    this.textLayerRenderTask = renderTextLayer({\n      textContent: this.textContent,\n      textContentStream: this.textContentStream,\n      container: textLayerFrag,\n      viewport: this.viewport,\n      textDivs: this.textDivs,\n      textContentItemsStr: this.textContentItemsStr,\n      timeout,\n      enhanceTextSelection: this.enhanceTextSelection,\n    });\n    this.textLayerRenderTask.promise.then(\n      () => {\n        this.textLayerDiv.appendChild(textLayerFrag);\n        this._finishRendering();\n        this.highlighter?.enable();\n      },\n      function (reason) {\n        // Cancelled or failed to render text layer; skipping errors.\n      }\n    );\n  }\n\n  /**\n   * Cancel rendering of the text layer.\n   */\n  cancel() {\n    if (this.textLayerRenderTask) {\n      this.textLayerRenderTask.cancel();\n      this.textLayerRenderTask = null;\n    }\n    this.highlighter?.disable();\n  }\n\n  setTextContentStream(readableStream) {\n    this.cancel();\n    this.textContentStream = readableStream;\n  }\n\n  setTextContent(textContent) {\n    this.cancel();\n    this.textContent = textContent;\n  }\n\n  /**\n   * Improves text selection by adding an additional div where the mouse was\n   * clicked. This reduces flickering of the content if the mouse is slowly\n   * dragged up or down.\n   *\n   * @private\n   */\n  _bindMouse() {\n    const div = this.textLayerDiv;\n    let expandDivsTimer = null;\n\n    div.addEventListener(\"mousedown\", evt => {\n      if (this.enhanceTextSelection && this.textLayerRenderTask) {\n        this.textLayerRenderTask.expandTextDivs(true);\n        if (\n          (typeof PDFJSDev === \"undefined\" || !PDFJSDev.test(\"MOZCENTRAL\")) &&\n          expandDivsTimer\n        ) {\n          clearTimeout(expandDivsTimer);\n          expandDivsTimer = null;\n        }\n        return;\n      }\n\n      const end = div.querySelector(\".endOfContent\");\n      if (!end) {\n        return;\n      }\n      if (typeof PDFJSDev === \"undefined\" || !PDFJSDev.test(\"MOZCENTRAL\")) {\n        // On non-Firefox browsers, the selection will feel better if the height\n        // of the `endOfContent` div is adjusted to start at mouse click\n        // location. This avoids flickering when the selection moves up.\n        // However it does not work when selection is started on empty space.\n        let adjustTop = evt.target !== div;\n        if (typeof PDFJSDev === \"undefined\" || PDFJSDev.test(\"GENERIC\")) {\n          adjustTop =\n            adjustTop &&\n            window\n              .getComputedStyle(end)\n              .getPropertyValue(\"-moz-user-select\") !== \"none\";\n        }\n        if (adjustTop) {\n          const divBounds = div.getBoundingClientRect();\n          const r = Math.max(0, (evt.pageY - divBounds.top) / divBounds.height);\n          end.style.top = (r * 100).toFixed(2) + \"%\";\n        }\n      }\n      end.classList.add(\"active\");\n    });\n\n    div.addEventListener(\"mouseup\", () => {\n      if (this.enhanceTextSelection && this.textLayerRenderTask) {\n        if (typeof PDFJSDev === \"undefined\" || !PDFJSDev.test(\"MOZCENTRAL\")) {\n          expandDivsTimer = setTimeout(() => {\n            if (this.textLayerRenderTask) {\n              this.textLayerRenderTask.expandTextDivs(false);\n            }\n            expandDivsTimer = null;\n          }, EXPAND_DIVS_TIMEOUT);\n        } else {\n          this.textLayerRenderTask.expandTextDivs(false);\n        }\n        return;\n      }\n\n      const end = div.querySelector(\".endOfContent\");\n      if (!end) {\n        return;\n      }\n      if (typeof PDFJSDev === \"undefined\" || !PDFJSDev.test(\"MOZCENTRAL\")) {\n        end.style.top = \"\";\n      }\n      end.classList.remove(\"active\");\n    });\n  }\n}\n\nexport { TextLayerBuilder };\n","/* Copyright 2021 Mozilla Foundation\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n/** @typedef {import(\"../src/display/api\").PDFPageProxy} PDFPageProxy */\n// eslint-disable-next-line max-len\n/** @typedef {import(\"../src/display/display_utils\").PageViewport} PageViewport */\n/** @typedef {import(\"./interfaces\").IPDFLinkService} IPDFLinkService */\n\nimport { XfaLayer } from \"pdfjs-lib\";\n\n/**\n * @typedef {Object} XfaLayerBuilderOptions\n * @property {HTMLDivElement} pageDiv\n * @property {PDFPageProxy} pdfPage\n * @property {AnnotationStorage} [annotationStorage]\n * @property {IPDFLinkService} linkService\n * @property {Object} [xfaHtml]\n */\n\nclass XfaLayerBuilder {\n  /**\n   * @param {XfaLayerBuilderOptions} options\n   */\n  constructor({\n    pageDiv,\n    pdfPage,\n    annotationStorage = null,\n    linkService,\n    xfaHtml = null,\n  }) {\n    this.pageDiv = pageDiv;\n    this.pdfPage = pdfPage;\n    this.annotationStorage = annotationStorage;\n    this.linkService = linkService;\n    this.xfaHtml = xfaHtml;\n\n    this.div = null;\n    this._cancelled = false;\n  }\n\n  /**\n   * @param {PageViewport} viewport\n   * @param {string} intent (default value is 'display')\n   * @returns {Promise<Object | void>} A promise that is resolved when rendering\n   *   of the XFA layer is complete. The first rendering will return an object\n   *   with a `textDivs` property that  can be used with the TextHighlighter.\n   */\n  render(viewport, intent = \"display\") {\n    if (intent === \"print\") {\n      const parameters = {\n        viewport: viewport.clone({ dontFlip: true }),\n        div: this.div,\n        xfaHtml: this.xfaHtml,\n        annotationStorage: this.annotationStorage,\n        linkService: this.linkService,\n        intent,\n      };\n\n      // Create an xfa layer div and render the form\n      const div = document.createElement(\"div\");\n      this.pageDiv.appendChild(div);\n      parameters.div = div;\n\n      const result = XfaLayer.render(parameters);\n      return Promise.resolve(result);\n    }\n\n    // intent === \"display\"\n    return this.pdfPage\n      .getXfa()\n      .then(xfaHtml => {\n        if (this._cancelled || !xfaHtml) {\n          return { textDivs: [] };\n        }\n\n        const parameters = {\n          viewport: viewport.clone({ dontFlip: true }),\n          div: this.div,\n          xfaHtml,\n          annotationStorage: this.annotationStorage,\n          linkService: this.linkService,\n          intent,\n        };\n\n        if (this.div) {\n          return XfaLayer.update(parameters);\n        }\n        // Create an xfa layer div and render the form\n        this.div = document.createElement(\"div\");\n        this.pageDiv.appendChild(this.div);\n        parameters.div = this.div;\n        return XfaLayer.render(parameters);\n      })\n      .catch(error => {\n        console.error(error);\n      });\n  }\n\n  cancel() {\n    this._cancelled = true;\n  }\n\n  hide() {\n    if (!this.div) {\n      return;\n    }\n    this.div.hidden = true;\n  }\n}\n\nexport { XfaLayerBuilder };\n","/* Copyright 2014 Mozilla Foundation\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { ScrollMode, SpreadMode } from \"./ui_utils.js\";\nimport { BaseViewer } from \"./base_viewer.js\";\n\nclass PDFViewer extends BaseViewer {}\n\nclass PDFSinglePageViewer extends BaseViewer {\n  _resetView() {\n    super._resetView();\n    this._scrollMode = ScrollMode.PAGE;\n    this._spreadMode = SpreadMode.NONE;\n  }\n\n  // eslint-disable-next-line accessor-pairs\n  set scrollMode(mode) {}\n\n  _updateScrollMode() {}\n\n  // eslint-disable-next-line accessor-pairs\n  set spreadMode(mode) {}\n\n  _updateSpreadMode() {}\n}\n\nexport { PDFSinglePageViewer, PDFViewer };\n","/* Copyright 2014 Mozilla Foundation\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n/** @typedef {import(\"../src/display/api\").PDFDocumentProxy} PDFDocumentProxy */\n/** @typedef {import(\"../src/display/api\").PDFPageProxy} PDFPageProxy */\n// eslint-disable-next-line max-len\n/** @typedef {import(\"../src/display/display_utils\").PageViewport} PageViewport */\n/** @typedef {import(\"./event_utils\").EventBus} EventBus */\n/** @typedef {import(\"./interfaces\").IDownloadManager} IDownloadManager */\n/** @typedef {import(\"./interfaces\").IL10n} IL10n */\n// eslint-disable-next-line max-len\n/** @typedef {import(\"./interfaces\").IPDFAnnotationLayerFactory} IPDFAnnotationLayerFactory */\n/** @typedef {import(\"./interfaces\").IPDFLinkService} IPDFLinkService */\n// eslint-disable-next-line max-len\n/** @typedef {import(\"./interfaces\").IPDFStructTreeLayerFactory} IPDFStructTreeLayerFactory */\n// eslint-disable-next-line max-len\n/** @typedef {import(\"./interfaces\").IPDFTextLayerFactory} IPDFTextLayerFactory */\n/** @typedef {import(\"./interfaces\").IPDFXfaLayerFactory} IPDFXfaLayerFactory */\n\nimport {\n  AnnotationMode,\n  createPromiseCapability,\n  PermissionFlag,\n  PixelsPerInch,\n  version,\n} from \"pdfjs-lib\";\nimport {\n  DEFAULT_SCALE,\n  DEFAULT_SCALE_DELTA,\n  DEFAULT_SCALE_VALUE,\n  getVisibleElements,\n  isPortraitOrientation,\n  isValidRotation,\n  isValidScrollMode,\n  isValidSpreadMode,\n  MAX_AUTO_SCALE,\n  MAX_SCALE,\n  MIN_SCALE,\n  PresentationModeState,\n  RendererType,\n  RenderingStates,\n  SCROLLBAR_PADDING,\n  scrollIntoView,\n  ScrollMode,\n  SpreadMode,\n  TextLayerMode,\n  UNKNOWN_SCALE,\n  VERTICAL_PADDING,\n  watchScroll,\n} from \"./ui_utils.js\";\nimport { AnnotationLayerBuilder } from \"./annotation_layer_builder.js\";\nimport { NullL10n } from \"./l10n_utils.js\";\nimport { PDFPageView } from \"./pdf_page_view.js\";\nimport { PDFRenderingQueue } from \"./pdf_rendering_queue.js\";\nimport { SimpleLinkService } from \"./pdf_link_service.js\";\nimport { StructTreeLayerBuilder } from \"./struct_tree_layer_builder.js\";\nimport { TextHighlighter } from \"./text_highlighter.js\";\nimport { TextLayerBuilder } from \"./text_layer_builder.js\";\nimport { XfaLayerBuilder } from \"./xfa_layer_builder.js\";\n\nconst DEFAULT_CACHE_SIZE = 10;\nconst ENABLE_PERMISSIONS_CLASS = \"enablePermissions\";\n\nconst PagesCountLimit = {\n  FORCE_SCROLL_MODE_PAGE: 15000,\n  FORCE_LAZY_PAGE_INIT: 7500,\n  PAUSE_EAGER_PAGE_INIT: 250,\n};\n\n/**\n * @typedef {Object} PDFViewerOptions\n * @property {HTMLDivElement} container - The container for the viewer element.\n * @property {HTMLDivElement} [viewer] - The viewer element.\n * @property {EventBus} eventBus - The application event bus.\n * @property {IPDFLinkService} linkService - The navigation/linking service.\n * @property {IDownloadManager} [downloadManager] - The download manager\n *   component.\n * @property {PDFFindController} [findController] - The find controller\n *   component.\n * @property {PDFScriptingManager} [scriptingManager] - The scripting manager\n *   component.\n * @property {PDFRenderingQueue} [renderingQueue] - The rendering queue object.\n * @property {boolean} [removePageBorders] - Removes the border shadow around\n *   the pages. The default value is `false`.\n * @property {number} [textLayerMode] - Controls if the text layer used for\n *   selection and searching is created, and if the improved text selection\n *   behaviour is enabled. The constants from {TextLayerMode} should be used.\n *   The default value is `TextLayerMode.ENABLE`.\n * @property {number} [annotationMode] - Controls if the annotation layer is\n *   created, and if interactive form elements or `AnnotationStorage`-data are\n *   being rendered. The constants from {@link AnnotationMode} should be used;\n *   see also {@link RenderParameters} and {@link GetOperatorListParameters}.\n *   The default value is `AnnotationMode.ENABLE_FORMS`.\n * @property {string} [imageResourcesPath] - Path for image resources, mainly\n *   mainly for annotation icons. Include trailing slash.\n * @property {boolean} [enablePrintAutoRotate] - Enables automatic rotation of\n *   landscape pages upon printing. The default is `false`.\n * @property {string} renderer - 'canvas' or 'svg'. The default is 'canvas'.\n * @property {boolean} [useOnlyCssZoom] - Enables CSS only zooming. The default\n *   value is `false`.\n * @property {number} [maxCanvasPixels] - The maximum supported canvas size in\n *   total pixels, i.e. width * height. Use -1 for no limit. The default value\n *   is 4096 * 4096 (16 mega-pixels).\n * @property {IL10n} l10n - Localization service.\n * @property {boolean} [enablePermissions] - Enables PDF document permissions,\n *   when they exist. The default value is `false`.\n * @property {Object} [pageColors] - Overwrites background and foreground colors\n *   with user defined ones in order to improve readability in high contrast\n *   mode.\n */\n\nclass PDFPageViewBuffer {\n  // Here we rely on the fact that `Set`s preserve the insertion order.\n  #buf = new Set();\n\n  #size = 0;\n\n  constructor(size) {\n    this.#size = size;\n  }\n\n  push(view) {\n    const buf = this.#buf;\n    if (buf.has(view)) {\n      buf.delete(view); // Move the view to the \"end\" of the buffer.\n    }\n    buf.add(view);\n\n    if (buf.size > this.#size) {\n      this.#destroyFirstView();\n    }\n  }\n\n  /**\n   * After calling resize, the size of the buffer will be `newSize`.\n   * The optional parameter `idsToKeep` is, if present, a Set of page-ids to\n   * push to the back of the buffer, delaying their destruction. The size of\n   * `idsToKeep` has no impact on the final size of the buffer; if `idsToKeep`\n   * is larger than `newSize`, some of those pages will be destroyed anyway.\n   */\n  resize(newSize, idsToKeep = null) {\n    this.#size = newSize;\n\n    const buf = this.#buf;\n    if (idsToKeep) {\n      const ii = buf.size;\n      let i = 1;\n      for (const view of buf) {\n        if (idsToKeep.has(view.id)) {\n          buf.delete(view); // Move the view to the \"end\" of the buffer.\n          buf.add(view);\n        }\n        if (++i > ii) {\n          break;\n        }\n      }\n    }\n\n    while (buf.size > this.#size) {\n      this.#destroyFirstView();\n    }\n  }\n\n  has(view) {\n    return this.#buf.has(view);\n  }\n\n  [Symbol.iterator]() {\n    return this.#buf.keys();\n  }\n\n  #destroyFirstView() {\n    const firstView = this.#buf.keys().next().value;\n\n    firstView?.destroy();\n    this.#buf.delete(firstView);\n  }\n}\n\n/**\n * Simple viewer control to display PDF content/pages.\n *\n * @implements {IPDFAnnotationLayerFactory}\n * @implements {IPDFStructTreeLayerFactory}\n * @implements {IPDFTextLayerFactory}\n * @implements {IPDFXfaLayerFactory}\n */\nclass BaseViewer {\n  #buffer = null;\n\n  #annotationMode = AnnotationMode.ENABLE_FORMS;\n\n  #previousAnnotationMode = null;\n\n  #enablePermissions = false;\n\n  #previousContainerHeight = 0;\n\n  #scrollModePageState = null;\n\n  #onVisibilityChange = null;\n\n  /**\n   * @param {PDFViewerOptions} options\n   */\n  constructor(options) {\n    if (this.constructor === BaseViewer) {\n      throw new Error(\"Cannot initialize BaseViewer.\");\n    }\n    const viewerVersion =\n      typeof PDFJSDev !== \"undefined\" ? PDFJSDev.eval(\"BUNDLE_VERSION\") : null;\n    if (version !== viewerVersion) {\n      throw new Error(\n        `The API version \"${version}\" does not match the Viewer version \"${viewerVersion}\".`\n      );\n    }\n    this.container = options.container;\n    this.viewer = options.viewer || options.container.firstElementChild;\n\n    if (\n      typeof PDFJSDev === \"undefined\" ||\n      PDFJSDev.test(\"!PRODUCTION || GENERIC\")\n    ) {\n      if (\n        !(\n          this.container?.tagName.toUpperCase() === \"DIV\" &&\n          this.viewer?.tagName.toUpperCase() === \"DIV\"\n        )\n      ) {\n        throw new Error(\"Invalid `container` and/or `viewer` option.\");\n      }\n\n      if (\n        this.container.offsetParent &&\n        getComputedStyle(this.container).position !== \"absolute\"\n      ) {\n        throw new Error(\"The `container` must be absolutely positioned.\");\n      }\n    }\n    this.eventBus = options.eventBus;\n    this.linkService = options.linkService || new SimpleLinkService();\n    this.downloadManager = options.downloadManager || null;\n    this.findController = options.findController || null;\n    this._scriptingManager = options.scriptingManager || null;\n    this.removePageBorders = options.removePageBorders || false;\n    this.textLayerMode = options.textLayerMode ?? TextLayerMode.ENABLE;\n    this.#annotationMode =\n      options.annotationMode ?? AnnotationMode.ENABLE_FORMS;\n    this.imageResourcesPath = options.imageResourcesPath || \"\";\n    this.enablePrintAutoRotate = options.enablePrintAutoRotate || false;\n    this.renderer = options.renderer || RendererType.CANVAS;\n    this.useOnlyCssZoom = options.useOnlyCssZoom || false;\n    this.maxCanvasPixels = options.maxCanvasPixels;\n    this.l10n = options.l10n || NullL10n;\n    this.#enablePermissions = options.enablePermissions || false;\n    this.pageColors = options.pageColors || null;\n\n    if (typeof PDFJSDev === \"undefined\" || !PDFJSDev.test(\"MOZCENTRAL\")) {\n      if (\n        options.pageColors &&\n        (!CSS.supports(\"color\", options.pageColors.background) ||\n          !CSS.supports(\"color\", options.pageColors.foreground))\n      ) {\n        if (options.pageColors.background || options.pageColors.foreground) {\n          console.warn(\n            \"Ignoring `pageColors`-option, since the browser doesn't support the values used.\"\n          );\n        }\n        this.pageColors = null;\n      }\n    }\n\n    this.defaultRenderingQueue = !options.renderingQueue;\n    if (this.defaultRenderingQueue) {\n      // Custom rendering queue is not specified, using default one\n      this.renderingQueue = new PDFRenderingQueue();\n      this.renderingQueue.setViewer(this);\n    } else {\n      this.renderingQueue = options.renderingQueue;\n    }\n    this._doc = document.documentElement;\n\n    this.scroll = watchScroll(this.container, this._scrollUpdate.bind(this));\n    this.presentationModeState = PresentationModeState.UNKNOWN;\n    this._onBeforeDraw = this._onAfterDraw = null;\n    this._resetView();\n\n    if (this.removePageBorders) {\n      this.viewer.classList.add(\"removePageBorders\");\n    }\n    this.updateContainerHeightCss();\n    // Defer the dispatching of this event, to give other viewer components\n    // time to initialize *and* register 'baseviewerinit' event listeners.\n    Promise.resolve().then(() => {\n      this.eventBus.dispatch(\"baseviewerinit\", { source: this });\n    });\n  }\n\n  get pagesCount() {\n    return this._pages.length;\n  }\n\n  getPageView(index) {\n    return this._pages[index];\n  }\n\n  /**\n   * @type {boolean} - True if all {PDFPageView} objects are initialized.\n   */\n  get pageViewsReady() {\n    if (!this._pagesCapability.settled) {\n      return false;\n    }\n    // Prevent printing errors when 'disableAutoFetch' is set, by ensuring\n    // that *all* pages have in fact been completely loaded.\n    return this._pages.every(function (pageView) {\n      return pageView?.pdfPage;\n    });\n  }\n\n  /**\n   * @type {boolean}\n   */\n  get renderForms() {\n    return this.#annotationMode === AnnotationMode.ENABLE_FORMS;\n  }\n\n  /**\n   * @type {boolean}\n   */\n  get enableScripting() {\n    return !!this._scriptingManager;\n  }\n\n  /**\n   * @type {number}\n   */\n  get currentPageNumber() {\n    return this._currentPageNumber;\n  }\n\n  /**\n   * @param {number} val - The page number.\n   */\n  set currentPageNumber(val) {\n    if (!Number.isInteger(val)) {\n      throw new Error(\"Invalid page number.\");\n    }\n    if (!this.pdfDocument) {\n      return;\n    }\n    // The intent can be to just reset a scroll position and/or scale.\n    if (!this._setCurrentPageNumber(val, /* resetCurrentPageView = */ true)) {\n      console.error(`currentPageNumber: \"${val}\" is not a valid page.`);\n    }\n  }\n\n  /**\n   * @returns {boolean} Whether the pageNumber is valid (within bounds).\n   * @private\n   */\n  _setCurrentPageNumber(val, resetCurrentPageView = false) {\n    if (this._currentPageNumber === val) {\n      if (resetCurrentPageView) {\n        this.#resetCurrentPageView();\n      }\n      return true;\n    }\n\n    if (!(0 < val && val <= this.pagesCount)) {\n      return false;\n    }\n    const previous = this._currentPageNumber;\n    this._currentPageNumber = val;\n\n    this.eventBus.dispatch(\"pagechanging\", {\n      source: this,\n      pageNumber: val,\n      pageLabel: this._pageLabels?.[val - 1] ?? null,\n      previous,\n    });\n\n    if (resetCurrentPageView) {\n      this.#resetCurrentPageView();\n    }\n    return true;\n  }\n\n  /**\n   * @type {string|null} Returns the current page label, or `null` if no page\n   *   labels exist.\n   */\n  get currentPageLabel() {\n    return this._pageLabels?.[this._currentPageNumber - 1] ?? null;\n  }\n\n  /**\n   * @param {string} val - The page label.\n   */\n  set currentPageLabel(val) {\n    if (!this.pdfDocument) {\n      return;\n    }\n    let page = val | 0; // Fallback page number.\n    if (this._pageLabels) {\n      const i = this._pageLabels.indexOf(val);\n      if (i >= 0) {\n        page = i + 1;\n      }\n    }\n    // The intent can be to just reset a scroll position and/or scale.\n    if (!this._setCurrentPageNumber(page, /* resetCurrentPageView = */ true)) {\n      console.error(`currentPageLabel: \"${val}\" is not a valid page.`);\n    }\n  }\n\n  /**\n   * @type {number}\n   */\n  get currentScale() {\n    return this._currentScale !== UNKNOWN_SCALE\n      ? this._currentScale\n      : DEFAULT_SCALE;\n  }\n\n  /**\n   * @param {number} val - Scale of the pages in percents.\n   */\n  set currentScale(val) {\n    if (isNaN(val)) {\n      throw new Error(\"Invalid numeric scale.\");\n    }\n    if (!this.pdfDocument) {\n      return;\n    }\n    this._setScale(val, false);\n  }\n\n  /**\n   * @type {string}\n   */\n  get currentScaleValue() {\n    return this._currentScaleValue;\n  }\n\n  /**\n   * @param val - The scale of the pages (in percent or predefined value).\n   */\n  set currentScaleValue(val) {\n    if (!this.pdfDocument) {\n      return;\n    }\n    this._setScale(val, false);\n  }\n\n  /**\n   * @type {number}\n   */\n  get pagesRotation() {\n    return this._pagesRotation;\n  }\n\n  /**\n   * @param {number} rotation - The rotation of the pages (0, 90, 180, 270).\n   */\n  set pagesRotation(rotation) {\n    if (!isValidRotation(rotation)) {\n      throw new Error(\"Invalid pages rotation angle.\");\n    }\n    if (!this.pdfDocument) {\n      return;\n    }\n    // Normalize the rotation, by clamping it to the [0, 360) range.\n    rotation %= 360;\n    if (rotation < 0) {\n      rotation += 360;\n    }\n    if (this._pagesRotation === rotation) {\n      return; // The rotation didn't change.\n    }\n    this._pagesRotation = rotation;\n\n    const pageNumber = this._currentPageNumber;\n\n    const updateArgs = { rotation };\n    for (const pageView of this._pages) {\n      pageView.update(updateArgs);\n    }\n    // Prevent errors in case the rotation changes *before* the scale has been\n    // set to a non-default value.\n    if (this._currentScaleValue) {\n      this._setScale(this._currentScaleValue, true);\n    }\n\n    this.eventBus.dispatch(\"rotationchanging\", {\n      source: this,\n      pagesRotation: rotation,\n      pageNumber,\n    });\n\n    if (this.defaultRenderingQueue) {\n      this.update();\n    }\n  }\n\n  get firstPagePromise() {\n    return this.pdfDocument ? this._firstPageCapability.promise : null;\n  }\n\n  get onePageRendered() {\n    return this.pdfDocument ? this._onePageRenderedCapability.promise : null;\n  }\n\n  get pagesPromise() {\n    return this.pdfDocument ? this._pagesCapability.promise : null;\n  }\n\n  /**\n   * Currently only *some* permissions are supported.\n   */\n  #initializePermissions(permissions) {\n    if (!permissions) {\n      return;\n    }\n\n    if (!permissions.includes(PermissionFlag.COPY)) {\n      this.viewer.classList.add(ENABLE_PERMISSIONS_CLASS);\n    }\n\n    if (\n      !permissions.includes(PermissionFlag.MODIFY_ANNOTATIONS) &&\n      !permissions.includes(PermissionFlag.FILL_INTERACTIVE_FORMS)\n    ) {\n      if (this.#annotationMode === AnnotationMode.ENABLE_FORMS) {\n        this.#previousAnnotationMode = this.#annotationMode; // Allow resetting.\n        this.#annotationMode = AnnotationMode.ENABLE;\n      }\n    }\n  }\n\n  #onePageRenderedOrForceFetch() {\n    // Unless the viewer *and* its pages are visible, rendering won't start and\n    // `this._onePageRenderedCapability` thus won't be resolved.\n    // To ensure that automatic printing, on document load, still works even in\n    // those cases we force-allow fetching of all pages when:\n    //  - The current window/tab is inactive, which will prevent rendering since\n    //    `requestAnimationFrame` is being used; fixes bug 1746213.\n    //  - The viewer is hidden in the DOM, e.g. in a `display: none` <iframe>\n    //    element; fixes bug 1618621.\n    //  - The viewer is visible, but none of the pages are (e.g. if the\n    //    viewer is very small); fixes bug 1618955.\n    if (\n      document.visibilityState === \"hidden\" ||\n      !this.container.offsetParent ||\n      this._getVisiblePages().views.length === 0\n    ) {\n      return Promise.resolve();\n    }\n\n    // Handle the window/tab becoming inactive *after* rendering has started;\n    // fixes (another part of) bug 1746213.\n    const visibilityChangePromise = new Promise(resolve => {\n      this.#onVisibilityChange = () => {\n        if (document.visibilityState !== \"hidden\") {\n          return;\n        }\n        resolve();\n\n        document.removeEventListener(\n          \"visibilitychange\",\n          this.#onVisibilityChange\n        );\n        this.#onVisibilityChange = null;\n      };\n      document.addEventListener(\"visibilitychange\", this.#onVisibilityChange);\n    });\n\n    return Promise.race([\n      this._onePageRenderedCapability.promise,\n      visibilityChangePromise,\n    ]);\n  }\n\n  /**\n   * @param {PDFDocumentProxy} pdfDocument\n   */\n  setDocument(pdfDocument) {\n    if (this.pdfDocument) {\n      this.eventBus.dispatch(\"pagesdestroy\", { source: this });\n\n      this._cancelRendering();\n      this._resetView();\n\n      if (this.findController) {\n        this.findController.setDocument(null);\n      }\n      if (this._scriptingManager) {\n        this._scriptingManager.setDocument(null);\n      }\n    }\n\n    this.pdfDocument = pdfDocument;\n    if (!pdfDocument) {\n      return;\n    }\n    const isPureXfa = pdfDocument.isPureXfa;\n    const pagesCount = pdfDocument.numPages;\n    const firstPagePromise = pdfDocument.getPage(1);\n    // Rendering (potentially) depends on this, hence fetching it immediately.\n    const optionalContentConfigPromise = pdfDocument.getOptionalContentConfig();\n    const permissionsPromise = this.#enablePermissions\n      ? pdfDocument.getPermissions()\n      : Promise.resolve();\n\n    // Given that browsers don't handle huge amounts of DOM-elements very well,\n    // enforce usage of PAGE-scrolling when loading *very* long/large documents.\n    if (pagesCount > PagesCountLimit.FORCE_SCROLL_MODE_PAGE) {\n      console.warn(\n        \"Forcing PAGE-scrolling for performance reasons, given the length of the document.\"\n      );\n      const mode = (this._scrollMode = ScrollMode.PAGE);\n      this.eventBus.dispatch(\"scrollmodechanged\", { source: this, mode });\n    }\n\n    this._pagesCapability.promise.then(\n      () => {\n        this.eventBus.dispatch(\"pagesloaded\", { source: this, pagesCount });\n      },\n      () => {\n        /* Prevent \"Uncaught (in promise)\"-messages in the console. */\n      }\n    );\n\n    this._onBeforeDraw = evt => {\n      const pageView = this._pages[evt.pageNumber - 1];\n      if (!pageView) {\n        return;\n      }\n      // Add the page to the buffer at the start of drawing. That way it can be\n      // evicted from the buffer and destroyed even if we pause its rendering.\n      this.#buffer.push(pageView);\n    };\n    this.eventBus._on(\"pagerender\", this._onBeforeDraw);\n\n    this._onAfterDraw = evt => {\n      if (evt.cssTransform || this._onePageRenderedCapability.settled) {\n        return;\n      }\n      this._onePageRenderedCapability.resolve({ timestamp: evt.timestamp });\n\n      this.eventBus._off(\"pagerendered\", this._onAfterDraw);\n      this._onAfterDraw = null;\n\n      if (this.#onVisibilityChange) {\n        document.removeEventListener(\n          \"visibilitychange\",\n          this.#onVisibilityChange\n        );\n        this.#onVisibilityChange = null;\n      }\n    };\n    this.eventBus._on(\"pagerendered\", this._onAfterDraw);\n\n    // Fetch a single page so we can get a viewport that will be the default\n    // viewport for all pages\n    Promise.all([firstPagePromise, permissionsPromise])\n      .then(([firstPdfPage, permissions]) => {\n        if (pdfDocument !== this.pdfDocument) {\n          return; // The document was closed while the first page resolved.\n        }\n        this._firstPageCapability.resolve(firstPdfPage);\n        this._optionalContentConfigPromise = optionalContentConfigPromise;\n        this.#initializePermissions(permissions);\n\n        const viewerElement =\n          this._scrollMode === ScrollMode.PAGE ? null : this.viewer;\n        const scale = this.currentScale;\n        const viewport = firstPdfPage.getViewport({\n          scale: scale * PixelsPerInch.PDF_TO_CSS_UNITS,\n        });\n        const textLayerFactory =\n          this.textLayerMode !== TextLayerMode.DISABLE && !isPureXfa\n            ? this\n            : null;\n        const annotationLayerFactory =\n          this.#annotationMode !== AnnotationMode.DISABLE ? this : null;\n        const xfaLayerFactory = isPureXfa ? this : null;\n\n        for (let pageNum = 1; pageNum <= pagesCount; ++pageNum) {\n          const pageView = new PDFPageView({\n            container: viewerElement,\n            eventBus: this.eventBus,\n            id: pageNum,\n            scale,\n            defaultViewport: viewport.clone(),\n            optionalContentConfigPromise,\n            renderingQueue: this.renderingQueue,\n            textLayerFactory,\n            textLayerMode: this.textLayerMode,\n            annotationLayerFactory,\n            annotationMode: this.#annotationMode,\n            xfaLayerFactory,\n            textHighlighterFactory: this,\n            structTreeLayerFactory: this,\n            imageResourcesPath: this.imageResourcesPath,\n            renderer: this.renderer,\n            useOnlyCssZoom: this.useOnlyCssZoom,\n            maxCanvasPixels: this.maxCanvasPixels,\n            pageColors: this.pageColors,\n            l10n: this.l10n,\n          });\n          this._pages.push(pageView);\n        }\n        // Set the first `pdfPage` immediately, since it's already loaded,\n        // rather than having to repeat the `PDFDocumentProxy.getPage` call in\n        // the `this.#ensurePdfPageLoaded` method before rendering can start.\n        const firstPageView = this._pages[0];\n        if (firstPageView) {\n          firstPageView.setPdfPage(firstPdfPage);\n          this.linkService.cachePageRef(1, firstPdfPage.ref);\n        }\n\n        if (this._scrollMode === ScrollMode.PAGE) {\n          // Ensure that the current page becomes visible on document load.\n          this.#ensurePageViewVisible();\n        } else if (this._spreadMode !== SpreadMode.NONE) {\n          this._updateSpreadMode();\n        }\n\n        // Fetch all the pages since the viewport is needed before printing\n        // starts to create the correct size canvas. Wait until one page is\n        // rendered so we don't tie up too many resources early on.\n        this.#onePageRenderedOrForceFetch().then(async () => {\n          if (this.findController) {\n            this.findController.setDocument(pdfDocument); // Enable searching.\n          }\n          if (this._scriptingManager) {\n            this._scriptingManager.setDocument(pdfDocument); // Enable scripting.\n          }\n\n          // In addition to 'disableAutoFetch' being set, also attempt to reduce\n          // resource usage when loading *very* long/large documents.\n          if (\n            pdfDocument.loadingParams.disableAutoFetch ||\n            pagesCount > PagesCountLimit.FORCE_LAZY_PAGE_INIT\n          ) {\n            // XXX: Printing is semi-broken with auto fetch disabled.\n            this._pagesCapability.resolve();\n            return;\n          }\n          let getPagesLeft = pagesCount - 1; // The first page was already loaded.\n\n          if (getPagesLeft <= 0) {\n            this._pagesCapability.resolve();\n            return;\n          }\n          for (let pageNum = 2; pageNum <= pagesCount; ++pageNum) {\n            const promise = pdfDocument.getPage(pageNum).then(\n              pdfPage => {\n                const pageView = this._pages[pageNum - 1];\n                if (!pageView.pdfPage) {\n                  pageView.setPdfPage(pdfPage);\n                }\n                this.linkService.cachePageRef(pageNum, pdfPage.ref);\n                if (--getPagesLeft === 0) {\n                  this._pagesCapability.resolve();\n                }\n              },\n              reason => {\n                console.error(\n                  `Unable to get page ${pageNum} to initialize viewer`,\n                  reason\n                );\n                if (--getPagesLeft === 0) {\n                  this._pagesCapability.resolve();\n                }\n              }\n            );\n\n            if (pageNum % PagesCountLimit.PAUSE_EAGER_PAGE_INIT === 0) {\n              await promise;\n            }\n          }\n        });\n\n        this.eventBus.dispatch(\"pagesinit\", { source: this });\n\n        pdfDocument.getMetadata().then(({ info }) => {\n          if (pdfDocument !== this.pdfDocument) {\n            return; // The document was closed while the metadata resolved.\n          }\n          if (info.Language) {\n            this.viewer.lang = info.Language;\n          }\n        });\n\n        if (this.defaultRenderingQueue) {\n          this.update();\n        }\n      })\n      .catch(reason => {\n        console.error(\"Unable to initialize viewer\", reason);\n\n        this._pagesCapability.reject(reason);\n      });\n  }\n\n  /**\n   * @param {Array|null} labels\n   */\n  setPageLabels(labels) {\n    if (!this.pdfDocument) {\n      return;\n    }\n    if (!labels) {\n      this._pageLabels = null;\n    } else if (\n      !(Array.isArray(labels) && this.pdfDocument.numPages === labels.length)\n    ) {\n      this._pageLabels = null;\n      console.error(`setPageLabels: Invalid page labels.`);\n    } else {\n      this._pageLabels = labels;\n    }\n    // Update all the `PDFPageView` instances.\n    for (let i = 0, ii = this._pages.length; i < ii; i++) {\n      this._pages[i].setPageLabel(this._pageLabels?.[i] ?? null);\n    }\n  }\n\n  _resetView() {\n    this._pages = [];\n    this._currentPageNumber = 1;\n    this._currentScale = UNKNOWN_SCALE;\n    this._currentScaleValue = null;\n    this._pageLabels = null;\n    this.#buffer = new PDFPageViewBuffer(DEFAULT_CACHE_SIZE);\n    this._location = null;\n    this._pagesRotation = 0;\n    this._optionalContentConfigPromise = null;\n    this._firstPageCapability = createPromiseCapability();\n    this._onePageRenderedCapability = createPromiseCapability();\n    this._pagesCapability = createPromiseCapability();\n    this._scrollMode = ScrollMode.VERTICAL;\n    this._previousScrollMode = ScrollMode.UNKNOWN;\n    this._spreadMode = SpreadMode.NONE;\n\n    this.#scrollModePageState = {\n      previousPageNumber: 1,\n      scrollDown: true,\n      pages: [],\n    };\n\n    if (this._onBeforeDraw) {\n      this.eventBus._off(\"pagerender\", this._onBeforeDraw);\n      this._onBeforeDraw = null;\n    }\n    if (this._onAfterDraw) {\n      this.eventBus._off(\"pagerendered\", this._onAfterDraw);\n      this._onAfterDraw = null;\n    }\n    if (this.#onVisibilityChange) {\n      document.removeEventListener(\n        \"visibilitychange\",\n        this.#onVisibilityChange\n      );\n      this.#onVisibilityChange = null;\n    }\n    // Remove the pages from the DOM...\n    this.viewer.textContent = \"\";\n    // ... and reset the Scroll mode CSS class(es) afterwards.\n    this._updateScrollMode();\n\n    this.viewer.removeAttribute(\"lang\");\n    // Reset all PDF document permissions.\n    this.viewer.classList.remove(ENABLE_PERMISSIONS_CLASS);\n\n    if (this.#previousAnnotationMode !== null) {\n      this.#annotationMode = this.#previousAnnotationMode;\n      this.#previousAnnotationMode = null;\n    }\n  }\n\n  #ensurePageViewVisible() {\n    if (this._scrollMode !== ScrollMode.PAGE) {\n      throw new Error(\"#ensurePageViewVisible: Invalid scrollMode value.\");\n    }\n    const pageNumber = this._currentPageNumber,\n      state = this.#scrollModePageState,\n      viewer = this.viewer;\n\n    // Temporarily remove all the pages from the DOM...\n    viewer.textContent = \"\";\n    // ... and clear out the active ones.\n    state.pages.length = 0;\n\n    if (this._spreadMode === SpreadMode.NONE && !this.isInPresentationMode) {\n      // Finally, append the new page to the viewer.\n      const pageView = this._pages[pageNumber - 1];\n      viewer.appendChild(pageView.div);\n\n      state.pages.push(pageView);\n    } else {\n      const pageIndexSet = new Set(),\n        parity = this._spreadMode - 1;\n\n      // Determine the pageIndices in the new spread.\n      if (parity === -1) {\n        // PresentationMode is active, with `SpreadMode.NONE` set.\n        pageIndexSet.add(pageNumber - 1);\n      } else if (pageNumber % 2 !== parity) {\n        // Left-hand side page.\n        pageIndexSet.add(pageNumber - 1);\n        pageIndexSet.add(pageNumber);\n      } else {\n        // Right-hand side page.\n        pageIndexSet.add(pageNumber - 2);\n        pageIndexSet.add(pageNumber - 1);\n      }\n\n      // Finally, append the new pages to the viewer and apply the spreadMode.\n      const spread = document.createElement(\"div\");\n      spread.className = \"spread\";\n\n      if (this.isInPresentationMode) {\n        const dummyPage = document.createElement(\"div\");\n        dummyPage.className = \"dummyPage\";\n        spread.appendChild(dummyPage);\n      }\n\n      for (const i of pageIndexSet) {\n        const pageView = this._pages[i];\n        if (!pageView) {\n          continue;\n        }\n        spread.appendChild(pageView.div);\n\n        state.pages.push(pageView);\n      }\n      viewer.appendChild(spread);\n    }\n\n    state.scrollDown = pageNumber >= state.previousPageNumber;\n    state.previousPageNumber = pageNumber;\n  }\n\n  _scrollUpdate() {\n    if (this.pagesCount === 0) {\n      return;\n    }\n    this.update();\n  }\n\n  #scrollIntoView(pageView, pageSpot = null) {\n    const { div, id } = pageView;\n\n    if (this._scrollMode === ScrollMode.PAGE) {\n      // Ensure that `this._currentPageNumber` is correct.\n      this._setCurrentPageNumber(id);\n\n      this.#ensurePageViewVisible();\n      // Ensure that rendering always occurs, to avoid showing a blank page,\n      // even if the current position doesn't change when the page is scrolled.\n      this.update();\n    }\n\n    if (!pageSpot && !this.isInPresentationMode) {\n      const left = div.offsetLeft + div.clientLeft,\n        right = left + div.clientWidth;\n      const { scrollLeft, clientWidth } = this.container;\n      if (\n        this._scrollMode === ScrollMode.HORIZONTAL ||\n        left < scrollLeft ||\n        right > scrollLeft + clientWidth\n      ) {\n        pageSpot = { left: 0, top: 0 };\n      }\n    }\n    scrollIntoView(div, pageSpot);\n  }\n\n  /**\n   * Prevent unnecessary re-rendering of all pages when the scale changes\n   * only because of limited numerical precision.\n   */\n  #isSameScale(newScale) {\n    return (\n      newScale === this._currentScale ||\n      Math.abs(newScale - this._currentScale) < 1e-15\n    );\n  }\n\n  _setScaleUpdatePages(newScale, newValue, noScroll = false, preset = false) {\n    this._currentScaleValue = newValue.toString();\n\n    if (this.#isSameScale(newScale)) {\n      if (preset) {\n        this.eventBus.dispatch(\"scalechanging\", {\n          source: this,\n          scale: newScale,\n          presetValue: newValue,\n        });\n      }\n      return;\n    }\n\n    this._doc.style.setProperty(\"--zoom-factor\", newScale);\n\n    const updateArgs = { scale: newScale };\n    for (const pageView of this._pages) {\n      pageView.update(updateArgs);\n    }\n    this._currentScale = newScale;\n\n    if (!noScroll) {\n      let page = this._currentPageNumber,\n        dest;\n      if (\n        this._location &&\n        !(this.isInPresentationMode || this.isChangingPresentationMode)\n      ) {\n        page = this._location.pageNumber;\n        dest = [\n          null,\n          { name: \"XYZ\" },\n          this._location.left,\n          this._location.top,\n          null,\n        ];\n      }\n      this.scrollPageIntoView({\n        pageNumber: page,\n        destArray: dest,\n        allowNegativeOffset: true,\n      });\n    }\n\n    this.eventBus.dispatch(\"scalechanging\", {\n      source: this,\n      scale: newScale,\n      presetValue: preset ? newValue : undefined,\n    });\n\n    if (this.defaultRenderingQueue) {\n      this.update();\n    }\n    this.updateContainerHeightCss();\n  }\n\n  /**\n   * @private\n   */\n  get _pageWidthScaleFactor() {\n    if (\n      this._spreadMode !== SpreadMode.NONE &&\n      this._scrollMode !== ScrollMode.HORIZONTAL\n    ) {\n      return 2;\n    }\n    return 1;\n  }\n\n  _setScale(value, noScroll = false) {\n    let scale = parseFloat(value);\n\n    if (scale > 0) {\n      this._setScaleUpdatePages(scale, value, noScroll, /* preset = */ false);\n    } else {\n      const currentPage = this._pages[this._currentPageNumber - 1];\n      if (!currentPage) {\n        return;\n      }\n      let hPadding = SCROLLBAR_PADDING,\n        vPadding = VERTICAL_PADDING;\n\n      if (this.isInPresentationMode) {\n        hPadding = vPadding = 4;\n      } else if (this.removePageBorders) {\n        hPadding = vPadding = 0;\n      } else if (this._scrollMode === ScrollMode.HORIZONTAL) {\n        [hPadding, vPadding] = [vPadding, hPadding]; // Swap the padding values.\n      }\n      const pageWidthScale =\n        (((this.container.clientWidth - hPadding) / currentPage.width) *\n          currentPage.scale) /\n        this._pageWidthScaleFactor;\n      const pageHeightScale =\n        ((this.container.clientHeight - vPadding) / currentPage.height) *\n        currentPage.scale;\n      switch (value) {\n        case \"page-actual\":\n          scale = 1;\n          break;\n        case \"page-width\":\n          scale = pageWidthScale;\n          break;\n        case \"page-height\":\n          scale = pageHeightScale;\n          break;\n        case \"page-fit\":\n          scale = Math.min(pageWidthScale, pageHeightScale);\n          break;\n        case \"auto\":\n          // For pages in landscape mode, fit the page height to the viewer\n          // *unless* the page would thus become too wide to fit horizontally.\n          const horizontalScale = isPortraitOrientation(currentPage)\n            ? pageWidthScale\n            : Math.min(pageHeightScale, pageWidthScale);\n          scale = Math.min(MAX_AUTO_SCALE, horizontalScale);\n          break;\n        default:\n          console.error(`_setScale: \"${value}\" is an unknown zoom value.`);\n          return;\n      }\n      this._setScaleUpdatePages(scale, value, noScroll, /* preset = */ true);\n    }\n  }\n\n  /**\n   * Refreshes page view: scrolls to the current page and updates the scale.\n   */\n  #resetCurrentPageView() {\n    const pageView = this._pages[this._currentPageNumber - 1];\n\n    if (this.isInPresentationMode) {\n      // Fixes the case when PDF has different page sizes.\n      this._setScale(this._currentScaleValue, true);\n    }\n    this.#scrollIntoView(pageView);\n  }\n\n  /**\n   * @param {string} label - The page label.\n   * @returns {number|null} The page number corresponding to the page label,\n   *   or `null` when no page labels exist and/or the input is invalid.\n   */\n  pageLabelToPageNumber(label) {\n    if (!this._pageLabels) {\n      return null;\n    }\n    const i = this._pageLabels.indexOf(label);\n    if (i < 0) {\n      return null;\n    }\n    return i + 1;\n  }\n\n  /**\n   * @typedef {Object} ScrollPageIntoViewParameters\n   * @property {number} pageNumber - The page number.\n   * @property {Array} [destArray] - The original PDF destination array, in the\n   *   format: <page-ref> </XYZ|/FitXXX> <args..>\n   * @property {boolean} [allowNegativeOffset] - Allow negative page offsets.\n   *   The default value is `false`.\n   * @property {boolean} [ignoreDestinationZoom] - Ignore the zoom argument in\n   *   the destination array. The default value is `false`.\n   */\n\n  /**\n   * Scrolls page into view.\n   * @param {ScrollPageIntoViewParameters} params\n   */\n  scrollPageIntoView({\n    pageNumber,\n    destArray = null,\n    allowNegativeOffset = false,\n    ignoreDestinationZoom = false,\n  }) {\n    if (!this.pdfDocument) {\n      return;\n    }\n    const pageView =\n      Number.isInteger(pageNumber) && this._pages[pageNumber - 1];\n    if (!pageView) {\n      console.error(\n        `scrollPageIntoView: \"${pageNumber}\" is not a valid pageNumber parameter.`\n      );\n      return;\n    }\n\n    if (this.isInPresentationMode || !destArray) {\n      this._setCurrentPageNumber(pageNumber, /* resetCurrentPageView = */ true);\n      return;\n    }\n    let x = 0,\n      y = 0;\n    let width = 0,\n      height = 0,\n      widthScale,\n      heightScale;\n    const changeOrientation = pageView.rotation % 180 !== 0;\n    const pageWidth =\n      (changeOrientation ? pageView.height : pageView.width) /\n      pageView.scale /\n      PixelsPerInch.PDF_TO_CSS_UNITS;\n    const pageHeight =\n      (changeOrientation ? pageView.width : pageView.height) /\n      pageView.scale /\n      PixelsPerInch.PDF_TO_CSS_UNITS;\n    let scale = 0;\n    switch (destArray[1].name) {\n      case \"XYZ\":\n        x = destArray[2];\n        y = destArray[3];\n        scale = destArray[4];\n        // If x and/or y coordinates are not supplied, default to\n        // _top_ left of the page (not the obvious bottom left,\n        // since aligning the bottom of the intended page with the\n        // top of the window is rarely helpful).\n        x = x !== null ? x : 0;\n        y = y !== null ? y : pageHeight;\n        break;\n      case \"Fit\":\n      case \"FitB\":\n        scale = \"page-fit\";\n        break;\n      case \"FitH\":\n      case \"FitBH\":\n        y = destArray[2];\n        scale = \"page-width\";\n        // According to the PDF spec, section 12.3.2.2, a `null` value in the\n        // parameter should maintain the position relative to the new page.\n        if (y === null && this._location) {\n          x = this._location.left;\n          y = this._location.top;\n        } else if (typeof y !== \"number\" || y < 0) {\n          // The \"top\" value isn't optional, according to the spec, however some\n          // bad PDF generators will pretend that it is (fixes bug 1663390).\n          y = pageHeight;\n        }\n        break;\n      case \"FitV\":\n      case \"FitBV\":\n        x = destArray[2];\n        width = pageWidth;\n        height = pageHeight;\n        scale = \"page-height\";\n        break;\n      case \"FitR\":\n        x = destArray[2];\n        y = destArray[3];\n        width = destArray[4] - x;\n        height = destArray[5] - y;\n        const hPadding = this.removePageBorders ? 0 : SCROLLBAR_PADDING;\n        const vPadding = this.removePageBorders ? 0 : VERTICAL_PADDING;\n\n        widthScale =\n          (this.container.clientWidth - hPadding) /\n          width /\n          PixelsPerInch.PDF_TO_CSS_UNITS;\n        heightScale =\n          (this.container.clientHeight - vPadding) /\n          height /\n          PixelsPerInch.PDF_TO_CSS_UNITS;\n        scale = Math.min(Math.abs(widthScale), Math.abs(heightScale));\n        break;\n      default:\n        console.error(\n          `scrollPageIntoView: \"${destArray[1].name}\" is not a valid destination type.`\n        );\n        return;\n    }\n\n    if (!ignoreDestinationZoom) {\n      if (scale && scale !== this._currentScale) {\n        this.currentScaleValue = scale;\n      } else if (this._currentScale === UNKNOWN_SCALE) {\n        this.currentScaleValue = DEFAULT_SCALE_VALUE;\n      }\n    }\n\n    if (scale === \"page-fit\" && !destArray[4]) {\n      this.#scrollIntoView(pageView);\n      return;\n    }\n\n    const boundingRect = [\n      pageView.viewport.convertToViewportPoint(x, y),\n      pageView.viewport.convertToViewportPoint(x + width, y + height),\n    ];\n    let left = Math.min(boundingRect[0][0], boundingRect[1][0]);\n    let top = Math.min(boundingRect[0][1], boundingRect[1][1]);\n\n    if (!allowNegativeOffset) {\n      // Some bad PDF generators will create destinations with e.g. top values\n      // that exceeds the page height. Ensure that offsets are not negative,\n      // to prevent a previous page from becoming visible (fixes bug 874482).\n      left = Math.max(left, 0);\n      top = Math.max(top, 0);\n    }\n    this.#scrollIntoView(pageView, /* pageSpot = */ { left, top });\n  }\n\n  _updateLocation(firstPage) {\n    const currentScale = this._currentScale;\n    const currentScaleValue = this._currentScaleValue;\n    const normalizedScaleValue =\n      parseFloat(currentScaleValue) === currentScale\n        ? Math.round(currentScale * 10000) / 100\n        : currentScaleValue;\n\n    const pageNumber = firstPage.id;\n    const currentPageView = this._pages[pageNumber - 1];\n    const container = this.container;\n    const topLeft = currentPageView.getPagePoint(\n      container.scrollLeft - firstPage.x,\n      container.scrollTop - firstPage.y\n    );\n    const intLeft = Math.round(topLeft[0]);\n    const intTop = Math.round(topLeft[1]);\n\n    let pdfOpenParams = `#page=${pageNumber}`;\n    if (!this.isInPresentationMode) {\n      pdfOpenParams += `&zoom=${normalizedScaleValue},${intLeft},${intTop}`;\n    }\n\n    this._location = {\n      pageNumber,\n      scale: normalizedScaleValue,\n      top: intTop,\n      left: intLeft,\n      rotation: this._pagesRotation,\n      pdfOpenParams,\n    };\n  }\n\n  update() {\n    const visible = this._getVisiblePages();\n    const visiblePages = visible.views,\n      numVisiblePages = visiblePages.length;\n\n    if (numVisiblePages === 0) {\n      return;\n    }\n    const newCacheSize = Math.max(DEFAULT_CACHE_SIZE, 2 * numVisiblePages + 1);\n    this.#buffer.resize(newCacheSize, visible.ids);\n\n    this.renderingQueue.renderHighestPriority(visible);\n\n    const isSimpleLayout =\n      this._spreadMode === SpreadMode.NONE &&\n      (this._scrollMode === ScrollMode.PAGE ||\n        this._scrollMode === ScrollMode.VERTICAL);\n    const currentId = this._currentPageNumber;\n    let stillFullyVisible = false;\n\n    for (const page of visiblePages) {\n      if (page.percent < 100) {\n        break;\n      }\n      if (page.id === currentId && isSimpleLayout) {\n        stillFullyVisible = true;\n        break;\n      }\n    }\n    this._setCurrentPageNumber(\n      stillFullyVisible ? currentId : visiblePages[0].id\n    );\n\n    this._updateLocation(visible.first);\n    this.eventBus.dispatch(\"updateviewarea\", {\n      source: this,\n      location: this._location,\n    });\n  }\n\n  containsElement(element) {\n    return this.container.contains(element);\n  }\n\n  focus() {\n    this.container.focus();\n  }\n\n  get _isContainerRtl() {\n    return getComputedStyle(this.container).direction === \"rtl\";\n  }\n\n  get isInPresentationMode() {\n    return this.presentationModeState === PresentationModeState.FULLSCREEN;\n  }\n\n  get isChangingPresentationMode() {\n    return this.presentationModeState === PresentationModeState.CHANGING;\n  }\n\n  get isHorizontalScrollbarEnabled() {\n    return this.isInPresentationMode\n      ? false\n      : this.container.scrollWidth > this.container.clientWidth;\n  }\n\n  get isVerticalScrollbarEnabled() {\n    return this.isInPresentationMode\n      ? false\n      : this.container.scrollHeight > this.container.clientHeight;\n  }\n\n  _getVisiblePages() {\n    const views =\n        this._scrollMode === ScrollMode.PAGE\n          ? this.#scrollModePageState.pages\n          : this._pages,\n      horizontal = this._scrollMode === ScrollMode.HORIZONTAL,\n      rtl = horizontal && this._isContainerRtl;\n\n    return getVisibleElements({\n      scrollEl: this.container,\n      views,\n      sortByVisibility: true,\n      horizontal,\n      rtl,\n    });\n  }\n\n  /**\n   * @param {number} pageNumber\n   */\n  isPageVisible(pageNumber) {\n    if (!this.pdfDocument) {\n      return false;\n    }\n    if (\n      !(\n        Number.isInteger(pageNumber) &&\n        pageNumber > 0 &&\n        pageNumber <= this.pagesCount\n      )\n    ) {\n      console.error(`isPageVisible: \"${pageNumber}\" is not a valid page.`);\n      return false;\n    }\n    return this._getVisiblePages().ids.has(pageNumber);\n  }\n\n  /**\n   * @param {number} pageNumber\n   */\n  isPageCached(pageNumber) {\n    if (!this.pdfDocument) {\n      return false;\n    }\n    if (\n      !(\n        Number.isInteger(pageNumber) &&\n        pageNumber > 0 &&\n        pageNumber <= this.pagesCount\n      )\n    ) {\n      console.error(`isPageCached: \"${pageNumber}\" is not a valid page.`);\n      return false;\n    }\n    const pageView = this._pages[pageNumber - 1];\n    return this.#buffer.has(pageView);\n  }\n\n  cleanup() {\n    for (const pageView of this._pages) {\n      if (pageView.renderingState !== RenderingStates.FINISHED) {\n        pageView.reset();\n      }\n    }\n  }\n\n  /**\n   * @private\n   */\n  _cancelRendering() {\n    for (const pageView of this._pages) {\n      pageView.cancelRendering();\n    }\n  }\n\n  /**\n   * @param {PDFPageView} pageView\n   * @returns {Promise<PDFPageProxy | null>}\n   */\n  async #ensurePdfPageLoaded(pageView) {\n    if (pageView.pdfPage) {\n      return pageView.pdfPage;\n    }\n    try {\n      const pdfPage = await this.pdfDocument.getPage(pageView.id);\n      if (!pageView.pdfPage) {\n        pageView.setPdfPage(pdfPage);\n      }\n      if (!this.linkService._cachedPageNumber?.(pdfPage.ref)) {\n        this.linkService.cachePageRef(pageView.id, pdfPage.ref);\n      }\n      return pdfPage;\n    } catch (reason) {\n      console.error(\"Unable to get page for page view\", reason);\n      return null; // Page error -- there is nothing that can be done.\n    }\n  }\n\n  #getScrollAhead(visible) {\n    if (visible.first?.id === 1) {\n      return true;\n    } else if (visible.last?.id === this.pagesCount) {\n      return false;\n    }\n    switch (this._scrollMode) {\n      case ScrollMode.PAGE:\n        return this.#scrollModePageState.scrollDown;\n      case ScrollMode.HORIZONTAL:\n        return this.scroll.right;\n    }\n    return this.scroll.down;\n  }\n\n  /**\n   * Only show the `loadingIcon`-spinner on visible pages (see issue 14242).\n   */\n  #toggleLoadingIconSpinner(visibleIds) {\n    for (const id of visibleIds) {\n      const pageView = this._pages[id - 1];\n      pageView?.toggleLoadingIconSpinner(/* viewVisible = */ true);\n    }\n    for (const pageView of this.#buffer) {\n      if (visibleIds.has(pageView.id)) {\n        // Handled above, since the \"buffer\" may not contain all visible pages.\n        continue;\n      }\n      pageView.toggleLoadingIconSpinner(/* viewVisible = */ false);\n    }\n  }\n\n  forceRendering(currentlyVisiblePages) {\n    const visiblePages = currentlyVisiblePages || this._getVisiblePages();\n    const scrollAhead = this.#getScrollAhead(visiblePages);\n    const preRenderExtra =\n      this._spreadMode !== SpreadMode.NONE &&\n      this._scrollMode !== ScrollMode.HORIZONTAL;\n\n    const pageView = this.renderingQueue.getHighestPriority(\n      visiblePages,\n      this._pages,\n      scrollAhead,\n      preRenderExtra\n    );\n    this.#toggleLoadingIconSpinner(visiblePages.ids);\n\n    if (pageView) {\n      this.#ensurePdfPageLoaded(pageView).then(() => {\n        this.renderingQueue.renderView(pageView);\n      });\n      return true;\n    }\n    return false;\n  }\n\n  /**\n   * @param {HTMLDivElement} textLayerDiv\n   * @param {number} pageIndex\n   * @param {PageViewport} viewport\n   * @param {boolean} enhanceTextSelection\n   * @param {EventBus} eventBus\n   * @param {TextHighlighter} highlighter\n   * @returns {TextLayerBuilder}\n   */\n  createTextLayerBuilder(\n    textLayerDiv,\n    pageIndex,\n    viewport,\n    enhanceTextSelection = false,\n    eventBus,\n    highlighter\n  ) {\n    return new TextLayerBuilder({\n      textLayerDiv,\n      eventBus,\n      pageIndex,\n      viewport,\n      enhanceTextSelection: this.isInPresentationMode\n        ? false\n        : enhanceTextSelection,\n      highlighter,\n    });\n  }\n\n  /**\n   * @param {number} pageIndex\n   * @param {EventBus} eventBus\n   * @returns {TextHighlighter}\n   */\n  createTextHighlighter(pageIndex, eventBus) {\n    return new TextHighlighter({\n      eventBus,\n      pageIndex,\n      findController: this.isInPresentationMode ? null : this.findController,\n    });\n  }\n\n  /**\n   * @param {HTMLDivElement} pageDiv\n   * @param {PDFPageProxy} pdfPage\n   * @param {AnnotationStorage} [annotationStorage] - Storage for annotation\n   *   data in forms.\n   * @param {string} [imageResourcesPath] - Path for image resources, mainly\n   *   for annotation icons. Include trailing slash.\n   * @param {boolean} renderForms\n   * @param {IL10n} l10n\n   * @param {boolean} [enableScripting]\n   * @param {Promise<boolean>} [hasJSActionsPromise]\n   * @param {Object} [mouseState]\n   * @param {Promise<Object<string, Array<Object>> | null>}\n   *   [fieldObjectsPromise]\n   * @param {Map<string, HTMLCanvasElement>} [annotationCanvasMap]\n   * @returns {AnnotationLayerBuilder}\n   */\n  createAnnotationLayerBuilder(\n    pageDiv,\n    pdfPage,\n    annotationStorage = null,\n    imageResourcesPath = \"\",\n    renderForms = true,\n    l10n = NullL10n,\n    enableScripting = null,\n    hasJSActionsPromise = null,\n    mouseState = null,\n    fieldObjectsPromise = null,\n    annotationCanvasMap = null\n  ) {\n    return new AnnotationLayerBuilder({\n      pageDiv,\n      pdfPage,\n      annotationStorage:\n        annotationStorage || this.pdfDocument?.annotationStorage,\n      imageResourcesPath,\n      renderForms,\n      linkService: this.linkService,\n      downloadManager: this.downloadManager,\n      l10n,\n      enableScripting: enableScripting ?? this.enableScripting,\n      hasJSActionsPromise:\n        hasJSActionsPromise || this.pdfDocument?.hasJSActions(),\n      fieldObjectsPromise:\n        fieldObjectsPromise || this.pdfDocument?.getFieldObjects(),\n      mouseState: mouseState || this._scriptingManager?.mouseState,\n      annotationCanvasMap,\n    });\n  }\n\n  /**\n   * @param {HTMLDivElement} pageDiv\n   * @param {PDFPageProxy} pdfPage\n   * @param {AnnotationStorage} [annotationStorage] - Storage for annotation\n   *   data in forms.\n   * @returns {XfaLayerBuilder}\n   */\n  createXfaLayerBuilder(pageDiv, pdfPage, annotationStorage = null) {\n    return new XfaLayerBuilder({\n      pageDiv,\n      pdfPage,\n      annotationStorage:\n        annotationStorage || this.pdfDocument?.annotationStorage,\n      linkService: this.linkService,\n    });\n  }\n\n  /**\n   * @param {PDFPageProxy} pdfPage\n   * @returns {StructTreeLayerBuilder}\n   */\n  createStructTreeLayerBuilder(pdfPage) {\n    return new StructTreeLayerBuilder({\n      pdfPage,\n    });\n  }\n\n  /**\n   * @type {boolean} Whether all pages of the PDF document have identical\n   *   widths and heights.\n   */\n  get hasEqualPageSizes() {\n    const firstPageView = this._pages[0];\n    for (let i = 1, ii = this._pages.length; i < ii; ++i) {\n      const pageView = this._pages[i];\n      if (\n        pageView.width !== firstPageView.width ||\n        pageView.height !== firstPageView.height\n      ) {\n        return false;\n      }\n    }\n    return true;\n  }\n\n  /**\n   * Returns sizes of the pages.\n   * @returns {Array} Array of objects with width/height/rotation fields.\n   */\n  getPagesOverview() {\n    return this._pages.map(pageView => {\n      const viewport = pageView.pdfPage.getViewport({ scale: 1 });\n\n      if (!this.enablePrintAutoRotate || isPortraitOrientation(viewport)) {\n        return {\n          width: viewport.width,\n          height: viewport.height,\n          rotation: viewport.rotation,\n        };\n      }\n      // Landscape orientation.\n      return {\n        width: viewport.height,\n        height: viewport.width,\n        rotation: (viewport.rotation - 90) % 360,\n      };\n    });\n  }\n\n  /**\n   * @type {Promise<OptionalContentConfig | null>}\n   */\n  get optionalContentConfigPromise() {\n    if (!this.pdfDocument) {\n      return Promise.resolve(null);\n    }\n    if (!this._optionalContentConfigPromise) {\n      // Prevent issues if the getter is accessed *before* the `onePageRendered`\n      // promise has resolved; won't (normally) happen in the default viewer.\n      return this.pdfDocument.getOptionalContentConfig();\n    }\n    return this._optionalContentConfigPromise;\n  }\n\n  /**\n   * @param {Promise<OptionalContentConfig>} promise - A promise that is\n   *   resolved with an {@link OptionalContentConfig} instance.\n   */\n  set optionalContentConfigPromise(promise) {\n    if (!(promise instanceof Promise)) {\n      throw new Error(`Invalid optionalContentConfigPromise: ${promise}`);\n    }\n    if (!this.pdfDocument) {\n      return;\n    }\n    if (!this._optionalContentConfigPromise) {\n      // Ignore the setter *before* the `onePageRendered` promise has resolved,\n      // since it'll be overwritten anyway; won't happen in the default viewer.\n      return;\n    }\n    this._optionalContentConfigPromise = promise;\n\n    const updateArgs = { optionalContentConfigPromise: promise };\n    for (const pageView of this._pages) {\n      pageView.update(updateArgs);\n    }\n    this.update();\n\n    this.eventBus.dispatch(\"optionalcontentconfigchanged\", {\n      source: this,\n      promise,\n    });\n  }\n\n  /**\n   * @type {number} One of the values in {ScrollMode}.\n   */\n  get scrollMode() {\n    return this._scrollMode;\n  }\n\n  /**\n   * @param {number} mode - The direction in which the document pages should be\n   *   laid out within the scrolling container.\n   *   The constants from {ScrollMode} should be used.\n   */\n  set scrollMode(mode) {\n    if (this._scrollMode === mode) {\n      return; // The Scroll mode didn't change.\n    }\n    if (!isValidScrollMode(mode)) {\n      throw new Error(`Invalid scroll mode: ${mode}`);\n    }\n    if (this.pagesCount > PagesCountLimit.FORCE_SCROLL_MODE_PAGE) {\n      return; // Disabled for performance reasons.\n    }\n    this._previousScrollMode = this._scrollMode;\n\n    this._scrollMode = mode;\n    this.eventBus.dispatch(\"scrollmodechanged\", { source: this, mode });\n\n    this._updateScrollMode(/* pageNumber = */ this._currentPageNumber);\n  }\n\n  _updateScrollMode(pageNumber = null) {\n    const scrollMode = this._scrollMode,\n      viewer = this.viewer;\n\n    viewer.classList.toggle(\n      \"scrollHorizontal\",\n      scrollMode === ScrollMode.HORIZONTAL\n    );\n    viewer.classList.toggle(\"scrollWrapped\", scrollMode === ScrollMode.WRAPPED);\n\n    if (!this.pdfDocument || !pageNumber) {\n      return;\n    }\n\n    if (scrollMode === ScrollMode.PAGE) {\n      this.#ensurePageViewVisible();\n    } else if (this._previousScrollMode === ScrollMode.PAGE) {\n      // Ensure that the current spreadMode is still applied correctly when\n      // the *previous* scrollMode was `ScrollMode.PAGE`.\n      this._updateSpreadMode();\n    }\n    // Non-numeric scale values can be sensitive to the scroll orientation.\n    // Call this before re-scrolling to the current page, to ensure that any\n    // changes in scale don't move the current page.\n    if (this._currentScaleValue && isNaN(this._currentScaleValue)) {\n      this._setScale(this._currentScaleValue, true);\n    }\n    this._setCurrentPageNumber(pageNumber, /* resetCurrentPageView = */ true);\n    this.update();\n  }\n\n  /**\n   * @type {number} One of the values in {SpreadMode}.\n   */\n  get spreadMode() {\n    return this._spreadMode;\n  }\n\n  /**\n   * @param {number} mode - Group the pages in spreads, starting with odd- or\n   *   even-number pages (unless `SpreadMode.NONE` is used).\n   *   The constants from {SpreadMode} should be used.\n   */\n  set spreadMode(mode) {\n    if (this._spreadMode === mode) {\n      return; // The Spread mode didn't change.\n    }\n    if (!isValidSpreadMode(mode)) {\n      throw new Error(`Invalid spread mode: ${mode}`);\n    }\n    this._spreadMode = mode;\n    this.eventBus.dispatch(\"spreadmodechanged\", { source: this, mode });\n\n    this._updateSpreadMode(/* pageNumber = */ this._currentPageNumber);\n  }\n\n  _updateSpreadMode(pageNumber = null) {\n    if (!this.pdfDocument) {\n      return;\n    }\n    const viewer = this.viewer,\n      pages = this._pages;\n\n    if (this._scrollMode === ScrollMode.PAGE) {\n      this.#ensurePageViewVisible();\n    } else {\n      // Temporarily remove all the pages from the DOM.\n      viewer.textContent = \"\";\n\n      if (this._spreadMode === SpreadMode.NONE) {\n        for (const pageView of this._pages) {\n          viewer.appendChild(pageView.div);\n        }\n      } else {\n        const parity = this._spreadMode - 1;\n        let spread = null;\n        for (let i = 0, ii = pages.length; i < ii; ++i) {\n          if (spread === null) {\n            spread = document.createElement(\"div\");\n            spread.className = \"spread\";\n            viewer.appendChild(spread);\n          } else if (i % 2 === parity) {\n            spread = spread.cloneNode(false);\n            viewer.appendChild(spread);\n          }\n          spread.appendChild(pages[i].div);\n        }\n      }\n    }\n\n    if (!pageNumber) {\n      return;\n    }\n    // Non-numeric scale values can be sensitive to the scroll orientation.\n    // Call this before re-scrolling to the current page, to ensure that any\n    // changes in scale don't move the current page.\n    if (this._currentScaleValue && isNaN(this._currentScaleValue)) {\n      this._setScale(this._currentScaleValue, true);\n    }\n    this._setCurrentPageNumber(pageNumber, /* resetCurrentPageView = */ true);\n    this.update();\n  }\n\n  /**\n   * @private\n   */\n  _getPageAdvance(currentPageNumber, previous = false) {\n    switch (this._scrollMode) {\n      case ScrollMode.WRAPPED: {\n        const { views } = this._getVisiblePages(),\n          pageLayout = new Map();\n\n        // Determine the current (visible) page layout.\n        for (const { id, y, percent, widthPercent } of views) {\n          if (percent === 0 || widthPercent < 100) {\n            continue;\n          }\n          let yArray = pageLayout.get(y);\n          if (!yArray) {\n            pageLayout.set(y, (yArray ||= []));\n          }\n          yArray.push(id);\n        }\n        // Find the row of the current page.\n        for (const yArray of pageLayout.values()) {\n          const currentIndex = yArray.indexOf(currentPageNumber);\n          if (currentIndex === -1) {\n            continue;\n          }\n          const numPages = yArray.length;\n          if (numPages === 1) {\n            break;\n          }\n          // Handle documents with varying page sizes.\n          if (previous) {\n            for (let i = currentIndex - 1, ii = 0; i >= ii; i--) {\n              const currentId = yArray[i],\n                expectedId = yArray[i + 1] - 1;\n              if (currentId < expectedId) {\n                return currentPageNumber - expectedId;\n              }\n            }\n          } else {\n            for (let i = currentIndex + 1, ii = numPages; i < ii; i++) {\n              const currentId = yArray[i],\n                expectedId = yArray[i - 1] + 1;\n              if (currentId > expectedId) {\n                return expectedId - currentPageNumber;\n              }\n            }\n          }\n          // The current row is \"complete\", advance to the previous/next one.\n          if (previous) {\n            const firstId = yArray[0];\n            if (firstId < currentPageNumber) {\n              return currentPageNumber - firstId + 1;\n            }\n          } else {\n            const lastId = yArray[numPages - 1];\n            if (lastId > currentPageNumber) {\n              return lastId - currentPageNumber + 1;\n            }\n          }\n          break;\n        }\n        break;\n      }\n      case ScrollMode.HORIZONTAL: {\n        break;\n      }\n      case ScrollMode.PAGE:\n      case ScrollMode.VERTICAL: {\n        if (this._spreadMode === SpreadMode.NONE) {\n          break; // Normal vertical scrolling.\n        }\n        const parity = this._spreadMode - 1;\n\n        if (previous && currentPageNumber % 2 !== parity) {\n          break; // Left-hand side page.\n        } else if (!previous && currentPageNumber % 2 === parity) {\n          break; // Right-hand side page.\n        }\n        const { views } = this._getVisiblePages(),\n          expectedId = previous ? currentPageNumber - 1 : currentPageNumber + 1;\n\n        for (const { id, percent, widthPercent } of views) {\n          if (id !== expectedId) {\n            continue;\n          }\n          if (percent > 0 && widthPercent === 100) {\n            return 2;\n          }\n          break;\n        }\n        break;\n      }\n    }\n    return 1;\n  }\n\n  /**\n   * Go to the next page, taking scroll/spread-modes into account.\n   * @returns {boolean} Whether navigation occured.\n   */\n  nextPage() {\n    const currentPageNumber = this._currentPageNumber,\n      pagesCount = this.pagesCount;\n\n    if (currentPageNumber >= pagesCount) {\n      return false;\n    }\n    const advance =\n      this._getPageAdvance(currentPageNumber, /* previous = */ false) || 1;\n\n    this.currentPageNumber = Math.min(currentPageNumber + advance, pagesCount);\n    return true;\n  }\n\n  /**\n   * Go to the previous page, taking scroll/spread-modes into account.\n   * @returns {boolean} Whether navigation occured.\n   */\n  previousPage() {\n    const currentPageNumber = this._currentPageNumber;\n\n    if (currentPageNumber <= 1) {\n      return false;\n    }\n    const advance =\n      this._getPageAdvance(currentPageNumber, /* previous = */ true) || 1;\n\n    this.currentPageNumber = Math.max(currentPageNumber - advance, 1);\n    return true;\n  }\n\n  /**\n   * Increase the current zoom level one, or more, times.\n   * @param {number} [steps] - Defaults to zooming once.\n   */\n  increaseScale(steps = 1) {\n    let newScale = this._currentScale;\n    do {\n      newScale = (newScale * DEFAULT_SCALE_DELTA).toFixed(2);\n      newScale = Math.ceil(newScale * 10) / 10;\n      newScale = Math.min(MAX_SCALE, newScale);\n    } while (--steps > 0 && newScale < MAX_SCALE);\n    this.currentScaleValue = newScale;\n  }\n\n  /**\n   * Decrease the current zoom level one, or more, times.\n   * @param {number} [steps] - Defaults to zooming once.\n   */\n  decreaseScale(steps = 1) {\n    let newScale = this._currentScale;\n    do {\n      newScale = (newScale / DEFAULT_SCALE_DELTA).toFixed(2);\n      newScale = Math.floor(newScale * 10) / 10;\n      newScale = Math.max(MIN_SCALE, newScale);\n    } while (--steps > 0 && newScale > MIN_SCALE);\n    this.currentScaleValue = newScale;\n  }\n\n  updateContainerHeightCss() {\n    const height = this.container.clientHeight;\n\n    if (height !== this.#previousContainerHeight) {\n      this.#previousContainerHeight = height;\n\n      this._doc.style.setProperty(\"--viewer-container-height\", `${height}px`);\n    }\n  }\n}\n\nexport { BaseViewer, PagesCountLimit, PDFPageViewBuffer };\n","/* Copyright 2012 Mozilla Foundation\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n// eslint-disable-next-line max-len\n/** @typedef {import(\"../src/display/display_utils\").PageViewport} PageViewport */\n// eslint-disable-next-line max-len\n/** @typedef {import(\"../src/display/optional_content_config\").OptionalContentConfig} OptionalContentConfig */\n/** @typedef {import(\"./event_utils\").EventBus} EventBus */\n/** @typedef {import(\"./interfaces\").IL10n} IL10n */\n// eslint-disable-next-line max-len\n/** @typedef {import(\"./interfaces\").IPDFAnnotationLayerFactory} IPDFAnnotationLayerFactory */\n// eslint-disable-next-line max-len\n/** @typedef {import(\"./interfaces\").IPDFStructTreeLayerFactory} IPDFStructTreeLayerFactory */\n// eslint-disable-next-line max-len\n/** @typedef {import(\"./interfaces\").IPDFTextLayerFactory} IPDFTextLayerFactory */\n/** @typedef {import(\"./interfaces\").IL10n} IPDFXfaLayerFactory */\n/** @typedef {import(\"./interfaces\").IRenderableView} IRenderableView */\n// eslint-disable-next-line max-len\n/** @typedef {import(\"./pdf_rendering_queue\").PDFRenderingQueue} PDFRenderingQueue */\n\nimport {\n  AnnotationMode,\n  createPromiseCapability,\n  PixelsPerInch,\n  RenderingCancelledException,\n  SVGGraphics,\n} from \"pdfjs-lib\";\nimport {\n  approximateFraction,\n  DEFAULT_SCALE,\n  OutputScale,\n  RendererType,\n  RenderingStates,\n  roundToDivide,\n  TextLayerMode,\n} from \"./ui_utils.js\";\nimport { compatibilityParams } from \"./app_options.js\";\nimport { NullL10n } from \"./l10n_utils.js\";\n\n/**\n * @typedef {Object} PDFPageViewOptions\n * @property {HTMLDivElement} [container] - The viewer element.\n * @property {EventBus} eventBus - The application event bus.\n * @property {number} id - The page unique ID (normally its number).\n * @property {number} scale - The page scale display.\n * @property {PageViewport} defaultViewport - The page viewport.\n * @property {Promise<OptionalContentConfig>} [optionalContentConfigPromise] -\n *   A promise that is resolved with an {@link OptionalContentConfig} instance.\n *   The default value is `null`.\n * @property {PDFRenderingQueue} renderingQueue - The rendering queue object.\n * @property {IPDFTextLayerFactory} textLayerFactory\n * @property {number} [textLayerMode] - Controls if the text layer used for\n *   selection and searching is created, and if the improved text selection\n *   behaviour is enabled. The constants from {TextLayerMode} should be used.\n *   The default value is `TextLayerMode.ENABLE`.\n * @property {number} [annotationMode] - Controls if the annotation layer is\n *   created, and if interactive form elements or `AnnotationStorage`-data are\n *   being rendered. The constants from {@link AnnotationMode} should be used;\n *   see also {@link RenderParameters} and {@link GetOperatorListParameters}.\n *   The default value is `AnnotationMode.ENABLE_FORMS`.\n * @property {IPDFAnnotationLayerFactory} annotationLayerFactory\n * @property {IPDFXfaLayerFactory} xfaLayerFactory\n * @property {IPDFStructTreeLayerFactory} structTreeLayerFactory\n * @property {Object} [textHighlighterFactory]\n * @property {string} [imageResourcesPath] - Path for image resources, mainly\n *   for annotation icons. Include trailing slash.\n * @property {string} renderer - 'canvas' or 'svg'. The default is 'canvas'.\n * @property {boolean} [useOnlyCssZoom] - Enables CSS only zooming. The default\n *   value is `false`.\n * @property {number} [maxCanvasPixels] - The maximum supported canvas size in\n *   total pixels, i.e. width * height. Use -1 for no limit. The default value\n *   is 4096 * 4096 (16 mega-pixels).\n * @property {Object} [pageColors] - Overwrites background and foreground colors\n *   with user defined ones in order to improve readability in high contrast\n *   mode.\n * @property {IL10n} l10n - Localization service.\n */\n\nconst MAX_CANVAS_PIXELS = compatibilityParams.maxCanvasPixels || 16777216;\n\n/**\n * @implements {IRenderableView}\n */\nclass PDFPageView {\n  #annotationMode = AnnotationMode.ENABLE_FORMS;\n\n  /**\n   * @param {PDFPageViewOptions} options\n   */\n  constructor(options) {\n    const container = options.container;\n    const defaultViewport = options.defaultViewport;\n\n    this.id = options.id;\n    this.renderingId = \"page\" + this.id;\n\n    this.pdfPage = null;\n    this.pageLabel = null;\n    this.rotation = 0;\n    this.scale = options.scale || DEFAULT_SCALE;\n    this.viewport = defaultViewport;\n    this.pdfPageRotate = defaultViewport.rotation;\n    this._optionalContentConfigPromise =\n      options.optionalContentConfigPromise || null;\n    this.hasRestrictedScaling = false;\n    this.textLayerMode = options.textLayerMode ?? TextLayerMode.ENABLE;\n    this.#annotationMode =\n      options.annotationMode ?? AnnotationMode.ENABLE_FORMS;\n    this.imageResourcesPath = options.imageResourcesPath || \"\";\n    this.useOnlyCssZoom = options.useOnlyCssZoom || false;\n    this.maxCanvasPixels = options.maxCanvasPixels || MAX_CANVAS_PIXELS;\n    this.pageColors = options.pageColors || null;\n\n    this.eventBus = options.eventBus;\n    this.renderingQueue = options.renderingQueue;\n    this.textLayerFactory = options.textLayerFactory;\n    this.annotationLayerFactory = options.annotationLayerFactory;\n    this.xfaLayerFactory = options.xfaLayerFactory;\n    this.textHighlighter =\n      options.textHighlighterFactory?.createTextHighlighter(\n        this.id - 1,\n        this.eventBus\n      );\n    this.structTreeLayerFactory = options.structTreeLayerFactory;\n    this.renderer = options.renderer || RendererType.CANVAS;\n    this.l10n = options.l10n || NullL10n;\n\n    this.paintTask = null;\n    this.paintedViewportMap = new WeakMap();\n    this.renderingState = RenderingStates.INITIAL;\n    this.resume = null;\n    this._renderError = null;\n    this._isStandalone = !this.renderingQueue?.hasViewer();\n\n    this._annotationCanvasMap = null;\n\n    this.annotationLayer = null;\n    this.textLayer = null;\n    this.zoomLayer = null;\n    this.xfaLayer = null;\n    this.structTreeLayer = null;\n\n    const div = document.createElement(\"div\");\n    div.className = \"page\";\n    div.style.width = Math.floor(this.viewport.width) + \"px\";\n    div.style.height = Math.floor(this.viewport.height) + \"px\";\n    div.setAttribute(\"data-page-number\", this.id);\n    div.setAttribute(\"role\", \"region\");\n    this.l10n.get(\"page_landmark\", { page: this.id }).then(msg => {\n      div.setAttribute(\"aria-label\", msg);\n    });\n    this.div = div;\n\n    container?.appendChild(div);\n  }\n\n  setPdfPage(pdfPage) {\n    this.pdfPage = pdfPage;\n    this.pdfPageRotate = pdfPage.rotate;\n\n    const totalRotation = (this.rotation + this.pdfPageRotate) % 360;\n    this.viewport = pdfPage.getViewport({\n      scale: this.scale * PixelsPerInch.PDF_TO_CSS_UNITS,\n      rotation: totalRotation,\n    });\n    this.reset();\n  }\n\n  destroy() {\n    this.reset();\n    if (this.pdfPage) {\n      this.pdfPage.cleanup();\n    }\n  }\n\n  /**\n   * @private\n   */\n  async _renderAnnotationLayer() {\n    let error = null;\n    try {\n      await this.annotationLayer.render(this.viewport, \"display\");\n    } catch (ex) {\n      error = ex;\n    } finally {\n      this.eventBus.dispatch(\"annotationlayerrendered\", {\n        source: this,\n        pageNumber: this.id,\n        error,\n      });\n    }\n  }\n\n  /**\n   * @private\n   */\n  async _renderXfaLayer() {\n    let error = null;\n    try {\n      const result = await this.xfaLayer.render(this.viewport, \"display\");\n      if (this.textHighlighter) {\n        this._buildXfaTextContentItems(result.textDivs);\n      }\n    } catch (ex) {\n      error = ex;\n    } finally {\n      this.eventBus.dispatch(\"xfalayerrendered\", {\n        source: this,\n        pageNumber: this.id,\n        error,\n      });\n    }\n  }\n\n  async _buildXfaTextContentItems(textDivs) {\n    const text = await this.pdfPage.getTextContent();\n    const items = [];\n    for (const item of text.items) {\n      items.push(item.str);\n    }\n    this.textHighlighter.setTextMapping(textDivs, items);\n    this.textHighlighter.enable();\n  }\n\n  /**\n   * @private\n   */\n  _resetZoomLayer(removeFromDOM = false) {\n    if (!this.zoomLayer) {\n      return;\n    }\n    const zoomLayerCanvas = this.zoomLayer.firstChild;\n    this.paintedViewportMap.delete(zoomLayerCanvas);\n    // Zeroing the width and height causes Firefox to release graphics\n    // resources immediately, which can greatly reduce memory consumption.\n    zoomLayerCanvas.width = 0;\n    zoomLayerCanvas.height = 0;\n\n    if (removeFromDOM) {\n      // Note: `ChildNode.remove` doesn't throw if the parent node is undefined.\n      this.zoomLayer.remove();\n    }\n    this.zoomLayer = null;\n  }\n\n  reset({\n    keepZoomLayer = false,\n    keepAnnotationLayer = false,\n    keepXfaLayer = false,\n  } = {}) {\n    this.cancelRendering({ keepAnnotationLayer, keepXfaLayer });\n    this.renderingState = RenderingStates.INITIAL;\n\n    const div = this.div;\n    div.style.width = Math.floor(this.viewport.width) + \"px\";\n    div.style.height = Math.floor(this.viewport.height) + \"px\";\n\n    const childNodes = div.childNodes,\n      zoomLayerNode = (keepZoomLayer && this.zoomLayer) || null,\n      annotationLayerNode =\n        (keepAnnotationLayer && this.annotationLayer?.div) || null,\n      xfaLayerNode = (keepXfaLayer && this.xfaLayer?.div) || null;\n    for (let i = childNodes.length - 1; i >= 0; i--) {\n      const node = childNodes[i];\n      switch (node) {\n        case zoomLayerNode:\n        case annotationLayerNode:\n        case xfaLayerNode:\n          continue;\n      }\n      node.remove();\n    }\n    div.removeAttribute(\"data-loaded\");\n\n    if (annotationLayerNode) {\n      // Hide the annotation layer until all elements are resized\n      // so they are not displayed on the already resized page.\n      this.annotationLayer.hide();\n    }\n    if (xfaLayerNode) {\n      // Hide the XFA layer until all elements are resized\n      // so they are not displayed on the already resized page.\n      this.xfaLayer.hide();\n    }\n\n    if (!zoomLayerNode) {\n      if (this.canvas) {\n        this.paintedViewportMap.delete(this.canvas);\n        // Zeroing the width and height causes Firefox to release graphics\n        // resources immediately, which can greatly reduce memory consumption.\n        this.canvas.width = 0;\n        this.canvas.height = 0;\n        delete this.canvas;\n      }\n      this._resetZoomLayer();\n    }\n    if (this.svg) {\n      this.paintedViewportMap.delete(this.svg);\n      delete this.svg;\n    }\n\n    this.loadingIconDiv = document.createElement(\"div\");\n    this.loadingIconDiv.className = \"loadingIcon notVisible\";\n    if (this._isStandalone) {\n      this.toggleLoadingIconSpinner(/* viewVisible = */ true);\n    }\n    this.loadingIconDiv.setAttribute(\"role\", \"img\");\n    this.l10n.get(\"loading\").then(msg => {\n      this.loadingIconDiv?.setAttribute(\"aria-label\", msg);\n    });\n    div.appendChild(this.loadingIconDiv);\n  }\n\n  update({ scale = 0, rotation = null, optionalContentConfigPromise = null }) {\n    this.scale = scale || this.scale;\n    if (typeof rotation === \"number\") {\n      this.rotation = rotation; // The rotation may be zero.\n    }\n    if (optionalContentConfigPromise instanceof Promise) {\n      this._optionalContentConfigPromise = optionalContentConfigPromise;\n    }\n\n    const totalRotation = (this.rotation + this.pdfPageRotate) % 360;\n    this.viewport = this.viewport.clone({\n      scale: this.scale * PixelsPerInch.PDF_TO_CSS_UNITS,\n      rotation: totalRotation,\n    });\n\n    if (this._isStandalone) {\n      const { style } = document.documentElement;\n      style.setProperty(\"--zoom-factor\", this.scale);\n    }\n\n    if (this.svg) {\n      this.cssTransform({\n        target: this.svg,\n        redrawAnnotationLayer: true,\n        redrawXfaLayer: true,\n      });\n\n      this.eventBus.dispatch(\"pagerendered\", {\n        source: this,\n        pageNumber: this.id,\n        cssTransform: true,\n        timestamp: performance.now(),\n        error: this._renderError,\n      });\n      return;\n    }\n\n    let isScalingRestricted = false;\n    if (this.canvas && this.maxCanvasPixels > 0) {\n      const outputScale = this.outputScale;\n      if (\n        ((Math.floor(this.viewport.width) * outputScale.sx) | 0) *\n          ((Math.floor(this.viewport.height) * outputScale.sy) | 0) >\n        this.maxCanvasPixels\n      ) {\n        isScalingRestricted = true;\n      }\n    }\n\n    if (this.canvas) {\n      if (\n        this.useOnlyCssZoom ||\n        (this.hasRestrictedScaling && isScalingRestricted)\n      ) {\n        this.cssTransform({\n          target: this.canvas,\n          redrawAnnotationLayer: true,\n          redrawXfaLayer: true,\n        });\n\n        this.eventBus.dispatch(\"pagerendered\", {\n          source: this,\n          pageNumber: this.id,\n          cssTransform: true,\n          timestamp: performance.now(),\n          error: this._renderError,\n        });\n        return;\n      }\n      if (!this.zoomLayer && !this.canvas.hidden) {\n        this.zoomLayer = this.canvas.parentNode;\n        this.zoomLayer.style.position = \"absolute\";\n      }\n    }\n    if (this.zoomLayer) {\n      this.cssTransform({ target: this.zoomLayer.firstChild });\n    }\n    this.reset({\n      keepZoomLayer: true,\n      keepAnnotationLayer: true,\n      keepXfaLayer: true,\n    });\n  }\n\n  /**\n   * PLEASE NOTE: Most likely you want to use the `this.reset()` method,\n   *              rather than calling this one directly.\n   */\n  cancelRendering({ keepAnnotationLayer = false, keepXfaLayer = false } = {}) {\n    if (this.paintTask) {\n      this.paintTask.cancel();\n      this.paintTask = null;\n    }\n    this.resume = null;\n\n    if (this.textLayer) {\n      this.textLayer.cancel();\n      this.textLayer = null;\n    }\n    if (\n      this.annotationLayer &&\n      (!keepAnnotationLayer || !this.annotationLayer.div)\n    ) {\n      this.annotationLayer.cancel();\n      this.annotationLayer = null;\n      this._annotationCanvasMap = null;\n    }\n    if (this.xfaLayer && (!keepXfaLayer || !this.xfaLayer.div)) {\n      this.xfaLayer.cancel();\n      this.xfaLayer = null;\n      this.textHighlighter?.disable();\n    }\n    if (this._onTextLayerRendered) {\n      this.eventBus._off(\"textlayerrendered\", this._onTextLayerRendered);\n      this._onTextLayerRendered = null;\n    }\n  }\n\n  cssTransform({\n    target,\n    redrawAnnotationLayer = false,\n    redrawXfaLayer = false,\n  }) {\n    // Scale target (canvas or svg), its wrapper and page container.\n    const width = this.viewport.width;\n    const height = this.viewport.height;\n    const div = this.div;\n    target.style.width =\n      target.parentNode.style.width =\n      div.style.width =\n        Math.floor(width) + \"px\";\n    target.style.height =\n      target.parentNode.style.height =\n      div.style.height =\n        Math.floor(height) + \"px\";\n    // The canvas may have been originally rotated; rotate relative to that.\n    const relativeRotation =\n      this.viewport.rotation - this.paintedViewportMap.get(target).rotation;\n    const absRotation = Math.abs(relativeRotation);\n    let scaleX = 1,\n      scaleY = 1;\n    if (absRotation === 90 || absRotation === 270) {\n      // Scale x and y because of the rotation.\n      scaleX = height / width;\n      scaleY = width / height;\n    }\n    target.style.transform = `rotate(${relativeRotation}deg) scale(${scaleX}, ${scaleY})`;\n\n    if (this.textLayer) {\n      // Rotating the text layer is more complicated since the divs inside the\n      // the text layer are rotated.\n      // TODO: This could probably be simplified by drawing the text layer in\n      // one orientation and then rotating overall.\n      const textLayerViewport = this.textLayer.viewport;\n      const textRelativeRotation =\n        this.viewport.rotation - textLayerViewport.rotation;\n      const textAbsRotation = Math.abs(textRelativeRotation);\n      let scale = width / textLayerViewport.width;\n      if (textAbsRotation === 90 || textAbsRotation === 270) {\n        scale = width / textLayerViewport.height;\n      }\n      const textLayerDiv = this.textLayer.textLayerDiv;\n      let transX, transY;\n      switch (textAbsRotation) {\n        case 0:\n          transX = transY = 0;\n          break;\n        case 90:\n          transX = 0;\n          transY = \"-\" + textLayerDiv.style.height;\n          break;\n        case 180:\n          transX = \"-\" + textLayerDiv.style.width;\n          transY = \"-\" + textLayerDiv.style.height;\n          break;\n        case 270:\n          transX = \"-\" + textLayerDiv.style.width;\n          transY = 0;\n          break;\n        default:\n          console.error(\"Bad rotation value.\");\n          break;\n      }\n\n      textLayerDiv.style.transform =\n        `rotate(${textAbsRotation}deg) ` +\n        `scale(${scale}) ` +\n        `translate(${transX}, ${transY})`;\n      textLayerDiv.style.transformOrigin = \"0% 0%\";\n    }\n\n    if (redrawAnnotationLayer && this.annotationLayer) {\n      this._renderAnnotationLayer();\n    }\n    if (redrawXfaLayer && this.xfaLayer) {\n      this._renderXfaLayer();\n    }\n  }\n\n  get width() {\n    return this.viewport.width;\n  }\n\n  get height() {\n    return this.viewport.height;\n  }\n\n  getPagePoint(x, y) {\n    return this.viewport.convertToPdfPoint(x, y);\n  }\n\n  /**\n   * @ignore\n   */\n  toggleLoadingIconSpinner(viewVisible = false) {\n    this.loadingIconDiv?.classList.toggle(\"notVisible\", !viewVisible);\n  }\n\n  draw() {\n    if (this.renderingState !== RenderingStates.INITIAL) {\n      console.error(\"Must be in new state before drawing\");\n      this.reset(); // Ensure that we reset all state to prevent issues.\n    }\n    const { div, pdfPage } = this;\n\n    if (!pdfPage) {\n      this.renderingState = RenderingStates.FINISHED;\n\n      if (this.loadingIconDiv) {\n        this.loadingIconDiv.remove();\n        delete this.loadingIconDiv;\n      }\n      return Promise.reject(new Error(\"pdfPage is not loaded\"));\n    }\n\n    this.renderingState = RenderingStates.RUNNING;\n\n    // Wrap the canvas so that if it has a CSS transform for high DPI the\n    // overflow will be hidden in Firefox.\n    const canvasWrapper = document.createElement(\"div\");\n    canvasWrapper.style.width = div.style.width;\n    canvasWrapper.style.height = div.style.height;\n    canvasWrapper.classList.add(\"canvasWrapper\");\n\n    if (this.annotationLayer?.div) {\n      // The annotation layer needs to stay on top.\n      div.insertBefore(canvasWrapper, this.annotationLayer.div);\n    } else {\n      div.appendChild(canvasWrapper);\n    }\n\n    let textLayer = null;\n    if (this.textLayerMode !== TextLayerMode.DISABLE && this.textLayerFactory) {\n      const textLayerDiv = document.createElement(\"div\");\n      textLayerDiv.className = \"textLayer\";\n      textLayerDiv.style.width = canvasWrapper.style.width;\n      textLayerDiv.style.height = canvasWrapper.style.height;\n      if (this.annotationLayer?.div) {\n        // The annotation layer needs to stay on top.\n        div.insertBefore(textLayerDiv, this.annotationLayer.div);\n      } else {\n        div.appendChild(textLayerDiv);\n      }\n\n      textLayer = this.textLayerFactory.createTextLayerBuilder(\n        textLayerDiv,\n        this.id - 1,\n        this.viewport,\n        this.textLayerMode === TextLayerMode.ENABLE_ENHANCE,\n        this.eventBus,\n        this.textHighlighter\n      );\n    }\n    this.textLayer = textLayer;\n\n    if (\n      this.#annotationMode !== AnnotationMode.DISABLE &&\n      this.annotationLayerFactory\n    ) {\n      this._annotationCanvasMap ||= new Map();\n      this.annotationLayer ||=\n        this.annotationLayerFactory.createAnnotationLayerBuilder(\n          div,\n          pdfPage,\n          /* annotationStorage = */ null,\n          this.imageResourcesPath,\n          this.#annotationMode === AnnotationMode.ENABLE_FORMS,\n          this.l10n,\n          /* enableScripting = */ null,\n          /* hasJSActionsPromise = */ null,\n          /* mouseState = */ null,\n          /* fieldObjectsPromise = */ null,\n          /* annotationCanvasMap */ this._annotationCanvasMap\n        );\n    }\n\n    if (this.xfaLayer?.div) {\n      // The xfa layer needs to stay on top.\n      div.appendChild(this.xfaLayer.div);\n    }\n\n    let renderContinueCallback = null;\n    if (this.renderingQueue) {\n      renderContinueCallback = cont => {\n        if (!this.renderingQueue.isHighestPriority(this)) {\n          this.renderingState = RenderingStates.PAUSED;\n          this.resume = () => {\n            this.renderingState = RenderingStates.RUNNING;\n            cont();\n          };\n          return;\n        }\n        cont();\n      };\n    }\n\n    const finishPaintTask = async (error = null) => {\n      // The paintTask may have been replaced by a new one, so only remove\n      // the reference to the paintTask if it matches the one that is\n      // triggering this callback.\n      if (paintTask === this.paintTask) {\n        this.paintTask = null;\n      }\n\n      if (error instanceof RenderingCancelledException) {\n        this._renderError = null;\n        return;\n      }\n      this._renderError = error;\n\n      this.renderingState = RenderingStates.FINISHED;\n\n      if (this.loadingIconDiv) {\n        this.loadingIconDiv.remove();\n        delete this.loadingIconDiv;\n      }\n      this._resetZoomLayer(/* removeFromDOM = */ true);\n\n      this.eventBus.dispatch(\"pagerendered\", {\n        source: this,\n        pageNumber: this.id,\n        cssTransform: false,\n        timestamp: performance.now(),\n        error: this._renderError,\n      });\n\n      if (error) {\n        throw error;\n      }\n    };\n\n    const paintTask =\n      this.renderer === RendererType.SVG\n        ? this.paintOnSvg(canvasWrapper)\n        : this.paintOnCanvas(canvasWrapper);\n    paintTask.onRenderContinue = renderContinueCallback;\n    this.paintTask = paintTask;\n\n    const resultPromise = paintTask.promise.then(\n      () => {\n        return finishPaintTask(null).then(() => {\n          if (textLayer) {\n            const readableStream = pdfPage.streamTextContent({\n              includeMarkedContent: true,\n            });\n            textLayer.setTextContentStream(readableStream);\n            textLayer.render();\n          }\n\n          if (this.annotationLayer) {\n            this._renderAnnotationLayer();\n          }\n        });\n      },\n      function (reason) {\n        return finishPaintTask(reason);\n      }\n    );\n\n    if (this.xfaLayerFactory) {\n      if (!this.xfaLayer) {\n        this.xfaLayer = this.xfaLayerFactory.createXfaLayerBuilder(\n          div,\n          pdfPage,\n          /* annotationStorage = */ null\n        );\n      }\n      this._renderXfaLayer();\n    }\n\n    // The structure tree is currently only supported when the text layer is\n    // enabled and a canvas is used for rendering.\n    if (this.structTreeLayerFactory && this.textLayer && this.canvas) {\n      // The structure tree must be generated after the text layer for the\n      // aria-owns to work.\n      this._onTextLayerRendered = event => {\n        if (event.pageNumber !== this.id) {\n          return;\n        }\n        this.eventBus._off(\"textlayerrendered\", this._onTextLayerRendered);\n        this._onTextLayerRendered = null;\n\n        if (!this.canvas) {\n          return; // The canvas was removed, prevent errors below.\n        }\n        this.pdfPage.getStructTree().then(tree => {\n          if (!tree) {\n            return;\n          }\n          if (!this.canvas) {\n            return; // The canvas was removed, prevent errors below.\n          }\n          const treeDom = this.structTreeLayer.render(tree);\n          treeDom.classList.add(\"structTree\");\n          this.canvas.appendChild(treeDom);\n        });\n      };\n      this.eventBus._on(\"textlayerrendered\", this._onTextLayerRendered);\n      this.structTreeLayer =\n        this.structTreeLayerFactory.createStructTreeLayerBuilder(pdfPage);\n    }\n\n    div.setAttribute(\"data-loaded\", true);\n\n    this.eventBus.dispatch(\"pagerender\", {\n      source: this,\n      pageNumber: this.id,\n    });\n    return resultPromise;\n  }\n\n  paintOnCanvas(canvasWrapper) {\n    const renderCapability = createPromiseCapability();\n    const result = {\n      promise: renderCapability.promise,\n      onRenderContinue(cont) {\n        cont();\n      },\n      cancel() {\n        renderTask.cancel();\n      },\n    };\n\n    const viewport = this.viewport;\n    const canvas = document.createElement(\"canvas\");\n\n    // Keep the canvas hidden until the first draw callback, or until drawing\n    // is complete when `!this.renderingQueue`, to prevent black flickering.\n    canvas.hidden = true;\n    let isCanvasHidden = true;\n    const showCanvas = function () {\n      if (isCanvasHidden) {\n        canvas.hidden = false;\n        isCanvasHidden = false;\n      }\n    };\n\n    canvasWrapper.appendChild(canvas);\n    this.canvas = canvas;\n\n    const ctx = canvas.getContext(\"2d\", { alpha: false });\n    const outputScale = (this.outputScale = new OutputScale());\n\n    if (this.useOnlyCssZoom) {\n      const actualSizeViewport = viewport.clone({\n        scale: PixelsPerInch.PDF_TO_CSS_UNITS,\n      });\n      // Use a scale that makes the canvas have the originally intended size\n      // of the page.\n      outputScale.sx *= actualSizeViewport.width / viewport.width;\n      outputScale.sy *= actualSizeViewport.height / viewport.height;\n    }\n\n    if (this.maxCanvasPixels > 0) {\n      const pixelsInViewport = viewport.width * viewport.height;\n      const maxScale = Math.sqrt(this.maxCanvasPixels / pixelsInViewport);\n      if (outputScale.sx > maxScale || outputScale.sy > maxScale) {\n        outputScale.sx = maxScale;\n        outputScale.sy = maxScale;\n        this.hasRestrictedScaling = true;\n      } else {\n        this.hasRestrictedScaling = false;\n      }\n    }\n\n    const sfx = approximateFraction(outputScale.sx);\n    const sfy = approximateFraction(outputScale.sy);\n    canvas.width = roundToDivide(viewport.width * outputScale.sx, sfx[0]);\n    canvas.height = roundToDivide(viewport.height * outputScale.sy, sfy[0]);\n    canvas.style.width = roundToDivide(viewport.width, sfx[1]) + \"px\";\n    canvas.style.height = roundToDivide(viewport.height, sfy[1]) + \"px\";\n\n    // Add the viewport so it's known what it was originally drawn with.\n    this.paintedViewportMap.set(canvas, viewport);\n\n    // Rendering area\n    const transform = outputScale.scaled\n      ? [outputScale.sx, 0, 0, outputScale.sy, 0, 0]\n      : null;\n    const renderContext = {\n      canvasContext: ctx,\n      transform,\n      viewport: this.viewport,\n      annotationMode: this.#annotationMode,\n      optionalContentConfigPromise: this._optionalContentConfigPromise,\n      annotationCanvasMap: this._annotationCanvasMap,\n      pageColors: this.pageColors,\n    };\n    const renderTask = this.pdfPage.render(renderContext);\n    renderTask.onContinue = function (cont) {\n      showCanvas();\n      if (result.onRenderContinue) {\n        result.onRenderContinue(cont);\n      } else {\n        cont();\n      }\n    };\n\n    renderTask.promise.then(\n      function () {\n        showCanvas();\n        renderCapability.resolve();\n      },\n      function (error) {\n        showCanvas();\n        renderCapability.reject(error);\n      }\n    );\n    return result;\n  }\n\n  paintOnSvg(wrapper) {\n    if (\n      typeof PDFJSDev !== \"undefined\" &&\n      PDFJSDev.test(\"MOZCENTRAL || CHROME\")\n    ) {\n      // Return a mock object, to prevent errors such as e.g.\n      // \"TypeError: paintTask.promise is undefined\".\n      return {\n        promise: Promise.reject(new Error(\"SVG rendering is not supported.\")),\n        onRenderContinue(cont) {},\n        cancel() {},\n      };\n    }\n\n    let cancelled = false;\n    const ensureNotCancelled = () => {\n      if (cancelled) {\n        throw new RenderingCancelledException(\n          `Rendering cancelled, page ${this.id}`,\n          \"svg\"\n        );\n      }\n    };\n\n    const pdfPage = this.pdfPage;\n    const actualSizeViewport = this.viewport.clone({\n      scale: PixelsPerInch.PDF_TO_CSS_UNITS,\n    });\n    const promise = pdfPage\n      .getOperatorList({\n        annotationMode: this.#annotationMode,\n      })\n      .then(opList => {\n        ensureNotCancelled();\n        const svgGfx = new SVGGraphics(pdfPage.commonObjs, pdfPage.objs);\n        return svgGfx.getSVG(opList, actualSizeViewport).then(svg => {\n          ensureNotCancelled();\n          this.svg = svg;\n          this.paintedViewportMap.set(svg, actualSizeViewport);\n\n          svg.style.width = wrapper.style.width;\n          svg.style.height = wrapper.style.height;\n          this.renderingState = RenderingStates.FINISHED;\n          wrapper.appendChild(svg);\n        });\n      });\n\n    return {\n      promise,\n      onRenderContinue(cont) {\n        cont();\n      },\n      cancel() {\n        cancelled = true;\n      },\n    };\n  }\n\n  /**\n   * @param {string|null} label\n   */\n  setPageLabel(label) {\n    this.pageLabel = typeof label === \"string\" ? label : null;\n\n    if (this.pageLabel !== null) {\n      this.div.setAttribute(\"data-page-label\", this.pageLabel);\n    } else {\n      this.div.removeAttribute(\"data-page-label\");\n    }\n  }\n}\n\nexport { PDFPageView };\n","/* Copyright 2018 Mozilla Foundation\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nconst compatibilityParams = Object.create(null);\nif (typeof PDFJSDev === \"undefined\" || PDFJSDev.test(\"GENERIC\")) {\n  if (\n    typeof PDFJSDev !== \"undefined\" &&\n    PDFJSDev.test(\"LIB\") &&\n    typeof navigator === \"undefined\"\n  ) {\n    globalThis.navigator = Object.create(null);\n  }\n  const userAgent = navigator.userAgent || \"\";\n  const platform = navigator.platform || \"\";\n  const maxTouchPoints = navigator.maxTouchPoints || 1;\n\n  const isAndroid = /Android/.test(userAgent);\n  const isIOS =\n    /\\b(iPad|iPhone|iPod)(?=;)/.test(userAgent) ||\n    (platform === \"MacIntel\" && maxTouchPoints > 1);\n\n  // Limit canvas size to 5 mega-pixels on mobile.\n  // Support: Android, iOS\n  (function checkCanvasSizeLimitation() {\n    if (isIOS || isAndroid) {\n      compatibilityParams.maxCanvasPixels = 5242880;\n    }\n  })();\n}\n\nconst OptionKind = {\n  VIEWER: 0x02,\n  API: 0x04,\n  WORKER: 0x08,\n  PREFERENCE: 0x80,\n};\n\n/**\n * NOTE: These options are used to generate the `default_preferences.json` file,\n *       see `OptionKind.PREFERENCE`, hence the values below must use only\n *       primitive types and cannot rely on any imported types.\n */\nconst defaultOptions = {\n  annotationMode: {\n    /** @type {number} */\n    value: 2,\n    kind: OptionKind.VIEWER + OptionKind.PREFERENCE,\n  },\n  cursorToolOnLoad: {\n    /** @type {number} */\n    value: 0,\n    kind: OptionKind.VIEWER + OptionKind.PREFERENCE,\n  },\n  defaultUrl: {\n    /** @type {string} */\n    value: \"compressed.tracemonkey-pldi-09.pdf\",\n    kind: OptionKind.VIEWER,\n  },\n  defaultZoomValue: {\n    /** @type {string} */\n    value: \"\",\n    kind: OptionKind.VIEWER + OptionKind.PREFERENCE,\n  },\n  disableHistory: {\n    /** @type {boolean} */\n    value: false,\n    kind: OptionKind.VIEWER,\n  },\n  disablePageLabels: {\n    /** @type {boolean} */\n    value: false,\n    kind: OptionKind.VIEWER + OptionKind.PREFERENCE,\n  },\n  enablePermissions: {\n    /** @type {boolean} */\n    value: false,\n    kind: OptionKind.VIEWER + OptionKind.PREFERENCE,\n  },\n  enablePrintAutoRotate: {\n    /** @type {boolean} */\n    value: true,\n    kind: OptionKind.VIEWER + OptionKind.PREFERENCE,\n  },\n  enableScripting: {\n    /** @type {boolean} */\n    value: typeof PDFJSDev === \"undefined\" || !PDFJSDev.test(\"CHROME\"),\n    kind: OptionKind.VIEWER + OptionKind.PREFERENCE,\n  },\n  externalLinkRel: {\n    /** @type {string} */\n    value: \"noopener noreferrer nofollow\",\n    kind: OptionKind.VIEWER,\n  },\n  externalLinkTarget: {\n    /** @type {number} */\n    value: 0,\n    kind: OptionKind.VIEWER + OptionKind.PREFERENCE,\n  },\n  historyUpdateUrl: {\n    /** @type {boolean} */\n    value: false,\n    kind: OptionKind.VIEWER + OptionKind.PREFERENCE,\n  },\n  ignoreDestinationZoom: {\n    /** @type {boolean} */\n    value: false,\n    kind: OptionKind.VIEWER + OptionKind.PREFERENCE,\n  },\n  imageResourcesPath: {\n    /** @type {string} */\n    value: \"./images/\",\n    kind: OptionKind.VIEWER,\n  },\n  maxCanvasPixels: {\n    /** @type {number} */\n    value: 16777216,\n    compatibility: compatibilityParams.maxCanvasPixels,\n    kind: OptionKind.VIEWER,\n  },\n  pageColorsBackground: {\n    /** @type {string} */\n    value: \"Canvas\",\n    kind: OptionKind.VIEWER + OptionKind.PREFERENCE,\n  },\n  pageColorsForeground: {\n    /** @type {string} */\n    value: \"CanvasText\",\n    kind: OptionKind.VIEWER + OptionKind.PREFERENCE,\n  },\n  pdfBugEnabled: {\n    /** @type {boolean} */\n    value: typeof PDFJSDev === \"undefined\" || !PDFJSDev.test(\"PRODUCTION\"),\n    kind: OptionKind.VIEWER + OptionKind.PREFERENCE,\n  },\n  printResolution: {\n    /** @type {number} */\n    value: 150,\n    kind: OptionKind.VIEWER,\n  },\n  renderer: {\n    /** @type {string} */\n    value: \"canvas\",\n    kind: OptionKind.VIEWER,\n  },\n  sidebarViewOnLoad: {\n    /** @type {number} */\n    value: -1,\n    kind: OptionKind.VIEWER + OptionKind.PREFERENCE,\n  },\n  scrollModeOnLoad: {\n    /** @type {number} */\n    value: -1,\n    kind: OptionKind.VIEWER + OptionKind.PREFERENCE,\n  },\n  spreadModeOnLoad: {\n    /** @type {number} */\n    value: -1,\n    kind: OptionKind.VIEWER + OptionKind.PREFERENCE,\n  },\n  textLayerMode: {\n    /** @type {number} */\n    value: 1,\n    kind: OptionKind.VIEWER + OptionKind.PREFERENCE,\n  },\n  useOnlyCssZoom: {\n    /** @type {boolean} */\n    value: false,\n    kind: OptionKind.VIEWER + OptionKind.PREFERENCE,\n  },\n  viewerCssTheme: {\n    /** @type {number} */\n    value: typeof PDFJSDev !== \"undefined\" && PDFJSDev.test(\"CHROME\") ? 2 : 0,\n    kind: OptionKind.VIEWER + OptionKind.PREFERENCE,\n  },\n  viewOnLoad: {\n    /** @type {boolean} */\n    value: 0,\n    kind: OptionKind.VIEWER + OptionKind.PREFERENCE,\n  },\n\n  cMapPacked: {\n    /** @type {boolean} */\n    value: true,\n    kind: OptionKind.API,\n  },\n  cMapUrl: {\n    /** @type {string} */\n    value:\n      typeof PDFJSDev === \"undefined\" || !PDFJSDev.test(\"PRODUCTION\")\n        ? \"../external/bcmaps/\"\n        : \"../web/cmaps/\",\n    kind: OptionKind.API,\n  },\n  disableAutoFetch: {\n    /** @type {boolean} */\n    value: false,\n    kind: OptionKind.API + OptionKind.PREFERENCE,\n  },\n  disableFontFace: {\n    /** @type {boolean} */\n    value: false,\n    kind: OptionKind.API + OptionKind.PREFERENCE,\n  },\n  disableRange: {\n    /** @type {boolean} */\n    value: false,\n    kind: OptionKind.API + OptionKind.PREFERENCE,\n  },\n  disableStream: {\n    /** @type {boolean} */\n    value: false,\n    kind: OptionKind.API + OptionKind.PREFERENCE,\n  },\n  docBaseUrl: {\n    /** @type {string} */\n    value: \"\",\n    kind: OptionKind.API,\n  },\n  enableXfa: {\n    /** @type {boolean} */\n    value: true,\n    kind: OptionKind.API + OptionKind.PREFERENCE,\n  },\n  fontExtraProperties: {\n    /** @type {boolean} */\n    value: false,\n    kind: OptionKind.API,\n  },\n  isEvalSupported: {\n    /** @type {boolean} */\n    value: true,\n    kind: OptionKind.API,\n  },\n  maxImageSize: {\n    /** @type {number} */\n    value: -1,\n    kind: OptionKind.API,\n  },\n  pdfBug: {\n    /** @type {boolean} */\n    value: false,\n    kind: OptionKind.API,\n  },\n  standardFontDataUrl: {\n    /** @type {string} */\n    value:\n      typeof PDFJSDev === \"undefined\" || !PDFJSDev.test(\"PRODUCTION\")\n        ? \"../external/standard_fonts/\"\n        : \"../web/standard_fonts/\",\n    kind: OptionKind.API,\n  },\n  verbosity: {\n    /** @type {number} */\n    value: 1,\n    kind: OptionKind.API,\n  },\n\n  workerPort: {\n    /** @type {Object} */\n    value: null,\n    kind: OptionKind.WORKER,\n  },\n  workerSrc: {\n    /** @type {string} */\n    value:\n      typeof PDFJSDev === \"undefined\" || !PDFJSDev.test(\"PRODUCTION\")\n        ? \"../src/worker_loader.js\"\n        : \"../build/pdf.worker.js\",\n    kind: OptionKind.WORKER,\n  },\n};\nif (\n  typeof PDFJSDev === \"undefined\" ||\n  PDFJSDev.test(\"!PRODUCTION || GENERIC\")\n) {\n  defaultOptions.disablePreferences = {\n    /** @type {boolean} */\n    value: typeof PDFJSDev !== \"undefined\" && PDFJSDev.test(\"TESTING\"),\n    kind: OptionKind.VIEWER,\n  };\n  defaultOptions.locale = {\n    /** @type {string} */\n    value: navigator.language || \"en-US\",\n    kind: OptionKind.VIEWER,\n  };\n  defaultOptions.sandboxBundleSrc = {\n    /** @type {string} */\n    value:\n      typeof PDFJSDev === \"undefined\" || !PDFJSDev.test(\"PRODUCTION\")\n        ? \"../build/dev-sandbox/pdf.sandbox.js\"\n        : \"../build/pdf.sandbox.js\",\n    kind: OptionKind.VIEWER,\n  };\n\n  defaultOptions.renderer.kind += OptionKind.PREFERENCE;\n} else if (PDFJSDev.test(\"CHROME\")) {\n  defaultOptions.disableTelemetry = {\n    /** @type {boolean} */\n    value: false,\n    kind: OptionKind.VIEWER + OptionKind.PREFERENCE,\n  };\n  defaultOptions.sandboxBundleSrc = {\n    /** @type {string} */\n    value: \"../build/pdf.sandbox.js\",\n    kind: OptionKind.VIEWER,\n  };\n}\n\nconst userOptions = Object.create(null);\n\nclass AppOptions {\n  constructor() {\n    throw new Error(\"Cannot initialize AppOptions.\");\n  }\n\n  static get(name) {\n    const userOption = userOptions[name];\n    if (userOption !== undefined) {\n      return userOption;\n    }\n    const defaultOption = defaultOptions[name];\n    if (defaultOption !== undefined) {\n      return defaultOption.compatibility ?? defaultOption.value;\n    }\n    return undefined;\n  }\n\n  static getAll(kind = null) {\n    const options = Object.create(null);\n    for (const name in defaultOptions) {\n      const defaultOption = defaultOptions[name];\n      if (kind) {\n        if ((kind & defaultOption.kind) === 0) {\n          continue;\n        }\n        if (kind === OptionKind.PREFERENCE) {\n          const value = defaultOption.value,\n            valueType = typeof value;\n\n          if (\n            valueType === \"boolean\" ||\n            valueType === \"string\" ||\n            (valueType === \"number\" && Number.isInteger(value))\n          ) {\n            options[name] = value;\n            continue;\n          }\n          throw new Error(`Invalid type for preference: ${name}`);\n        }\n      }\n      const userOption = userOptions[name];\n      options[name] =\n        userOption !== undefined\n          ? userOption\n          : defaultOption.compatibility ?? defaultOption.value;\n    }\n    return options;\n  }\n\n  static set(name, value) {\n    userOptions[name] = value;\n  }\n\n  static setAll(options) {\n    for (const name in options) {\n      userOptions[name] = options[name];\n    }\n  }\n\n  static remove(name) {\n    delete userOptions[name];\n  }\n\n  /**\n   * @ignore\n   */\n  static _hasUserOptions() {\n    return Object.keys(userOptions).length > 0;\n  }\n}\n\nexport { AppOptions, compatibilityParams, OptionKind };\n","/* Copyright 2012 Mozilla Foundation\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n/** @typedef {import(\"./interfaces\").IRenderableView} IRenderableView */\n/** @typedef {import(\"./pdf_viewer\").PDFViewer} PDFViewer */\n// eslint-disable-next-line max-len\n/** @typedef {import(\"./pdf_thumbnail_viewer\").PDFThumbnailViewer} PDFThumbnailViewer */\n\nimport { RenderingCancelledException } from \"pdfjs-lib\";\nimport { RenderingStates } from \"./ui_utils.js\";\n\nconst CLEANUP_TIMEOUT = 30000;\n\n/**\n * Controls rendering of the views for pages and thumbnails.\n */\nclass PDFRenderingQueue {\n  constructor() {\n    this.pdfViewer = null;\n    this.pdfThumbnailViewer = null;\n    this.onIdle = null;\n    this.highestPriorityPage = null;\n    /** @type {number} */\n    this.idleTimeout = null;\n    this.printing = false;\n    this.isThumbnailViewEnabled = false;\n  }\n\n  /**\n   * @param {PDFViewer} pdfViewer\n   */\n  setViewer(pdfViewer) {\n    this.pdfViewer = pdfViewer;\n  }\n\n  /**\n   * @param {PDFThumbnailViewer} pdfThumbnailViewer\n   */\n  setThumbnailViewer(pdfThumbnailViewer) {\n    this.pdfThumbnailViewer = pdfThumbnailViewer;\n  }\n\n  /**\n   * @param {IRenderableView} view\n   * @returns {boolean}\n   */\n  isHighestPriority(view) {\n    return this.highestPriorityPage === view.renderingId;\n  }\n\n  /**\n   * @returns {boolean}\n   */\n  hasViewer() {\n    return !!this.pdfViewer;\n  }\n\n  /**\n   * @param {Object} currentlyVisiblePages\n   */\n  renderHighestPriority(currentlyVisiblePages) {\n    if (this.idleTimeout) {\n      clearTimeout(this.idleTimeout);\n      this.idleTimeout = null;\n    }\n\n    // Pages have a higher priority than thumbnails, so check them first.\n    if (this.pdfViewer.forceRendering(currentlyVisiblePages)) {\n      return;\n    }\n    // No pages needed rendering, so check thumbnails.\n    if (\n      this.isThumbnailViewEnabled &&\n      this.pdfThumbnailViewer?.forceRendering()\n    ) {\n      return;\n    }\n\n    if (this.printing) {\n      // If printing is currently ongoing do not reschedule cleanup.\n      return;\n    }\n\n    if (this.onIdle) {\n      this.idleTimeout = setTimeout(this.onIdle.bind(this), CLEANUP_TIMEOUT);\n    }\n  }\n\n  /**\n   * @param {Object} visible\n   * @param {Array} views\n   * @param {boolean} scrolledDown\n   * @param {boolean} [preRenderExtra]\n   */\n  getHighestPriority(visible, views, scrolledDown, preRenderExtra = false) {\n    /**\n     * The state has changed. Figure out which page has the highest priority to\n     * render next (if any).\n     *\n     * Priority:\n     * 1. visible pages\n     * 2. if last scrolled down, the page after the visible pages, or\n     *    if last scrolled up, the page before the visible pages\n     */\n    const visibleViews = visible.views,\n      numVisible = visibleViews.length;\n\n    if (numVisible === 0) {\n      return null;\n    }\n    for (let i = 0; i < numVisible; i++) {\n      const view = visibleViews[i].view;\n      if (!this.isViewFinished(view)) {\n        return view;\n      }\n    }\n    const firstId = visible.first.id,\n      lastId = visible.last.id;\n\n    // All the visible views have rendered; try to handle any \"holes\" in the\n    // page layout (can happen e.g. with spreadModes at higher zoom levels).\n    if (lastId - firstId + 1 > numVisible) {\n      const visibleIds = visible.ids;\n      for (let i = 1, ii = lastId - firstId; i < ii; i++) {\n        const holeId = scrolledDown ? firstId + i : lastId - i;\n        if (visibleIds.has(holeId)) {\n          continue;\n        }\n        const holeView = views[holeId - 1];\n        if (!this.isViewFinished(holeView)) {\n          return holeView;\n        }\n      }\n    }\n\n    // All the visible views have rendered; try to render next/previous page.\n    // (IDs start at 1, so no need to add 1 when `scrolledDown === true`.)\n    let preRenderIndex = scrolledDown ? lastId : firstId - 2;\n    let preRenderView = views[preRenderIndex];\n\n    if (preRenderView && !this.isViewFinished(preRenderView)) {\n      return preRenderView;\n    }\n    if (preRenderExtra) {\n      preRenderIndex += scrolledDown ? 1 : -1;\n      preRenderView = views[preRenderIndex];\n\n      if (preRenderView && !this.isViewFinished(preRenderView)) {\n        return preRenderView;\n      }\n    }\n    // Everything that needs to be rendered has been.\n    return null;\n  }\n\n  /**\n   * @param {IRenderableView} view\n   * @returns {boolean}\n   */\n  isViewFinished(view) {\n    return view.renderingState === RenderingStates.FINISHED;\n  }\n\n  /**\n   * Render a page or thumbnail view. This calls the appropriate function\n   * based on the views state. If the view is already rendered it will return\n   * `false`.\n   *\n   * @param {IRenderableView} view\n   */\n  renderView(view) {\n    switch (view.renderingState) {\n      case RenderingStates.FINISHED:\n        return false;\n      case RenderingStates.PAUSED:\n        this.highestPriorityPage = view.renderingId;\n        view.resume();\n        break;\n      case RenderingStates.RUNNING:\n        this.highestPriorityPage = view.renderingId;\n        break;\n      case RenderingStates.INITIAL:\n        this.highestPriorityPage = view.renderingId;\n        view\n          .draw()\n          .finally(() => {\n            this.renderHighestPriority();\n          })\n          .catch(reason => {\n            if (reason instanceof RenderingCancelledException) {\n              return;\n            }\n            console.error(`renderView: \"${reason}\"`);\n          });\n        break;\n    }\n    return true;\n  }\n}\n\nexport { PDFRenderingQueue };\n","/* Copyright 2021 Mozilla Foundation\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n/** @typedef {import(\"./event_utils\").EventBus} EventBus */\n// eslint-disable-next-line max-len\n/** @typedef {import(\"./pdf_find_controller\").PDFFindController} PDFFindController */\n\n/**\n * @typedef {Object} TextHighlighterOptions\n * @property {PDFFindController} findController\n * @property {EventBus} eventBus - The application event bus.\n * @property {number} pageIndex - The page index.\n */\n\n/**\n * TextHighlighter handles highlighting matches from the FindController in\n * either the text layer or XFA layer depending on the type of document.\n */\nclass TextHighlighter {\n  /**\n   * @param {TextHighlighterOptions} options\n   */\n  constructor({ findController, eventBus, pageIndex }) {\n    this.findController = findController;\n    this.matches = [];\n    this.eventBus = eventBus;\n    this.pageIdx = pageIndex;\n    this._onUpdateTextLayerMatches = null;\n    this.textDivs = null;\n    this.textContentItemsStr = null;\n    this.enabled = false;\n  }\n\n  /**\n   * Store two arrays that will map DOM nodes to text they should contain.\n   * The arrays should be of equal length and the array element at each index\n   * should correspond to the other. e.g.\n   * `items[0] = \"<span>Item 0</span>\" and texts[0] = \"Item 0\";\n   *\n   * @param {Array<Node>} divs\n   * @param {Array<string>} texts\n   */\n  setTextMapping(divs, texts) {\n    this.textDivs = divs;\n    this.textContentItemsStr = texts;\n  }\n\n  /**\n   * Start listening for events to update the highlighter and check if there are\n   * any current matches that need be highlighted.\n   */\n  enable() {\n    if (!this.textDivs || !this.textContentItemsStr) {\n      throw new Error(\"Text divs and strings have not been set.\");\n    }\n    if (this.enabled) {\n      throw new Error(\"TextHighlighter is already enabled.\");\n    }\n    this.enabled = true;\n    if (!this._onUpdateTextLayerMatches) {\n      this._onUpdateTextLayerMatches = evt => {\n        if (evt.pageIndex === this.pageIdx || evt.pageIndex === -1) {\n          this._updateMatches();\n        }\n      };\n      this.eventBus._on(\n        \"updatetextlayermatches\",\n        this._onUpdateTextLayerMatches\n      );\n    }\n    this._updateMatches();\n  }\n\n  disable() {\n    if (!this.enabled) {\n      return;\n    }\n    this.enabled = false;\n    if (this._onUpdateTextLayerMatches) {\n      this.eventBus._off(\n        \"updatetextlayermatches\",\n        this._onUpdateTextLayerMatches\n      );\n      this._onUpdateTextLayerMatches = null;\n    }\n  }\n\n  _convertMatches(matches, matchesLength) {\n    // Early exit if there is nothing to convert.\n    if (!matches) {\n      return [];\n    }\n    const { textContentItemsStr } = this;\n\n    let i = 0,\n      iIndex = 0;\n    const end = textContentItemsStr.length - 1;\n    const result = [];\n\n    for (let m = 0, mm = matches.length; m < mm; m++) {\n      // Calculate the start position.\n      let matchIdx = matches[m];\n\n      // Loop over the divIdxs.\n      while (i !== end && matchIdx >= iIndex + textContentItemsStr[i].length) {\n        iIndex += textContentItemsStr[i].length;\n        i++;\n      }\n\n      if (i === textContentItemsStr.length) {\n        console.error(\"Could not find a matching mapping\");\n      }\n\n      const match = {\n        begin: {\n          divIdx: i,\n          offset: matchIdx - iIndex,\n        },\n      };\n\n      // Calculate the end position.\n      matchIdx += matchesLength[m];\n\n      // Somewhat the same array as above, but use > instead of >= to get\n      // the end position right.\n      while (i !== end && matchIdx > iIndex + textContentItemsStr[i].length) {\n        iIndex += textContentItemsStr[i].length;\n        i++;\n      }\n\n      match.end = {\n        divIdx: i,\n        offset: matchIdx - iIndex,\n      };\n      result.push(match);\n    }\n    return result;\n  }\n\n  _renderMatches(matches) {\n    // Early exit if there is nothing to render.\n    if (matches.length === 0) {\n      return;\n    }\n    const { findController, pageIdx } = this;\n    const { textContentItemsStr, textDivs } = this;\n\n    const isSelectedPage = pageIdx === findController.selected.pageIdx;\n    const selectedMatchIdx = findController.selected.matchIdx;\n    const highlightAll = findController.state.highlightAll;\n    let prevEnd = null;\n    const infinity = {\n      divIdx: -1,\n      offset: undefined,\n    };\n\n    function beginText(begin, className) {\n      const divIdx = begin.divIdx;\n      textDivs[divIdx].textContent = \"\";\n      return appendTextToDiv(divIdx, 0, begin.offset, className);\n    }\n\n    function appendTextToDiv(divIdx, fromOffset, toOffset, className) {\n      let div = textDivs[divIdx];\n      if (div.nodeType === Node.TEXT_NODE) {\n        const span = document.createElement(\"span\");\n        div.parentNode.insertBefore(span, div);\n        span.appendChild(div);\n        textDivs[divIdx] = span;\n        div = span;\n      }\n      const content = textContentItemsStr[divIdx].substring(\n        fromOffset,\n        toOffset\n      );\n      const node = document.createTextNode(content);\n      if (className) {\n        const span = document.createElement(\"span\");\n        span.className = `${className} appended`;\n        span.appendChild(node);\n        div.appendChild(span);\n        return className.includes(\"selected\") ? span.offsetLeft : 0;\n      }\n      div.appendChild(node);\n      return 0;\n    }\n\n    let i0 = selectedMatchIdx,\n      i1 = i0 + 1;\n    if (highlightAll) {\n      i0 = 0;\n      i1 = matches.length;\n    } else if (!isSelectedPage) {\n      // Not highlighting all and this isn't the selected page, so do nothing.\n      return;\n    }\n\n    for (let i = i0; i < i1; i++) {\n      const match = matches[i];\n      const begin = match.begin;\n      const end = match.end;\n      const isSelected = isSelectedPage && i === selectedMatchIdx;\n      const highlightSuffix = isSelected ? \" selected\" : \"\";\n      let selectedLeft = 0;\n\n      // Match inside new div.\n      if (!prevEnd || begin.divIdx !== prevEnd.divIdx) {\n        // If there was a previous div, then add the text at the end.\n        if (prevEnd !== null) {\n          appendTextToDiv(prevEnd.divIdx, prevEnd.offset, infinity.offset);\n        }\n        // Clear the divs and set the content until the starting point.\n        beginText(begin);\n      } else {\n        appendTextToDiv(prevEnd.divIdx, prevEnd.offset, begin.offset);\n      }\n\n      if (begin.divIdx === end.divIdx) {\n        selectedLeft = appendTextToDiv(\n          begin.divIdx,\n          begin.offset,\n          end.offset,\n          \"highlight\" + highlightSuffix\n        );\n      } else {\n        selectedLeft = appendTextToDiv(\n          begin.divIdx,\n          begin.offset,\n          infinity.offset,\n          \"highlight begin\" + highlightSuffix\n        );\n        for (let n0 = begin.divIdx + 1, n1 = end.divIdx; n0 < n1; n0++) {\n          textDivs[n0].className = \"highlight middle\" + highlightSuffix;\n        }\n        beginText(end, \"highlight end\" + highlightSuffix);\n      }\n      prevEnd = end;\n\n      if (isSelected) {\n        // Attempt to scroll the selected match into view.\n        findController.scrollMatchIntoView({\n          element: textDivs[begin.divIdx],\n          selectedLeft,\n          pageIndex: pageIdx,\n          matchIndex: selectedMatchIdx,\n        });\n      }\n    }\n\n    if (prevEnd) {\n      appendTextToDiv(prevEnd.divIdx, prevEnd.offset, infinity.offset);\n    }\n  }\n\n  _updateMatches() {\n    if (!this.enabled) {\n      return;\n    }\n    const { findController, matches, pageIdx } = this;\n    const { textContentItemsStr, textDivs } = this;\n    let clearedUntilDivIdx = -1;\n\n    // Clear all current matches.\n    for (let i = 0, ii = matches.length; i < ii; i++) {\n      const match = matches[i];\n      const begin = Math.max(clearedUntilDivIdx, match.begin.divIdx);\n      for (let n = begin, end = match.end.divIdx; n <= end; n++) {\n        const div = textDivs[n];\n        div.textContent = textContentItemsStr[n];\n        div.className = \"\";\n      }\n      clearedUntilDivIdx = match.end.divIdx + 1;\n    }\n\n    if (!findController?.highlightMatches) {\n      return;\n    }\n    // Convert the matches on the `findController` into the match format\n    // used for the textLayer.\n    const pageMatches = findController.pageMatches[pageIdx] || null;\n    const pageMatchesLength = findController.pageMatchesLength[pageIdx] || null;\n\n    this.matches = this._convertMatches(pageMatches, pageMatchesLength);\n    this._renderMatches(this.matches);\n  }\n}\n\nexport { TextHighlighter };\n","/* Copyright 2013 Mozilla Foundation\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n/** @typedef {import(\"./interfaces\").IDownloadManager} IDownloadManager */\n\nimport { createValidAbsoluteUrl, isPdfFile } from \"pdfjs-lib\";\n\nif (typeof PDFJSDev !== \"undefined\" && !PDFJSDev.test(\"CHROME || GENERIC\")) {\n  throw new Error(\n    'Module \"pdfjs-web/download_manager\" shall not be used ' +\n      \"outside CHROME and GENERIC builds.\"\n  );\n}\n\nfunction download(blobUrl, filename) {\n  const a = document.createElement(\"a\");\n  if (!a.click) {\n    throw new Error('DownloadManager: \"a.click()\" is not supported.');\n  }\n  a.href = blobUrl;\n  a.target = \"_parent\";\n  // Use a.download if available. This increases the likelihood that\n  // the file is downloaded instead of opened by another PDF plugin.\n  if (\"download\" in a) {\n    a.download = filename;\n  }\n  // <a> must be in the document for recent Firefox versions,\n  // otherwise .click() is ignored.\n  (document.body || document.documentElement).appendChild(a);\n  a.click();\n  a.remove();\n}\n\n/**\n * @implements {IDownloadManager}\n */\nclass DownloadManager {\n  constructor() {\n    this._openBlobUrls = new WeakMap();\n  }\n\n  downloadUrl(url, filename) {\n    if (!createValidAbsoluteUrl(url, \"http://example.com\")) {\n      console.error(`downloadUrl - not a valid URL: ${url}`);\n      return; // restricted/invalid URL\n    }\n    download(url + \"#pdfjs.action=download\", filename);\n  }\n\n  downloadData(data, filename, contentType) {\n    const blobUrl = URL.createObjectURL(\n      new Blob([data], { type: contentType })\n    );\n    download(blobUrl, filename);\n  }\n\n  /**\n   * @returns {boolean} Indicating if the data was opened.\n   */\n  openOrDownloadData(element, data, filename) {\n    const isPdfData = isPdfFile(filename);\n    const contentType = isPdfData ? \"application/pdf\" : \"\";\n\n    if (isPdfData) {\n      let blobUrl = this._openBlobUrls.get(element);\n      if (!blobUrl) {\n        blobUrl = URL.createObjectURL(new Blob([data], { type: contentType }));\n        this._openBlobUrls.set(element, blobUrl);\n      }\n      let viewerUrl;\n      if (typeof PDFJSDev === \"undefined\" || PDFJSDev.test(\"GENERIC\")) {\n        // The current URL is the viewer, let's use it and append the file.\n        viewerUrl = \"?file=\" + encodeURIComponent(blobUrl + \"#\" + filename);\n      } else if (PDFJSDev.test(\"CHROME\")) {\n        // In the Chrome extension, the URL is rewritten using the history API\n        // in viewer.js, so an absolute URL must be generated.\n        viewerUrl =\n          // eslint-disable-next-line no-undef\n          chrome.runtime.getURL(\"/content/web/viewer.html\") +\n          \"?file=\" +\n          encodeURIComponent(blobUrl + \"#\" + filename);\n      }\n\n      try {\n        window.open(viewerUrl);\n        return true;\n      } catch (ex) {\n        console.error(`openOrDownloadData: ${ex}`);\n        // Release the `blobUrl`, since opening it failed, and fallback to\n        // downloading the PDF file.\n        URL.revokeObjectURL(blobUrl);\n        this._openBlobUrls.delete(element);\n      }\n    }\n\n    this.downloadData(data, filename, contentType);\n    return false;\n  }\n\n  /**\n   * @param sourceEventType {string} Used to signal what triggered the download.\n   *   The version of PDF.js integrated with Firefox uses this to to determine\n   *   which dialog to show. \"save\" triggers \"save as\" and \"download\" triggers\n   *   the \"open with\" dialog.\n   */\n  download(blob, url, filename, sourceEventType = \"download\") {\n    const blobUrl = URL.createObjectURL(blob);\n    download(blobUrl, filename);\n  }\n}\n\nexport { DownloadManager };\n","/* Copyright 2012 Mozilla Foundation\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nconst WaitOnType = {\n  EVENT: \"event\",\n  TIMEOUT: \"timeout\",\n};\n\n/**\n * @typedef {Object} WaitOnEventOrTimeoutParameters\n * @property {Object} target - The event target, can for example be:\n *   `window`, `document`, a DOM element, or an {EventBus} instance.\n * @property {string} name - The name of the event.\n * @property {number} delay - The delay, in milliseconds, after which the\n *   timeout occurs (if the event wasn't already dispatched).\n */\n\n/**\n * Allows waiting for an event or a timeout, whichever occurs first.\n * Can be used to ensure that an action always occurs, even when an event\n * arrives late or not at all.\n *\n * @param {WaitOnEventOrTimeoutParameters}\n * @returns {Promise} A promise that is resolved with a {WaitOnType} value.\n */\nfunction waitOnEventOrTimeout({ target, name, delay = 0 }) {\n  return new Promise(function (resolve, reject) {\n    if (\n      typeof target !== \"object\" ||\n      !(name && typeof name === \"string\") ||\n      !(Number.isInteger(delay) && delay >= 0)\n    ) {\n      throw new Error(\"waitOnEventOrTimeout - invalid parameters.\");\n    }\n\n    function handler(type) {\n      if (target instanceof EventBus) {\n        target._off(name, eventHandler);\n      } else {\n        target.removeEventListener(name, eventHandler);\n      }\n\n      if (timeout) {\n        clearTimeout(timeout);\n      }\n      resolve(type);\n    }\n\n    const eventHandler = handler.bind(null, WaitOnType.EVENT);\n    if (target instanceof EventBus) {\n      target._on(name, eventHandler);\n    } else {\n      target.addEventListener(name, eventHandler);\n    }\n\n    const timeoutHandler = handler.bind(null, WaitOnType.TIMEOUT);\n    const timeout = setTimeout(timeoutHandler, delay);\n  });\n}\n\n/**\n * Simple event bus for an application. Listeners are attached using the `on`\n * and `off` methods. To raise an event, the `dispatch` method shall be used.\n */\nclass EventBus {\n  constructor() {\n    this._listeners = Object.create(null);\n  }\n\n  /**\n   * @param {string} eventName\n   * @param {function} listener\n   * @param {Object} [options]\n   */\n  on(eventName, listener, options = null) {\n    this._on(eventName, listener, {\n      external: true,\n      once: options?.once,\n    });\n  }\n\n  /**\n   * @param {string} eventName\n   * @param {function} listener\n   * @param {Object} [options]\n   */\n  off(eventName, listener, options = null) {\n    this._off(eventName, listener, {\n      external: true,\n      once: options?.once,\n    });\n  }\n\n  /**\n   * @param {string} eventName\n   * @param {Object} data\n   */\n  dispatch(eventName, data) {\n    const eventListeners = this._listeners[eventName];\n    if (!eventListeners || eventListeners.length === 0) {\n      return;\n    }\n    let externalListeners;\n    // Making copy of the listeners array in case if it will be modified\n    // during dispatch.\n    for (const { listener, external, once } of eventListeners.slice(0)) {\n      if (once) {\n        this._off(eventName, listener);\n      }\n      if (external) {\n        (externalListeners ||= []).push(listener);\n        continue;\n      }\n      listener(data);\n    }\n    // Dispatch any \"external\" listeners *after* the internal ones, to give the\n    // viewer components time to handle events and update their state first.\n    if (externalListeners) {\n      for (const listener of externalListeners) {\n        listener(data);\n      }\n      externalListeners = null;\n    }\n  }\n\n  /**\n   * @ignore\n   */\n  _on(eventName, listener, options = null) {\n    const eventListeners = (this._listeners[eventName] ||= []);\n    eventListeners.push({\n      listener,\n      external: options?.external === true,\n      once: options?.once === true,\n    });\n  }\n\n  /**\n   * @ignore\n   */\n  _off(eventName, listener, options = null) {\n    const eventListeners = this._listeners[eventName];\n    if (!eventListeners) {\n      return;\n    }\n    for (let i = 0, ii = eventListeners.length; i < ii; i++) {\n      if (eventListeners[i].listener === listener) {\n        eventListeners.splice(i, 1);\n        return;\n      }\n    }\n  }\n}\n\n/**\n * NOTE: Only used to support various PDF viewer tests in `mozilla-central`.\n */\nclass AutomationEventBus extends EventBus {\n  dispatch(eventName, data) {\n    if (typeof PDFJSDev !== \"undefined\" && !PDFJSDev.test(\"MOZCENTRAL\")) {\n      throw new Error(\"Not implemented: AutomationEventBus.dispatch\");\n    }\n    super.dispatch(eventName, data);\n\n    const details = Object.create(null);\n    if (data) {\n      for (const key in data) {\n        const value = data[key];\n        if (key === \"source\") {\n          if (value === window || value === document) {\n            return; // No need to re-dispatch (already) global events.\n          }\n          continue; // Ignore the `source` property.\n        }\n        details[key] = value;\n      }\n    }\n    const event = document.createEvent(\"CustomEvent\");\n    event.initCustomEvent(eventName, true, true, details);\n    document.dispatchEvent(event);\n  }\n}\n\nexport { AutomationEventBus, EventBus, waitOnEventOrTimeout, WaitOnType };\n","/* Copyright 2017 Mozilla Foundation\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n/** @typedef {import(\"./interfaces\").IL10n} IL10n */\n\nimport \"../external/webL10n/l10n.js\";\nimport { fixupLangCode, getL10nFallback } from \"./l10n_utils.js\";\n\nconst webL10n = document.webL10n;\n\n/**\n * @implements {IL10n}\n */\nclass GenericL10n {\n  constructor(lang) {\n    this._lang = lang;\n    this._ready = new Promise((resolve, reject) => {\n      webL10n.setLanguage(fixupLangCode(lang), () => {\n        resolve(webL10n);\n      });\n    });\n  }\n\n  async getLanguage() {\n    const l10n = await this._ready;\n    return l10n.getLanguage();\n  }\n\n  async getDirection() {\n    const l10n = await this._ready;\n    return l10n.getDirection();\n  }\n\n  async get(key, args = null, fallback = getL10nFallback(key, args)) {\n    const l10n = await this._ready;\n    return l10n.get(key, args, fallback);\n  }\n\n  async translate(element) {\n    const l10n = await this._ready;\n    return l10n.translate(element);\n  }\n}\n\nexport { GenericL10n };\n","/**\n * Copyright (c) 2011-2013 Fabien Cazenave, Mozilla.\n *\n * Permission is hereby granted, free of charge, to any person obtaining a copy\n * of this software and associated documentation files (the \"Software\"), to\n * deal in the Software without restriction, including without limitation the\n * rights to use, copy, modify, merge, publish, distribute, sublicense, and/or\n * sell copies of the Software, and to permit persons to whom the Software is\n * furnished to do so, subject to the following conditions:\n *\n * The above copyright notice and this permission notice shall be included in\n * all copies or substantial portions of the Software.\n *\n * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING\n * FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS\n * IN THE SOFTWARE.\n */\n/*\n  Additional modifications for PDF.js project:\n    - Disables language initialization on page loading.\n    - Disables document translation on page loading.\n    - Removes consoleWarn and consoleLog and use console.log/warn directly.\n    - Removes window._ assignment.\n    - Remove compatibility code for OldIE.\n    - Replaces `String.prototype.substr()` with `String.prototype.substring()`.\n    - Removes `fireL10nReadyEvent` since the \"localized\" event it dispatches\n      is unused and may clash with an identically named event in the viewer.\n*/\n\n/*jshint browser: true, devel: true, es5: true, globalstrict: true */\n'use strict';\n\ndocument.webL10n = (function(window, document, undefined) {\n  var gL10nData = {};\n  var gTextData = '';\n  var gTextProp = 'textContent';\n  var gLanguage = '';\n  var gMacros = {};\n  var gReadyState = 'loading';\n\n\n  /**\n   * Synchronously loading l10n resources significantly minimizes flickering\n   * from displaying the app with non-localized strings and then updating the\n   * strings. Although this will block all script execution on this page, we\n   * expect that the l10n resources are available locally on flash-storage.\n   *\n   * As synchronous XHR is generally considered as a bad idea, we're still\n   * loading l10n resources asynchronously -- but we keep this in a setting,\n   * just in case... and applications using this library should hide their\n   * content until the `localized' event happens.\n   */\n\n  var gAsyncResourceLoading = true; // read-only\n\n\n  /**\n   * DOM helpers for the so-called \"HTML API\".\n   *\n   * These functions are written for modern browsers. For old versions of IE,\n   * they're overridden in the 'startup' section at the end of this file.\n   */\n\n  function getL10nResourceLinks() {\n    return document.querySelectorAll('link[type=\"application/l10n\"]');\n  }\n\n  function getL10nDictionary() {\n    var script = document.querySelector('script[type=\"application/l10n\"]');\n    // TODO: support multiple and external JSON dictionaries\n    return script ? JSON.parse(script.innerHTML) : null;\n  }\n\n  function getTranslatableChildren(element) {\n    return element ? element.querySelectorAll('*[data-l10n-id]') : [];\n  }\n\n  function getL10nAttributes(element) {\n    if (!element)\n      return {};\n\n    var l10nId = element.getAttribute('data-l10n-id');\n    var l10nArgs = element.getAttribute('data-l10n-args');\n    var args = {};\n    if (l10nArgs) {\n      try {\n        args = JSON.parse(l10nArgs);\n      } catch (e) {\n        console.warn('could not parse arguments for #' + l10nId);\n      }\n    }\n    return { id: l10nId, args: args };\n  }\n\n  function xhrLoadText(url, onSuccess, onFailure) {\n    onSuccess = onSuccess || function _onSuccess(data) {};\n    onFailure = onFailure || function _onFailure() {};\n\n    var xhr = new XMLHttpRequest();\n    xhr.open('GET', url, gAsyncResourceLoading);\n    if (xhr.overrideMimeType) {\n      xhr.overrideMimeType('text/plain; charset=utf-8');\n    }\n    xhr.onreadystatechange = function() {\n      if (xhr.readyState == 4) {\n        if (xhr.status == 200 || xhr.status === 0) {\n          onSuccess(xhr.responseText);\n        } else {\n          onFailure();\n        }\n      }\n    };\n    xhr.onerror = onFailure;\n    xhr.ontimeout = onFailure;\n\n    // in Firefox OS with the app:// protocol, trying to XHR a non-existing\n    // URL will raise an exception here -- hence this ugly try...catch.\n    try {\n      xhr.send(null);\n    } catch (e) {\n      onFailure();\n    }\n  }\n\n\n  /**\n   * l10n resource parser:\n   *  - reads (async XHR) the l10n resource matching `lang';\n   *  - imports linked resources (synchronously) when specified;\n   *  - parses the text data (fills `gL10nData' and `gTextData');\n   *  - triggers success/failure callbacks when done.\n   *\n   * @param {string} href\n   *    URL of the l10n resource to parse.\n   *\n   * @param {string} lang\n   *    locale (language) to parse. Must be a lowercase string.\n   *\n   * @param {Function} successCallback\n   *    triggered when the l10n resource has been successfully parsed.\n   *\n   * @param {Function} failureCallback\n   *    triggered when the an error has occurred.\n   *\n   * @return {void}\n   *    uses the following global variables: gL10nData, gTextData, gTextProp.\n   */\n\n  function parseResource(href, lang, successCallback, failureCallback) {\n    var baseURL = href.replace(/[^\\/]*$/, '') || './';\n\n    // handle escaped characters (backslashes) in a string\n    function evalString(text) {\n      if (text.lastIndexOf('\\\\') < 0)\n        return text;\n      return text.replace(/\\\\\\\\/g, '\\\\')\n                 .replace(/\\\\n/g, '\\n')\n                 .replace(/\\\\r/g, '\\r')\n                 .replace(/\\\\t/g, '\\t')\n                 .replace(/\\\\b/g, '\\b')\n                 .replace(/\\\\f/g, '\\f')\n                 .replace(/\\\\{/g, '{')\n                 .replace(/\\\\}/g, '}')\n                 .replace(/\\\\\"/g, '\"')\n                 .replace(/\\\\'/g, \"'\");\n    }\n\n    // parse *.properties text data into an l10n dictionary\n    // If gAsyncResourceLoading is false, then the callback will be called\n    // synchronously. Otherwise it is called asynchronously.\n    function parseProperties(text, parsedPropertiesCallback) {\n      var dictionary = {};\n\n      // token expressions\n      var reBlank = /^\\s*|\\s*$/;\n      var reComment = /^\\s*#|^\\s*$/;\n      var reSection = /^\\s*\\[(.*)\\]\\s*$/;\n      var reImport = /^\\s*@import\\s+url\\((.*)\\)\\s*$/i;\n      var reSplit = /^([^=\\s]*)\\s*=\\s*(.+)$/; // TODO: escape EOLs with '\\'\n\n      // parse the *.properties file into an associative array\n      function parseRawLines(rawText, extendedSyntax, parsedRawLinesCallback) {\n        var entries = rawText.replace(reBlank, '').split(/[\\r\\n]+/);\n        var currentLang = '*';\n        var genericLang = lang.split('-', 1)[0];\n        var skipLang = false;\n        var match = '';\n\n        function nextEntry() {\n          // Use infinite loop instead of recursion to avoid reaching the\n          // maximum recursion limit for content with many lines.\n          while (true) {\n            if (!entries.length) {\n              parsedRawLinesCallback();\n              return;\n            }\n            var line = entries.shift();\n\n            // comment or blank line?\n            if (reComment.test(line))\n              continue;\n\n            // the extended syntax supports [lang] sections and @import rules\n            if (extendedSyntax) {\n              match = reSection.exec(line);\n              if (match) { // section start?\n                // RFC 4646, section 4.4, \"All comparisons MUST be performed\n                // in a case-insensitive manner.\"\n\n                currentLang = match[1].toLowerCase();\n                skipLang = (currentLang !== '*') &&\n                    (currentLang !== lang) && (currentLang !== genericLang);\n                continue;\n              } else if (skipLang) {\n                continue;\n              }\n              match = reImport.exec(line);\n              if (match) { // @import rule?\n                loadImport(baseURL + match[1], nextEntry);\n                return;\n              }\n            }\n\n            // key-value pair\n            var tmp = line.match(reSplit);\n            if (tmp && tmp.length == 3) {\n              dictionary[tmp[1]] = evalString(tmp[2]);\n            }\n          }\n        }\n        nextEntry();\n      }\n\n      // import another *.properties file\n      function loadImport(url, callback) {\n        xhrLoadText(url, function(content) {\n          parseRawLines(content, false, callback); // don't allow recursive imports\n        }, function () {\n          console.warn(url + ' not found.');\n          callback();\n        });\n      }\n\n      // fill the dictionary\n      parseRawLines(text, true, function() {\n        parsedPropertiesCallback(dictionary);\n      });\n    }\n\n    // load and parse l10n data (warning: global variables are used here)\n    xhrLoadText(href, function(response) {\n      gTextData += response; // mostly for debug\n\n      // parse *.properties text data into an l10n dictionary\n      parseProperties(response, function(data) {\n\n        // find attribute descriptions, if any\n        for (var key in data) {\n          var id, prop, index = key.lastIndexOf('.');\n          if (index > 0) { // an attribute has been specified\n            id = key.substring(0, index);\n            prop = key.substring(index + 1);\n          } else { // no attribute: assuming text content by default\n            id = key;\n            prop = gTextProp;\n          }\n          if (!gL10nData[id]) {\n            gL10nData[id] = {};\n          }\n          gL10nData[id][prop] = data[key];\n        }\n\n        // trigger callback\n        if (successCallback) {\n          successCallback();\n        }\n      });\n    }, failureCallback);\n  }\n\n  // load and parse all resources for the specified locale\n  function loadLocale(lang, callback) {\n    // RFC 4646, section 2.1 states that language tags have to be treated as\n    // case-insensitive. Convert to lowercase for case-insensitive comparisons.\n    if (lang) {\n      lang = lang.toLowerCase();\n    }\n\n    callback = callback || function _callback() {};\n\n    clear();\n    gLanguage = lang;\n\n    // check all <link type=\"application/l10n\" href=\"...\" /> nodes\n    // and load the resource files\n    var langLinks = getL10nResourceLinks();\n    var langCount = langLinks.length;\n    if (langCount === 0) {\n      // we might have a pre-compiled dictionary instead\n      var dict = getL10nDictionary();\n      if (dict && dict.locales && dict.default_locale) {\n        console.log('using the embedded JSON directory, early way out');\n        gL10nData = dict.locales[lang];\n        if (!gL10nData) {\n          var defaultLocale = dict.default_locale.toLowerCase();\n          for (var anyCaseLang in dict.locales) {\n            anyCaseLang = anyCaseLang.toLowerCase();\n            if (anyCaseLang === lang) {\n              gL10nData = dict.locales[lang];\n              break;\n            } else if (anyCaseLang === defaultLocale) {\n              gL10nData = dict.locales[defaultLocale];\n            }\n          }\n        }\n        callback();\n      } else {\n        console.log('no resource to load, early way out');\n      }\n      // early way out\n      gReadyState = 'complete';\n      return;\n    }\n\n    // start the callback when all resources are loaded\n    var onResourceLoaded = null;\n    var gResourceCount = 0;\n    onResourceLoaded = function() {\n      gResourceCount++;\n      if (gResourceCount >= langCount) {\n        callback();\n        gReadyState = 'complete';\n      }\n    };\n\n    // load all resource files\n    function L10nResourceLink(link) {\n      var href = link.href;\n      // Note: If |gAsyncResourceLoading| is false, then the following callbacks\n      // are synchronously called.\n      this.load = function(lang, callback) {\n        parseResource(href, lang, callback, function() {\n          console.warn(href + ' not found.');\n          // lang not found, used default resource instead\n          console.warn('\"' + lang + '\" resource not found');\n          gLanguage = '';\n          // Resource not loaded, but we still need to call the callback.\n          callback();\n        });\n      };\n    }\n\n    for (var i = 0; i < langCount; i++) {\n      var resource = new L10nResourceLink(langLinks[i]);\n      resource.load(lang, onResourceLoaded);\n    }\n  }\n\n  // clear all l10n data\n  function clear() {\n    gL10nData = {};\n    gTextData = '';\n    gLanguage = '';\n    // TODO: clear all non predefined macros.\n    // There's no such macro /yet/ but we're planning to have some...\n  }\n\n\n  /**\n   * Get rules for plural forms (shared with JetPack), see:\n   * http://unicode.org/repos/cldr-tmp/trunk/diff/supplemental/language_plural_rules.html\n   * https://github.com/mozilla/addon-sdk/blob/master/python-lib/plural-rules-generator.p\n   *\n   * @param {string} lang\n   *    locale (language) used.\n   *\n   * @return {Function}\n   *    returns a function that gives the plural form name for a given integer:\n   *       var fun = getPluralRules('en');\n   *       fun(1)    -> 'one'\n   *       fun(0)    -> 'other'\n   *       fun(1000) -> 'other'.\n   */\n\n  function getPluralRules(lang) {\n    var locales2rules = {\n      'af': 3,\n      'ak': 4,\n      'am': 4,\n      'ar': 1,\n      'asa': 3,\n      'az': 0,\n      'be': 11,\n      'bem': 3,\n      'bez': 3,\n      'bg': 3,\n      'bh': 4,\n      'bm': 0,\n      'bn': 3,\n      'bo': 0,\n      'br': 20,\n      'brx': 3,\n      'bs': 11,\n      'ca': 3,\n      'cgg': 3,\n      'chr': 3,\n      'cs': 12,\n      'cy': 17,\n      'da': 3,\n      'de': 3,\n      'dv': 3,\n      'dz': 0,\n      'ee': 3,\n      'el': 3,\n      'en': 3,\n      'eo': 3,\n      'es': 3,\n      'et': 3,\n      'eu': 3,\n      'fa': 0,\n      'ff': 5,\n      'fi': 3,\n      'fil': 4,\n      'fo': 3,\n      'fr': 5,\n      'fur': 3,\n      'fy': 3,\n      'ga': 8,\n      'gd': 24,\n      'gl': 3,\n      'gsw': 3,\n      'gu': 3,\n      'guw': 4,\n      'gv': 23,\n      'ha': 3,\n      'haw': 3,\n      'he': 2,\n      'hi': 4,\n      'hr': 11,\n      'hu': 0,\n      'id': 0,\n      'ig': 0,\n      'ii': 0,\n      'is': 3,\n      'it': 3,\n      'iu': 7,\n      'ja': 0,\n      'jmc': 3,\n      'jv': 0,\n      'ka': 0,\n      'kab': 5,\n      'kaj': 3,\n      'kcg': 3,\n      'kde': 0,\n      'kea': 0,\n      'kk': 3,\n      'kl': 3,\n      'km': 0,\n      'kn': 0,\n      'ko': 0,\n      'ksb': 3,\n      'ksh': 21,\n      'ku': 3,\n      'kw': 7,\n      'lag': 18,\n      'lb': 3,\n      'lg': 3,\n      'ln': 4,\n      'lo': 0,\n      'lt': 10,\n      'lv': 6,\n      'mas': 3,\n      'mg': 4,\n      'mk': 16,\n      'ml': 3,\n      'mn': 3,\n      'mo': 9,\n      'mr': 3,\n      'ms': 0,\n      'mt': 15,\n      'my': 0,\n      'nah': 3,\n      'naq': 7,\n      'nb': 3,\n      'nd': 3,\n      'ne': 3,\n      'nl': 3,\n      'nn': 3,\n      'no': 3,\n      'nr': 3,\n      'nso': 4,\n      'ny': 3,\n      'nyn': 3,\n      'om': 3,\n      'or': 3,\n      'pa': 3,\n      'pap': 3,\n      'pl': 13,\n      'ps': 3,\n      'pt': 3,\n      'rm': 3,\n      'ro': 9,\n      'rof': 3,\n      'ru': 11,\n      'rwk': 3,\n      'sah': 0,\n      'saq': 3,\n      'se': 7,\n      'seh': 3,\n      'ses': 0,\n      'sg': 0,\n      'sh': 11,\n      'shi': 19,\n      'sk': 12,\n      'sl': 14,\n      'sma': 7,\n      'smi': 7,\n      'smj': 7,\n      'smn': 7,\n      'sms': 7,\n      'sn': 3,\n      'so': 3,\n      'sq': 3,\n      'sr': 11,\n      'ss': 3,\n      'ssy': 3,\n      'st': 3,\n      'sv': 3,\n      'sw': 3,\n      'syr': 3,\n      'ta': 3,\n      'te': 3,\n      'teo': 3,\n      'th': 0,\n      'ti': 4,\n      'tig': 3,\n      'tk': 3,\n      'tl': 4,\n      'tn': 3,\n      'to': 0,\n      'tr': 0,\n      'ts': 3,\n      'tzm': 22,\n      'uk': 11,\n      'ur': 3,\n      've': 3,\n      'vi': 0,\n      'vun': 3,\n      'wa': 4,\n      'wae': 3,\n      'wo': 0,\n      'xh': 3,\n      'xog': 3,\n      'yo': 0,\n      'zh': 0,\n      'zu': 3\n    };\n\n    // utility functions for plural rules methods\n    function isIn(n, list) {\n      return list.indexOf(n) !== -1;\n    }\n    function isBetween(n, start, end) {\n      return start <= n && n <= end;\n    }\n\n    // list of all plural rules methods:\n    // map an integer to the plural form name to use\n    var pluralRules = {\n      '0': function(n) {\n        return 'other';\n      },\n      '1': function(n) {\n        if ((isBetween((n % 100), 3, 10)))\n          return 'few';\n        if (n === 0)\n          return 'zero';\n        if ((isBetween((n % 100), 11, 99)))\n          return 'many';\n        if (n == 2)\n          return 'two';\n        if (n == 1)\n          return 'one';\n        return 'other';\n      },\n      '2': function(n) {\n        if (n !== 0 && (n % 10) === 0)\n          return 'many';\n        if (n == 2)\n          return 'two';\n        if (n == 1)\n          return 'one';\n        return 'other';\n      },\n      '3': function(n) {\n        if (n == 1)\n          return 'one';\n        return 'other';\n      },\n      '4': function(n) {\n        if ((isBetween(n, 0, 1)))\n          return 'one';\n        return 'other';\n      },\n      '5': function(n) {\n        if ((isBetween(n, 0, 2)) && n != 2)\n          return 'one';\n        return 'other';\n      },\n      '6': function(n) {\n        if (n === 0)\n          return 'zero';\n        if ((n % 10) == 1 && (n % 100) != 11)\n          return 'one';\n        return 'other';\n      },\n      '7': function(n) {\n        if (n == 2)\n          return 'two';\n        if (n == 1)\n          return 'one';\n        return 'other';\n      },\n      '8': function(n) {\n        if ((isBetween(n, 3, 6)))\n          return 'few';\n        if ((isBetween(n, 7, 10)))\n          return 'many';\n        if (n == 2)\n          return 'two';\n        if (n == 1)\n          return 'one';\n        return 'other';\n      },\n      '9': function(n) {\n        if (n === 0 || n != 1 && (isBetween((n % 100), 1, 19)))\n          return 'few';\n        if (n == 1)\n          return 'one';\n        return 'other';\n      },\n      '10': function(n) {\n        if ((isBetween((n % 10), 2, 9)) && !(isBetween((n % 100), 11, 19)))\n          return 'few';\n        if ((n % 10) == 1 && !(isBetween((n % 100), 11, 19)))\n          return 'one';\n        return 'other';\n      },\n      '11': function(n) {\n        if ((isBetween((n % 10), 2, 4)) && !(isBetween((n % 100), 12, 14)))\n          return 'few';\n        if ((n % 10) === 0 ||\n            (isBetween((n % 10), 5, 9)) ||\n            (isBetween((n % 100), 11, 14)))\n          return 'many';\n        if ((n % 10) == 1 && (n % 100) != 11)\n          return 'one';\n        return 'other';\n      },\n      '12': function(n) {\n        if ((isBetween(n, 2, 4)))\n          return 'few';\n        if (n == 1)\n          return 'one';\n        return 'other';\n      },\n      '13': function(n) {\n        if ((isBetween((n % 10), 2, 4)) && !(isBetween((n % 100), 12, 14)))\n          return 'few';\n        if (n != 1 && (isBetween((n % 10), 0, 1)) ||\n            (isBetween((n % 10), 5, 9)) ||\n            (isBetween((n % 100), 12, 14)))\n          return 'many';\n        if (n == 1)\n          return 'one';\n        return 'other';\n      },\n      '14': function(n) {\n        if ((isBetween((n % 100), 3, 4)))\n          return 'few';\n        if ((n % 100) == 2)\n          return 'two';\n        if ((n % 100) == 1)\n          return 'one';\n        return 'other';\n      },\n      '15': function(n) {\n        if (n === 0 || (isBetween((n % 100), 2, 10)))\n          return 'few';\n        if ((isBetween((n % 100), 11, 19)))\n          return 'many';\n        if (n == 1)\n          return 'one';\n        return 'other';\n      },\n      '16': function(n) {\n        if ((n % 10) == 1 && n != 11)\n          return 'one';\n        return 'other';\n      },\n      '17': function(n) {\n        if (n == 3)\n          return 'few';\n        if (n === 0)\n          return 'zero';\n        if (n == 6)\n          return 'many';\n        if (n == 2)\n          return 'two';\n        if (n == 1)\n          return 'one';\n        return 'other';\n      },\n      '18': function(n) {\n        if (n === 0)\n          return 'zero';\n        if ((isBetween(n, 0, 2)) && n !== 0 && n != 2)\n          return 'one';\n        return 'other';\n      },\n      '19': function(n) {\n        if ((isBetween(n, 2, 10)))\n          return 'few';\n        if ((isBetween(n, 0, 1)))\n          return 'one';\n        return 'other';\n      },\n      '20': function(n) {\n        if ((isBetween((n % 10), 3, 4) || ((n % 10) == 9)) && !(\n            isBetween((n % 100), 10, 19) ||\n            isBetween((n % 100), 70, 79) ||\n            isBetween((n % 100), 90, 99)\n            ))\n          return 'few';\n        if ((n % 1000000) === 0 && n !== 0)\n          return 'many';\n        if ((n % 10) == 2 && !isIn((n % 100), [12, 72, 92]))\n          return 'two';\n        if ((n % 10) == 1 && !isIn((n % 100), [11, 71, 91]))\n          return 'one';\n        return 'other';\n      },\n      '21': function(n) {\n        if (n === 0)\n          return 'zero';\n        if (n == 1)\n          return 'one';\n        return 'other';\n      },\n      '22': function(n) {\n        if ((isBetween(n, 0, 1)) || (isBetween(n, 11, 99)))\n          return 'one';\n        return 'other';\n      },\n      '23': function(n) {\n        if ((isBetween((n % 10), 1, 2)) || (n % 20) === 0)\n          return 'one';\n        return 'other';\n      },\n      '24': function(n) {\n        if ((isBetween(n, 3, 10) || isBetween(n, 13, 19)))\n          return 'few';\n        if (isIn(n, [2, 12]))\n          return 'two';\n        if (isIn(n, [1, 11]))\n          return 'one';\n        return 'other';\n      }\n    };\n\n    // return a function that gives the plural form name for a given integer\n    var index = locales2rules[lang.replace(/-.*$/, '')];\n    if (!(index in pluralRules)) {\n      console.warn('plural form unknown for [' + lang + ']');\n      return function() { return 'other'; };\n    }\n    return pluralRules[index];\n  }\n\n  // pre-defined 'plural' macro\n  gMacros.plural = function(str, param, key, prop) {\n    var n = parseFloat(param);\n    if (isNaN(n))\n      return str;\n\n    // TODO: support other properties (l20n still doesn't...)\n    if (prop != gTextProp)\n      return str;\n\n    // initialize _pluralRules\n    if (!gMacros._pluralRules) {\n      gMacros._pluralRules = getPluralRules(gLanguage);\n    }\n    var index = '[' + gMacros._pluralRules(n) + ']';\n\n    // try to find a [zero|one|two] key if it's defined\n    if (n === 0 && (key + '[zero]') in gL10nData) {\n      str = gL10nData[key + '[zero]'][prop];\n    } else if (n == 1 && (key + '[one]') in gL10nData) {\n      str = gL10nData[key + '[one]'][prop];\n    } else if (n == 2 && (key + '[two]') in gL10nData) {\n      str = gL10nData[key + '[two]'][prop];\n    } else if ((key + index) in gL10nData) {\n      str = gL10nData[key + index][prop];\n    } else if ((key + '[other]') in gL10nData) {\n      str = gL10nData[key + '[other]'][prop];\n    }\n\n    return str;\n  };\n\n\n  /**\n   * l10n dictionary functions\n   */\n\n  // fetch an l10n object, warn if not found, apply `args' if possible\n  function getL10nData(key, args, fallback) {\n    var data = gL10nData[key];\n    if (!data) {\n      console.warn('#' + key + ' is undefined.');\n      if (!fallback) {\n        return null;\n      }\n      data = fallback;\n    }\n\n    /** This is where l10n expressions should be processed.\n      * The plan is to support C-style expressions from the l20n project;\n      * until then, only two kinds of simple expressions are supported:\n      *   {[ index ]} and {{ arguments }}.\n      */\n    var rv = {};\n    for (var prop in data) {\n      var str = data[prop];\n      str = substIndexes(str, args, key, prop);\n      str = substArguments(str, args, key);\n      rv[prop] = str;\n    }\n    return rv;\n  }\n\n  // replace {[macros]} with their values\n  function substIndexes(str, args, key, prop) {\n    var reIndex = /\\{\\[\\s*([a-zA-Z]+)\\(([a-zA-Z]+)\\)\\s*\\]\\}/;\n    var reMatch = reIndex.exec(str);\n    if (!reMatch || !reMatch.length)\n      return str;\n\n    // an index/macro has been found\n    // Note: at the moment, only one parameter is supported\n    var macroName = reMatch[1];\n    var paramName = reMatch[2];\n    var param;\n    if (args && paramName in args) {\n      param = args[paramName];\n    } else if (paramName in gL10nData) {\n      param = gL10nData[paramName];\n    }\n\n    // there's no macro parser yet: it has to be defined in gMacros\n    if (macroName in gMacros) {\n      var macro = gMacros[macroName];\n      str = macro(str, param, key, prop);\n    }\n    return str;\n  }\n\n  // replace {{arguments}} with their values\n  function substArguments(str, args, key) {\n    var reArgs = /\\{\\{\\s*(.+?)\\s*\\}\\}/g;\n    return str.replace(reArgs, function(matched_text, arg) {\n      if (args && arg in args) {\n        return args[arg];\n      }\n      if (arg in gL10nData) {\n        return gL10nData[arg];\n      }\n      console.log('argument {{' + arg + '}} for #' + key + ' is undefined.');\n      return matched_text;\n    });\n  }\n\n  // translate an HTML element\n  function translateElement(element) {\n    var l10n = getL10nAttributes(element);\n    if (!l10n.id)\n      return;\n\n    // get the related l10n object\n    var data = getL10nData(l10n.id, l10n.args);\n    if (!data) {\n      console.warn('#' + l10n.id + ' is undefined.');\n      return;\n    }\n\n    // translate element (TODO: security checks?)\n    if (data[gTextProp]) { // XXX\n      if (getChildElementCount(element) === 0) {\n        element[gTextProp] = data[gTextProp];\n      } else {\n        // this element has element children: replace the content of the first\n        // (non-empty) child textNode and clear other child textNodes\n        var children = element.childNodes;\n        var found = false;\n        for (var i = 0, l = children.length; i < l; i++) {\n          if (children[i].nodeType === 3 && /\\S/.test(children[i].nodeValue)) {\n            if (found) {\n              children[i].nodeValue = '';\n            } else {\n              children[i].nodeValue = data[gTextProp];\n              found = true;\n            }\n          }\n        }\n        // if no (non-empty) textNode is found, insert a textNode before the\n        // first element child.\n        if (!found) {\n          var textNode = document.createTextNode(data[gTextProp]);\n          element.insertBefore(textNode, element.firstChild);\n        }\n      }\n      delete data[gTextProp];\n    }\n\n    for (var k in data) {\n      element[k] = data[k];\n    }\n  }\n\n  // webkit browsers don't currently support 'children' on SVG elements...\n  function getChildElementCount(element) {\n    if (element.children) {\n      return element.children.length;\n    }\n    if (typeof element.childElementCount !== 'undefined') {\n      return element.childElementCount;\n    }\n    var count = 0;\n    for (var i = 0; i < element.childNodes.length; i++) {\n      count += element.nodeType === 1 ? 1 : 0;\n    }\n    return count;\n  }\n\n  // translate an HTML subtree\n  function translateFragment(element) {\n    element = element || document.documentElement;\n\n    // check all translatable children (= w/ a `data-l10n-id' attribute)\n    var children = getTranslatableChildren(element);\n    var elementCount = children.length;\n    for (var i = 0; i < elementCount; i++) {\n      translateElement(children[i]);\n    }\n\n    // translate element itself if necessary\n    translateElement(element);\n  }\n\n  return {\n    // get a localized string\n    get: function(key, args, fallbackString) {\n      var index = key.lastIndexOf('.');\n      var prop = gTextProp;\n      if (index > 0) { // An attribute has been specified\n        prop = key.substring(index + 1);\n        key = key.substring(0, index);\n      }\n      var fallback;\n      if (fallbackString) {\n        fallback = {};\n        fallback[prop] = fallbackString;\n      }\n      var data = getL10nData(key, args, fallback);\n      if (data && prop in data) {\n        return data[prop];\n      }\n      return '{{' + key + '}}';\n    },\n\n    // debug\n    getData: function() { return gL10nData; },\n    getText: function() { return gTextData; },\n\n    // get|set the document language\n    getLanguage: function() { return gLanguage; },\n    setLanguage: function(lang, callback) {\n      loadLocale(lang, function() {\n        if (callback)\n          callback();\n      });\n    },\n\n    // get the direction (ltr|rtl) of the current language\n    getDirection: function() {\n      // http://www.w3.org/International/questions/qa-scripts\n      // Arabic, Hebrew, Farsi, Pashto, Urdu\n      var rtlList = ['ar', 'he', 'fa', 'ps', 'ur'];\n      var shortCode = gLanguage.split('-', 1)[0];\n      return (rtlList.indexOf(shortCode) >= 0) ? 'rtl' : 'ltr';\n    },\n\n    // translate an element or document fragment\n    translate: translateFragment,\n\n    // this can be used to prevent race conditions\n    getReadyState: function() { return gReadyState; },\n    ready: function(callback) {\n      if (!callback) {\n        return;\n      } else if (gReadyState == 'complete' || gReadyState == 'interactive') {\n        window.setTimeout(function() {\n          callback();\n        });\n      } else if (document.addEventListener) {\n        document.addEventListener('localized', function once() {\n          document.removeEventListener('localized', once);\n          callback();\n        });\n      }\n    }\n  };\n}) (window, document);\n","/* Copyright 2012 Mozilla Foundation\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n/** @typedef {import(\"../src/display/api\").PDFDocumentProxy} PDFDocumentProxy */\n/** @typedef {import(\"./event_utils\").EventBus} EventBus */\n/** @typedef {import(\"./interfaces\").IPDFLinkService} IPDFLinkService */\n\nimport { binarySearchFirstItem, scrollIntoView } from \"./ui_utils.js\";\nimport { createPromiseCapability } from \"pdfjs-lib\";\nimport { getCharacterType } from \"./pdf_find_utils.js\";\n\nconst FindState = {\n  FOUND: 0,\n  NOT_FOUND: 1,\n  WRAPPED: 2,\n  PENDING: 3,\n};\n\nconst FIND_TIMEOUT = 250; // ms\nconst MATCH_SCROLL_OFFSET_TOP = -50; // px\nconst MATCH_SCROLL_OFFSET_LEFT = -400; // px\n\nconst CHARACTERS_TO_NORMALIZE = {\n  \"\\u2010\": \"-\", // Hyphen\n  \"\\u2018\": \"'\", // Left single quotation mark\n  \"\\u2019\": \"'\", // Right single quotation mark\n  \"\\u201A\": \"'\", // Single low-9 quotation mark\n  \"\\u201B\": \"'\", // Single high-reversed-9 quotation mark\n  \"\\u201C\": '\"', // Left double quotation mark\n  \"\\u201D\": '\"', // Right double quotation mark\n  \"\\u201E\": '\"', // Double low-9 quotation mark\n  \"\\u201F\": '\"', // Double high-reversed-9 quotation mark\n  \"\\u00BC\": \"1/4\", // Vulgar fraction one quarter\n  \"\\u00BD\": \"1/2\", // Vulgar fraction one half\n  \"\\u00BE\": \"3/4\", // Vulgar fraction three quarters\n};\n\n// These diacritics aren't considered as combining diacritics\n// when searching in a document:\n//   https://searchfox.org/mozilla-central/source/intl/unicharutil/util/is_combining_diacritic.py.\n// The combining class definitions can be found:\n//   https://www.unicode.org/reports/tr44/#Canonical_Combining_Class_Values\n// Category 0 corresponds to [^\\p{Mn}].\nconst DIACRITICS_EXCEPTION = new Set([\n  // UNICODE_COMBINING_CLASS_KANA_VOICING\n  // https://www.compart.com/fr/unicode/combining/8\n  0x3099, 0x309a,\n  // UNICODE_COMBINING_CLASS_VIRAMA (under 0xFFFF)\n  // https://www.compart.com/fr/unicode/combining/9\n  0x094d, 0x09cd, 0x0a4d, 0x0acd, 0x0b4d, 0x0bcd, 0x0c4d, 0x0ccd, 0x0d3b,\n  0x0d3c, 0x0d4d, 0x0dca, 0x0e3a, 0x0eba, 0x0f84, 0x1039, 0x103a, 0x1714,\n  0x1734, 0x17d2, 0x1a60, 0x1b44, 0x1baa, 0x1bab, 0x1bf2, 0x1bf3, 0x2d7f,\n  0xa806, 0xa82c, 0xa8c4, 0xa953, 0xa9c0, 0xaaf6, 0xabed,\n  // 91\n  // https://www.compart.com/fr/unicode/combining/91\n  0x0c56,\n  // 129\n  // https://www.compart.com/fr/unicode/combining/129\n  0x0f71,\n  // 130\n  // https://www.compart.com/fr/unicode/combining/130\n  0x0f72, 0x0f7a, 0x0f7b, 0x0f7c, 0x0f7d, 0x0f80,\n  // 132\n  // https://www.compart.com/fr/unicode/combining/132\n  0x0f74,\n]);\nconst DIACRITICS_EXCEPTION_STR = [...DIACRITICS_EXCEPTION.values()]\n  .map(x => String.fromCharCode(x))\n  .join(\"\");\n\nconst DIACRITICS_REG_EXP = /\\p{M}+/gu;\nconst SPECIAL_CHARS_REG_EXP =\n  /([.*+?^${}()|[\\]\\\\])|(\\p{P})|(\\s+)|(\\p{M})|(\\p{L})/gu;\nconst NOT_DIACRITIC_FROM_END_REG_EXP = /([^\\p{M}])\\p{M}*$/u;\nconst NOT_DIACRITIC_FROM_START_REG_EXP = /^\\p{M}*([^\\p{M}])/u;\n\nlet normalizationRegex = null;\nfunction normalize(text) {\n  // The diacritics in the text or in the query can be composed or not.\n  // So we use a decomposed text using NFD (and the same for the query)\n  // in order to be sure that diacritics are in the same order.\n\n  if (!normalizationRegex) {\n    // Compile the regular expression for text normalization once.\n    const replace = Object.keys(CHARACTERS_TO_NORMALIZE).join(\"\");\n    normalizationRegex = new RegExp(\n      `([${replace}])|(\\\\p{M}+(?:-\\\\n)?)|(\\\\S-\\\\n)|(\\\\n)`,\n      \"gum\"\n    );\n  }\n\n  // The goal of this function is to normalize the string and\n  // be able to get from an index in the new string the\n  // corresponding index in the old string.\n  // For example if we have: abCd12ef456gh where C is replaced by ccc\n  // and numbers replaced by nothing (it's the case for diacritics), then\n  // we'll obtain the normalized string: abcccdefgh.\n  // So here the reverse map is: [0,1,2,2,2,3,6,7,11,12].\n\n  // The goal is to obtain the array: [[0, 0], [3, -1], [4, -2],\n  // [6, 0], [8, 3]].\n  // which can be used like this:\n  //  - let say that i is the index in new string and j the index\n  //    the old string.\n  //  - if i is in [0; 3[ then j = i + 0\n  //  - if i is in [3; 4[ then j = i - 1\n  //  - if i is in [4; 6[ then j = i - 2\n  //  ...\n  // Thanks to a binary search it's easy to know where is i and what's the\n  // shift.\n  // Let say that the last entry in the array is [x, s] and we have a\n  // substitution at index y (old string) which will replace o chars by n chars.\n  // Firstly, if o === n, then no need to add a new entry: the shift is\n  // the same.\n  // Secondly, if o < n, then we push the n - o elements:\n  // [y - (s - 1), s - 1], [y - (s - 2), s - 2], ...\n  // Thirdly, if o > n, then we push the element: [y - (s - n), o + s - n]\n\n  // Collect diacritics length and positions.\n  const rawDiacriticsPositions = [];\n  let m;\n  while ((m = DIACRITICS_REG_EXP.exec(text)) !== null) {\n    rawDiacriticsPositions.push([m[0].length, m.index]);\n  }\n\n  let normalized = text.normalize(\"NFD\");\n  const positions = [[0, 0]];\n  let k = 0;\n  let shift = 0;\n  let shiftOrigin = 0;\n  let eol = 0;\n  let hasDiacritics = false;\n\n  normalized = normalized.replace(\n    normalizationRegex,\n    (match, p1, p2, p3, p4, i) => {\n      i -= shiftOrigin;\n      if (p1) {\n        // Maybe fractions or quotations mark...\n        const replacement = CHARACTERS_TO_NORMALIZE[match];\n        const jj = replacement.length;\n        for (let j = 1; j < jj; j++) {\n          positions.push([i - shift + j, shift - j]);\n        }\n        shift -= jj - 1;\n        return replacement;\n      }\n\n      if (p2) {\n        const hasTrailingDashEOL = p2.endsWith(\"\\n\");\n        const len = hasTrailingDashEOL ? p2.length - 2 : p2.length;\n\n        // Diacritics.\n        hasDiacritics = true;\n        let jj = len;\n        if (i + eol === rawDiacriticsPositions[k]?.[1]) {\n          jj -= rawDiacriticsPositions[k][0];\n          ++k;\n        }\n\n        for (let j = 1; j < jj + 1; j++) {\n          // i is the position of the first diacritic\n          // so (i - 1) is the position for the letter before.\n          positions.push([i - 1 - shift + j, shift - j]);\n        }\n        shift -= jj;\n        shiftOrigin += jj;\n\n        if (hasTrailingDashEOL) {\n          // Diacritics are followed by a -\\n.\n          // See comments in `if (p3)` block.\n          i += len - 1;\n          positions.push([i - shift + 1, 1 + shift]);\n          shift += 1;\n          shiftOrigin += 1;\n          eol += 1;\n          return p2.slice(0, len);\n        }\n\n        return p2;\n      }\n\n      if (p3) {\n        // \"X-\\n\" is removed because an hyphen at the end of a line\n        // with not a space before is likely here to mark a break\n        // in a word.\n        // The \\n isn't in the original text so here y = i, n = 1 and o = 2.\n        positions.push([i - shift + 1, 1 + shift]);\n        shift += 1;\n        shiftOrigin += 1;\n        eol += 1;\n        return p3.charAt(0);\n      }\n\n      // p4\n      // eol is replaced by space: \"foo\\nbar\" is likely equivalent to\n      // \"foo bar\".\n      positions.push([i - shift + 1, shift - 1]);\n      shift -= 1;\n      shiftOrigin += 1;\n      eol += 1;\n      return \" \";\n    }\n  );\n\n  positions.push([normalized.length, shift]);\n\n  return [normalized, positions, hasDiacritics];\n}\n\n// Determine the original, non-normalized, match index such that highlighting of\n// search results is correct in the `textLayer` for strings containing e.g. \"\"\n// characters; essentially \"inverting\" the result of the `normalize` function.\nfunction getOriginalIndex(diffs, pos, len) {\n  if (!diffs) {\n    return [pos, len];\n  }\n\n  const start = pos;\n  const end = pos + len;\n  let i = binarySearchFirstItem(diffs, x => x[0] >= start);\n  if (diffs[i][0] > start) {\n    --i;\n  }\n\n  let j = binarySearchFirstItem(diffs, x => x[0] >= end, i);\n  if (diffs[j][0] > end) {\n    --j;\n  }\n\n  return [start + diffs[i][1], len + diffs[j][1] - diffs[i][1]];\n}\n\n/**\n * @typedef {Object} PDFFindControllerOptions\n * @property {IPDFLinkService} linkService - The navigation/linking service.\n * @property {EventBus} eventBus - The application event bus.\n */\n\n/**\n * Provides search functionality to find a given string in a PDF document.\n */\nclass PDFFindController {\n  /**\n   * @param {PDFFindControllerOptions} options\n   */\n  constructor({ linkService, eventBus }) {\n    this._linkService = linkService;\n    this._eventBus = eventBus;\n\n    this.#reset();\n    eventBus._on(\"find\", this.#onFind.bind(this));\n    eventBus._on(\"findbarclose\", this.#onFindBarClose.bind(this));\n  }\n\n  get highlightMatches() {\n    return this._highlightMatches;\n  }\n\n  get pageMatches() {\n    return this._pageMatches;\n  }\n\n  get pageMatchesLength() {\n    return this._pageMatchesLength;\n  }\n\n  get selected() {\n    return this._selected;\n  }\n\n  get state() {\n    return this._state;\n  }\n\n  /**\n   * Set a reference to the PDF document in order to search it.\n   * Note that searching is not possible if this method is not called.\n   *\n   * @param {PDFDocumentProxy} pdfDocument - The PDF document to search.\n   */\n  setDocument(pdfDocument) {\n    if (this._pdfDocument) {\n      this.#reset();\n    }\n    if (!pdfDocument) {\n      return;\n    }\n    this._pdfDocument = pdfDocument;\n    this._firstPageCapability.resolve();\n  }\n\n  #onFind(state) {\n    if (!state) {\n      return;\n    }\n    const pdfDocument = this._pdfDocument;\n    const { type } = state;\n\n    if (this._state === null || this.#shouldDirtyMatch(state)) {\n      this._dirtyMatch = true;\n    }\n    this._state = state;\n    if (type !== \"highlightallchange\") {\n      this.#updateUIState(FindState.PENDING);\n    }\n\n    this._firstPageCapability.promise.then(() => {\n      // If the document was closed before searching began, or if the search\n      // operation was relevant for a previously opened document, do nothing.\n      if (\n        !this._pdfDocument ||\n        (pdfDocument && this._pdfDocument !== pdfDocument)\n      ) {\n        return;\n      }\n      this.#extractText();\n\n      const findbarClosed = !this._highlightMatches;\n      const pendingTimeout = !!this._findTimeout;\n\n      if (this._findTimeout) {\n        clearTimeout(this._findTimeout);\n        this._findTimeout = null;\n      }\n      if (!type) {\n        // Trigger the find action with a small delay to avoid starting the\n        // search when the user is still typing (saving resources).\n        this._findTimeout = setTimeout(() => {\n          this.#nextMatch();\n          this._findTimeout = null;\n        }, FIND_TIMEOUT);\n      } else if (this._dirtyMatch) {\n        // Immediately trigger searching for non-'find' operations, when the\n        // current state needs to be reset and matches re-calculated.\n        this.#nextMatch();\n      } else if (type === \"again\") {\n        this.#nextMatch();\n\n        // When the findbar was previously closed, and `highlightAll` is set,\n        // ensure that the matches on all active pages are highlighted again.\n        if (findbarClosed && this._state.highlightAll) {\n          this.#updateAllPages();\n        }\n      } else if (type === \"highlightallchange\") {\n        // If there was a pending search operation, synchronously trigger a new\n        // search *first* to ensure that the correct matches are highlighted.\n        if (pendingTimeout) {\n          this.#nextMatch();\n        } else {\n          this._highlightMatches = true;\n        }\n        this.#updateAllPages(); // Update the highlighting on all active pages.\n      } else {\n        this.#nextMatch();\n      }\n    });\n  }\n\n  scrollMatchIntoView({\n    element = null,\n    selectedLeft = 0,\n    pageIndex = -1,\n    matchIndex = -1,\n  }) {\n    if (!this._scrollMatches || !element) {\n      return;\n    } else if (matchIndex === -1 || matchIndex !== this._selected.matchIdx) {\n      return;\n    } else if (pageIndex === -1 || pageIndex !== this._selected.pageIdx) {\n      return;\n    }\n    this._scrollMatches = false; // Ensure that scrolling only happens once.\n\n    const spot = {\n      top: MATCH_SCROLL_OFFSET_TOP,\n      left: selectedLeft + MATCH_SCROLL_OFFSET_LEFT,\n    };\n    scrollIntoView(element, spot, /* scrollMatches = */ true);\n  }\n\n  #reset() {\n    this._highlightMatches = false;\n    this._scrollMatches = false;\n    this._pdfDocument = null;\n    this._pageMatches = [];\n    this._pageMatchesLength = [];\n    this._state = null;\n    // Currently selected match.\n    this._selected = {\n      pageIdx: -1,\n      matchIdx: -1,\n    };\n    // Where the find algorithm currently is in the document.\n    this._offset = {\n      pageIdx: null,\n      matchIdx: null,\n      wrapped: false,\n    };\n    this._extractTextPromises = [];\n    this._pageContents = []; // Stores the normalized text for each page.\n    this._pageDiffs = [];\n    this._hasDiacritics = [];\n    this._matchesCountTotal = 0;\n    this._pagesToSearch = null;\n    this._pendingFindMatches = new Set();\n    this._resumePageIdx = null;\n    this._dirtyMatch = false;\n    clearTimeout(this._findTimeout);\n    this._findTimeout = null;\n\n    this._firstPageCapability = createPromiseCapability();\n  }\n\n  /**\n   * @type {string} The (current) normalized search query.\n   */\n  get #query() {\n    if (this._state.query !== this._rawQuery) {\n      this._rawQuery = this._state.query;\n      [this._normalizedQuery] = normalize(this._state.query);\n    }\n    return this._normalizedQuery;\n  }\n\n  #shouldDirtyMatch(state) {\n    // When the search query changes, regardless of the actual search command\n    // used, always re-calculate matches to avoid errors (fixes bug 1030622).\n    if (state.query !== this._state.query) {\n      return true;\n    }\n    switch (state.type) {\n      case \"again\":\n        const pageNumber = this._selected.pageIdx + 1;\n        const linkService = this._linkService;\n        // Only treat a 'findagain' event as a new search operation when it's\n        // *absolutely* certain that the currently selected match is no longer\n        // visible, e.g. as a result of the user scrolling in the document.\n        //\n        // NOTE: If only a simple `this._linkService.page` check was used here,\n        // there's a risk that consecutive 'findagain' operations could \"skip\"\n        // over matches at the top/bottom of pages thus making them completely\n        // inaccessible when there's multiple pages visible in the viewer.\n        if (\n          pageNumber >= 1 &&\n          pageNumber <= linkService.pagesCount &&\n          pageNumber !== linkService.page &&\n          !linkService.isPageVisible(pageNumber)\n        ) {\n          return true;\n        }\n        return false;\n      case \"highlightallchange\":\n        return false;\n    }\n    return true;\n  }\n\n  /**\n   * Determine if the search query constitutes a \"whole word\", by comparing the\n   * first/last character type with the preceding/following character type.\n   */\n  #isEntireWord(content, startIdx, length) {\n    let match = content\n      .slice(0, startIdx)\n      .match(NOT_DIACRITIC_FROM_END_REG_EXP);\n    if (match) {\n      const first = content.charCodeAt(startIdx);\n      const limit = match[1].charCodeAt(0);\n      if (getCharacterType(first) === getCharacterType(limit)) {\n        return false;\n      }\n    }\n\n    match = content\n      .slice(startIdx + length)\n      .match(NOT_DIACRITIC_FROM_START_REG_EXP);\n    if (match) {\n      const last = content.charCodeAt(startIdx + length - 1);\n      const limit = match[1].charCodeAt(0);\n      if (getCharacterType(last) === getCharacterType(limit)) {\n        return false;\n      }\n    }\n\n    return true;\n  }\n\n  #calculateRegExpMatch(query, entireWord, pageIndex, pageContent) {\n    const matches = [],\n      matchesLength = [];\n\n    const diffs = this._pageDiffs[pageIndex];\n    let match;\n    while ((match = query.exec(pageContent)) !== null) {\n      if (\n        entireWord &&\n        !this.#isEntireWord(pageContent, match.index, match[0].length)\n      ) {\n        continue;\n      }\n\n      const [matchPos, matchLen] = getOriginalIndex(\n        diffs,\n        match.index,\n        match[0].length\n      );\n\n      if (matchLen) {\n        matches.push(matchPos);\n        matchesLength.push(matchLen);\n      }\n    }\n    this._pageMatches[pageIndex] = matches;\n    this._pageMatchesLength[pageIndex] = matchesLength;\n  }\n\n  #convertToRegExpString(query, hasDiacritics) {\n    const { matchDiacritics } = this._state;\n    let isUnicode = false;\n    query = query.replace(\n      SPECIAL_CHARS_REG_EXP,\n      (\n        match,\n        p1 /* to escape */,\n        p2 /* punctuation */,\n        p3 /* whitespaces */,\n        p4 /* diacritics */,\n        p5 /* letters */\n      ) => {\n        // We don't need to use a \\s for whitespaces since all the different\n        // kind of whitespaces are replaced by a single \" \".\n\n        if (p1) {\n          // Escape characters like *+?... to not interfer with regexp syntax.\n          return `[ ]*\\\\${p1}[ ]*`;\n        }\n        if (p2) {\n          // Allow whitespaces around punctuation signs.\n          return `[ ]*${p2}[ ]*`;\n        }\n        if (p3) {\n          // Replace spaces by \\s+ to be sure to match any spaces.\n          return \"[ ]+\";\n        }\n        if (matchDiacritics) {\n          return p4 || p5;\n        }\n\n        if (p4) {\n          // Diacritics are removed with few exceptions.\n          return DIACRITICS_EXCEPTION.has(p4.charCodeAt(0)) ? p4 : \"\";\n        }\n\n        // A letter has been matched and it can be followed by any diacritics\n        // in normalized text.\n        if (hasDiacritics) {\n          isUnicode = true;\n          return `${p5}\\\\p{M}*`;\n        }\n        return p5;\n      }\n    );\n\n    const trailingSpaces = \"[ ]*\";\n    if (query.endsWith(trailingSpaces)) {\n      // The [ ]* has been added in order to help to match \"foo . bar\" but\n      // it doesn't make sense to match some whitespaces after the dot\n      // when it's the last character.\n      query = query.slice(0, query.length - trailingSpaces.length);\n    }\n\n    if (matchDiacritics) {\n      // aX must not match aXY.\n      if (hasDiacritics) {\n        isUnicode = true;\n        query = `${query}(?=[${DIACRITICS_EXCEPTION_STR}]|[^\\\\p{M}]|$)`;\n      }\n    }\n\n    return [isUnicode, query];\n  }\n\n  #calculateMatch(pageIndex) {\n    let query = this.#query;\n    if (query.length === 0) {\n      // Do nothing: the matches should be wiped out already.\n      return;\n    }\n\n    const { caseSensitive, entireWord, phraseSearch } = this._state;\n    const pageContent = this._pageContents[pageIndex];\n    const hasDiacritics = this._hasDiacritics[pageIndex];\n\n    let isUnicode = false;\n    if (phraseSearch) {\n      [isUnicode, query] = this.#convertToRegExpString(query, hasDiacritics);\n    } else {\n      // Words are sorted in reverse order to be sure that \"foobar\" is matched\n      // before \"foo\" in case the query is \"foobar foo\".\n      const match = query.match(/\\S+/g);\n      if (match) {\n        query = match\n          .sort()\n          .reverse()\n          .map(q => {\n            const [isUnicodePart, queryPart] = this.#convertToRegExpString(\n              q,\n              hasDiacritics\n            );\n            isUnicode ||= isUnicodePart;\n            return `(${queryPart})`;\n          })\n          .join(\"|\");\n      }\n    }\n\n    const flags = `g${isUnicode ? \"u\" : \"\"}${caseSensitive ? \"\" : \"i\"}`;\n    query = new RegExp(query, flags);\n\n    this.#calculateRegExpMatch(query, entireWord, pageIndex, pageContent);\n\n    // When `highlightAll` is set, ensure that the matches on previously\n    // rendered (and still active) pages are correctly highlighted.\n    if (this._state.highlightAll) {\n      this.#updatePage(pageIndex);\n    }\n    if (this._resumePageIdx === pageIndex) {\n      this._resumePageIdx = null;\n      this.#nextPageMatch();\n    }\n\n    // Update the match count.\n    const pageMatchesCount = this._pageMatches[pageIndex].length;\n    if (pageMatchesCount > 0) {\n      this._matchesCountTotal += pageMatchesCount;\n      this.#updateUIResultsCount();\n    }\n  }\n\n  #extractText() {\n    // Perform text extraction once if this method is called multiple times.\n    if (this._extractTextPromises.length > 0) {\n      return;\n    }\n\n    let promise = Promise.resolve();\n    for (let i = 0, ii = this._linkService.pagesCount; i < ii; i++) {\n      const extractTextCapability = createPromiseCapability();\n      this._extractTextPromises[i] = extractTextCapability.promise;\n\n      promise = promise.then(() => {\n        return this._pdfDocument\n          .getPage(i + 1)\n          .then(pdfPage => {\n            return pdfPage.getTextContent();\n          })\n          .then(\n            textContent => {\n              const strBuf = [];\n\n              for (const textItem of textContent.items) {\n                strBuf.push(textItem.str);\n                if (textItem.hasEOL) {\n                  strBuf.push(\"\\n\");\n                }\n              }\n\n              // Store the normalized page content (text items) as one string.\n              [\n                this._pageContents[i],\n                this._pageDiffs[i],\n                this._hasDiacritics[i],\n              ] = normalize(strBuf.join(\"\"));\n              extractTextCapability.resolve();\n            },\n            reason => {\n              console.error(\n                `Unable to get text content for page ${i + 1}`,\n                reason\n              );\n              // Page error -- assuming no text content.\n              this._pageContents[i] = \"\";\n              this._pageDiffs[i] = null;\n              this._hasDiacritics[i] = false;\n              extractTextCapability.resolve();\n            }\n          );\n      });\n    }\n  }\n\n  #updatePage(index) {\n    if (this._scrollMatches && this._selected.pageIdx === index) {\n      // If the page is selected, scroll the page into view, which triggers\n      // rendering the page, which adds the text layer. Once the text layer\n      // is built, it will attempt to scroll the selected match into view.\n      this._linkService.page = index + 1;\n    }\n\n    this._eventBus.dispatch(\"updatetextlayermatches\", {\n      source: this,\n      pageIndex: index,\n    });\n  }\n\n  #updateAllPages() {\n    this._eventBus.dispatch(\"updatetextlayermatches\", {\n      source: this,\n      pageIndex: -1,\n    });\n  }\n\n  #nextMatch() {\n    const previous = this._state.findPrevious;\n    const currentPageIndex = this._linkService.page - 1;\n    const numPages = this._linkService.pagesCount;\n\n    this._highlightMatches = true;\n\n    if (this._dirtyMatch) {\n      // Need to recalculate the matches, reset everything.\n      this._dirtyMatch = false;\n      this._selected.pageIdx = this._selected.matchIdx = -1;\n      this._offset.pageIdx = currentPageIndex;\n      this._offset.matchIdx = null;\n      this._offset.wrapped = false;\n      this._resumePageIdx = null;\n      this._pageMatches.length = 0;\n      this._pageMatchesLength.length = 0;\n      this._matchesCountTotal = 0;\n\n      this.#updateAllPages(); // Wipe out any previously highlighted matches.\n\n      for (let i = 0; i < numPages; i++) {\n        // Start finding the matches as soon as the text is extracted.\n        if (this._pendingFindMatches.has(i)) {\n          continue;\n        }\n        this._pendingFindMatches.add(i);\n        this._extractTextPromises[i].then(() => {\n          this._pendingFindMatches.delete(i);\n          this.#calculateMatch(i);\n        });\n      }\n    }\n\n    // If there's no query there's no point in searching.\n    if (this.#query === \"\") {\n      this.#updateUIState(FindState.FOUND);\n      return;\n    }\n    // If we're waiting on a page, we return since we can't do anything else.\n    if (this._resumePageIdx) {\n      return;\n    }\n\n    const offset = this._offset;\n    // Keep track of how many pages we should maximally iterate through.\n    this._pagesToSearch = numPages;\n    // If there's already a `matchIdx` that means we are iterating through a\n    // page's matches.\n    if (offset.matchIdx !== null) {\n      const numPageMatches = this._pageMatches[offset.pageIdx].length;\n      if (\n        (!previous && offset.matchIdx + 1 < numPageMatches) ||\n        (previous && offset.matchIdx > 0)\n      ) {\n        // The simple case; we just have advance the matchIdx to select\n        // the next match on the page.\n        offset.matchIdx = previous ? offset.matchIdx - 1 : offset.matchIdx + 1;\n        this.#updateMatch(/* found = */ true);\n        return;\n      }\n      // We went beyond the current page's matches, so we advance to\n      // the next page.\n      this.#advanceOffsetPage(previous);\n    }\n    // Start searching through the page.\n    this.#nextPageMatch();\n  }\n\n  #matchesReady(matches) {\n    const offset = this._offset;\n    const numMatches = matches.length;\n    const previous = this._state.findPrevious;\n\n    if (numMatches) {\n      // There were matches for the page, so initialize `matchIdx`.\n      offset.matchIdx = previous ? numMatches - 1 : 0;\n      this.#updateMatch(/* found = */ true);\n      return true;\n    }\n    // No matches, so attempt to search the next page.\n    this.#advanceOffsetPage(previous);\n    if (offset.wrapped) {\n      offset.matchIdx = null;\n      if (this._pagesToSearch < 0) {\n        // No point in wrapping again, there were no matches.\n        this.#updateMatch(/* found = */ false);\n        // While matches were not found, searching for a page\n        // with matches should nevertheless halt.\n        return true;\n      }\n    }\n    // Matches were not found (and searching is not done).\n    return false;\n  }\n\n  #nextPageMatch() {\n    if (this._resumePageIdx !== null) {\n      console.error(\"There can only be one pending page.\");\n    }\n\n    let matches = null;\n    do {\n      const pageIdx = this._offset.pageIdx;\n      matches = this._pageMatches[pageIdx];\n      if (!matches) {\n        // The matches don't exist yet for processing by `_matchesReady`,\n        // so set a resume point for when they do exist.\n        this._resumePageIdx = pageIdx;\n        break;\n      }\n    } while (!this.#matchesReady(matches));\n  }\n\n  #advanceOffsetPage(previous) {\n    const offset = this._offset;\n    const numPages = this._linkService.pagesCount;\n    offset.pageIdx = previous ? offset.pageIdx - 1 : offset.pageIdx + 1;\n    offset.matchIdx = null;\n\n    this._pagesToSearch--;\n\n    if (offset.pageIdx >= numPages || offset.pageIdx < 0) {\n      offset.pageIdx = previous ? numPages - 1 : 0;\n      offset.wrapped = true;\n    }\n  }\n\n  #updateMatch(found = false) {\n    let state = FindState.NOT_FOUND;\n    const wrapped = this._offset.wrapped;\n    this._offset.wrapped = false;\n\n    if (found) {\n      const previousPage = this._selected.pageIdx;\n      this._selected.pageIdx = this._offset.pageIdx;\n      this._selected.matchIdx = this._offset.matchIdx;\n      state = wrapped ? FindState.WRAPPED : FindState.FOUND;\n\n      // Update the currently selected page to wipe out any selected matches.\n      if (previousPage !== -1 && previousPage !== this._selected.pageIdx) {\n        this.#updatePage(previousPage);\n      }\n    }\n\n    this.#updateUIState(state, this._state.findPrevious);\n    if (this._selected.pageIdx !== -1) {\n      // Ensure that the match will be scrolled into view.\n      this._scrollMatches = true;\n\n      this.#updatePage(this._selected.pageIdx);\n    }\n  }\n\n  #onFindBarClose(evt) {\n    const pdfDocument = this._pdfDocument;\n    // Since searching is asynchronous, ensure that the removal of highlighted\n    // matches (from the UI) is async too such that the 'updatetextlayermatches'\n    // events will always be dispatched in the expected order.\n    this._firstPageCapability.promise.then(() => {\n      // Only update the UI if the document is open, and is the current one.\n      if (\n        !this._pdfDocument ||\n        (pdfDocument && this._pdfDocument !== pdfDocument)\n      ) {\n        return;\n      }\n      // Ensure that a pending, not yet started, search operation is aborted.\n      if (this._findTimeout) {\n        clearTimeout(this._findTimeout);\n        this._findTimeout = null;\n      }\n      // Abort any long running searches, to avoid a match being scrolled into\n      // view *after* the findbar has been closed. In this case `this._offset`\n      // will most likely differ from `this._selected`, hence we also ensure\n      // that any new search operation will always start with a clean slate.\n      if (this._resumePageIdx) {\n        this._resumePageIdx = null;\n        this._dirtyMatch = true;\n      }\n      // Avoid the UI being in a pending state when the findbar is re-opened.\n      this.#updateUIState(FindState.FOUND);\n\n      this._highlightMatches = false;\n      this.#updateAllPages(); // Wipe out any previously highlighted matches.\n    });\n  }\n\n  #requestMatchesCount() {\n    const { pageIdx, matchIdx } = this._selected;\n    let current = 0,\n      total = this._matchesCountTotal;\n    if (matchIdx !== -1) {\n      for (let i = 0; i < pageIdx; i++) {\n        current += this._pageMatches[i]?.length || 0;\n      }\n      current += matchIdx + 1;\n    }\n    // When searching starts, this method may be called before the `pageMatches`\n    // have been counted (in `_calculateMatch`). Ensure that the UI won't show\n    // temporarily broken state when the active find result doesn't make sense.\n    if (current < 1 || current > total) {\n      current = total = 0;\n    }\n    return { current, total };\n  }\n\n  #updateUIResultsCount() {\n    this._eventBus.dispatch(\"updatefindmatchescount\", {\n      source: this,\n      matchesCount: this.#requestMatchesCount(),\n    });\n  }\n\n  #updateUIState(state, previous = false) {\n    this._eventBus.dispatch(\"updatefindcontrolstate\", {\n      source: this,\n      state,\n      previous,\n      matchesCount: this.#requestMatchesCount(),\n      rawQuery: this._state?.query ?? null,\n    });\n  }\n}\n\nexport { FindState, PDFFindController };\n","/* Copyright 2018 Mozilla Foundation\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nconst CharacterType = {\n  SPACE: 0,\n  ALPHA_LETTER: 1,\n  PUNCT: 2,\n  HAN_LETTER: 3,\n  KATAKANA_LETTER: 4,\n  HIRAGANA_LETTER: 5,\n  HALFWIDTH_KATAKANA_LETTER: 6,\n  THAI_LETTER: 7,\n};\n\nfunction isAlphabeticalScript(charCode) {\n  return charCode < 0x2e80;\n}\n\nfunction isAscii(charCode) {\n  return (charCode & 0xff80) === 0;\n}\n\nfunction isAsciiAlpha(charCode) {\n  return (\n    (charCode >= /* a = */ 0x61 && charCode <= /* z = */ 0x7a) ||\n    (charCode >= /* A = */ 0x41 && charCode <= /* Z = */ 0x5a)\n  );\n}\n\nfunction isAsciiDigit(charCode) {\n  return charCode >= /* 0 = */ 0x30 && charCode <= /* 9 = */ 0x39;\n}\n\nfunction isAsciiSpace(charCode) {\n  return (\n    charCode === /* SPACE = */ 0x20 ||\n    charCode === /* TAB = */ 0x09 ||\n    charCode === /* CR = */ 0x0d ||\n    charCode === /* LF = */ 0x0a\n  );\n}\n\nfunction isHan(charCode) {\n  return (\n    (charCode >= 0x3400 && charCode <= 0x9fff) ||\n    (charCode >= 0xf900 && charCode <= 0xfaff)\n  );\n}\n\nfunction isKatakana(charCode) {\n  return charCode >= 0x30a0 && charCode <= 0x30ff;\n}\n\nfunction isHiragana(charCode) {\n  return charCode >= 0x3040 && charCode <= 0x309f;\n}\n\nfunction isHalfwidthKatakana(charCode) {\n  return charCode >= 0xff60 && charCode <= 0xff9f;\n}\n\nfunction isThai(charCode) {\n  return (charCode & 0xff80) === 0x0e00;\n}\n\n/**\n * This function is based on the word-break detection implemented in:\n * https://hg.mozilla.org/mozilla-central/file/tip/intl/lwbrk/WordBreaker.cpp\n */\nfunction getCharacterType(charCode) {\n  if (isAlphabeticalScript(charCode)) {\n    if (isAscii(charCode)) {\n      if (isAsciiSpace(charCode)) {\n        return CharacterType.SPACE;\n      } else if (\n        isAsciiAlpha(charCode) ||\n        isAsciiDigit(charCode) ||\n        charCode === /* UNDERSCORE = */ 0x5f\n      ) {\n        return CharacterType.ALPHA_LETTER;\n      }\n      return CharacterType.PUNCT;\n    } else if (isThai(charCode)) {\n      return CharacterType.THAI_LETTER;\n    } else if (charCode === /* NBSP = */ 0xa0) {\n      return CharacterType.SPACE;\n    }\n    return CharacterType.ALPHA_LETTER;\n  }\n\n  if (isHan(charCode)) {\n    return CharacterType.HAN_LETTER;\n  } else if (isKatakana(charCode)) {\n    return CharacterType.KATAKANA_LETTER;\n  } else if (isHiragana(charCode)) {\n    return CharacterType.HIRAGANA_LETTER;\n  } else if (isHalfwidthKatakana(charCode)) {\n    return CharacterType.HALFWIDTH_KATAKANA_LETTER;\n  }\n  return CharacterType.ALPHA_LETTER;\n}\n\nexport { CharacterType, getCharacterType };\n","/* Copyright 2017 Mozilla Foundation\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n/** @typedef {import(\"./event_utils\").EventBus} EventBus */\n/** @typedef {import(\"./interfaces\").IPDFLinkService} IPDFLinkService */\n\nimport { isValidRotation, parseQueryString } from \"./ui_utils.js\";\nimport { waitOnEventOrTimeout } from \"./event_utils.js\";\n\n// Heuristic value used when force-resetting `this._blockHashChange`.\nconst HASH_CHANGE_TIMEOUT = 1000; // milliseconds\n// Heuristic value used when adding the current position to the browser history.\nconst POSITION_UPDATED_THRESHOLD = 50;\n// Heuristic value used when adding a temporary position to the browser history.\nconst UPDATE_VIEWAREA_TIMEOUT = 1000; // milliseconds\n\n/**\n * @typedef {Object} PDFHistoryOptions\n * @property {IPDFLinkService} linkService - The navigation/linking service.\n * @property {EventBus} eventBus - The application event bus.\n */\n\n/**\n * @typedef {Object} InitializeParameters\n * @property {string} fingerprint - The PDF document's unique fingerprint.\n * @property {boolean} [resetHistory] - Reset the browsing history.\n * @property {boolean} [updateUrl] - Attempt to update the document URL, with\n *   the current hash, when pushing/replacing browser history entries.\n */\n\n/**\n * @typedef {Object} PushParameters\n * @property {string} [namedDest] - The named destination. If absent, a\n *   stringified version of `explicitDest` is used.\n * @property {Array} explicitDest - The explicit destination array.\n * @property {number} pageNumber - The page to which the destination points.\n */\n\nfunction getCurrentHash() {\n  return document.location.hash;\n}\n\nclass PDFHistory {\n  /**\n   * @param {PDFHistoryOptions} options\n   */\n  constructor({ linkService, eventBus }) {\n    this.linkService = linkService;\n    this.eventBus = eventBus;\n\n    this._initialized = false;\n    this._fingerprint = \"\";\n    this.reset();\n\n    this._boundEvents = null;\n    // Ensure that we don't miss a \"pagesinit\" event,\n    // by registering the listener immediately.\n    this.eventBus._on(\"pagesinit\", () => {\n      this._isPagesLoaded = false;\n\n      this.eventBus._on(\n        \"pagesloaded\",\n        evt => {\n          this._isPagesLoaded = !!evt.pagesCount;\n        },\n        { once: true }\n      );\n    });\n  }\n\n  /**\n   * Initialize the history for the PDF document, using either the current\n   * browser history entry or the document hash, whichever is present.\n   * @param {InitializeParameters} params\n   */\n  initialize({ fingerprint, resetHistory = false, updateUrl = false }) {\n    if (!fingerprint || typeof fingerprint !== \"string\") {\n      console.error(\n        'PDFHistory.initialize: The \"fingerprint\" must be a non-empty string.'\n      );\n      return;\n    }\n    // Ensure that any old state is always reset upon initialization.\n    if (this._initialized) {\n      this.reset();\n    }\n    const reInitialized =\n      this._fingerprint !== \"\" && this._fingerprint !== fingerprint;\n    this._fingerprint = fingerprint;\n    this._updateUrl = updateUrl === true;\n\n    this._initialized = true;\n    this._bindEvents();\n    const state = window.history.state;\n\n    this._popStateInProgress = false;\n    this._blockHashChange = 0;\n    this._currentHash = getCurrentHash();\n    this._numPositionUpdates = 0;\n\n    this._uid = this._maxUid = 0;\n    this._destination = null;\n    this._position = null;\n\n    if (!this._isValidState(state, /* checkReload = */ true) || resetHistory) {\n      const { hash, page, rotation } = this._parseCurrentHash(\n        /* checkNameddest = */ true\n      );\n\n      if (!hash || reInitialized || resetHistory) {\n        // Ensure that the browser history is reset on PDF document load.\n        this._pushOrReplaceState(null, /* forceReplace = */ true);\n        return;\n      }\n      // Ensure that the browser history is initialized correctly when\n      // the document hash is present on PDF document load.\n      this._pushOrReplaceState(\n        { hash, page, rotation },\n        /* forceReplace = */ true\n      );\n      return;\n    }\n\n    // The browser history contains a valid entry, ensure that the history is\n    // initialized correctly on PDF document load.\n    const destination = state.destination;\n    this._updateInternalState(\n      destination,\n      state.uid,\n      /* removeTemporary = */ true\n    );\n\n    if (destination.rotation !== undefined) {\n      this._initialRotation = destination.rotation;\n    }\n    if (destination.dest) {\n      this._initialBookmark = JSON.stringify(destination.dest);\n\n      // If the history is updated, e.g. through the user changing the hash,\n      // before the initial destination has become visible, then we do *not*\n      // want to potentially add `this._position` to the browser history.\n      this._destination.page = null;\n    } else if (destination.hash) {\n      this._initialBookmark = destination.hash;\n    } else if (destination.page) {\n      // Fallback case; shouldn't be necessary, but better safe than sorry.\n      this._initialBookmark = `page=${destination.page}`;\n    }\n  }\n\n  /**\n   * Reset the current `PDFHistory` instance, and consequently prevent any\n   * further updates and/or navigation of the browser history.\n   */\n  reset() {\n    if (this._initialized) {\n      this._pageHide(); // Simulate a 'pagehide' event when resetting.\n\n      this._initialized = false;\n      this._unbindEvents();\n    }\n    if (this._updateViewareaTimeout) {\n      clearTimeout(this._updateViewareaTimeout);\n      this._updateViewareaTimeout = null;\n    }\n    this._initialBookmark = null;\n    this._initialRotation = null;\n  }\n\n  /**\n   * Push an internal destination to the browser history.\n   * @param {PushParameters}\n   */\n  push({ namedDest = null, explicitDest, pageNumber }) {\n    if (!this._initialized) {\n      return;\n    }\n    if (namedDest && typeof namedDest !== \"string\") {\n      console.error(\n        \"PDFHistory.push: \" +\n          `\"${namedDest}\" is not a valid namedDest parameter.`\n      );\n      return;\n    } else if (!Array.isArray(explicitDest)) {\n      console.error(\n        \"PDFHistory.push: \" +\n          `\"${explicitDest}\" is not a valid explicitDest parameter.`\n      );\n      return;\n    } else if (!this._isValidPage(pageNumber)) {\n      // Allow an unset `pageNumber` if and only if the history is still empty;\n      // please refer to the `this._destination.page = null;` comment above.\n      if (pageNumber !== null || this._destination) {\n        console.error(\n          \"PDFHistory.push: \" +\n            `\"${pageNumber}\" is not a valid pageNumber parameter.`\n        );\n        return;\n      }\n    }\n\n    const hash = namedDest || JSON.stringify(explicitDest);\n    if (!hash) {\n      // The hash *should* never be undefined, but if that were to occur,\n      // avoid any possible issues by not updating the browser history.\n      return;\n    }\n\n    let forceReplace = false;\n    if (\n      this._destination &&\n      (isDestHashesEqual(this._destination.hash, hash) ||\n        isDestArraysEqual(this._destination.dest, explicitDest))\n    ) {\n      // When the new destination is identical to `this._destination`, and\n      // its `page` is undefined, replace the current browser history entry.\n      // NOTE: This can only occur if `this._destination` was set either:\n      //  - through the document hash being specified on load.\n      //  - through the user changing the hash of the document.\n      if (this._destination.page) {\n        return;\n      }\n      forceReplace = true;\n    }\n    if (this._popStateInProgress && !forceReplace) {\n      return;\n    }\n\n    this._pushOrReplaceState(\n      {\n        dest: explicitDest,\n        hash,\n        page: pageNumber,\n        rotation: this.linkService.rotation,\n      },\n      forceReplace\n    );\n\n    if (!this._popStateInProgress) {\n      // Prevent the browser history from updating while the new destination is\n      // being scrolled into view, to avoid potentially inconsistent state.\n      this._popStateInProgress = true;\n      // We defer the resetting of `this._popStateInProgress`, to account for\n      // e.g. zooming occurring when the new destination is being navigated to.\n      Promise.resolve().then(() => {\n        this._popStateInProgress = false;\n      });\n    }\n  }\n\n  /**\n   * Push a page to the browser history; generally the `push` method should be\n   * used instead.\n   * @param {number} pageNumber\n   */\n  pushPage(pageNumber) {\n    if (!this._initialized) {\n      return;\n    }\n    if (!this._isValidPage(pageNumber)) {\n      console.error(\n        `PDFHistory.pushPage: \"${pageNumber}\" is not a valid page number.`\n      );\n      return;\n    }\n\n    if (this._destination?.page === pageNumber) {\n      // When the new page is identical to the one in `this._destination`, we\n      // don't want to add a potential duplicate entry in the browser history.\n      return;\n    }\n    if (this._popStateInProgress) {\n      return;\n    }\n\n    this._pushOrReplaceState({\n      // Simulate an internal destination, for `this._tryPushCurrentPosition`:\n      dest: null,\n      hash: `page=${pageNumber}`,\n      page: pageNumber,\n      rotation: this.linkService.rotation,\n    });\n\n    if (!this._popStateInProgress) {\n      // Prevent the browser history from updating while the new page is\n      // being scrolled into view, to avoid potentially inconsistent state.\n      this._popStateInProgress = true;\n      // We defer the resetting of `this._popStateInProgress`, to account for\n      // e.g. zooming occurring when the new page is being navigated to.\n      Promise.resolve().then(() => {\n        this._popStateInProgress = false;\n      });\n    }\n  }\n\n  /**\n   * Push the current position to the browser history.\n   */\n  pushCurrentPosition() {\n    if (!this._initialized || this._popStateInProgress) {\n      return;\n    }\n    this._tryPushCurrentPosition();\n  }\n\n  /**\n   * Go back one step in the browser history.\n   * NOTE: Avoids navigating away from the document, useful for \"named actions\".\n   */\n  back() {\n    if (!this._initialized || this._popStateInProgress) {\n      return;\n    }\n    const state = window.history.state;\n    if (this._isValidState(state) && state.uid > 0) {\n      window.history.back();\n    }\n  }\n\n  /**\n   * Go forward one step in the browser history.\n   * NOTE: Avoids navigating away from the document, useful for \"named actions\".\n   */\n  forward() {\n    if (!this._initialized || this._popStateInProgress) {\n      return;\n    }\n    const state = window.history.state;\n    if (this._isValidState(state) && state.uid < this._maxUid) {\n      window.history.forward();\n    }\n  }\n\n  /**\n   * @type {boolean} Indicating if the user is currently moving through the\n   *   browser history, useful e.g. for skipping the next 'hashchange' event.\n   */\n  get popStateInProgress() {\n    return (\n      this._initialized &&\n      (this._popStateInProgress || this._blockHashChange > 0)\n    );\n  }\n\n  get initialBookmark() {\n    return this._initialized ? this._initialBookmark : null;\n  }\n\n  get initialRotation() {\n    return this._initialized ? this._initialRotation : null;\n  }\n\n  /**\n   * @private\n   */\n  _pushOrReplaceState(destination, forceReplace = false) {\n    const shouldReplace = forceReplace || !this._destination;\n    const newState = {\n      fingerprint: this._fingerprint,\n      uid: shouldReplace ? this._uid : this._uid + 1,\n      destination,\n    };\n\n    if (\n      typeof PDFJSDev !== \"undefined\" &&\n      PDFJSDev.test(\"CHROME\") &&\n      window.history.state?.chromecomState\n    ) {\n      // history.state.chromecomState is managed by chromecom.js.\n      newState.chromecomState = window.history.state.chromecomState;\n    }\n    this._updateInternalState(destination, newState.uid);\n\n    let newUrl;\n    if (this._updateUrl && destination?.hash) {\n      const baseUrl = document.location.href.split(\"#\")[0];\n      // Prevent errors in Firefox.\n      if (!baseUrl.startsWith(\"file://\")) {\n        newUrl = `${baseUrl}#${destination.hash}`;\n      }\n    }\n    if (shouldReplace) {\n      window.history.replaceState(newState, \"\", newUrl);\n    } else {\n      window.history.pushState(newState, \"\", newUrl);\n    }\n\n    if (\n      typeof PDFJSDev !== \"undefined\" &&\n      PDFJSDev.test(\"CHROME\") &&\n      top === window\n    ) {\n      // eslint-disable-next-line no-undef\n      chrome.runtime.sendMessage(\"showPageAction\");\n    }\n  }\n\n  /**\n   * @private\n   */\n  _tryPushCurrentPosition(temporary = false) {\n    if (!this._position) {\n      return;\n    }\n    let position = this._position;\n    if (temporary) {\n      position = Object.assign(Object.create(null), this._position);\n      position.temporary = true;\n    }\n\n    if (!this._destination) {\n      this._pushOrReplaceState(position);\n      return;\n    }\n    if (this._destination.temporary) {\n      // Always replace a previous *temporary* position.\n      this._pushOrReplaceState(position, /* forceReplace = */ true);\n      return;\n    }\n    if (this._destination.hash === position.hash) {\n      return; // The current document position has not changed.\n    }\n    if (\n      !this._destination.page &&\n      (POSITION_UPDATED_THRESHOLD <= 0 ||\n        this._numPositionUpdates <= POSITION_UPDATED_THRESHOLD)\n    ) {\n      // `this._destination` was set through the user changing the hash of\n      // the document. Do not add `this._position` to the browser history,\n      // to avoid \"flooding\" it with lots of (nearly) identical entries,\n      // since we cannot ensure that the document position has changed.\n      return;\n    }\n\n    let forceReplace = false;\n    if (\n      this._destination.page >= position.first &&\n      this._destination.page <= position.page\n    ) {\n      // When the `page` of `this._destination` is still visible, do not\n      // update the browsing history when `this._destination` either:\n      //  - contains an internal destination, since in this case we\n      //    cannot ensure that the document position has actually changed.\n      //  - was set through the user changing the hash of the document.\n      if (this._destination.dest !== undefined || !this._destination.first) {\n        return;\n      }\n      // To avoid \"flooding\" the browser history, replace the current entry.\n      forceReplace = true;\n    }\n    this._pushOrReplaceState(position, forceReplace);\n  }\n\n  /**\n   * @private\n   */\n  _isValidPage(val) {\n    return (\n      Number.isInteger(val) && val > 0 && val <= this.linkService.pagesCount\n    );\n  }\n\n  /**\n   * @private\n   */\n  _isValidState(state, checkReload = false) {\n    if (!state) {\n      return false;\n    }\n    if (state.fingerprint !== this._fingerprint) {\n      if (checkReload) {\n        // Potentially accept the history entry, even if the fingerprints don't\n        // match, when the viewer was reloaded (see issue 6847).\n        if (\n          typeof state.fingerprint !== \"string\" ||\n          state.fingerprint.length !== this._fingerprint.length\n        ) {\n          return false;\n        }\n        const [perfEntry] = performance.getEntriesByType(\"navigation\");\n        if (perfEntry?.type !== \"reload\") {\n          return false;\n        }\n      } else {\n        // This should only occur in viewers with support for opening more than\n        // one PDF document, e.g. the GENERIC viewer.\n        return false;\n      }\n    }\n    if (!Number.isInteger(state.uid) || state.uid < 0) {\n      return false;\n    }\n    if (state.destination === null || typeof state.destination !== \"object\") {\n      return false;\n    }\n    return true;\n  }\n\n  /**\n   * @private\n   */\n  _updateInternalState(destination, uid, removeTemporary = false) {\n    if (this._updateViewareaTimeout) {\n      // When updating `this._destination`, make sure that we always wait for\n      // the next 'updateviewarea' event before (potentially) attempting to\n      // push the current position to the browser history.\n      clearTimeout(this._updateViewareaTimeout);\n      this._updateViewareaTimeout = null;\n    }\n    if (removeTemporary && destination?.temporary) {\n      // When the `destination` comes from the browser history,\n      // we no longer treat it as a *temporary* position.\n      delete destination.temporary;\n    }\n    this._destination = destination;\n    this._uid = uid;\n    this._maxUid = Math.max(this._maxUid, uid);\n    // This should always be reset when `this._destination` is updated.\n    this._numPositionUpdates = 0;\n  }\n\n  /**\n   * @private\n   */\n  _parseCurrentHash(checkNameddest = false) {\n    const hash = unescape(getCurrentHash()).substring(1);\n    const params = parseQueryString(hash);\n\n    const nameddest = params.get(\"nameddest\") || \"\";\n    let page = params.get(\"page\") | 0;\n\n    if (!this._isValidPage(page) || (checkNameddest && nameddest.length > 0)) {\n      page = null;\n    }\n    return { hash, page, rotation: this.linkService.rotation };\n  }\n\n  /**\n   * @private\n   */\n  _updateViewarea({ location }) {\n    if (this._updateViewareaTimeout) {\n      clearTimeout(this._updateViewareaTimeout);\n      this._updateViewareaTimeout = null;\n    }\n\n    this._position = {\n      hash: location.pdfOpenParams.substring(1),\n      page: this.linkService.page,\n      first: location.pageNumber,\n      rotation: location.rotation,\n    };\n\n    if (this._popStateInProgress) {\n      return;\n    }\n\n    if (\n      POSITION_UPDATED_THRESHOLD > 0 &&\n      this._isPagesLoaded &&\n      this._destination &&\n      !this._destination.page\n    ) {\n      // If the current destination was set through the user changing the hash\n      // of the document, we will usually not try to push the current position\n      // to the browser history; see `this._tryPushCurrentPosition()`.\n      //\n      // To prevent `this._tryPushCurrentPosition()` from effectively being\n      // reduced to a no-op in this case, we will assume that the position\n      // *did* in fact change if the 'updateviewarea' event was dispatched\n      // more than `POSITION_UPDATED_THRESHOLD` times.\n      this._numPositionUpdates++;\n    }\n\n    if (UPDATE_VIEWAREA_TIMEOUT > 0) {\n      // When closing the browser, a 'pagehide' event will be dispatched which\n      // *should* allow us to push the current position to the browser history.\n      // In practice, it seems that the event is arriving too late in order for\n      // the session history to be successfully updated.\n      // (For additional details, please refer to the discussion in\n      //  https://bugzilla.mozilla.org/show_bug.cgi?id=1153393.)\n      //\n      // To workaround this we attempt to *temporarily* add the current position\n      // to the browser history only when the viewer is *idle*,\n      // i.e. when scrolling and/or zooming does not occur.\n      //\n      // PLEASE NOTE: It's absolutely imperative that the browser history is\n      // *not* updated too often, since that would render the viewer more or\n      // less unusable. Hence the use of a timeout to delay the update until\n      // the viewer has been idle for `UPDATE_VIEWAREA_TIMEOUT` milliseconds.\n      this._updateViewareaTimeout = setTimeout(() => {\n        if (!this._popStateInProgress) {\n          this._tryPushCurrentPosition(/* temporary = */ true);\n        }\n        this._updateViewareaTimeout = null;\n      }, UPDATE_VIEWAREA_TIMEOUT);\n    }\n  }\n\n  /**\n   * @private\n   */\n  _popState({ state }) {\n    const newHash = getCurrentHash(),\n      hashChanged = this._currentHash !== newHash;\n    this._currentHash = newHash;\n\n    if (\n      (typeof PDFJSDev !== \"undefined\" &&\n        PDFJSDev.test(\"CHROME\") &&\n        state?.chromecomState &&\n        !this._isValidState(state)) ||\n      !state\n    ) {\n      // This case corresponds to the user changing the hash of the document.\n      this._uid++;\n\n      const { hash, page, rotation } = this._parseCurrentHash();\n      this._pushOrReplaceState(\n        { hash, page, rotation },\n        /* forceReplace = */ true\n      );\n      return;\n    }\n    if (!this._isValidState(state)) {\n      // This should only occur in viewers with support for opening more than\n      // one PDF document, e.g. the GENERIC viewer.\n      return;\n    }\n\n    // Prevent the browser history from updating until the new destination,\n    // as stored in the browser history, has been scrolled into view.\n    this._popStateInProgress = true;\n\n    if (hashChanged) {\n      // When the hash changed, implying that the 'popstate' event will be\n      // followed by a 'hashchange' event, then we do *not* want to update the\n      // browser history when handling the 'hashchange' event (in web/app.js)\n      // since that would *overwrite* the new destination navigated to below.\n      //\n      // To avoid accidentally disabling all future user-initiated hash changes,\n      // if there's e.g. another 'hashchange' listener that stops the event\n      // propagation, we make sure to always force-reset `this._blockHashChange`\n      // after `HASH_CHANGE_TIMEOUT` milliseconds have passed.\n      this._blockHashChange++;\n      waitOnEventOrTimeout({\n        target: window,\n        name: \"hashchange\",\n        delay: HASH_CHANGE_TIMEOUT,\n      }).then(() => {\n        this._blockHashChange--;\n      });\n    }\n\n    // Navigate to the new destination.\n    const destination = state.destination;\n    this._updateInternalState(\n      destination,\n      state.uid,\n      /* removeTemporary = */ true\n    );\n\n    if (isValidRotation(destination.rotation)) {\n      this.linkService.rotation = destination.rotation;\n    }\n    if (destination.dest) {\n      this.linkService.goToDestination(destination.dest);\n    } else if (destination.hash) {\n      this.linkService.setHash(destination.hash);\n    } else if (destination.page) {\n      // Fallback case; shouldn't be necessary, but better safe than sorry.\n      this.linkService.page = destination.page;\n    }\n\n    // Since `PDFLinkService.goToDestination` is asynchronous, we thus defer the\n    // resetting of `this._popStateInProgress` slightly.\n    Promise.resolve().then(() => {\n      this._popStateInProgress = false;\n    });\n  }\n\n  /**\n   * @private\n   */\n  _pageHide() {\n    // Attempt to push the `this._position` into the browser history when\n    // navigating away from the document. This is *only* done if the history\n    // is empty/temporary, since otherwise an existing browser history entry\n    // will end up being overwritten (given that new entries cannot be pushed\n    // into the browser history when the 'unload' event has already fired).\n    if (!this._destination || this._destination.temporary) {\n      this._tryPushCurrentPosition();\n    }\n  }\n\n  /**\n   * @private\n   */\n  _bindEvents() {\n    if (this._boundEvents) {\n      return; // The event listeners were already added.\n    }\n    this._boundEvents = {\n      updateViewarea: this._updateViewarea.bind(this),\n      popState: this._popState.bind(this),\n      pageHide: this._pageHide.bind(this),\n    };\n\n    this.eventBus._on(\"updateviewarea\", this._boundEvents.updateViewarea);\n    window.addEventListener(\"popstate\", this._boundEvents.popState);\n    window.addEventListener(\"pagehide\", this._boundEvents.pageHide);\n  }\n\n  /**\n   * @private\n   */\n  _unbindEvents() {\n    if (!this._boundEvents) {\n      return; // The event listeners were already removed.\n    }\n    this.eventBus._off(\"updateviewarea\", this._boundEvents.updateViewarea);\n    window.removeEventListener(\"popstate\", this._boundEvents.popState);\n    window.removeEventListener(\"pagehide\", this._boundEvents.pageHide);\n\n    this._boundEvents = null;\n  }\n}\n\nfunction isDestHashesEqual(destHash, pushHash) {\n  if (typeof destHash !== \"string\" || typeof pushHash !== \"string\") {\n    return false;\n  }\n  if (destHash === pushHash) {\n    return true;\n  }\n  const nameddest = parseQueryString(destHash).get(\"nameddest\");\n  if (nameddest === pushHash) {\n    return true;\n  }\n  return false;\n}\n\nfunction isDestArraysEqual(firstDest, secondDest) {\n  function isEntryEqual(first, second) {\n    if (typeof first !== typeof second) {\n      return false;\n    }\n    if (Array.isArray(first) || Array.isArray(second)) {\n      return false;\n    }\n    if (first !== null && typeof first === \"object\" && second !== null) {\n      if (Object.keys(first).length !== Object.keys(second).length) {\n        return false;\n      }\n      for (const key in first) {\n        if (!isEntryEqual(first[key], second[key])) {\n          return false;\n        }\n      }\n      return true;\n    }\n    return first === second || (Number.isNaN(first) && Number.isNaN(second));\n  }\n\n  if (!(Array.isArray(firstDest) && Array.isArray(secondDest))) {\n    return false;\n  }\n  if (firstDest.length !== secondDest.length) {\n    return false;\n  }\n  for (let i = 0, ii = firstDest.length; i < ii; i++) {\n    if (!isEntryEqual(firstDest[i], secondDest[i])) {\n      return false;\n    }\n  }\n  return true;\n}\n\nexport { isDestArraysEqual, isDestHashesEqual, PDFHistory };\n","/* Copyright 2021 Mozilla Foundation\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n/** @typedef {import(\"./event_utils\").EventBus} EventBus */\n\nimport { apiPageLayoutToViewerModes, RenderingStates } from \"./ui_utils.js\";\nimport { createPromiseCapability, shadow } from \"pdfjs-lib\";\n\n/**\n * @typedef {Object} PDFScriptingManagerOptions\n * @property {EventBus} eventBus - The application event bus.\n * @property {string} sandboxBundleSrc - The path and filename of the scripting\n *   bundle.\n * @property {Object} [scriptingFactory] - The factory that is used when\n *   initializing scripting; must contain a `createScripting` method.\n *   PLEASE NOTE: Primarily intended for the default viewer use-case.\n * @property {function} [docPropertiesLookup] - The function that is used to\n *   lookup the necessary document properties.\n */\n\nclass PDFScriptingManager {\n  /**\n   * @param {PDFScriptingManagerOptions} options\n   */\n  constructor({\n    eventBus,\n    sandboxBundleSrc = null,\n    scriptingFactory = null,\n    docPropertiesLookup = null,\n  }) {\n    this._pdfDocument = null;\n    this._pdfViewer = null;\n    this._closeCapability = null;\n    this._destroyCapability = null;\n\n    this._scripting = null;\n    this._mouseState = Object.create(null);\n    this._ready = false;\n\n    this._eventBus = eventBus;\n    this._sandboxBundleSrc = sandboxBundleSrc;\n    this._scriptingFactory = scriptingFactory;\n    this._docPropertiesLookup = docPropertiesLookup;\n\n    // The default viewer already handles adding/removing of DOM events,\n    // hence limit this to only the viewer components.\n    if (\n      typeof PDFJSDev !== \"undefined\" &&\n      PDFJSDev.test(\"COMPONENTS\") &&\n      !this._scriptingFactory\n    ) {\n      window.addEventListener(\"updatefromsandbox\", event => {\n        this._eventBus.dispatch(\"updatefromsandbox\", {\n          source: window,\n          detail: event.detail,\n        });\n      });\n    }\n  }\n\n  setViewer(pdfViewer) {\n    this._pdfViewer = pdfViewer;\n  }\n\n  async setDocument(pdfDocument) {\n    if (this._pdfDocument) {\n      await this._destroyScripting();\n    }\n    this._pdfDocument = pdfDocument;\n\n    if (!pdfDocument) {\n      return;\n    }\n    const [objects, calculationOrder, docActions] = await Promise.all([\n      pdfDocument.getFieldObjects(),\n      pdfDocument.getCalculationOrderIds(),\n      pdfDocument.getJSActions(),\n    ]);\n\n    if (!objects && !docActions) {\n      // No FieldObjects or JavaScript actions were found in the document.\n      await this._destroyScripting();\n      return;\n    }\n    if (pdfDocument !== this._pdfDocument) {\n      return; // The document was closed while the data resolved.\n    }\n    try {\n      this._scripting = this._createScripting();\n    } catch (error) {\n      console.error(`PDFScriptingManager.setDocument: \"${error?.message}\".`);\n\n      await this._destroyScripting();\n      return;\n    }\n\n    this._internalEvents.set(\"updatefromsandbox\", event => {\n      if (event?.source !== window) {\n        return;\n      }\n      this._updateFromSandbox(event.detail);\n    });\n    this._internalEvents.set(\"dispatcheventinsandbox\", event => {\n      this._scripting?.dispatchEventInSandbox(event.detail);\n    });\n\n    this._internalEvents.set(\"pagechanging\", ({ pageNumber, previous }) => {\n      if (pageNumber === previous) {\n        return; // The current page didn't change.\n      }\n      this._dispatchPageClose(previous);\n      this._dispatchPageOpen(pageNumber);\n    });\n    this._internalEvents.set(\"pagerendered\", ({ pageNumber }) => {\n      if (!this._pageOpenPending.has(pageNumber)) {\n        return; // No pending \"PageOpen\" event for the newly rendered page.\n      }\n      if (pageNumber !== this._pdfViewer.currentPageNumber) {\n        return; // The newly rendered page is no longer the current one.\n      }\n      this._dispatchPageOpen(pageNumber);\n    });\n    this._internalEvents.set(\"pagesdestroy\", async event => {\n      await this._dispatchPageClose(this._pdfViewer.currentPageNumber);\n\n      await this._scripting?.dispatchEventInSandbox({\n        id: \"doc\",\n        name: \"WillClose\",\n      });\n\n      this._closeCapability?.resolve();\n    });\n\n    this._domEvents.set(\"mousedown\", event => {\n      this._mouseState.isDown = true;\n    });\n    this._domEvents.set(\"mouseup\", event => {\n      this._mouseState.isDown = false;\n    });\n\n    for (const [name, listener] of this._internalEvents) {\n      this._eventBus._on(name, listener);\n    }\n    for (const [name, listener] of this._domEvents) {\n      window.addEventListener(name, listener, true);\n    }\n\n    try {\n      const docProperties = await this._getDocProperties();\n      if (pdfDocument !== this._pdfDocument) {\n        return; // The document was closed while the properties resolved.\n      }\n\n      await this._scripting.createSandbox({\n        objects,\n        calculationOrder,\n        appInfo: {\n          platform: navigator.platform,\n          language: navigator.language,\n        },\n        docInfo: {\n          ...docProperties,\n          actions: docActions,\n        },\n      });\n\n      this._eventBus.dispatch(\"sandboxcreated\", { source: this });\n    } catch (error) {\n      console.error(`PDFScriptingManager.setDocument: \"${error?.message}\".`);\n\n      await this._destroyScripting();\n      return;\n    }\n\n    await this._scripting?.dispatchEventInSandbox({\n      id: \"doc\",\n      name: \"Open\",\n    });\n    await this._dispatchPageOpen(\n      this._pdfViewer.currentPageNumber,\n      /* initialize = */ true\n    );\n\n    // Defer this slightly, to ensure that scripting is *fully* initialized.\n    Promise.resolve().then(() => {\n      if (pdfDocument === this._pdfDocument) {\n        this._ready = true;\n      }\n    });\n  }\n\n  async dispatchWillSave(detail) {\n    return this._scripting?.dispatchEventInSandbox({\n      id: \"doc\",\n      name: \"WillSave\",\n    });\n  }\n\n  async dispatchDidSave(detail) {\n    return this._scripting?.dispatchEventInSandbox({\n      id: \"doc\",\n      name: \"DidSave\",\n    });\n  }\n\n  async dispatchWillPrint(detail) {\n    return this._scripting?.dispatchEventInSandbox({\n      id: \"doc\",\n      name: \"WillPrint\",\n    });\n  }\n\n  async dispatchDidPrint(detail) {\n    return this._scripting?.dispatchEventInSandbox({\n      id: \"doc\",\n      name: \"DidPrint\",\n    });\n  }\n\n  get mouseState() {\n    return this._mouseState;\n  }\n\n  get destroyPromise() {\n    return this._destroyCapability?.promise || null;\n  }\n\n  get ready() {\n    return this._ready;\n  }\n\n  /**\n   * @private\n   */\n  get _internalEvents() {\n    return shadow(this, \"_internalEvents\", new Map());\n  }\n\n  /**\n   * @private\n   */\n  get _domEvents() {\n    return shadow(this, \"_domEvents\", new Map());\n  }\n\n  /**\n   * @private\n   */\n  get _pageOpenPending() {\n    return shadow(this, \"_pageOpenPending\", new Set());\n  }\n\n  /**\n   * @private\n   */\n  get _visitedPages() {\n    return shadow(this, \"_visitedPages\", new Map());\n  }\n\n  /**\n   * @private\n   */\n  async _updateFromSandbox(detail) {\n    // Ignore some events, see below, that don't make sense in PresentationMode.\n    const isInPresentationMode =\n      this._pdfViewer.isInPresentationMode ||\n      this._pdfViewer.isChangingPresentationMode;\n\n    const { id, siblings, command, value } = detail;\n    if (!id) {\n      switch (command) {\n        case \"clear\":\n          console.clear();\n          break;\n        case \"error\":\n          console.error(value);\n          break;\n        case \"layout\":\n          if (isInPresentationMode) {\n            return;\n          }\n          const modes = apiPageLayoutToViewerModes(value);\n          this._pdfViewer.spreadMode = modes.spreadMode;\n          break;\n        case \"page-num\":\n          this._pdfViewer.currentPageNumber = value + 1;\n          break;\n        case \"print\":\n          await this._pdfViewer.pagesPromise;\n          this._eventBus.dispatch(\"print\", { source: this });\n          break;\n        case \"println\":\n          console.log(value);\n          break;\n        case \"zoom\":\n          if (isInPresentationMode) {\n            return;\n          }\n          this._pdfViewer.currentScaleValue = value;\n          break;\n        case \"SaveAs\":\n          this._eventBus.dispatch(\"save\", { source: this });\n          break;\n        case \"FirstPage\":\n          this._pdfViewer.currentPageNumber = 1;\n          break;\n        case \"LastPage\":\n          this._pdfViewer.currentPageNumber = this._pdfViewer.pagesCount;\n          break;\n        case \"NextPage\":\n          this._pdfViewer.nextPage();\n          break;\n        case \"PrevPage\":\n          this._pdfViewer.previousPage();\n          break;\n        case \"ZoomViewIn\":\n          if (isInPresentationMode) {\n            return;\n          }\n          this._pdfViewer.increaseScale();\n          break;\n        case \"ZoomViewOut\":\n          if (isInPresentationMode) {\n            return;\n          }\n          this._pdfViewer.decreaseScale();\n          break;\n      }\n      return;\n    }\n\n    if (isInPresentationMode) {\n      if (detail.focus) {\n        return;\n      }\n    }\n    delete detail.id;\n    delete detail.siblings;\n\n    const ids = siblings ? [id, ...siblings] : [id];\n    for (const elementId of ids) {\n      const element = document.getElementById(elementId);\n      if (element) {\n        element.dispatchEvent(new CustomEvent(\"updatefromsandbox\", { detail }));\n      } else {\n        // The element hasn't been rendered yet, use the AnnotationStorage.\n        this._pdfDocument?.annotationStorage.setValue(elementId, detail);\n      }\n    }\n  }\n\n  /**\n   * @private\n   */\n  async _dispatchPageOpen(pageNumber, initialize = false) {\n    const pdfDocument = this._pdfDocument,\n      visitedPages = this._visitedPages;\n\n    if (initialize) {\n      this._closeCapability = createPromiseCapability();\n    }\n    if (!this._closeCapability) {\n      return; // Scripting isn't fully initialized yet.\n    }\n    const pageView = this._pdfViewer.getPageView(/* index = */ pageNumber - 1);\n\n    if (pageView?.renderingState !== RenderingStates.FINISHED) {\n      this._pageOpenPending.add(pageNumber);\n      return; // Wait for the page to finish rendering.\n    }\n    this._pageOpenPending.delete(pageNumber);\n\n    const actionsPromise = (async () => {\n      // Avoid sending, and thus serializing, the `actions` data more than once.\n      const actions = await (!visitedPages.has(pageNumber)\n        ? pageView.pdfPage?.getJSActions()\n        : null);\n      if (pdfDocument !== this._pdfDocument) {\n        return; // The document was closed while the actions resolved.\n      }\n\n      await this._scripting?.dispatchEventInSandbox({\n        id: \"page\",\n        name: \"PageOpen\",\n        pageNumber,\n        actions,\n      });\n    })();\n    visitedPages.set(pageNumber, actionsPromise);\n  }\n\n  /**\n   * @private\n   */\n  async _dispatchPageClose(pageNumber) {\n    const pdfDocument = this._pdfDocument,\n      visitedPages = this._visitedPages;\n\n    if (!this._closeCapability) {\n      return; // Scripting isn't fully initialized yet.\n    }\n    if (this._pageOpenPending.has(pageNumber)) {\n      return; // The page is still rendering; no \"PageOpen\" event dispatched.\n    }\n    const actionsPromise = visitedPages.get(pageNumber);\n    if (!actionsPromise) {\n      return; // The \"PageClose\" event must be preceded by a \"PageOpen\" event.\n    }\n    visitedPages.set(pageNumber, null);\n\n    // Ensure that the \"PageOpen\" event is dispatched first.\n    await actionsPromise;\n    if (pdfDocument !== this._pdfDocument) {\n      return; // The document was closed while the actions resolved.\n    }\n\n    await this._scripting?.dispatchEventInSandbox({\n      id: \"page\",\n      name: \"PageClose\",\n      pageNumber,\n    });\n  }\n\n  /**\n   * @returns {Promise<Object>} A promise that is resolved with an {Object}\n   *   containing the necessary document properties; please find the expected\n   *   format in `PDFViewerApplication._scriptingDocProperties`.\n   * @private\n   */\n  async _getDocProperties() {\n    if (this._docPropertiesLookup) {\n      return this._docPropertiesLookup(this._pdfDocument);\n    }\n    if (typeof PDFJSDev !== \"undefined\" && PDFJSDev.test(\"COMPONENTS\")) {\n      const { docPropertiesLookup } = require(\"./generic_scripting.js\");\n\n      return docPropertiesLookup(this._pdfDocument);\n    }\n    throw new Error(\"_getDocProperties: Unable to lookup properties.\");\n  }\n\n  /**\n   * @private\n   */\n  _createScripting() {\n    this._destroyCapability = createPromiseCapability();\n\n    if (this._scripting) {\n      throw new Error(\"_createScripting: Scripting already exists.\");\n    }\n    if (this._scriptingFactory) {\n      return this._scriptingFactory.createScripting({\n        sandboxBundleSrc: this._sandboxBundleSrc,\n      });\n    }\n    if (typeof PDFJSDev !== \"undefined\" && PDFJSDev.test(\"COMPONENTS\")) {\n      const { GenericScripting } = require(\"./generic_scripting.js\");\n\n      return new GenericScripting(this._sandboxBundleSrc);\n    }\n    throw new Error(\"_createScripting: Cannot create scripting.\");\n  }\n\n  /**\n   * @private\n   */\n  async _destroyScripting() {\n    if (!this._scripting) {\n      this._pdfDocument = null;\n\n      this._destroyCapability?.resolve();\n      return;\n    }\n    if (this._closeCapability) {\n      await Promise.race([\n        this._closeCapability.promise,\n        new Promise(resolve => {\n          // Avoid the scripting/sandbox-destruction hanging indefinitely.\n          setTimeout(resolve, 1000);\n        }),\n      ]).catch(reason => {\n        // Ignore any errors, to ensure that the sandbox is always destroyed.\n      });\n      this._closeCapability = null;\n    }\n    this._pdfDocument = null;\n\n    try {\n      await this._scripting.destroySandbox();\n    } catch (ex) {}\n\n    for (const [name, listener] of this._internalEvents) {\n      this._eventBus._off(name, listener);\n    }\n    this._internalEvents.clear();\n\n    for (const [name, listener] of this._domEvents) {\n      window.removeEventListener(name, listener, true);\n    }\n    this._domEvents.clear();\n\n    this._pageOpenPending.clear();\n    this._visitedPages.clear();\n\n    this._scripting = null;\n    delete this._mouseState.isDown;\n    this._ready = false;\n\n    this._destroyCapability?.resolve();\n  }\n}\n\nexport { PDFScriptingManager };\n","/* Copyright 2020 Mozilla Foundation\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { getPdfFilenameFromUrl, loadScript } from \"pdfjs-lib\";\n\nasync function docPropertiesLookup(pdfDocument) {\n  const url = \"\",\n    baseUrl = url.split(\"#\")[0];\n  // eslint-disable-next-line prefer-const\n  let { info, metadata, contentDispositionFilename, contentLength } =\n    await pdfDocument.getMetadata();\n\n  if (!contentLength) {\n    const { length } = await pdfDocument.getDownloadInfo();\n    contentLength = length;\n  }\n\n  return {\n    ...info,\n    baseURL: baseUrl,\n    filesize: contentLength,\n    filename: contentDispositionFilename || getPdfFilenameFromUrl(url),\n    metadata: metadata?.getRaw(),\n    authors: metadata?.get(\"dc:creator\"),\n    numPages: pdfDocument.numPages,\n    URL: url,\n  };\n}\n\nclass GenericScripting {\n  constructor(sandboxBundleSrc) {\n    this._ready = loadScript(\n      sandboxBundleSrc,\n      /* removeScriptElement = */ true\n    ).then(() => {\n      return window.pdfjsSandbox.QuickJSSandbox();\n    });\n  }\n\n  async createSandbox(data) {\n    const sandbox = await this._ready;\n    sandbox.create(data);\n  }\n\n  async dispatchEventInSandbox(event) {\n    const sandbox = await this._ready;\n    setTimeout(() => sandbox.dispatchEvent(event), 0);\n  }\n\n  async destroySandbox() {\n    const sandbox = await this._ready;\n    sandbox.nukeSandbox();\n  }\n}\n\nexport { docPropertiesLookup, GenericScripting };\n","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __w_pdfjs_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId](module, module.exports, __w_pdfjs_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","/* Copyright 2014 Mozilla Foundation\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport {\n  DefaultAnnotationLayerFactory,\n  DefaultStructTreeLayerFactory,\n  DefaultTextLayerFactory,\n  DefaultXfaLayerFactory,\n} from \"./default_factory.js\";\nimport {\n  LinkTarget,\n  PDFLinkService,\n  SimpleLinkService,\n} from \"./pdf_link_service.js\";\nimport { parseQueryString, ProgressBar } from \"./ui_utils.js\";\nimport { PDFSinglePageViewer, PDFViewer } from \"./pdf_viewer.js\";\nimport { AnnotationLayerBuilder } from \"./annotation_layer_builder.js\";\nimport { DownloadManager } from \"./download_manager.js\";\nimport { EventBus } from \"./event_utils.js\";\nimport { GenericL10n } from \"./genericl10n.js\";\nimport { NullL10n } from \"./l10n_utils.js\";\nimport { PDFFindController } from \"./pdf_find_controller.js\";\nimport { PDFHistory } from \"./pdf_history.js\";\nimport { PDFPageView } from \"./pdf_page_view.js\";\nimport { PDFScriptingManager } from \"./pdf_scripting_manager.js\";\nimport { StructTreeLayerBuilder } from \"./struct_tree_layer_builder.js\";\nimport { TextLayerBuilder } from \"./text_layer_builder.js\";\nimport { XfaLayerBuilder } from \"./xfa_layer_builder.js\";\n\n// eslint-disable-next-line no-unused-vars\nconst pdfjsVersion = PDFJSDev.eval(\"BUNDLE_VERSION\");\n// eslint-disable-next-line no-unused-vars\nconst pdfjsBuild = PDFJSDev.eval(\"BUNDLE_BUILD\");\n\nexport {\n  AnnotationLayerBuilder,\n  DefaultAnnotationLayerFactory,\n  DefaultStructTreeLayerFactory,\n  DefaultTextLayerFactory,\n  DefaultXfaLayerFactory,\n  DownloadManager,\n  EventBus,\n  GenericL10n,\n  LinkTarget,\n  NullL10n,\n  parseQueryString,\n  PDFFindController,\n  PDFHistory,\n  PDFLinkService,\n  PDFPageView,\n  PDFScriptingManager,\n  PDFSinglePageViewer,\n  PDFViewer,\n  ProgressBar,\n  SimpleLinkService,\n  StructTreeLayerBuilder,\n  TextLayerBuilder,\n  XfaLayerBuilder,\n};\n","/* (ignored) */","/* (ignored) */","/* (ignored) */","/* (ignored) */","/* (ignored) */","/* (ignored) */","function asyncGeneratorStep(gen, resolve, reject, _next, _throw, key, arg) {\n  try {\n    var info = gen[key](arg);\n    var value = info.value;\n  } catch (error) {\n    reject(error);\n    return;\n  }\n  if (info.done) {\n    resolve(value);\n  } else {\n    Promise.resolve(value).then(_next, _throw);\n  }\n}\nfunction _asyncToGenerator(fn) {\n  return function () {\n    var self = this,\n      args = arguments;\n    return new Promise(function (resolve, reject) {\n      var gen = fn.apply(self, args);\n      function _next(value) {\n        asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"next\", value);\n      }\n      function _throw(err) {\n        asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"throw\", err);\n      }\n      _next(undefined);\n    });\n  };\n}\nmodule.exports = _asyncToGenerator, module.exports.__esModule = true, module.exports[\"default\"] = module.exports;","function _checkPrivateRedeclaration(obj, privateCollection) {\n  if (privateCollection.has(obj)) {\n    throw new TypeError(\"Cannot initialize the same private elements twice on an object\");\n  }\n}\nmodule.exports = _checkPrivateRedeclaration, module.exports.__esModule = true, module.exports[\"default\"] = module.exports;","var checkPrivateRedeclaration = require(\"./checkPrivateRedeclaration.js\");\nfunction _classPrivateFieldInitSpec(obj, privateMap, value) {\n  checkPrivateRedeclaration(obj, privateMap);\n  privateMap.set(obj, value);\n}\nmodule.exports = _classPrivateFieldInitSpec, module.exports.__esModule = true, module.exports[\"default\"] = module.exports;","var checkPrivateRedeclaration = require(\"./checkPrivateRedeclaration.js\");\nfunction _classPrivateMethodInitSpec(obj, privateSet) {\n  checkPrivateRedeclaration(obj, privateSet);\n  privateSet.add(obj);\n}\nmodule.exports = _classPrivateMethodInitSpec, module.exports.__esModule = true, module.exports[\"default\"] = module.exports;","var toPropertyKey = require(\"./toPropertyKey.js\");\nfunction _defineProperty(obj, key, value) {\n  key = toPropertyKey(key);\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n  return obj;\n}\nmodule.exports = _defineProperty, module.exports.__esModule = true, module.exports[\"default\"] = module.exports;","var _typeof = require(\"./typeof.js\")[\"default\"];\nfunction _toPrimitive(input, hint) {\n  if (_typeof(input) !== \"object\" || input === null) return input;\n  var prim = input[Symbol.toPrimitive];\n  if (prim !== undefined) {\n    var res = prim.call(input, hint || \"default\");\n    if (_typeof(res) !== \"object\") return res;\n    throw new TypeError(\"@@toPrimitive must return a primitive value.\");\n  }\n  return (hint === \"string\" ? String : Number)(input);\n}\nmodule.exports = _toPrimitive, module.exports.__esModule = true, module.exports[\"default\"] = module.exports;","var _typeof = require(\"./typeof.js\")[\"default\"];\nvar toPrimitive = require(\"./toPrimitive.js\");\nfunction _toPropertyKey(arg) {\n  var key = toPrimitive(arg, \"string\");\n  return _typeof(key) === \"symbol\" ? key : String(key);\n}\nmodule.exports = _toPropertyKey, module.exports.__esModule = true, module.exports[\"default\"] = module.exports;","function _typeof(obj) {\n  \"@babel/helpers - typeof\";\n\n  return (module.exports = _typeof = \"function\" == typeof Symbol && \"symbol\" == typeof Symbol.iterator ? function (obj) {\n    return typeof obj;\n  } : function (obj) {\n    return obj && \"function\" == typeof Symbol && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;\n  }, module.exports.__esModule = true, module.exports[\"default\"] = module.exports), _typeof(obj);\n}\nmodule.exports = _typeof, module.exports.__esModule = true, module.exports[\"default\"] = module.exports;","import { fromEvent, Subject } from 'rxjs';\nimport { takeUntil } from 'rxjs/operators';\n\ninterface EventBus {\n  on(eventName: string, listener: Function): void;\n  off(eventName: string, listener: Function): void;\n  _listeners: any;\n\tdispatch(eventName: string, data: Object): void;\n\t_on(eventName: any, listener: any, options?: null): void;\n\t_off(eventName: any, listener: any, options?: null): void;\n}\n\nexport function createEventBus(pdfJsViewer: any, destroy$: Subject<void>) {\n  const globalEventBus: EventBus = new pdfJsViewer.EventBus();\n  attachDOMEventsToEventBus(globalEventBus, destroy$);\n  return globalEventBus;\n}\n\nfunction attachDOMEventsToEventBus(\n  eventBus: EventBus,\n  destroy$: Subject<void>\n): void {\n  fromEvent(eventBus, 'documentload')\n    .pipe(takeUntil(destroy$))\n    .subscribe(() => {\n      const event = document.createEvent('CustomEvent');\n      event.initCustomEvent('documentload', true, true, {});\n      window.dispatchEvent(event);\n    });\n\n  fromEvent(eventBus, 'pagerendered')\n    .pipe(takeUntil(destroy$))\n    .subscribe(({ pageNumber, cssTransform, source }) => {\n      const event = document.createEvent('CustomEvent');\n      event.initCustomEvent('pagerendered', true, true, {\n        pageNumber,\n        cssTransform,\n      });\n      source.div.dispatchEvent(event);\n    });\n\n  fromEvent(eventBus, 'textlayerrendered')\n    .pipe(takeUntil(destroy$))\n    .subscribe(({ pageNumber, source }) => {\n      const event = document.createEvent('CustomEvent');\n      event.initCustomEvent('textlayerrendered', true, true, { pageNumber });\n      source.textLayerDiv.dispatchEvent(event);\n    });\n\n  fromEvent(eventBus, 'pagechanging')\n    .pipe(takeUntil(destroy$))\n    .subscribe(({ pageNumber, source }) => {\n      const event = document.createEvent('UIEvents');\n      event.initEvent('pagechanging', true, true);\n      /* tslint:disable:no-string-literal */\n      event['pageNumber'] = pageNumber;\n      source.container.dispatchEvent(event);\n    });\n\n  fromEvent(eventBus, 'pagesinit')\n    .pipe(takeUntil(destroy$))\n    .subscribe(({ source }) => {\n      const event = document.createEvent('CustomEvent');\n      event.initCustomEvent('pagesinit', true, true, null);\n      source.container.dispatchEvent(event);\n    });\n\n  fromEvent(eventBus, 'pagesloaded')\n    .pipe(takeUntil(destroy$))\n    .subscribe(({ pagesCount, source }) => {\n      const event = document.createEvent('CustomEvent');\n      event.initCustomEvent('pagesloaded', true, true, { pagesCount });\n      source.container.dispatchEvent(event);\n    });\n\n  fromEvent(eventBus, 'scalechange')\n    .pipe(takeUntil(destroy$))\n    .subscribe(({ scale, presetValue, source }) => {\n      const event = document.createEvent('UIEvents');\n      event.initEvent('scalechange', true, true);\n      /* tslint:disable:no-string-literal */\n      event['scale'] = scale;\n      /* tslint:disable:no-string-literal */\n      event['presetValue'] = presetValue;\n      source.container.dispatchEvent(event);\n    });\n\n  fromEvent(eventBus, 'updateviewarea')\n    .pipe(takeUntil(destroy$))\n    .subscribe(({ location, source }) => {\n      const event = document.createEvent('UIEvents');\n      event.initEvent('updateviewarea', true, true);\n      event['location'] = location;\n      source.container.dispatchEvent(event);\n    });\n\n  fromEvent(eventBus, 'find')\n    .pipe(takeUntil(destroy$))\n    .subscribe(\n      ({\n        source,\n        type,\n        query,\n        phraseSearch,\n        caseSensitive,\n        highlightAll,\n        findPrevious,\n      }) => {\n        if (source === window) {\n          return; // event comes from FirefoxCom, no need to replicate\n        }\n        const event = document.createEvent('CustomEvent');\n        event.initCustomEvent('find' + type, true, true, {\n          query,\n          phraseSearch,\n          caseSensitive,\n          highlightAll,\n          findPrevious,\n        });\n        window.dispatchEvent(event);\n      }\n    );\n\n  fromEvent(eventBus, 'attachmentsloaded')\n    .pipe(takeUntil(destroy$))\n    .subscribe(({ attachmentsCount, source }) => {\n      const event = document.createEvent('CustomEvent');\n      event.initCustomEvent('attachmentsloaded', true, true, {\n        attachmentsCount,\n      });\n      source.container.dispatchEvent(event);\n    });\n\n  fromEvent(eventBus, 'sidebarviewchanged')\n    .pipe(takeUntil(destroy$))\n    .subscribe(({ view, source }) => {\n      const event = document.createEvent('CustomEvent');\n      event.initCustomEvent('sidebarviewchanged', true, true, { view });\n      source.outerContainer.dispatchEvent(event);\n    });\n\n  fromEvent(eventBus, 'pagemode')\n    .pipe(takeUntil(destroy$))\n    .subscribe(({ mode, source }) => {\n      const event = document.createEvent('CustomEvent');\n      event.initCustomEvent('pagemode', true, true, { mode });\n      source.pdfViewer.container.dispatchEvent(event);\n    });\n\n  fromEvent(eventBus, 'namedaction')\n    .pipe(takeUntil(destroy$))\n    .subscribe(({ action, source }) => {\n      const event = document.createEvent('CustomEvent');\n      event.initCustomEvent('namedaction', true, true, { action });\n      source.pdfViewer.container.dispatchEvent(event);\n    });\n\n  fromEvent(eventBus, 'presentationmodechanged')\n    .pipe(takeUntil(destroy$))\n    .subscribe(({ active, switchInProgress }) => {\n      const event = document.createEvent('CustomEvent');\n      event.initCustomEvent('presentationmodechanged', true, true, {\n        active,\n        switchInProgress,\n      });\n      window.dispatchEvent(event);\n    });\n\n  fromEvent(eventBus, 'outlineloaded')\n    .pipe(takeUntil(destroy$))\n    .subscribe(({ outlineCount, source }) => {\n      const event = document.createEvent('CustomEvent');\n      event.initCustomEvent('outlineloaded', true, true, { outlineCount });\n      source.container.dispatchEvent(event);\n    });\n}\n","export function assign(obj: Object, prop: string, value: any) {\n  obj[prop] = value;\n}\n\nexport function isSSR() {\n  return typeof window === 'undefined';\n}","/**\n * Created by vadimdez on 21/06/16.\n */\nimport {\n  Component,\n  Input,\n  Output,\n  ElementRef,\n  EventEmitter,\n  OnChanges,\n  SimpleChanges,\n  OnInit,\n  OnDestroy,\n  ViewChild,\n  AfterViewChecked,\n  NgZone\n} from '@angular/core';\nimport { from, fromEvent, Subject } from 'rxjs';\nimport { debounceTime, filter, takeUntil } from 'rxjs/operators';\nimport * as PDFJS from 'pdfjs-dist/build/pdf';\nimport * as PDFJSViewer from 'pdfjs-dist/web/pdf_viewer';\n\nimport { createEventBus } from '../utils/event-bus-utils';\nimport { assign, isSSR } from '../utils/helpers';\n\nimport type {\n  PDFSource,\n  PDFPageProxy,\n  PDFProgressData,\n  PDFDocumentProxy,\n  PDFDocumentLoadingTask,\n  PDFViewerOptions\n} from './typings';\nimport { PDFSinglePageViewer } from 'pdfjs-dist/web/pdf_viewer';\n\nif (!isSSR()) {\n  assign(PDFJS, 'verbosity', PDFJS.VerbosityLevel.INFOS);\n}\n\nexport enum RenderTextMode {\n  DISABLED,\n  ENABLED,\n  ENHANCED\n}\n\n@Component({\n  selector: 'pdf-viewer',\n  template: `\n    <div #pdfViewerContainer class=\"ng2-pdf-viewer-container\">\n      <div class=\"pdfViewer\"></div>\n    </div>\n  `,\n  styleUrls: ['./pdf-viewer.component.scss']\n})\nexport class PdfViewerComponent\n  implements OnChanges, OnInit, OnDestroy, AfterViewChecked {\n  static CSS_UNITS = 96.0 / 72.0;\n  static BORDER_WIDTH = 9;\n\n  @ViewChild('pdfViewerContainer') pdfViewerContainer;\n\n  public eventBus: PDFJSViewer.EventBus;\n  public pdfLinkService: PDFJSViewer.PDFLinkService;\n  public pdfFindController: PDFJSViewer.PDFFindController;\n  public pdfViewer: PDFJSViewer.PDFViewer | PDFSinglePageViewer;\n\n  private isVisible = false;\n\n  private _cMapsUrl =\n    typeof PDFJS !== 'undefined'\n      ? `https://unpkg.com/pdfjs-dist@${(PDFJS as any).version}/cmaps/`\n      : null;\n  private _imageResourcesPath =\n    typeof PDFJS !== 'undefined'\n      ? `https://unpkg.com/pdfjs-dist@${(PDFJS as any).version}/web/images/`\n      : null;\n  private _renderText = true;\n  private _renderTextMode: RenderTextMode = RenderTextMode.ENABLED;\n  private _stickToPage = false;\n  private _originalSize = true;\n  private _pdf: PDFDocumentProxy;\n  private _page = 1;\n  private _zoom = 1;\n  private _zoomScale: 'page-height' | 'page-fit' | 'page-width' = 'page-width';\n  private _rotation = 0;\n  private _showAll = true;\n  private _canAutoResize = true;\n  private _fitToPage = false;\n  private _externalLinkTarget = 'blank';\n  private _showBorders = false;\n  private lastLoaded: string | Uint8Array | PDFSource;\n  private _latestScrolledPage: number;\n\n  private resizeTimeout: number | null = null;\n  private pageScrollTimeout: number | null = null;\n  private isInitialized = false;\n  private loadingTask: PDFDocumentLoadingTask;\n  private destroy$ = new Subject<void>();\n\n  @Output('after-load-complete') afterLoadComplete = new EventEmitter<PDFDocumentProxy>();\n  @Output('page-rendered') pageRendered = new EventEmitter<CustomEvent>();\n  @Output('pages-initialized') pageInitialized = new EventEmitter<CustomEvent>();\n  @Output('text-layer-rendered') textLayerRendered = new EventEmitter<CustomEvent>();\n  @Output('error') onError = new EventEmitter<any>();\n  @Output('on-progress') onProgress = new EventEmitter<PDFProgressData>();\n  @Output() pageChange: EventEmitter<number> = new EventEmitter<number>(true);\n  @Input() src: string | Uint8Array | PDFSource;\n\n  @Input('c-maps-url')\n  set cMapsUrl(cMapsUrl: string) {\n    this._cMapsUrl = cMapsUrl;\n  }\n\n  @Input('page')\n  set page(_page) {\n    _page = parseInt(_page, 10) || 1;\n    const originalPage = _page;\n\n    if (this._pdf) {\n      _page = this.getValidPageNumber(_page);\n    }\n\n    this._page = _page;\n    if (originalPage !== _page) {\n      this.pageChange.emit(_page);\n    }\n  }\n\n  @Input('render-text')\n  set renderText(renderText: boolean) {\n    this._renderText = renderText;\n  }\n\n  @Input('render-text-mode')\n  set renderTextMode(renderTextMode: RenderTextMode) {\n    this._renderTextMode = renderTextMode;\n  }\n\n  @Input('original-size')\n  set originalSize(originalSize: boolean) {\n    this._originalSize = originalSize;\n  }\n\n  @Input('show-all')\n  set showAll(value: boolean) {\n    this._showAll = value;\n  }\n\n  @Input('stick-to-page')\n  set stickToPage(value: boolean) {\n    this._stickToPage = value;\n  }\n\n  @Input('zoom')\n  set zoom(value: number) {\n    if (value <= 0) {\n      return;\n    }\n\n    this._zoom = value;\n  }\n\n  get zoom() {\n    return this._zoom;\n  }\n\n  @Input('zoom-scale')\n  set zoomScale(value: 'page-height' | 'page-fit' | 'page-width') {\n    this._zoomScale = value;\n  }\n\n  get zoomScale() {\n    return this._zoomScale;\n  }\n\n  @Input('rotation')\n  set rotation(value: number) {\n    if (!(typeof value === 'number' && value % 90 === 0)) {\n      console.warn('Invalid pages rotation angle.');\n      return;\n    }\n\n    this._rotation = value;\n  }\n\n  @Input('external-link-target')\n  set externalLinkTarget(value: string) {\n    this._externalLinkTarget = value;\n  }\n\n  @Input('autoresize')\n  set autoresize(value: boolean) {\n    this._canAutoResize = Boolean(value);\n  }\n\n  @Input('fit-to-page')\n  set fitToPage(value: boolean) {\n    this._fitToPage = Boolean(value);\n  }\n\n  @Input('show-borders')\n  set showBorders(value: boolean) {\n    this._showBorders = Boolean(value);\n  }\n\n  static getLinkTarget(type: string) {\n    switch (type) {\n      case 'blank':\n        return (PDFJSViewer as any).LinkTarget.BLANK;\n      case 'none':\n        return (PDFJSViewer as any).LinkTarget.NONE;\n      case 'self':\n        return (PDFJSViewer as any).LinkTarget.SELF;\n      case 'parent':\n        return (PDFJSViewer as any).LinkTarget.PARENT;\n      case 'top':\n        return (PDFJSViewer as any).LinkTarget.TOP;\n    }\n\n    return null;\n  }\n\n  constructor(private element: ElementRef<HTMLElement>, private ngZone: NgZone) {\n    if (isSSR()) {\n      return;\n    }\n\n    let pdfWorkerSrc: string;\n\n    const pdfJsVersion = (PDFJS as any).version;\n    const versionSpecificPdfWorkerUrl = window[`pdfWorkerSrc${pdfJsVersion}`];\n\n    if (versionSpecificPdfWorkerUrl) {\n      pdfWorkerSrc = versionSpecificPdfWorkerUrl;\n    } else if (\n      window.hasOwnProperty('pdfWorkerSrc') &&\n      typeof (window as any).pdfWorkerSrc === 'string' &&\n      (window as any).pdfWorkerSrc\n    ) {\n      pdfWorkerSrc = (window as any).pdfWorkerSrc;\n    } else {\n      pdfWorkerSrc = `https://cdn.jsdelivr.net/npm/pdfjs-dist@${pdfJsVersion\n        }/legacy/build/pdf.worker.min.js`;\n    }\n\n    assign(PDFJS.GlobalWorkerOptions, 'workerSrc', pdfWorkerSrc);\n  }\n\n  ngAfterViewChecked(): void {\n    if (this.isInitialized) {\n      return;\n    }\n\n    const offset = this.pdfViewerContainer.nativeElement.offsetParent;\n\n    if (this.isVisible === true && offset == null) {\n      this.isVisible = false;\n      return;\n    }\n\n    if (this.isVisible === false && offset != null) {\n      this.isVisible = true;\n\n      setTimeout(() => {\n        this.initialize();\n        this.ngOnChanges({ src: this.src } as any);\n      });\n    }\n  }\n\n  ngOnInit() {\n    this.initialize();\n    this.setupResizeListener();\n  }\n\n  ngOnDestroy() {\n    this.clear();\n    this.destroy$.next();\n    this.loadingTask = null;\n  }\n\n  ngOnChanges(changes: SimpleChanges) {\n    if (isSSR() || !this.isVisible) {\n      return;\n    }\n\n    if ('src' in changes) {\n      this.loadPDF();\n    } else if (this._pdf) {\n      if ('renderText' in changes) {\n        this.pdfViewer.textLayerMode = this._renderText\n          ? this._renderTextMode\n          : RenderTextMode.DISABLED;\n        this.resetPdfDocument();\n      } else if ('showAll' in changes) {\n        this.setupViewer();\n        this.resetPdfDocument();\n      }\n      if ('page' in changes) {\n        const { page } = changes;\n        if (page.currentValue === this._latestScrolledPage) {\n          return;\n        }\n\n        // New form of page changing: The viewer will now jump to the specified page when it is changed.\n        // This behavior is introduced by using the PDFSinglePageViewer\n        this.pdfViewer.scrollPageIntoView({ pageNumber: this._page });\n      }\n\n      this.update();\n    }\n  }\n\n  public updateSize() {\n    from(\n      this._pdf.getPage(\n        this.pdfViewer.currentPageNumber\n      ) as unknown as Promise<PDFPageProxy>\n    )\n      .pipe(takeUntil(this.destroy$))\n      .subscribe({\n        next: (page: PDFPageProxy) => {\n          const rotation = this._rotation + page.rotate;\n          const viewportWidth =\n            (page as any).getViewport({\n              scale: this._zoom,\n              rotation\n            }).width * PdfViewerComponent.CSS_UNITS;\n          let scale = this._zoom;\n          let stickToPage = true;\n\n          // Scale the document when it shouldn't be in original size or doesn't fit into the viewport\n          if (\n            !this._originalSize ||\n            (this._fitToPage &&\n              viewportWidth > this.pdfViewerContainer.nativeElement.clientWidth)\n          ) {\n            const viewPort = (page as any).getViewport({ scale: 1, rotation });\n            scale = this.getScale(viewPort.width, viewPort.height);\n            stickToPage = !this._stickToPage;\n          }\n\n          this.pdfViewer._setScale(scale, stickToPage);\n        }\n      });\n  }\n\n  public clear() {\n    if (this.loadingTask && !this.loadingTask.destroyed) {\n      this.loadingTask.destroy();\n    }\n\n    if (this._pdf) {\n      this._latestScrolledPage = 0;\n      this._pdf.destroy();\n      this._pdf = null;\n      this.pdfViewer.setDocument(null);\n      this.pdfLinkService.setDocument(null, null);\n      this.pdfFindController.setDocument(null);\n    }\n  }\n\n  private getPDFLinkServiceConfig() {\n    const linkTarget = PdfViewerComponent.getLinkTarget(this._externalLinkTarget);\n\n    if (linkTarget) {\n      return { externalLinkTarget: linkTarget };\n    }\n\n    return {};\n  }\n\n  private initEventBus() {\n    this.eventBus = createEventBus(PDFJSViewer, this.destroy$);\n\n    fromEvent<CustomEvent>(this.eventBus, 'pagerendered')\n      .pipe(takeUntil(this.destroy$))\n      .subscribe((event) => {\n        this.pageRendered.emit(event);\n      });\n\n    fromEvent<CustomEvent>(this.eventBus, 'pagesinit')\n      .pipe(takeUntil(this.destroy$))\n      .subscribe((event) => {\n        this.pageInitialized.emit(event);\n      });\n\n    fromEvent(this.eventBus, 'pagechanging')\n      .pipe(takeUntil(this.destroy$))\n      .subscribe(({ pageNumber }) => {\n        if (this.pageScrollTimeout) {\n          clearTimeout(this.pageScrollTimeout);\n        }\n\n        this.pageScrollTimeout = window.setTimeout(() => {\n          this._latestScrolledPage = pageNumber;\n          this.pageChange.emit(pageNumber);\n        }, 100);\n      });\n\n    fromEvent<CustomEvent>(this.eventBus, 'textlayerrendered')\n      .pipe(takeUntil(this.destroy$))\n      .subscribe((event) => {\n        this.textLayerRendered.emit(event);\n      });\n  }\n\n  private initPDFServices() {\n    this.pdfLinkService = new PDFJSViewer.PDFLinkService({\n      eventBus: this.eventBus,\n      ...this.getPDFLinkServiceConfig()\n    });\n    this.pdfFindController = new PDFJSViewer.PDFFindController({\n      eventBus: this.eventBus,\n      linkService: this.pdfLinkService,\n    });\n  }\n\n  private getPDFOptions(): PDFViewerOptions {\n    return {\n      eventBus: this.eventBus,\n      container: this.element.nativeElement.querySelector('div'),\n      removePageBorders: !this._showBorders,\n      linkService: this.pdfLinkService,\n      textLayerMode: this._renderText\n        ? this._renderTextMode\n        : RenderTextMode.DISABLED,\n      findController: this.pdfFindController,\n      renderer: 'canvas',\n      l10n: undefined,\n      imageResourcesPath: this._imageResourcesPath,\n    };\n  }\n\n  private setupViewer() {\n    assign(PDFJS, 'disableTextLayer', !this._renderText);\n\n    this.initPDFServices();\n\n    if (this._showAll) {\n      this.pdfViewer = new PDFJSViewer.PDFViewer(this.getPDFOptions());\n    } else {\n      this.pdfViewer = new PDFJSViewer.PDFSinglePageViewer(this.getPDFOptions());\n    }\n    this.pdfLinkService.setViewer(this.pdfViewer);\n\n    this.pdfViewer._currentPageNumber = this._page;\n  }\n\n  private getValidPageNumber(page: number): number {\n    if (page < 1) {\n      return 1;\n    }\n\n    if (page > this._pdf.numPages) {\n      return this._pdf.numPages;\n    }\n\n    return page;\n  }\n\n  private getDocumentParams() {\n    const srcType = typeof this.src;\n\n    if (!this._cMapsUrl) {\n      return this.src;\n    }\n\n    const params: any = {\n      cMapUrl: this._cMapsUrl,\n      cMapPacked: true,\n      enableXfa: true\n    };\n\n    if (srcType === 'string') {\n      params.url = this.src;\n    } else if (srcType === 'object') {\n      if ((this.src as any).byteLength !== undefined) {\n        params.data = this.src;\n      } else {\n        Object.assign(params, this.src);\n      }\n    }\n\n    return params;\n  }\n\n  private loadPDF() {\n    if (!this.src) {\n      return;\n    }\n\n    if (this.lastLoaded === this.src) {\n      this.update();\n      return;\n    }\n\n    this.clear();\n\n    this.setupViewer();\n\n    this.loadingTask = PDFJS.getDocument(this.getDocumentParams());\n\n    this.loadingTask.onProgress = (progressData: PDFProgressData) => {\n      this.onProgress.emit(progressData);\n    };\n\n    const src = this.src;\n\n    from(this.loadingTask.promise as Promise<PDFDocumentProxy>)\n      .pipe(takeUntil(this.destroy$))\n      .subscribe({\n        next: (pdf) => {\n          this._pdf = pdf;\n          this.lastLoaded = src;\n\n          this.afterLoadComplete.emit(pdf);\n          this.resetPdfDocument();\n\n          this.update();\n        },\n        error: (error) => {\n          this.lastLoaded = null;\n          this.onError.emit(error);\n        }\n      });\n  }\n\n  private update() {\n    this.page = this._page;\n\n    this.render();\n  }\n\n  private render() {\n    this._page = this.getValidPageNumber(this._page);\n\n    if (\n      this._rotation !== 0 ||\n      this.pdfViewer.pagesRotation !== this._rotation\n    ) {\n      setTimeout(() => {\n        this.pdfViewer.pagesRotation = this._rotation;\n      });\n    }\n\n    if (this._stickToPage) {\n      setTimeout(() => {\n        this.pdfViewer.currentPageNumber = this._page;\n      });\n    }\n\n    this.updateSize();\n  }\n\n  private getScale(viewportWidth: number, viewportHeight: number) {\n    const borderSize = this._showBorders ? 2 * PdfViewerComponent.BORDER_WIDTH : 0;\n    const pdfContainerWidth = this.pdfViewerContainer.nativeElement.clientWidth - borderSize;\n    const pdfContainerHeight = this.pdfViewerContainer.nativeElement.clientHeight - borderSize;\n\n    if (\n      pdfContainerHeight === 0 ||\n      viewportHeight === 0 ||\n      pdfContainerWidth === 0 ||\n      viewportWidth === 0\n    ) {\n      return 1;\n    }\n\n    let ratio = 1;\n    switch (this._zoomScale) {\n      case 'page-fit':\n        ratio = Math.min(\n          pdfContainerHeight / viewportHeight,\n          pdfContainerWidth / viewportWidth\n        );\n        break;\n      case 'page-height':\n        ratio = pdfContainerHeight / viewportHeight;\n        break;\n      case 'page-width':\n      default:\n        ratio = pdfContainerWidth / viewportWidth;\n        break;\n    }\n\n    return (this._zoom * ratio) / PdfViewerComponent.CSS_UNITS;\n  }\n\n  private resetPdfDocument() {\n    this.pdfLinkService.setDocument(this._pdf, null);\n    this.pdfFindController.setDocument(this._pdf);\n    this.pdfViewer.setDocument(this._pdf);\n  }\n\n  private initialize(): void {\n    if (isSSR() || !this.isVisible) {\n      return;\n    }\n\n    this.isInitialized = true;\n    this.initEventBus();\n    this.setupViewer();\n  }\n\n  private setupResizeListener(): void {\n    if (isSSR()) {\n      return;\n    }\n\n    this.ngZone.runOutsideAngular(() => {\n      fromEvent(window, 'resize')\n        .pipe(\n          debounceTime(100),\n          filter(() => this._canAutoResize && !!this._pdf),\n          takeUntil(this.destroy$)\n        )\n        .subscribe(() => {\n          this.updateSize();\n        });\n    });\n  }\n}\n","/**\n * Created by vadimdez on 01/11/2016.\n */\nimport { NgModule } from '@angular/core';\n\nimport { PdfViewerComponent } from './pdf-viewer.component';\n\nexport * from './typings';\n\n@NgModule({\n  declarations: [PdfViewerComponent],\n  exports: [PdfViewerComponent]\n})\nexport class PdfViewerModule {}\n","/**\n * Generated bundle index. Do not edit.\n */\n\nexport * from './public_api';\n"],"names":["webpackUniversalModuleDefinition","root","factory","exports","module","define","amd","pdfjsLib","__w_pdfjs_require__","IDENTITY_MATRIX","FONT_IDENTITY_MATRIX","RenderingIntentFlag","ANY","DISPLAY","PRINT","ANNOTATIONS_FORMS","ANNOTATIONS_STORAGE","ANNOTATIONS_DISABLE","OPLIST","AnnotationMode","DISABLE","ENABLE","ENABLE_FORMS","ENABLE_STORAGE","PermissionFlag","MODIFY_CONTENTS","COPY","MODIFY_ANNOTATIONS","FILL_INTERACTIVE_FORMS","COPY_FOR_ACCESSIBILITY","ASSEMBLE","PRINT_HIGH_QUALITY","TextRenderingMode","FILL","STROKE","FILL_STROKE","INVISIBLE","FILL_ADD_TO_PATH","STROKE_ADD_TO_PATH","FILL_STROKE_ADD_TO_PATH","ADD_TO_PATH","FILL_STROKE_MASK","ADD_TO_PATH_FLAG","ImageKind","GRAYSCALE_1BPP","RGB_24BPP","RGBA_32BPP","AnnotationType","TEXT","LINK","FREETEXT","LINE","SQUARE","CIRCLE","POLYGON","POLYLINE","HIGHLIGHT","UNDERLINE","SQUIGGLY","STRIKEOUT","STAMP","CARET","INK","POPUP","FILEATTACHMENT","SOUND","MOVIE","WIDGET","SCREEN","PRINTERMARK","TRAPNET","WATERMARK","THREED","REDACT","AnnotationStateModelType","MARKED","REVIEW","AnnotationMarkedState","UNMARKED","AnnotationReviewState","ACCEPTED","REJECTED","CANCELLED","COMPLETED","NONE","AnnotationReplyType","GROUP","REPLY","AnnotationFlag","HIDDEN","NOZOOM","NOROTATE","NOVIEW","READONLY","LOCKED","TOGGLENOVIEW","LOCKEDCONTENTS","AnnotationFieldFlag","REQUIRED","NOEXPORT","MULTILINE","PASSWORD","NOTOGGLETOOFF","RADIO","PUSHBUTTON","COMBO","EDIT","SORT","FILESELECT","MULTISELECT","DONOTSPELLCHECK","DONOTSCROLL","COMB","RICHTEXT","RADIOSINUNISON","COMMITONSELCHANGE","AnnotationBorderStyleType","SOLID","DASHED","BEVELED","INSET","AnnotationActionEventType","E","X","D","U","Fo","Bl","PO","PC","PV","PI","K","F","V","C","DocumentActionEventType","WC","WS","DS","WP","DP","PageActionEventType","O","StreamType","UNKNOWN","FLATE","LZW","DCT","JPX","JBIG","A85","AHX","CCF","RLX","FontType","TYPE1","TYPE1STANDARD","TYPE1C","CIDFONTTYPE0","CIDFONTTYPE0C","TRUETYPE","CIDFONTTYPE2","TYPE3","OPENTYPE","TYPE0","MMTYPE1","VerbosityLevel","ERRORS","WARNINGS","INFOS","CMapCompressionType","BINARY","STREAM","OPS","dependency","setLineWidth","setLineCap","setLineJoin","setMiterLimit","setDash","setRenderingIntent","setFlatness","setGState","save","restore","transform","moveTo","lineTo","curveTo","curveTo2","curveTo3","closePath","rectangle","stroke","closeStroke","fill","eoFill","fillStroke","eoFillStroke","closeFillStroke","closeEOFillStroke","endPath","clip","eoClip","beginText","endText","setCharSpacing","setWordSpacing","setHScale","setLeading","setFont","setTextRenderingMode","setTextRise","moveText","setLeadingMoveText","setTextMatrix","nextLine","showText","showSpacedText","nextLineShowText","nextLineSetSpacingShowText","setCharWidth","setCharWidthAndBounds","setStrokeColorSpace","setFillColorSpace","setStrokeColor","setStrokeColorN","setFillColor","setFillColorN","setStrokeGray","setFillGray","setStrokeRGBColor","setFillRGBColor","setStrokeCMYKColor","setFillCMYKColor","shadingFill","beginInlineImage","beginImageData","endInlineImage","paintXObject","markPoint","markPointProps","beginMarkedContent","beginMarkedContentProps","endMarkedContent","beginCompat","endCompat","paintFormXObjectBegin","paintFormXObjectEnd","beginGroup","endGroup","beginAnnotations","endAnnotations","beginAnnotation","endAnnotation","paintJpegXObject","paintImageMaskXObject","paintImageMaskXObjectGroup","paintImageXObject","paintInlineImageXObject","paintInlineImageXObjectGroup","paintImageXObjectRepeat","paintImageMaskXObjectRepeat","paintSolidColorImageMask","constructPath","UNSUPPORTED_FEATURES","unknown","forms","javaScript","signatures","smask","shadingPattern","font","errorTilingPattern","errorExtGState","errorXObject","errorFontLoadType3","errorFontState","errorFontMissing","errorFontTranslate","errorColorSpace","errorOperatorList","errorFontToUnicode","errorFontLoadNative","errorFontBuildPath","errorFontGetPath","errorMarkedContent","errorContentSubStream","PasswordResponses","NEED_PASSWORD","INCORRECT_PASSWORD","verbosity","setVerbosityLevel","level","Number","isInteger","getVerbosityLevel","info","msg","console","log","warn","unreachable","Error","assert","cond","_isValidProtocol","url","protocol","createValidAbsoluteUrl","baseUrl","options","addDefaultProtocol","startsWith","dots","match","length","tryConvertEncoding","stringToUTF8String","ex","absoluteUrl","URL","shadow","obj","prop","value","Object","defineProperty","enumerable","configurable","writable","BaseException","BaseExceptionClosure","message","name","constructor","prototype","PasswordException","code","UnknownErrorException","details","InvalidPDFException","MissingPDFException","UnexpectedResponseException","status","FormatError","AbortException","bytesToString","bytes","undefined","MAX_ARGUMENT_COUNT","String","fromCharCode","apply","strBuf","i","chunkEnd","Math","min","chunk","subarray","push","join","stringToBytes","str","Uint8Array","charCodeAt","arrayByteLength","arr","byteLength","arraysToBytes","resultLength","pos","data","item","itemLength","set","string32","objectSize","keys","objectFromMap","map","create","key","isLittleEndian","buffer8","view32","Uint32Array","buffer","isEvalSupported","Function","e","FeatureTest","isOffscreenCanvasSupported","OffscreenCanvas","hexNumbers","Array","n","toString","padStart","Util","makeHexColor","r","g","b","scaleMinMax","minMax","temp","m1","m2","applyTransform","p","m","xt","yt","applyInverseTransform","d","getAxialAlignedBoundingBox","p1","p2","slice","p3","p4","max","inverseTransform","apply3dTransform","v","singularValueDecompose2dScale","transpose","a","c","first","second","sqrt","sx","sy","normalizeRect","rect","intersect","rect1","rect2","xLow","xHigh","yLow","yHigh","bezierBoundingBox","x0","y0","x1","y1","x2","y2","x3","y3","tvalues","bounds","t","t1","t2","b2ac","sqrtb2ac","abs","j","mt","jlen","PDFStringTranslateTable","stringToPDFString","encoding","decoder","TextDecoder","fatal","decode","ii","charAt","escapeString","replace","isAscii","test","stringToUTF16BEString","buf","char","decodeURIComponent","escape","utf8StringToString","unescape","encodeURIComponent","isArrayBuffer","isArrayEqual","arr1","arr2","getModificationDate","date","Date","getUTCFullYear","getUTCMonth","getUTCDate","getUTCHours","getUTCMinutes","getUTCSeconds","createPromiseCapability","capability","isSettled","get","promise","Promise","resolve","reject","reason","_is_node","isNodeJS","process","versions","nw","electron","type","_util","_display_utils","_font_loader","_annotation_storage","_canvas","_worker_options","_message_handler","_metadata","_optional_content_config","_transport_stream","_xfa_text","DEFAULT_RANGE_CHUNK_SIZE","RENDERING_CANCELLED_TIMEOUT","DefaultCanvasFactory","DOMCanvasFactory","DefaultCMapReaderFactory","DOMCMapReaderFactory","DefaultStandardFontDataFactory","DOMStandardFontDataFactory","NodeCanvasFactory","NodeCMapReaderFactory","NodeStandardFontDataFactory","require","createPDFNetworkStream","setPDFNetworkStreamFactory","pdfNetworkStreamFactory","getDocument","src","task","PDFDocumentLoadingTask","source","PDFDataRangeTransport","range","params","rangeTransport","worker","window","location","href","Buffer","isNaN","CMapReaderFactory","StandardFontDataFactory","ignoreErrors","stopAtErrors","fontExtraProperties","pdfBug","enableXfa","rangeChunkSize","docBaseUrl","isDataScheme","maxImageSize","cMapUrl","standardFontDataUrl","useWorkerFetch","disableFontFace","useSystemFonts","ownerDocument","globalThis","document","disableRange","disableStream","disableAutoFetch","workerParams","port","GlobalWorkerOptions","workerPort","PDFWorker","fromPort","_worker","docId","then","destroyed","workerIdPromise","_fetchDocument","networkStreamPromise","networkStream","PDFDataTransportStream","initialData","progressiveDone","contentDispositionFilename","httpHeaders","withCredentials","all","workerId","messageHandler","MessageHandler","transport","WorkerTransport","_transport","send","catch","_capability","_x","_x2","_x3","_x4","_fetchDocument2","arguments","_asyncToGenerator","pdfDataRangeTransport","sendWithPromise","apiVersion","password","_PDFDocumentLoadingTa","_PDFDocumentLoadingTa2","onPassword","onProgress","onUnsupportedFeature","destroy","_this","_this$_transport","_docId","_","_rangeListeners","_progressListeners","_progressiveReadListeners","_progressiveDoneListeners","_readyCapability","addRangeListener","listener","addProgressListener","addProgressiveReadListener","addProgressiveDoneListener","onDataRange","begin","onDataProgress","loaded","total","onDataProgressiveRead","onDataProgressiveDone","transportReady","requestDataRange","end","abort","PDFDocumentProxy","pdfInfo","_this2","_pdfInfo","deprecated","fingerprints","stats","streamTypes","fontTypes","annotationStorage","numPages","isPureXfa","_htmlForXfa","allXfaHtml","getPage","pageNumber","getPageIndex","ref","getDestinations","getDestination","id","getPageLabels","getPageLayout","getPageMode","getViewerPreferences","getOpenAction","getAttachments","getJavaScript","getJSActions","getDocJSActions","getOutline","getOptionalContentConfig","getPermissions","getMetadata","getMarkInfo","getData","getDownloadInfo","downloadInfoCapability","cleanup","keepLoadedFonts","startCleanup","loadingTask","loadingParams","saveDocument","size","getFieldObjects","hasJSActions","getCalculationOrderIds","PDFPageProxy","pageIndex","pageInfo","_pageIndex","_pageInfo","_ownerDocument","_stats","StatTimer","_pdfBug","commonObjs","objs","PDFObjects","_bitmaps","Set","cleanupAfterRender","pendingCleanup","_intentStates","Map","_annotationPromises","rotate","userUnit","view","getViewport","scale","rotation","offsetX","offsetY","dontFlip","PageViewport","viewBox","getAnnotations","intent","intentArgs","getRenderingIntent","cacheKey","renderingIntent","annotations","annotation","titleObj","contentsObj","_jsActionsPromise","getPageJSActions","getXfa","_this3","_this3$_transport$_ht","children","render","canvasContext","viewport","annotationMode","imageLayer","canvasFactory","background","optionalContentConfigPromise","annotationCanvasMap","pageColors","_arguments$","_arguments$2","_intentState","renderInteractiveForms","includeAnnotationStorage","time","intentState","streamReaderCancelTimeout","clearTimeout","canvasFactoryInstance","intentPrint","displayReadyCapability","operatorList","fnArray","argsArray","lastChunk","_pumpOperatorList","complete","error","renderTasks","delete","internalRenderTask","_tryCleanup","_abortOperatorList","timeEnd","InternalRenderTask","callback","useRequestAnimationFrame","add","renderTask","transparency","optionalContentConfig","initializeGraphics","operatorListChanged","getOperatorList","opListReadCapability","opListTask","_intentState2","streamTextContent","disableCombineTextItems","includeMarkedContent","TEXT_CONTENT_CHUNK_SIZE","sendWithStream","combineTextItems","highWaterMark","textContent","items","getTextContent","xfa","XfaText","readableStream","pump","reader","read","done","assign","styles","getReader","getStructTree","_structTreePromise","_destroy","waitOn","values","force","completed","cancel","clear","bitmap","close","resetStats","_startRenderPage","_renderPageChunk","operatorListChunk","serializable","streamReader","RenderingCancelledException","setTimeout","curCacheKey","curIntentState","LoopbackPort","_listeners","_deferred","postMessage","transfers","event","structuredClone","call","addEventListener","removeEventListener","indexOf","splice","terminate","PDFWorkerUtil","isWorkerDisabled","fallbackWorkerSrc","fakeWorkerId","__non_webpack_require__","_document","_document$currentScri","pdfjsFilePath","currentScript","isSameOrigin","otherUrl","base","origin","other","createCDNWrapper","wrapper","createObjectURL","Blob","workerPorts","has","_port","_webWorker","_messageHandler","_initializeFromPort","_initialize","on","Worker","_mainThreadWorkerMessageHandler","workerSrc","terminateEarly","onWorkerError","_setupFakeWorker","sendTest","testObj","_setupFakeWorkerGlobal","WorkerMessageHandler","workerHandler","setup","_assertClassBrand","_globalThis$pdfjsWork","pdfjsWorker","_this4","loader","mainWorkerMessageHandler","eval","loadScript","_workerPorts","WeakMap","getWorkerSrc","_docStats","_pageCache","_pagePromises","_metadataPromise","docStats","pageCache","pagePromises","metadataPromise","fontLoader","FontLoader","_onUnsupportedFeature","bind","styleElement","_params","isCompressed","cMapPacked","destroyCapability","_passwordCapability","_networkStream","_fullReader","_lastProgress","setupMessageHandler","AnnotationStorage","_classPrivateFieldGet","isOpList","annotationHash","hash","page","hasOwnProperty","resetModified","terminated","_classPrivateFieldSet","_getFieldObjectsPromise","_hasJSActionsPromise","cancelAllRequests","sink","getFullReader","evt","onPull","enqueue","onCancel","ready","readyReason","headersCapability","fullReader","headersReady","isStreamingSupported","isRangeSupported","_loadingTask$onProgre","_loadingTask$onProgre2","contentLength","rangeReader","getRangeReader","_numPages","htmlForXfa","exception","updatePassword","_loadingTask$onProgre3","exportedData","_globalThis$FontInspe","exportedError","fontRegistry","FontInspector","enabled","registerFont","fontAdded","FontFaceObject","finally","imageData","pageProxy","MAX_IMAGE_SIZE_TO_STORE","width","height","_imageData$data","_loadingTask$onProgre4","freeze","fetch","featureId","_this$loadingTask$onU","_this$loadingTask","cachedPromise","num","gen","_this$_fullReader$fil","_this$_fullReader","filename","results","OptionalContentConfig","_this$_fullReader$fil2","_this$_fullReader2","_this$_fullReader$con","_this$_fullReader3","metadata","Metadata","_this5","cleanupSuccessful","_objs","_PDFObjects_brand","WeakSet","_classPrivateMethodInitSpec","objId","ensureObj","settled","_ensureObj","RenderTask","_internalRenderTask","onContinue","operatorListIdx","running","graphicsReadyCallback","graphicsReady","_useRequestAnimationFrame","cancelled","_cancelBound","_continueBound","_continue","_scheduleNextBound","_scheduleNext","_nextBound","_next","canvas","_globalThis$StepperMa","canvasInUse","StepperManager","stepper","init","nextBreakPoint","getNextBreakPoint","gfx","CanvasGraphics","beginDrawing","endDrawing","updateOperatorList","requestAnimationFrame","_this6","executeOperatorList","_canvasInUse","version","build","_base_factory","SVG_NS","PixelsPerInch","_PixelsPerInch","_defineProperty","CSS","PDF","BaseCanvasFactory","_createCanvas","createElement","fetchData","_x5","_fetchData","asTypedArray","isValidFetchUrl","baseURI","response","ok","statusText","arrayBuffer","text","request","XMLHttpRequest","open","responseType","onreadystatechange","readyState","DONE","responseText","BaseCMapReaderFactory","compressionType","cMapData","BaseStandardFontDataFactory","DOMSVGFactory","BaseSVGFactory","_createSVG","createElementNS","centerX","centerY","rotateA","rotateB","rotateC","rotateD","offsetCanvasX","offsetCanvasY","clone","convertToViewportPoint","x","y","convertToViewportRectangle","topLeft","bottomRight","convertToPdfPoint","trim","substring","toLowerCase","isPdfFile","getFilenameFromUrl","anchor","query","lastIndexOf","getPdfFilenameFromUrl","defaultFilename","reURI","reFilename","splitURI","exec","suggestedFilename","includes","started","times","now","start","outBuf","longest","duration","padEnd","removeScriptElement","script","onload","remove","onerror","head","documentElement","appendChild","pdfDateStringRegex","PDFDateString","toDateObject","input","RegExp","matches","year","parseInt","month","day","hour","minute","universalTimeRelation","offsetHour","offsetMinute","UTC","getXfaPageViewport","xfaPage","attributes","style","context","getContext","reset","canvasAndContext","_this7","_this8","svg","setAttribute","BaseFontLoader","nativeFontFaces","addNativeFontFace","nativeFontFace","fonts","insertRule","rule","getElementsByTagName","styleSheet","sheet","cssRules","_this9","attached","missingFile","isFontLoadingAPISupported","createNativeFontFace","family","createFontFaceRule","isSyncFontLoadingSupported","_queueLoadingCallback","_prepareFontLoadEvent","_this$_document","hasFonts","_loadTestFont","rules","fontsToLoad","GenericFontLoader","loadingContext","requests","nextRequestId","loadTestFontId","supported","navigator","userAgent","completeRequest","otherRequest","shift","getLoadTestFont","atob","int32","offset","spliceString","s","insert","chunk1","chunk2","ctx","called","isFontReady","fillText","getImageData","COMMENT_OFFSET","CFF_CHECKSUM_OFFSET","XXXX_VALUE","checksum","btoa","names","loadedName","div","visibility","position","top","left","span","fontFamily","body","translatedData","compiledGlyphs","cssFontInfo","FontFace","css","weight","fontWeight","italicAngle","mimetype","getPathGenerator","character","cmds","jsBuf","current","args","cmd","_murmurhash","_storage","_modified","onSetModified","onResetModified","getValue","defaultValue","getRawValue","setValue","modified","entry","val","entries","_setModified","getAll","MurmurHash3_64","update","JSON","stringify","hexdigest","SEED","MASK_HIGH","MASK_LOW","seed","h1","h2","blockCounts","tailLength","dataUint32","k1","k2","C1","C2","C1_LOW","C2_LOW","hex1","hex2","_pattern_helper","_image_utils","MIN_FONT_SIZE","MAX_FONT_SIZE","MAX_GROUP_SIZE","EXECUTION_TIME","EXECUTION_STEPS","COMPILE_TYPE3_GLYPHS","MAX_SIZE_TO_COMPILE","FULL_CHUNK_HEIGHT","LINEWIDTH_SCALE_FACTOR","mirrorContextOperations","destCtx","_removeMirroring","__originalSave","__originalRestore","__originalRotate","__originalScale","__originalTranslate","translate","__originalTransform","__originalSetTransform","setTransform","__originalResetTransform","resetTransform","__originalClip","__originalMoveTo","__originalLineTo","__originalBezierCurveTo","bezierCurveTo","__originalRect","__originalClosePath","__originalBeginPath","beginPath","ctxSave","ctxRestore","ctxTranslate","ctxScale","ctxTransform","f","ctxSetTransform","ctxResetTransform","ctxRotate","angle","cp1x","cp1y","cp2x","cp2y","addContextCurrentTransform","_transformStack","mozCurrentTransform","_originalSave","_originalRestore","_originalRotate","_originalScale","_originalTranslate","_originalTransform","_originalSetTransform","_originalResetTransform","_transformMatrix","desc","getOwnPropertyDescriptor","getPrototypeOf","_setLineWidth","_getLineWidth","getLineWidth","getCurrentTransform","getCurrentTransformInverse","ad_bc","bc_ad","old","prev","pop","cosValue","cos","sinValue","sin","CachedCanvases","cache","getCanvas","trackTransform","canvasEntry","drawImageAtIntegerCoords","srcImg","srcX","srcY","srcW","srcH","destX","destY","destW","destH","tx","ty","tlX","rTlX","round","tlY","rTlY","brX","rWidth","brY","rHeight","sign","drawImage","scaleX","hypot","scaleY","compileType3Glyph","imgData","POINT_TO_PROCESS_LIMIT","POINT_TYPES","width1","points","j0","lineSize","elem","mask","count","sum","steps","Int32Array","path","outlines","coords","Path2D","p0","step","pp","drawOutline","o","l","ll","CanvasExtraState","alphaIsShape","fontSize","fontSizeScale","textMatrix","textMatrixScale","fontMatrix","leading","lineX","lineY","charSpacing","wordSpacing","textHScale","textRenderingMode","textRise","fillColor","strokeColor","patternFill","fillAlpha","strokeAlpha","lineWidth","activeSMask","transferMaps","startNewPathAndClipBox","clipBox","setCurrentPoint","updatePathMinMax","minX","minY","maxX","maxY","updateRectMinMax","updateScalingPathMinMax","updateCurvePathMinMax","box","getPathBoundingBox","pathType","PathType","xStrokePad","yStrokePad","updateClipFromPath","isEmptyClip","Infinity","getClippedPathBoundingBox","putBinaryImageData","ImageData","putImageData","partialChunkHeight","fullChunks","totalChunks","chunkImgData","createImageData","srcPos","destPos","dest","thisChunkHeight","elemsInThisChunk","transferMapRed","transferMapGreen","transferMapBlue","transferMapGray","kind","srcLength","dest32","dest32DataLength","fullSrcDiff","white","black","srcDiff","k","kEnd","kEndUnrolled","srcByte","hasTransferMaps","putBinaryImageMask","applyMaskImageData","copyCtxState","sourceCtx","properties","property","setLineDash","getLineDash","lineDashOffset","resetCtxToDefault","foregroundColor","strokeStyle","fillStyle","fillRule","globalAlpha","lineCap","lineJoin","miterLimit","globalCompositeOperation","composeSMaskBackdrop","r0","g0","b0","alpha","alpha_","composeSMaskAlpha","maskData","layerData","transferMap","composeSMaskLuminosity","genericComposeSMask","maskCtx","layerCtx","subtype","backdrop","layerOffsetX","layerOffsetY","maskOffsetX","maskOffsetY","hasBackdrop","composeFn","PIXELS_TO_PROCESS","chunkSize","ceil","row","chunkHeight","composeSMask","layerBox","layerWidth","layerHeight","getImageSmoothingEnabled","interpolate","fround","actualScale","devicePixelRatio","PDF_TO_CSS_UNITS","LINE_CAP_STYLES","LINE_JOIN_STYLES","NORMAL_CLIP","EO_CLIP","canvasCtx","stateStack","pendingClip","pendingEOFill","res","xobjs","groupStack","processingType3","baseTransform","baseTransformStack","groupLevel","smaskStack","smaskCounter","tempSMask","suspendedCtx","contentVisible","markedContentStack","cachedCanvases","cachedPatterns","viewportScale","outputScaleX","outputScaleY","backgroundColor","foreground","_cachedScaleForStroking","_cachedGetSinglePixelWidth","_cachedBitmapsMap","getObject","fallback","defaultBackgroundColor","fg","bg","isValidDefaultBg","defaultBg","cB","rB","gB","bB","newComp","lumB","selectColor","lumC","fillRect","transparentCanvas","compositeCtx","beginLayout","executionStartIdx","continueCallback","argsArrayLen","chunkOperations","endTime","fnId","breakIt","depObjId","objsPool","inSMaskMode","HTMLCanvasElement","endLayout","_scaleImage","img","widthScale","heightScale","paintWidth","paintHeight","tmpCanvasId","tmpCanvas","tmpCtx","newWidth","newHeight","clearRect","_createMaskCanvas","isPatternFill","currentTransform","scaled","maskCanvas","mainKey","withoutTranslation","cachedImage","maskToCanvas","cord1","cord2","drawnWidth","drawnHeight","fillCanvas","fillCtx","mozCurrentTransformInverse","imageSmoothingEnabled","inverse","getPattern","limit","dashArray","dashPhase","flatness","states","state","checkSMaskState","beginSMaskMode","endSMaskMode","cacheId","scratchCanvas","compose","dirtyBox","floor","ops","startX","startY","isScalingMatrix","minMaxForBezier","xw","yh","consumePath","rescaleAndStroke","needRestore","paths","pendingTextPaths","addToPath","spacing","fontRefName","fontObj","fontDirection","isType3Font","bold","italic","typeface","fallbackName","browserFontSize","mode","rise","paintChar","patternTransform","fillStrokeMode","isAddToPathSet","strokeText","isFontSubpixelAAEnabled","glyphs","showType3Text","glyphsLength","vertical","spacingDir","defaultVMetrics","widthAdvanceScale","simpleFillText","pattern","getSinglePixelWidth","glyph","restoreNeeded","isSpace","fontChar","accent","scaledX","scaledY","vmetric","vx","vy","remeasure","measuredWidth","measureText","characterScaleX","isInFont","scaledAccentX","scaledAccentY","charWidth","isTextInvisible","spacingLength","charProcOperatorList","operatorListId","transformed","xWidth","yWidth","llx","lly","urx","ury","getColorN_Pattern","IR","color","canvasGraphicsFactory","createCanvasGraphics","TilingPattern","_getPattern","_this$selectColor","_this$selectColor2","matrix","getShadingPattern","SHADING","inv","bl","br","ul","ur","bbox","isArray","group","currentCtx","isolated","knockout","canvasBounds","groupCtx","startTransformInverse","currentMtx","hasOwnCanvas","canvasWidth","canvasHeight","annotationCanvas","viewportScaleFactorStr","savedCtx","compiled","skewX","skewY","positions","trans","images","image","w","h","imgToPaint","HTMLElement","getCanvasPosition","appendImage","tag","visible","isVisible","isContentVisible","isEmpty","absDet","normX","normY","getScaleForStroking","scaledXLineWidth","scaledYLineWidth","baseArea","saveRestore","savedMatrix","savedDashes","savedDashOffset","op","applyBoundingBox","region","BaseShadingPattern","RadialAxialShadingPattern","_type","_bbox","_colorStops","_p0","_p1","_r0","_r1","_createGradient","grad","createLinearGradient","createRadialGradient","colorStop","addColorStop","owner","ownerBBox","createPattern","domMatrix","DOMMatrix","drawTriangle","c1","c2","c3","colors","rowSize","tmp","c1r","c1g","c1b","c2r","c2g","c2b","c3r","c3g","c3b","xa","car","cag","cab","xb","cbr","cbg","cbb","x1_","x2_","drawFigure","figure","ps","cs","verticesPerRow","rows","cols","q","MeshShadingPattern","_coords","_colors","_figures","_bounds","_background","_createMeshCanvas","combinedScale","EXPECTED_SCALE","MAX_PATTERN_SIZE","BORDER_SIZE","boundsWidth","boundsHeight","paddedWidth","paddedHeight","matrixScale","temporaryPatternCanvas","DummyShadingPattern","PaintType","COLORED","UNCOLORED","xstep","ystep","paintType","tilingType","createPatternCanvas","curMatrixScale","dimx","getSizeAndScale","dimy","graphics","setFillAndStrokeStyleToContext","adjustedX0","adjustedY0","adjustedX1","adjustedY1","clipBbox","realOutputSize","maxSize","bboxWidth","bboxHeight","cssColor","inverseDecode","opaque","zeroMapping","oneMapping","widthInSource","widthRemainder","CallbackKind","DATA","ERROR","StreamKind","CANCEL","CANCEL_COMPLETE","CLOSE","ENQUEUE","PULL","PULL_COMPLETE","START_COMPLETE","wrapReason","sourceName","targetName","comObj","callbackId","streamId","streamSinks","streamControllers","callbackCapabilities","actionHandler","_onComObjOnMessage","stream","_processStreamMessage","action","cbSourceName","cbTargetName","result","_createStreamSink","actionName","handler","ah","queueingStrategy","ReadableStream","controller","startCapability","startCall","pullCall","cancelCall","isClosed","desiredSize","pull","pullCapability","cancelCapability","self","streamSink","isCancelled","lastDesiredSize","sinkCapability","success","streamController","_deleteStreamController","_this10","allSettled","_metadataMap","_data","parsedData","rawData","metadataMap","getRaw","_classPrivateFieldGet2","OptionalContentGroup","creator","_order","_groups","order","groups","baseState","off","_evaluateVisibilityExpression","array","operator","element","expression","policy","ids","setVisibility","getOrder","from","getGroups","getGroup","_queuedChunks","_progressiveDone","_contentDispositionFilename","_pdfDataRangeTransport","_isStreamingSupported","_isRangeSupported","_contentLength","_fullRequestReader","_rangeReaders","_onReceiveData","_onProgress","_onProgressiveDone","_enqueue","found","some","_begin","_progressiveDataLength","_this$_fullRequestRea","_this$_fullRequestRea2","_loaded","firstReader","_removeRangeReader","queuedChunks","PDFDataTransportStreamReader","PDFDataTransportStreamRangeReader","_stream","_done","_filename","_requests","_headersReady","requestCapability","_this11","_end","_queuedChunk","requestsCapability","_this12","output","walk","node","_node$attributes","shouldBuildText","child","fs","readFile","Canvas","createCanvas","_scripting_utils","_xfa_layer","DEFAULT_TAB_INDEX","GetElementsByNameSet","getRectDims","AnnotationElementFactory","parameters","annotationType","LinkAnnotationElement","TextAnnotationElement","fieldType","TextWidgetAnnotationElement","radioButton","RadioButtonWidgetAnnotationElement","checkBox","CheckboxWidgetAnnotationElement","PushButtonWidgetAnnotationElement","ChoiceWidgetAnnotationElement","WidgetAnnotationElement","PopupAnnotationElement","FreeTextAnnotationElement","LineAnnotationElement","SquareAnnotationElement","CircleAnnotationElement","PolylineAnnotationElement","CaretAnnotationElement","InkAnnotationElement","PolygonAnnotationElement","HighlightAnnotationElement","UnderlineAnnotationElement","SquigglyAnnotationElement","StrikeOutAnnotationElement","StampAnnotationElement","FileAttachmentAnnotationElement","AnnotationElement","isRenderable","ignoreBorder","createQuadrilaterals","layer","linkService","downloadManager","imageResourcesPath","renderForms","svgFactory","enableScripting","_fieldObjects","fieldObjects","_mouseState","mouseState","container","_createContainer","quadrilaterals","_createQuadrilaterals","transformOrigin","borderStyle","borderWidth","horizontalRadius","horizontalCornerRadius","verticalRadius","verticalCornerRadius","radius","borderRadius","borderBottomStyle","borderColor","_commonActions","setColor","jsName","styleName","detail","target","ColorConverters","display","hidden","print","focus","preventScroll","userName","title","readonly","removeAttribute","required","bgColor","fgColor","textColor","_dispatchEventFromSandbox","actions","jsEvent","commonActions","_setDefaultPropertiesFromJS","storedData","quadPoints","savedRect","quadPoint","_createPopup","trigger","popupElement","PopupElement","modificationDate","richText","hideWrapper","popup","_renderQuadrilaterals","className","quadrilateral","_getElementsByName","skipId","fields","fieldObj","exportValues","exportValue","domElement","getElementById","getElementsByName","platform","isWin","isMac","isTooltipOnly","resetForm","Action","link","addLinkAttributes","newWindow","_bindNamedAction","_bindLink","hasClickAction","_bindJSAction","_bindResetFormAction","index","linkElement","cloneNode","destination","getDestinationHash","onclick","goToDestination","getAnchorUrl","executeNamedAction","_this$linkService$eve","eventBus","dispatch","otherClickAction","resetFormFields","refs","resetFormRefs","include","allFields","fieldIds","fieldName","field","storage","allIds","dispatchEvent","Event","_this$linkService$eve2","_parameters$data$titl","_parameters$data$cont","_parameters$data$rich","hasPopup","alt","dataset","l10nId","l10nArgs","alternativeText","_getKeyModifier","ctrlKey","metaKey","_setEventListener","baseName","eventName","valueGetter","_this$linkService$eve3","shiftKey","modifier","_this$linkService$eve4","_setEventListeners","getter","_this$data$actions","_setBackgroundColor","hasAppearance","fieldValue","setPropertyOnSiblings","keyInStorage","formattedValue","elementData","userValue","valueOnFocus","multiLine","disabled","readOnly","tabIndex","_this$data$defaultFie","defaultFieldValue","blurListener","scrollLeft","_this$data$actions2","_event$detail$value","activeElement","selRange","setSelectionRange","_this$linkService$eve5","commitKey","willCommit","selStart","selectionStart","selEnd","selectionEnd","_blurListener","isDown","_this$linkService$eve6","Keystroke","_this$linkService$eve7","inputType","preventDefault","change","maxLen","maxLength","comb","fieldWidth","combWidth","classList","letterSpacing","verticalAlign","_setTextStyle","TEXT_ALIGNMENT","fontColor","defaultAppearanceData","textAlignment","textAlign","checked","checkbox","curChecked","buttonValue","radio","pdfButtonValue","fontSizeStyle","selectElement","combo","multiSelect","multiple","option","selected","optionElement","displayValue","isExport","selectedIndex","filter","getItems","multipleSelection","findIndex","insertBefore","indices","editable","_this$linkService$eve8","changeEx","keyDown","_parameters$data$titl2","_parameters$data$cont2","_parameters$data$rich2","IGNORE_TYPES","parentType","selector","parentId","parentElements","querySelectorAll","parentRect","popupLeft","popupTop","pinned","_this$richText","_this$contentsObj","BACKGROUND_ENLIGHT","hideElement","dir","dateObject","toLocaleDateString","toLocaleTimeString","XfaLayer","xfaHtml","html","lastChild","contents","_formatContents","_toggle","_show","_hide","lines","split","line","createTextNode","pin","zIndex","unpin","_parameters$data$titl3","_parameters$data$cont3","_parameters$data$rich3","_parameters$data$titl4","_parameters$data$cont4","_parameters$data$rich4","lineCoordinates","append","_parameters$data$titl5","_parameters$data$cont5","_parameters$data$rich5","square","_parameters$data$titl6","_parameters$data$cont6","_parameters$data$rich6","circle","_parameters$data$titl7","_parameters$data$cont7","_parameters$data$rich7","containerClassName","svgElementName","coordinate","vertices","polyline","_parameters$data$titl8","_parameters$data$cont8","_parameters$data$rich8","_parameters$data$titl9","_parameters$data$cont9","_parameters$data$rich9","inkList","inkLists","_parameters$data$titl10","_parameters$data$cont10","_parameters$data$rich10","_parameters$data$titl11","_parameters$data$cont11","_parameters$data$rich11","_parameters$data$titl12","_parameters$data$cont12","_parameters$data$rich12","_parameters$data$titl13","_parameters$data$cont13","_parameters$data$rich13","_parameters$data$titl14","_parameters$data$cont14","_parameters$data$rich14","_this$linkService$eve9","content","file","_this$data$titleObj","_this$data$contentsOb","_download","_this$downloadManager","openOrDownloadData","AnnotationLayer","sortedAnnotations","popupAnnotations","rendered","renderedElement","prepend","setAnnotationCanvasMap","ownMatrix","elements","ownTransform","_setAnnotationCanvasMap","querySelector","firstChild","nodeName","replaceChild","makeColorComp","CMYK_G","G_CMYK","G_RGB","G_HTML","G","RGB_G","RGB_HTML","R","B","T_HTML","CMYK_RGB","CMYK_HTML","components","RGB_CMYK","setupStorage","xfaOn","xfaOff","getAttribute","setAttributes","isHTMLAnchorElement","HTMLAnchorElement","dataId","rootHtml","stack","rootDiv","textDivs","_child$attributes","parent","childHtml","xmlns","el","MAX_TEXT_DIVS_TO_RENDER","DEFAULT_FONT_SIZE","DEFAULT_FONT_ASCENT","ascentCache","AllWhitespaceRegexp","getAscent","cachedAscent","metrics","ascent","fontBoundingBoxAscent","descent","fontBoundingBoxDescent","ratio","pixels","appendText","geom","textDiv","textDivProperties","_enhanceTextSelection","hasText","hasEOL","originalTransform","paddingBottom","paddingLeft","paddingRight","paddingTop","_textDivs","_viewport","atan2","fontName","fontHeight","fontAscent","_fontInspectorEnabled","shouldScaleText","absScaleX","absScaleY","_textDivProperties","_textContentStream","_layoutText","angleCos","angleSin","divWidth","divHeight","right","bottom","_canceled","textDivsLength","_renderingDone","findPositiveMin","ts","expand","expanded","expandBounds","divProperties","Float64Array","jj","boxScale","boxes","x1New","x2New","expandBoundsLTR","sort","fakeBoundary","horizon","boundary","horizonPart","affectedBoundary","maxXNew","xNew","changedHorizon","lastBoundary","useBoundary","unshift","used","concat","TextLayerRenderTask","textContentStream","textContentItemsStr","enhanceTextSelection","_globalThis$FontInspe2","_textContent","_container","_textContentItemsStr","_reader","_layoutTextLastFontSize","_layoutTextLastFontFamily","_layoutTextCtx","_renderTimer","_processItems","styleCache","len","parentNode","_render","timeout","textItems","textStyles","expandTextDivs","expandDivs","transformBuf","paddingBuf","divProps","padding","renderTextLayer","renderParameters","SVGGraphics","SVG_DEFAULTS","fontStyle","XML_NS","XLINK_NS","contentType","forceDataSchema","digits","b1","b2","b3","d1","d2","d3","d4","convertImgDataToPng","PNG_HEADER","CHUNK_WRAPPER_SIZE","crcTable","crc32","crc","writePngChunk","adler32","deflateSync","literals","deflateSyncUncompressed","maxBlockLength","deflateBlocks","idat","pi","adler","encode","isMask","bitDepth","colorType","offsetLiterals","offsetBytes","ihdr","pngLength","SVGExtraState","dependencies","activeClipUrl","clipGroup","maskId","opListToTree","opList","opTree","opListElement","fn","pf","toFixed","pm","acos","clipCount","maskCount","shadingCount","transformMatrix","transformStack","extraStack","embedFonts","embeddedFonts","cssStyle","_operatorIdMapping","tgrp","executeOpTree","loadDependencies","getSVG","svgElement","convertOpList","operatorIdMapping","opTreeElement","lineMatrix","xcoords","ycoords","tspan","setAttributeNS","txtElement","txtgrp","lineWidthScale","_setStrokeAttributes","_ensureTransformGroup","addFontStyle","defs","_current$txtElement","hasChildNodes","setStrokeAlpha","setFillAlpha","_makeColorN_Pattern","_makeShadingPattern","_makeTilingPattern","tilingId","tx0","ty0","tx1","ty1","xscale","yscale","txstep","tystep","tiling","childNodes","shadingId","colorStops","gradient","point0","point1","focalPoint","circlePoint","focalRadius","circleRadius","stop","getAttributeNS","clipId","clipPath","clipElement","imgSrc","cliprect","imgEl","definitions","rootGroup","_ensureClipGroup","_network_utils","http","https","fileUriRegex","parseUrl","sourceUrl","parsedUrl","parse","host","PDFNodeStream","isHttp","isFsUrl","_rangeRequestReaders","_this$_fullRequestRea3","_this$_fullRequestRea4","PDFNodeStreamFsFullReader","PDFNodeStreamFullReader","PDFNodeStreamFsRangeReader","PDFNodeStreamRangeReader","BaseFullReader","_url","_storedError","_disableRange","_rangeChunkSize","_readableStream","_readCapability","_headersCapability","_this13","_error","_setReadableStream","BaseRangeReader","_this14","createRequestOptions","headers","auth","hostname","method","handleResponse","statusCode","getResponseHeader","allowRangeRequests","suggestedLength","validateRangeRequestCapabilities","extractFilenameFromHeader","_request","_httpHeaders","Range","lstat","stat","createReadStream","_content_disposition","returnValues","contentEncoding","contentDisposition","getFilenameFromContentDispositionHeader","createResponseStatusError","validateResponseStatus","needsEncodingFixup","toParamRegExp","rfc2616unquote","rfc5987decode","rfc2047decode","fixupEncoding","rfc2231getparam","attributePattern","flags","textdecode","contentDispositionStr","iter","quot","part","parts","quotindex","extvalue","encodingend","langvalue","charset","hex","OK_RESPONSE","PARTIAL_CONTENT_RESPONSE","getArrayBuffer","xhr","NetworkManager","getXhr","NetworkManager_getXhr","currXhrId","pendingRequests","requestRange","listeners","requestFull","xhrId","pendingRequest","setRequestHeader","expectedStatus","onError","onStateChange","onprogress","onHeadersReceived","onDone","_pendingRequest$onPro","_pendingRequest$onErr","xhrStatus","ok_response_on_range_request","_pendingRequest$onErr2","rangeHeader","_pendingRequest$onErr3","getRequestXhr","isPendingRequest","abortRequest","PDFNetworkStream","_source","_manager","_onRangeRequestReaderClosed","PDFNetworkStreamFullRequestReader","PDFNetworkStreamRangeRequestReader","onClosed","_this$_fullRequestRea5","manager","_onHeadersReceived","_onDone","_onError","_fullRequestId","_headersReceivedCapability","_cachedChunks","fullRequestXhrId","fullRequestXhr","_this$onProgress","lengthComputable","_this15","_requestId","_close","_this$onClosed","_this$onProgress2","_this16","createFetchOptions","abortController","signal","credentials","redirect","createHeaders","Headers","PDFFetchStream","_this$_fullRequestRea6","_this$_fullRequestRea7","PDFFetchStreamReader","PDFFetchStreamRangeReader","_withCredentials","AbortController","_abortController","_headers","_this17","_this18","__webpack_module_cache__","moduleId","cachedModule","__webpack_modules__","_api","_annotation_layer","_text_layer","_svg","pdfjsVersion","pdfjsBuild","pdfjsViewer","_annotation_layer_builder","_l10n_utils","_pdf_link_service","_struct_tree_layer_builder","_text_layer_builder","_xfa_layer_builder","DefaultAnnotationLayerFactory","createAnnotationLayerBuilder","pageDiv","pdfPage","l10n","NullL10n","hasJSActionsPromise","fieldObjectsPromise","AnnotationLayerBuilder","SimpleLinkService","DefaultStructTreeLayerFactory","createStructTreeLayerBuilder","StructTreeLayerBuilder","DefaultTextLayerFactory","createTextLayerBuilder","textLayerDiv","highlighter","TextLayerBuilder","DefaultXfaLayerFactory","createXfaLayerBuilder","XfaLayerBuilder","_pdfjsLib","_fieldObjectsPromise","_annotationCanvasMap","_cancelled","hide","DEFAULT_L10N_STRINGS","of_pages","page_of_pages","document_properties_kb","document_properties_mb","document_properties_date_string","document_properties_page_size_unit_inches","document_properties_page_size_unit_millimeters","document_properties_page_size_orientation_portrait","document_properties_page_size_orientation_landscape","document_properties_page_size_name_a3","document_properties_page_size_name_a4","document_properties_page_size_name_letter","document_properties_page_size_name_legal","document_properties_page_size_dimension_string","document_properties_page_size_dimension_name_string","document_properties_linearized_yes","document_properties_linearized_no","print_progress_percent","additional_layers","page_landmark","thumb_page_title","thumb_page_canvas","find_reached_top","find_reached_bottom","find_not_found","error_version_info","error_message","error_stack","error_file","error_line","rendering_error","page_scale_width","page_scale_fit","page_scale_auto","page_scale_actual","page_scale_percent","loading","loading_error","invalid_file_error","missing_file_error","unexpected_response_error","printing_not_supported","printing_not_ready","web_fonts_disabled","getL10nFallback","PARTIAL_LANG_CODES","en","es","fy","ga","gu","hi","hy","nb","ne","nn","pa","pt","sv","zh","fixupLangCode","langCode","formatL10nValue","getLanguage","getDirection","_ui_utils","DEFAULT_LINK_REL","LinkTarget","SELF","BLANK","PARENT","TOP","rel","urlNullRemoved","removeNullCharacters","targetStr","_pagesRefCache","_PDFLinkService_brand","PDFLinkService","externalLinkTarget","externalLinkRel","ignoreDestinationZoom","pagesRefCache","externalLinkEnabled","_ignoreDestinationZoom","pdfDocument","pdfViewer","pdfHistory","setDocument","setViewer","setHistory","pagesCount","currentPageNumber","pagesRotation","namedDest","explicitDest","goToDestinationHelper","goToPage","pageLabelToPageNumber","pushCurrentPosition","pushPage","scrollPageIntoView","setHash","parseQueryString","phraseSearch","zoomArgs","zoomArg","zoomArgNumber","parseFloat","destArray","allowNegativeOffset","_this$pdfHistory","_this$pdfHistory2","back","forward","nextPage","previousPage","cachePageRef","pageNum","pageRef","refStr","_cachedPageNumber","isPageVisible","isPageCached","_goToDestinationHelper","rawDest","destRef","_isValidExplicitDestination","destLength","zoom","allowNull","param","DEFAULT_SCALE_VALUE","DEFAULT_SCALE","DEFAULT_SCALE_DELTA","MIN_SCALE","MAX_SCALE","UNKNOWN_SCALE","MAX_AUTO_SCALE","SCROLLBAR_PADDING","VERTICAL_PADDING","RenderingStates","INITIAL","RUNNING","PAUSED","FINISHED","PresentationModeState","NORMAL","CHANGING","FULLSCREEN","SidebarView","THUMBS","OUTLINE","ATTACHMENTS","LAYERS","RendererType","CANVAS","SVG","TextLayerMode","ENABLE_ENHANCE","ScrollMode","VERTICAL","HORIZONTAL","WRAPPED","PAGE","SpreadMode","ODD","EVEN","AutoPrintRegExp","OutputScale","pixelRatio","scrollIntoView","spot","scrollMatches","offsetParent","offsetTop","clientTop","offsetLeft","clientLeft","clientHeight","scrollHeight","clientWidth","scrollWidth","contains","getComputedStyle","overflow","scrollTop","watchScroll","viewAreaElement","debounceScroll","rAF","viewAreaElementScrolled","currentX","lastX","currentY","lastY","down","_eventHandler","URLSearchParams","NullCharactersRegExp","InvisibleCharactersRegExp","replaceInvisible","binarySearchFirstItem","condition","minIndex","maxIndex","currentIndex","currentItem","approximateFraction","xinv","x_","roundToDivide","getPageSizeInches","changeOrientation","backtrackBeforeAllVisibleElements","views","elt","pageTop","getVisibleElements","scrollEl","sortByVisibility","horizontal","rtl","isElementBottomAfterViewTop","elementBottom","isElementNextAfterViewHorizontally","elementLeft","elementRight","numViews","firstVisibleElementInd","lastEdge","currentWidth","currentHeight","viewWidth","viewHeight","viewRight","viewBottom","hiddenHeight","hiddenWidth","fractionHeight","fractionWidth","percent","widthPercent","last","pc","noContextMenuHandler","normalizeWheelEventDirection","delta","deltaX","deltaY","normalizeWheelEventDelta","MOUSE_DOM_DELTA_PIXEL_MODE","MOUSE_DOM_DELTA_LINE_MODE","MOUSE_PIXELS_PER_LINE","MOUSE_LINES_PER_PAGE","deltaMode","isValidRotation","isValidScrollMode","isValidSpreadMode","isPortraitOrientation","animationStarted","clamp","_ProgressBar_brand","ProgressBar","bar","_percent","_indeterminate","updateBar","setWidth","viewer","scrollbarWidth","offsetWidth","doc","setProperty","show","_updateBar","getActiveOrFocusedElement","curRoot","curActiveOrFocused","_curActiveOrFocused","shadowRoot","apiPageLayoutToViewerModes","layout","scrollMode","spreadMode","apiPageModeToSidebarView","PDF_ROLE_TO_HTML_ROLE","Document","DocumentFragment","Part","Sect","Div","Aside","NonStruct","P","H","Title","FENote","Sub","Lbl","Span","Em","Strong","Link","Annot","Form","Ruby","RB","RT","RP","Warichu","WT","L","LI","LBody","Table","TR","TH","TD","THead","TBody","TFoot","Caption","Figure","Formula","Artifact","HEADING_PATTERN","structTree","_walk","_setAttributes","structElement","htmlElement","lang","role","kid","EXPAND_DIVS_TIMEOUT","renderingDone","textLayerRenderTask","_bindMouse","_finishRendering","endOfContent","numTextDivs","_this$highlighter","setTextMapping","textLayerFrag","createDocumentFragment","_this$highlighter2","enable","_this$highlighter3","disable","setTextContentStream","setTextContent","expandDivsTimer","adjustTop","getPropertyValue","divBounds","getBoundingClientRect","pageY","_base_viewer","PDFViewer","BaseViewer","PDFSinglePageViewer","_resetView","_scrollMode","_spreadMode","_updateScrollMode","_updateSpreadMode","_pdf_page_view","_pdf_rendering_queue","_text_highlighter","DEFAULT_CACHE_SIZE","ENABLE_PERMISSIONS_CLASS","PagesCountLimit","FORCE_SCROLL_MODE_PAGE","FORCE_LAZY_PAGE_INIT","PAUSE_EAGER_PAGE_INIT","PDFPageViewBuffer","_PDFPageViewBuffer_brand","destroyFirstView","resize","newSize","idsToKeep","Symbol","iterator","_destroyFirstView","firstView","next","_this$container","_this$viewer","_options$textLayerMod","_options$annotationMo","_BaseViewer_brand","previousAnnotationMode","enablePermissions","previousContainerHeight","scrollModePageState","onVisibilityChange","viewerVersion","firstElementChild","tagName","toUpperCase","findController","_scriptingManager","scriptingManager","removePageBorders","textLayerMode","enablePrintAutoRotate","renderer","useOnlyCssZoom","maxCanvasPixels","supports","defaultRenderingQueue","renderingQueue","PDFRenderingQueue","_doc","scroll","_scrollUpdate","presentationModeState","_onBeforeDraw","_onAfterDraw","updateContainerHeightCss","_pages","getPageView","pageViewsReady","_pagesCapability","every","pageView","_currentPageNumber","_setCurrentPageNumber","resetCurrentPageView","_this$_pageLabels","_this$_pageLabels2","previous","pageLabel","_pageLabels","currentPageLabel","_this$_pageLabels3","_this$_pageLabels4","currentScale","_currentScale","_setScale","currentScaleValue","_currentScaleValue","_pagesRotation","updateArgs","firstPagePromise","_firstPageCapability","onePageRendered","_onePageRenderedCapability","pagesPromise","_cancelRendering","permissionsPromise","_on","cssTransform","timestamp","_off","firstPdfPage","permissions","_optionalContentConfigPromise","initializePermissions","viewerElement","textLayerFactory","annotationLayerFactory","xfaLayerFactory","PDFPageView","defaultViewport","textHighlighterFactory","structTreeLayerFactory","firstPageView","setPdfPage","ensurePageViewVisible","onePageRenderedOrForceFetch","getPagesLeft","Language","setPageLabels","labels","_this$_pageLabels$i","_this$_pageLabels5","setPageLabel","_location","_previousScrollMode","previousPageNumber","scrollDown","pages","_setScaleUpdatePages","newScale","newValue","noScroll","preset","isSameScale","presetValue","isInPresentationMode","isChangingPresentationMode","_pageWidthScaleFactor","currentPage","hPadding","vPadding","pageWidthScale","pageHeightScale","horizontalScale","label","pageWidth","pageHeight","boundingRect","_updateLocation","firstPage","normalizedScaleValue","currentPageView","getPagePoint","intLeft","intTop","pdfOpenParams","_getVisiblePages","visiblePages","numVisiblePages","newCacheSize","renderHighestPriority","isSimpleLayout","currentId","stillFullyVisible","containsElement","_isContainerRtl","direction","isHorizontalScrollbarEnabled","isVerticalScrollbarEnabled","renderingState","cancelRendering","forceRendering","currentlyVisiblePages","scrollAhead","getScrollAhead","preRenderExtra","getHighestPriority","toggleLoadingIconSpinner","ensurePdfPageLoaded","renderView","createTextHighlighter","TextHighlighter","_this$pdfDocument","_this$pdfDocument2","_this$pdfDocument3","_this$_scriptingManag","_this$pdfDocument4","hasEqualPageSizes","getPagesOverview","toggle","parity","spread","_getPageAdvance","pageLayout","yArray","expectedId","firstId","lastId","advance","increaseScale","decreaseScale","_initializePermissions","_onePageRenderedOrForceFetch","visibilityState","visibilityChangePromise","race","_ensurePageViewVisible","pageIndexSet","dummyPage","_scrollIntoView","pageSpot","_isSameScale","_resetCurrentPageView","_ensurePdfPageLoaded","_ensurePdfPageLoaded2","_this$linkService$_ca","_this$linkService","_getScrollAhead","_visible$first","_visible$last","_toggleLoadingIconSpinner","visibleIds","_app_options","MAX_CANVAS_PIXELS","compatibilityParams","_annotationMode2","_options$textLayerMod2","_options$annotationMo2","_options$textHighligh","_this$renderingQueue","renderingId","pdfPageRotate","hasRestrictedScaling","textHighlighter","paintTask","paintedViewportMap","resume","_renderError","_isStandalone","hasViewer","annotationLayer","textLayer","zoomLayer","xfaLayer","structTreeLayer","totalRotation","_renderAnnotationLayer","_renderXfaLayer","_buildXfaTextContentItems","_resetZoomLayer","removeFromDOM","zoomLayerCanvas","keepZoomLayer","keepAnnotationLayer","keepXfaLayer","_this$annotationLayer","_this$xfaLayer","zoomLayerNode","annotationLayerNode","xfaLayerNode","loadingIconDiv","_this$loadingIconDiv","redrawAnnotationLayer","redrawXfaLayer","performance","isScalingRestricted","outputScale","_this$textHighlighter","_onTextLayerRendered","relativeRotation","absRotation","textLayerViewport","textRelativeRotation","textAbsRotation","transX","transY","viewVisible","_this$loadingIconDiv2","draw","_this$annotationLayer2","_this$xfaLayer2","canvasWrapper","_this$annotationLayer3","renderContinueCallback","cont","isHighestPriority","finishPaintTask","paintOnSvg","paintOnCanvas","onRenderContinue","resultPromise","tree","treeDom","renderCapability","isCanvasHidden","showCanvas","actualSizeViewport","pixelsInViewport","maxScale","sfx","sfy","renderContext","ensureNotCancelled","svgGfx","maxTouchPoints","isAndroid","isIOS","checkCanvasSizeLimitation","OptionKind","VIEWER","API","WORKER","PREFERENCE","defaultOptions","cursorToolOnLoad","defaultUrl","defaultZoomValue","disableHistory","disablePageLabels","historyUpdateUrl","compatibility","pageColorsBackground","pageColorsForeground","pdfBugEnabled","printResolution","sidebarViewOnLoad","scrollModeOnLoad","spreadModeOnLoad","viewerCssTheme","viewOnLoad","disablePreferences","locale","language","sandboxBundleSrc","userOptions","AppOptions","userOption","defaultOption","_defaultOption$compat","_defaultOption$compat2","valueType","setAll","_hasUserOptions","CLEANUP_TIMEOUT","pdfThumbnailViewer","onIdle","highestPriorityPage","idleTimeout","printing","isThumbnailViewEnabled","setThumbnailViewer","_this$pdfThumbnailVie","scrolledDown","visibleViews","numVisible","isViewFinished","holeId","holeView","preRenderIndex","preRenderView","pageIdx","_onUpdateTextLayerMatches","divs","texts","_updateMatches","_convertMatches","matchesLength","iIndex","mm","matchIdx","divIdx","_renderMatches","isSelectedPage","selectedMatchIdx","highlightAll","prevEnd","infinity","appendTextToDiv","fromOffset","toOffset","nodeType","Node","TEXT_NODE","i0","i1","isSelected","highlightSuffix","selectedLeft","n0","n1","scrollMatchIntoView","matchIndex","clearedUntilDivIdx","highlightMatches","pageMatches","pageMatchesLength","download","blobUrl","click","DownloadManager","_openBlobUrls","downloadUrl","downloadData","isPdfData","viewerUrl","revokeObjectURL","blob","sourceEventType","WaitOnType","EVENT","TIMEOUT","waitOnEventOrTimeout","delay","EventBus","eventHandler","timeoutHandler","external","once","eventListeners","externalListeners","_this$_listeners","AutomationEventBus","webL10n","GenericL10n","_lang","_ready","setLanguage","gL10nData","gTextData","gTextProp","gLanguage","gMacros","gReadyState","gAsyncResourceLoading","getL10nResourceLinks","getL10nDictionary","innerHTML","getTranslatableChildren","getL10nAttributes","xhrLoadText","onSuccess","onFailure","_onSuccess","_onFailure","overrideMimeType","ontimeout","parseResource","successCallback","failureCallback","baseURL","evalString","parseProperties","parsedPropertiesCallback","dictionary","reBlank","reComment","reSection","reImport","reSplit","parseRawLines","rawText","extendedSyntax","parsedRawLinesCallback","currentLang","genericLang","skipLang","nextEntry","loadImport","loadLocale","_callback","langLinks","langCount","dict","locales","default_locale","defaultLocale","anyCaseLang","onResourceLoaded","gResourceCount","L10nResourceLink","load","resource","getPluralRules","locales2rules","isIn","list","isBetween","pluralRules","0","1","2","3","4","5","6","7","8","9","10","11","12","13","14","15","16","17","18","19","20","21","22","23","24","plural","_pluralRules","getL10nData","rv","substIndexes","substArguments","reIndex","reMatch","macroName","paramName","macro","reArgs","matched_text","arg","translateElement","getChildElementCount","nodeValue","textNode","childElementCount","translateFragment","elementCount","fallbackString","getText","rtlList","shortCode","getReadyState","_pdf_find_utils","FindState","FOUND","NOT_FOUND","PENDING","FIND_TIMEOUT","MATCH_SCROLL_OFFSET_TOP","MATCH_SCROLL_OFFSET_LEFT","CHARACTERS_TO_NORMALIZE","DIACRITICS_EXCEPTION","DIACRITICS_EXCEPTION_STR","DIACRITICS_REG_EXP","SPECIAL_CHARS_REG_EXP","NOT_DIACRITIC_FROM_END_REG_EXP","NOT_DIACRITIC_FROM_START_REG_EXP","normalizationRegex","normalize","rawDiacriticsPositions","normalized","shiftOrigin","eol","hasDiacritics","replacement","_rawDiacriticsPositio","hasTrailingDashEOL","endsWith","getOriginalIndex","diffs","_PDFFindController_brand","PDFFindController","_linkService","_eventBus","onFind","onFindBarClose","_highlightMatches","_pageMatches","_pageMatchesLength","_selected","_state","_pdfDocument","_scrollMatches","_onFind","shouldDirtyMatch","_dirtyMatch","updateUIState","extractText","findbarClosed","pendingTimeout","_findTimeout","nextMatch","updateAllPages","_reset","_offset","wrapped","_extractTextPromises","_pageContents","_pageDiffs","_hasDiacritics","_matchesCountTotal","_pagesToSearch","_pendingFindMatches","_resumePageIdx","_get_query","_rawQuery","_normalizedQuery","_shouldDirtyMatch","_isEntireWord","startIdx","getCharacterType","_calculateRegExpMatch","entireWord","pageContent","isEntireWord","matchPos","matchLen","_convertToRegExpString","matchDiacritics","isUnicode","p5","trailingSpaces","_calculateMatch","_classPrivateGetter","caseSensitive","convertToRegExpString","reverse","isUnicodePart","queryPart","calculateRegExpMatch","updatePage","nextPageMatch","pageMatchesCount","updateUIResultsCount","_extractText","extractTextCapability","textItem","_updatePage","_updateAllPages","_nextMatch","findPrevious","currentPageIndex","calculateMatch","numPageMatches","updateMatch","advanceOffsetPage","_matchesReady","numMatches","_nextPageMatch","matchesReady","_advanceOffsetPage","_updateMatch","_onFindBarClose","_requestMatchesCount","_this$_pageMatches$i","_updateUIResultsCount","matchesCount","requestMatchesCount","_updateUIState","_this$_state$query","_this$_state","rawQuery","CharacterType","SPACE","ALPHA_LETTER","PUNCT","HAN_LETTER","KATAKANA_LETTER","HIRAGANA_LETTER","HALFWIDTH_KATAKANA_LETTER","THAI_LETTER","isAlphabeticalScript","charCode","isAsciiAlpha","isAsciiDigit","isAsciiSpace","isHan","isKatakana","isHiragana","isHalfwidthKatakana","isThai","_event_utils","HASH_CHANGE_TIMEOUT","POSITION_UPDATED_THRESHOLD","UPDATE_VIEWAREA_TIMEOUT","getCurrentHash","PDFHistory","_initialized","_fingerprint","_boundEvents","_isPagesLoaded","initialize","fingerprint","resetHistory","updateUrl","reInitialized","_updateUrl","_bindEvents","history","_popStateInProgress","_blockHashChange","_currentHash","_numPositionUpdates","_uid","_maxUid","_destination","_position","_isValidState","_parseCurrentHash","_pushOrReplaceState","_updateInternalState","uid","_initialRotation","_initialBookmark","_pageHide","_unbindEvents","_updateViewareaTimeout","_isValidPage","forceReplace","isDestHashesEqual","isDestArraysEqual","_this$_destination","_tryPushCurrentPosition","popStateInProgress","initialBookmark","initialRotation","shouldReplace","newState","newUrl","replaceState","pushState","temporary","checkReload","perfEntry","getEntriesByType","removeTemporary","checkNameddest","nameddest","_updateViewarea","_popState","newHash","hashChanged","updateViewarea","popState","pageHide","destHash","pushHash","firstDest","secondDest","isEntryEqual","PDFScriptingManager","scriptingFactory","docPropertiesLookup","_pdfViewer","_closeCapability","_destroyCapability","_scripting","_sandboxBundleSrc","_scriptingFactory","_docPropertiesLookup","_this13$_scripting3","_destroyScripting","objects","calculationOrder","docActions","_createScripting","_internalEvents","_updateFromSandbox","_this13$_scripting","dispatchEventInSandbox","_dispatchPageClose","_dispatchPageOpen","_pageOpenPending","_ref3","_this13$_scripting2","_this13$_closeCapabil","_domEvents","docProperties","_getDocProperties","createSandbox","appInfo","docInfo","dispatchWillSave","_this14$_scripting","dispatchDidSave","_this15$_scripting","dispatchWillPrint","_this16$_scripting","dispatchDidPrint","_this17$_scripting","destroyPromise","_this$_destroyCapabil","_visitedPages","siblings","command","modes","elementId","CustomEvent","_this18$_pdfDocument","_this19","visitedPages","actionsPromise","_pageView$pdfPage","_this19$_scripting","_this20","_this20$_scripting","_this21","createScripting","GenericScripting","_this22","_this22$_destroyCapab2","_this22$_destroyCapab","destroySandbox","filesize","authors","pdfjsSandbox","QuickJSSandbox","_this23","sandbox","_this24","_this25","nukeSandbox","_default_factory","_pdf_viewer","_download_manager","_genericl10n","_pdf_find_controller","_pdf_history","_pdf_scripting_manager","createEventBus","pdfJsViewer","destroy$","globalEventBus","attachDOMEventsToEventBus","fromEvent","pipe","takeUntil","subscribe","createEvent","initCustomEvent","initEvent","attachmentsCount","outerContainer","active","switchInProgress","outlineCount","isSSR","PDFJS","RenderTextMode","PdfViewerComponent","ngZone","_cMapsUrl","_imageResourcesPath","_renderText","_renderTextMode","ENABLED","_stickToPage","_originalSize","_page","_zoom","_zoomScale","_rotation","_showAll","_canAutoResize","_fitToPage","_externalLinkTarget","_showBorders","resizeTimeout","pageScrollTimeout","isInitialized","Subject","afterLoadComplete","EventEmitter","pageRendered","pageInitialized","textLayerRendered","pageChange","pdfWorkerSrc","pdfJsVersion","versionSpecificPdfWorkerUrl","cMapsUrl","originalPage","_pdf","getValidPageNumber","emit","renderText","renderTextMode","originalSize","showAll","stickToPage","zoomScale","autoresize","Boolean","fitToPage","showBorders","getLinkTarget","PDFJSViewer","ngAfterViewChecked","pdfViewerContainer","nativeElement","ngOnChanges","ngOnInit","setupResizeListener","ngOnDestroy","changes","loadPDF","DISABLED","resetPdfDocument","setupViewer","currentValue","_latestScrolledPage","updateSize","viewportWidth","CSS_UNITS","viewPort","getScale","pdfLinkService","pdfFindController","getPDFLinkServiceConfig","linkTarget","initEventBus","initPDFServices","getPDFOptions","getDocumentParams","srcType","lastLoaded","progressData","pdf","viewportHeight","borderSize","BORDER_WIDTH","pdfContainerWidth","pdfContainerHeight","runOutsideAngular","debounceTime","ElementRef","NgZone","selectors","viewQuery","PdfViewerComponent_Query","rf","Component","template","ViewChild","Output","Input","PdfViewerModule","NgModule","declarations"],"sourceRoot":"webpack:///","x_google_ignoreList":[65,66,67,68,69,70,71,72,73,74,75,76,77]}