{"version":3,"file":"node_modules_tei_booking-activities_fesm2020_tei-booking-activities-activities-categories-set-cc564e.js","mappings":"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","sources":["./projects/tei/activities/src/lib/@services/activities-categories-settings.service.ts","./projects/tei/activities/src/lib/components/activities-add-category-dialog/activities-add-category-dialog.component.html","./projects/tei/activities/src/lib/components/activities-delete-category-dialog/activities-delete-category-dialog.component.html","./projects/tei/activities/src/lib/components/activities-edit-category-dialog/activities-edit-category-dialog.component.html","./projects/tei/activities/src/lib/pages/activities-categories-settings/activities-categories-settings.component.html","./projects/tei/activities/src/lib/@intermediate/activities-categories-settings/activities-categories-settings.model.ts","./projects/tei/activities/src/lib/@services/tree-list-menu-actions.service.ts","./projects/tei/activities/src/lib/components/activities-add-category-dialog/activities-add-category-dialog.component.ts","./projects/tei/activities/src/lib/components/activities-add-category-dialog/activities-add-category-dialog.module.ts","./projects/tei/activities/src/lib/components/activities-delete-category-dialog/activities-delete-category-dialog.component.ts","./projects/tei/activities/src/lib/components/activities-delete-category-dialog/activities-delete-category-dialog.module.ts","./projects/tei/activities/src/lib/components/activities-edit-category-dialog/activities-edit-category-dialog.component.ts","./projects/tei/activities/src/lib/components/activities-edit-category-dialog/activities-edit-category-dialog.module.ts","./projects/tei/activities/src/lib/pages/activities-categories-settings/activities-categories-settings.component.ts","./projects/tei/activities/src/lib/pages/activities-categories-settings/activities-categories-settings.module.ts"],"sourcesContent":["import { HttpClient } from '@angular/common/http';\nimport { Inject, Injectable } from '@angular/core';\nimport { IAPIBaseUrlProvider } from '@tei/core';\nimport { Observable } from 'rxjs';\nimport { IActivitiesCategoriesSettingsService } from '../@intermediate/activities-categories-settings/activities-categories-settings.interface';\nimport { CreateActivitiesSettingsRequest, CreateActivitiesSettingsResponse, DeleteActivitiesSettingsRequest, DeleteActivitiesSettingsResponse, EditActivitiesSettingsRequest, EditActivitiesSettingsResponse, GetActivitiesSettingsResponse, GetActivitiesSettingsResquest, SortOrderActivitiesSettingsRequest, SortOrderActivitiesSettingsResponse } from '../@intermediate/activities-categories-settings/activities-categories-settings.model';\n\n@Injectable({\n  providedIn: 'root'\n})\n\nexport class ActivitiesCategoriesSettingsService implements IActivitiesCategoriesSettingsService\n{\n  private serviceUrl: string;\n\n  constructor(@Inject('IAPIBaseUrlProvider') protected apiBaseUrlProvider: IAPIBaseUrlProvider, private http: HttpClient)\n  {\n    this.serviceUrl = this.apiBaseUrlProvider.getBaseUrl() + \"/Booking/Activities/ActivityCategory\";\n  }\n\n  Get(request: GetActivitiesSettingsResquest): Observable<any>\n  {\n    const apiUrl = this.serviceUrl;\n    return this.http.get<GetActivitiesSettingsResponse>(apiUrl, { params: request as any });\n  }\n\n  SortOrder(request: SortOrderActivitiesSettingsRequest): Observable<SortOrderActivitiesSettingsResponse>\n  {\n    const apiUrl = this.serviceUrl + '/SortOrder';\n    return this.http.post<SortOrderActivitiesSettingsResponse>(apiUrl, request);\n  }\n\n  Create(request: CreateActivitiesSettingsRequest): Observable<CreateActivitiesSettingsResponse>\n  {\n    const apiUrl = this.serviceUrl + '/Create';\n    return this.http.post<CreateActivitiesSettingsResponse>(apiUrl, request);\n  }\n\n  Delete(request: DeleteActivitiesSettingsRequest): Observable<DeleteActivitiesSettingsResponse>\n  {\n    const apiUrl = this.serviceUrl + '/Delete';\n    return this.http.post<DeleteActivitiesSettingsResponse>(apiUrl, request);\n  }\n\n  Edit(request: EditActivitiesSettingsRequest): Observable<EditActivitiesSettingsResponse>\n  {\n    const apiUrl = this.serviceUrl + '/Edit';\n    return this.http.post<DeleteActivitiesSettingsResponse>(apiUrl, request);\n  }\n\n}\n","<form class=\"o-dialog-container\" *ngIf=\"data\" [formGroup]=\"categoryForm\">\n  <div class=\"m-dialog-header\">\n    <div class=\"row align-items-center\">\n      <div class=\"col\">\n        <div class=\"a-text-h3\">\n          {{ 'ACTIVITIES.CATEGORIES.ADD_CATEGORY' | teiTextTranslate }}\n        </div>\n      </div>\n      <div class=\"col-auto\">\n        <button (click)=\"closeDialog()\" mat-icon-button id=\"a-button-activities-add-category-dialog-close\">\n          <mat-icon>close</mat-icon>\n        </button>\n      </div>\n    </div>\n  </div>\n  <mat-divider></mat-divider>\n  <div class=\"m-dialog-content\">\n    <div class=\"a-text-label\">\n      {{ 'ACTIVITIES.CATEGORIES.CATEGORY_ID' | teiTextTranslate }}\n    </div>\n    <mat-form-field class=\"no-label w-100\" appearance=\"outline\">\n      <input matInput formControlName=\"CategoryCode\" maxlength=\"64\" />\n      <mat-hint align=\"end\">{{categoryForm.get('CategoryCode').value?.length || 0}}/64</mat-hint>\n    </mat-form-field>\n\n    <div class=\"a-text-label\">\n      {{ 'ACTIVITIES.CATEGORIES.CATEGORY_NAME' | teiTextTranslate }}\n    </div>\n    <mat-form-field class=\"no-label w-100\" appearance=\"outline\">\n      <input matInput formControlName=\"CategoryName\" maxlength=\"64\" />\n      <mat-hint align=\"end\">{{categoryForm.get('CategoryName').value?.length || 0}}/64</mat-hint>\n    </mat-form-field>\n\n    <div class=\"a-text-label\">\n      {{ 'ACTIVITIES.CATEGORIES.PARENT_CATEGORY' | teiTextTranslate }}\n    </div>\n    <mat-form-field class=\"no-label select w-100\" appearance=\"outline\">\n      <mat-select formControlName=\"ParentID\">\n        <mat-option [value]=\"option?.ActivityCategoryID\" *ngFor=\"let option of getAvailableParentCategories()\">\n          <div class=\"d-flex flex-row align-items-center\" [title]=\"option?.CategoryName\">\n            <span class=\"text-truncate\"\n              style=\"max-width: 100%; overflow: hidden; text-overflow: ellipsis; white-space: nowrap;\">\n              {{ getCategoryDisplayName(option) }}\n            </span>\n          </div>\n        </mat-option>\n      </mat-select>\n    </mat-form-field>\n  </div>\n  <mat-divider></mat-divider>\n  <div class=\"m-dialog-actions m-dialog-actions-sm justify-content-end\">\n    <button mat-button mat-stroked-button class=\"mr-1 a-second-step-button\"\n      id=\"a-button-activities-add-category-dialog-close-btn\" (click)=\"closeDialog()\">\n      <span>{{ 'ACTIVITIES.CATEGORIES.CANCEL' | teiTextTranslate }}</span>\n    </button>\n    <button [disabled]=\"categoryForm.invalid\" mat-button mat-flat-button [color]=\"'accent'\" (click)=\"submitDialog()\"\n      id=\"a-button-activities-add-category-dialog-confirm\">\n      {{ 'ACTIVITIES.CATEGORIES.CONFIRM' | teiTextTranslate }}\n    </button>\n  </div>\n  <tei-loading [show]=\"isLoading\"></tei-loading>\n</form>","<form class=\"o-dialog-container\" *ngIf=\"data\">\n  <div class=\"m-dialog-header\">\n    <div class=\"row align-items-center\">\n      <div class=\"col\">\n        <div class=\"a-text-h3\">{{ 'ACTIVITIES.CATEGORIES.DELETE_CATEGORY' | teiTextTranslate}}</div>\n      </div>\n      <div class=\"col-auto\">\n        <button (click)=\"closeDialog()\" mat-icon-button id=\"a-button-activities-add-category-dialog-close\">\n          <mat-icon>close</mat-icon>\n        </button>\n      </div>\n    </div>\n  </div>\n  <mat-divider></mat-divider>\n\n  <div class=\"m-dialog-content mb-5\">\n    <span class=\"a-text-default\">{{'ACTIVITIES.CATEGORIES.DELETE_CATEGORY_CONFIRM_MESSAGE' | teiTextTranslate}} <span\n        class=\"a-text-primary\"> {{data.CategoryName}}</span>?</span>\n  </div>\n\n  <mat-divider></mat-divider>\n\n  <div class=\"m-dialog-actions m-dialog-actions-sm justify-content-end\">\n    <button mat-button mat-stroked-button class=\"mr-1 a-second-step-button\"\n      id=\"a-button-activities-add-category-dialog-close-btn\" (click)=\"closeDialog()\">\n      <span>{{'ACTIVITIES.CATEGORIES.CLOSE' | teiTextTranslate}}</span>\n    </button>\n    <button mat-button mat-flat-button [color]=\"'warn'\" (click)=\"submitDialog()\"\n      id=\"a-button-activities-add-category-delete\">\n      {{ 'ACTIVITIES.CATEGORIES.DELETE' | teiTextTranslate }}\n    </button>\n\n  </div>\n  <tei-loading [show]=\"isLoading\"></tei-loading>","<form class=\"o-dialog-container\" *ngIf=\"data && categoryForm?.value\" [formGroup]=\"categoryForm\">\n  <div class=\"m-dialog-header\">\n    <div class=\"row align-items-center\">\n      <div class=\"col\">\n        <div class=\"a-text-h3\">\n          {{ 'ACTIVITIES.CATEGORIES.EDIT_CATEGORY' | teiTextTranslate }}\n        </div>\n      </div>\n      <div class=\"col-auto\">\n        <button (click)=\"closeDialog()\" mat-icon-button id=\"a-button-activities-edit-category-dialog-close\">\n          <mat-icon>close</mat-icon>\n        </button>\n      </div>\n    </div>\n  </div>\n  <mat-divider></mat-divider>\n  <div class=\"m-dialog-content\">\n    <div class=\"a-text-label\">\n      {{ 'ACTIVITIES.CATEGORIES.CATEGORY_ID' | teiTextTranslate }}\n    </div>\n    <mat-form-field class=\"no-label w-100\" appearance=\"outline\">\n      <input matInput formControlName=\"CategoryCode\" maxlength=\"64\" />\n      <mat-hint align=\"end\">{{categoryForm.get('CategoryCode').value?.length || 0}}/64</mat-hint>\n    </mat-form-field>\n\n    <div class=\"a-text-label\">\n      {{ 'ACTIVITIES.CATEGORIES.CATEGORY_NAME' | teiTextTranslate }}\n    </div>\n    <mat-form-field class=\"no-label w-100\" appearance=\"outline\">\n      <input matInput formControlName=\"CategoryName\" maxlength=\"64\" />\n      <mat-hint align=\"end\">{{categoryForm.get('CategoryName').value?.length || 0}}/64</mat-hint>\n    </mat-form-field>\n\n    <div class=\"a-text-label\">\n      {{ 'ACTIVITIES.CATEGORIES.PARENT_CATEGORY' | teiTextTranslate }}\n    </div>\n    <mat-form-field class=\"no-label select w-100\" appearance=\"outline\">\n      <mat-select formControlName=\"ParentID\">\n        <mat-option [value]=\"option?.ActivityCategoryID\" *ngFor=\"let option of getAvailableParentCategories()\">\n          <div class=\"d-flex flex-row align-items-center\" [title]=\"option?.CategoryName\">\n            <span class=\"text-truncate\"\n              style=\"max-width: 100%; overflow: hidden; text-overflow: ellipsis; white-space: nowrap;\">\n              {{ getCategoryDisplayName(option) }}\n            </span>\n          </div>\n        </mat-option>\n      </mat-select>\n    </mat-form-field>\n  </div>\n  <mat-divider></mat-divider>\n  <div class=\"m-dialog-actions m-dialog-actions-sm justify-content-end\">\n    <button mat-button mat-stroked-button class=\"mr-1 a-second-step-button\"\n      id=\"a-button-activities-add-category-dialog-cancel\" (click)=\"closeDialog()\">\n      <span>{{ 'ACTIVITIES.CATEGORIES.CANCEL' | teiTextTranslate }}</span>\n    </button>\n    <button [disabled]=\"categoryForm.invalid\" mat-button mat-flat-button [color]=\"'accent'\" (click)=\"submitDialog()\"\n      id=\"a-button-activities-add-category-dialog-confirm\">\n      {{ 'ACTIVITIES.CATEGORIES.CONFIRM' | teiTextTranslate }}\n    </button>\n  </div>\n  <tei-loading [show]=\"isLoading\"></tei-loading>\n</form>","<div class=\"d-flex justify-content-between\" style=\"max-width: 1000px; margin-left: 0;\" class=\"container-shell\">\n  <div class=\"row\">\n    <div class=\"col-md-12\">\n      <tei-material-bread-crumb *ngIf=\"breadCrumbData.length\" [breadCrumbData]=\"breadCrumbData\">\n      </tei-material-bread-crumb>\n\n      <div class=\"d-flex justify-content-between align-items-center mb-2\">\n        <div class=\"a-text-h3\">{{'ACTIVITIES.CATEGORIES.CATEGORIES' | teiTextTranslate}}</div>\n        <div class=\"\">\n          <button *ngIf=\"showAddCategoryButton\" mat-raised-button type=\"button\" color=\"primary\" class=\"\"\n            (click)=\"openCreateCategoryDialog()\">{{'ACTIVITIES.CATEGORIES.ADD_CATEGORY' | teiTextTranslate}}</button>\n        </div>\n      </div>\n\n      <mat-card class=\"o-card p-0\">\n        <div class=\"d-flex flex-wrap o-tree-page-list\">\n          <mat-tree class=\"o-card outline mat-tree p-0 w-100\" [dataSource]=\"dataSource\" [treeControl]=\"treeControl\">\n            <mat-tree-node *matTreeNodeDef=\"let node\" matTreeNodeToggle matTreeNodePadding>\n              <button type=\"button\" mat-icon-button disabled matTreeNodeToggle class=\"a-tree-node-item-expand-toggle\"\n                [id]=\"'a-tree-node-item-expand-toggle-'+node.ActivityCategoryID\">\n                <mat-icon class=\"mat-icon-rtl-mirror\">\n                </mat-icon>\n              </button>\n              <div class=\"a-tree-node-draggable\" draggable=\"true\"\n                [ngClass]=\"{'a-tree-node-item-drop-above': dragNodeExpandOverArea === dropOverAreaType.Above && dragNodeExpandOverNode === node,\n                                                    'a-tree-node-item-drop-below': dragNodeExpandOverArea === dropOverAreaType.Below && dragNodeExpandOverNode === node,\n                                                    'a-tree-node-item-drop-center': dragNodeExpandOverArea === dropOverAreaType.Center && dragNodeExpandOverNode === node}\"\n                (dragstart)=\"handleDragStart($event, node);\" (dragover)=\"handleDragOver($event, node);\"\n                (dragend)=\"handleDragEnd($event)\" (drop)=\"handleDrop($event, node);\"\n                (touchstart)=\"handleTouchStart($event,node);\" (touchmove)=\"handleTouchMove($event,node);\"\n                (touchend)=\"handleTouchEnd($event,node);\">\n                <div class=\"flex-grow-1\" [id]=\"'a-tree-node-item-draggable-'+ node.ActivityCategoryID\">\n                  <span class=\"checklist-leaf-node\">\n                    <span class=\"a-text-primary nodeContent\">\n                      {{node.CategoryName}}\n                    </span>\n                  </span>\n                </div>\n                <div class=\"\">\n                  <button class=\"a-more-button\" mat-icon-button [matMenuTriggerFor]=\"catnodeemenu\" type=\"button\">\n                    <mat-icon>more_vert</mat-icon>\n                  </button>\n                  <mat-menu #catnodeemenu=\"matMenu\">\n                    <button mat-menu-item type=\"button\" class=\"a-manage-page\"\n                      [id]=\"'a-manage-page-'+ node.ActivityCategoryID\" (click)=\"openEditCategoryDialog(node)\">\n                      <mat-icon>create</mat-icon>\n                      <span>{{'ACTIVITIES.CATEGORIES.EDIT' | teiTextTranslate}}</span>\n                    </button>\n                    <button mat-menu-item type=\"button\" class=\"a-remove-page\"\n                      [id]=\"'a-remove-page-'+ node.ActivityCategoryID\" (click)=\"openRemoveCategoryDialog(node)\">\n                      <mat-icon>delete_forever</mat-icon>\n                      <span>{{'ACTIVITIES.CATEGORIES.DELETE' | teiTextTranslate}}</span>\n                    </button>\n                  </mat-menu>\n                </div>\n              </div>\n\n            </mat-tree-node>\n\n            <mat-tree-node *matTreeNodeDef=\"let node; when: hasChild\" matTreeNodePadding>\n              <button type=\"button\" mat-icon-button matTreeNodeToggle class=\"a-tree-node-item-expand-toggle\"\n                [id]=\"'a-tree-node-item-expand-toggle-'+ node.ActivityCategoryID\">\n                <mat-icon class=\"mat-icon-rtl-mirror\">\n                  {{treeControl.isExpanded(node) ? 'expand_more' : 'chevron_right'}}\n                </mat-icon>\n              </button>\n              <div class=\"a-tree-node-draggable\" draggable=\"true\"\n                [ngClass]=\"{'a-tree-node-item-drop-above': dragNodeExpandOverArea === dropOverAreaType.Above && dragNodeExpandOverNode === node,\n                                                    'a-tree-node-item-drop-below': dragNodeExpandOverArea === dropOverAreaType.Below && dragNodeExpandOverNode === node,\n                                                    'a-tree-node-item-drop-center': dragNodeExpandOverArea === dropOverAreaType.Center && dragNodeExpandOverNode === node}\"\n                (dragstart)=\"handleDragStart($event, node);\" (dragover)=\"handleDragOver($event, node);\"\n                (dragend)=\"handleDragEnd($event)\" (drop)=\"handleDrop($event, node);\"\n                (touchstart)=\"handleTouchStart($event,node);\" (touchmove)=\"handleTouchMove($event,node);\"\n                (touchend)=\"handleTouchEnd($event,node);\">\n                <div class=\"flex-grow-1\" style=\"z-index: -1; position: relative;\"\n                  [id]=\"'a-tree-node-item-draggable-'+node.ActivityCategoryID\">\n\n                  <span class=\"checklist-leaf-node\">\n                    <span class=\"a-text-primary nodeContent\">\n                      {{node.CategoryName}}\n                    </span>\n                  </span>\n                </div>\n                <div class=\"\">\n                  <button mat-icon-button class=\"a-more-button\" [matMenuTriggerFor]=\"catleafemenu\" type=\"button\">\n                    <mat-icon>more_vert</mat-icon>\n                  </button>\n                  <mat-menu #catleafemenu=\"matMenu\">\n                    <button mat-menu-item type=\"button\" class=\"a-manage-page\"\n                      [id]=\"'a-manage-page-'+ node.ActivityCategoryID\" (click)=\"openEditCategoryDialog(node)\">\n                      <mat-icon>create</mat-icon>\n                      <mat-label class=\"a-text-label\">{{'ACTIVITIES.CATEGORIES.EDIT' |\n                        teiTextTranslate}}</mat-label>\n                    </button>\n                    <button mat-menu-item type=\"button\" class=\"a-remove-page\"\n                      [id]=\"'a-remove-page-'+ node.ActivityCategoryID\" (click)=\"openRemoveCategoryDialog(node)\">\n                      <mat-icon>delete_forever</mat-icon>\n                      <mat-label class=\"a-text-label\">{{'ACTIVITIES.CATEGORIES.DELETE' |\n                        teiTextTranslate}}</mat-label>\n                    </button>\n                  </mat-menu>\n                </div>\n              </div>\n\n            </mat-tree-node>\n          </mat-tree>\n          <span #emptyItem></span>\n\n\n        </div>\n      </mat-card>\n    </div>\n  </div>\n  <tei-loading [show]=\"isLoading\"></tei-loading>","export class GetActivitiesSettingsResponse\n{\n  ActivityCategories: SettingsCategoryItem[];\n  ActivityCategoriesJagged: SettingsCategoryItemJagged[];\n}\n\nexport class GetActivitiesSettingsResquest\n{\n\n}\n\n\nexport class SettingsCategoryItem\n{\n  ActivityCategoryID: number;\n  CategoryDesc?: string;\n  CategoryName: string;\n  CategoryCode: string;\n  Childs: SettingsCategoryItem[];\n  ParentID: number;\n  SortOrder: number;\n  UID: string;\n}\n\nexport class FlatSettingsCategoryItemJagged\n{\n  ActivityCategoryID: number;\n  CategoryDesc: string;\n  CategoryName: string;\n  CategoryNameJagged: string;\n  Level: number;\n  ParentID: number;\n  SortOrder: number;\n  expandable: boolean;\n}\n\nexport class SettingsCategoryItemJagged\n{\n  ActivityCategoryID: number;\n  CategoryDesc: string;\n  CategoryName: string;\n  CategoryNameJagged: string;\n  Level: number;\n  ParentID: number;\n  SortOrder: number;\n}\n\nexport class ReorderWebNavigationResponse\n{\n\n}\n\nexport class ReorderWebNavigationRequest\n{\n  ActivityCategoryID: number;\n  ParentID?: number | null;\n  SortOrder: number;\n}\n\n\nexport enum DropOverAreaType\n{\n  Above,\n  Below,\n  Center\n}\n\nexport class SortOrderActivitiesSettingsRequest\n{\n  ActivityCategoryID: number;\n  ParentID: number | null;\n  SortOrder: number;\n}\n\n\nexport class CreateCategoryFormModel\n{\n  ParentID: number;\n  CategoryName: string;\n  CategoryDesc: string;\n  SortOrder: number;\n}\n\nexport class CreateActivitiesSettingsRequest extends CreateCategoryFormModel\n{\n\n}\n\nexport class CreateActivitiesSettingsResponse\n{\n\n}\n\nexport class DeleteActivitiesSettingsRequest\n{\n  ActivityCategoryID: number;\n}\n\nexport class DeleteActivitiesSettingsResponse\n{\n\n}\n\nexport class EditActivitiesSettingsRequest\n{\n  ActivityCategoryID: number;\n  ParentID: number;\n  CategoryName: string;\n  CategoryCode: string;\n  CategoryDesc: string;\n  SortOrder: number;\n}\n\nexport class EditActivitiesSettingsResponse\n{\n\n}\n\n\n\nexport class SortOrderActivitiesSettingsResponse\n{\n\n}","import { Injectable } from '@angular/core';\nimport { BehaviorSubject } from 'rxjs';\nimport { DropOverAreaType, SettingsCategoryItem } from '../@intermediate/activities-categories-settings/activities-categories-settings.model';\n\n@Injectable()\nexport class TreeListMenuActionsService\n{\n  dataChange = new BehaviorSubject<SettingsCategoryItem[]>([]);\n\n  get data(): SettingsCategoryItem[] { return this.dataChange.value; }\n\n  initialize(data: SettingsCategoryItem[])\n  {\n    this.assignUIDs(data);\n    this.dataChange.next(data);\n  }\n\n  /**\n   * Build the file structure tree. The `value` is the Json object, or a sub-tree of a Json object.\n   * The return value is the list of `FlatNode`.\n   */\n  buildFileTree(obj: object, level: number): SettingsCategoryItem[]\n  {\n    return Object.keys(obj).reduce<SettingsCategoryItem[]>((accumulator, key) =>\n    {\n      const value = obj[key];\n      const node = new SettingsCategoryItem();\n      node.CategoryName = key;\n\n      if (value != null)\n      {\n        if (typeof value === 'object')\n        {\n          node.Childs = this.buildFileTree(value, level + 1);\n        } else\n        {\n          node.CategoryName = value;\n        }\n      }\n\n      return accumulator.concat(node);\n    }, []);\n  }\n\n  insertItem(parent: SettingsCategoryItem, item: SettingsCategoryItem): SettingsCategoryItem\n  {\n    if (!parent)\n    {\n      const newItem = {\n        UID: this.getGuid(),\n        ActivityCategoryID: item.ActivityCategoryID,\n        CategoryName: item.CategoryName,\n        SortOrder: 0,\n        Childs: [],\n        CategoryCode: item.CategoryCode,\n        CategoryDesc: item.CategoryDesc\n      } as SettingsCategoryItem;\n\n      this.data.push(newItem);\n      this.dataChange.next(this.data);\n      return newItem;\n    }\n\n    const parentNode = this.getParentFromNodes(parent);\n    const newItem = {\n      UID: this.getGuid(),\n      ActivityCategoryID: item.ActivityCategoryID,\n      CategoryName: item.CategoryName,\n      SortOrder: parent.Childs.length + 1,\n      Childs: [],\n      CategoryCode: item.CategoryCode,\n      CategoryDesc: item.CategoryDesc\n    } as SettingsCategoryItem;\n    if (parentNode == null)\n    {\n      let parentToModify = this.data.find(item => item.UID === parent.UID);\n      if (parentToModify)\n      {\n        if (!parentToModify.Childs)\n        {\n          parentToModify.Childs = [];\n        }\n        parentToModify.Childs.push(newItem);\n      }\n    } else\n    {\n      let parentToModify = parentNode.Childs.find(item => item.UID === parent.UID);\n      if (parentToModify)\n      {\n        if (!parentToModify.Childs)\n        {\n          parentToModify.Childs = [];\n        }\n        parentToModify.Childs.push(newItem);\n      }\n    }\n\n    this.dataChange.next(this.data);\n    return newItem;\n  }\n\n  insertItemAbove(node: SettingsCategoryItem, newNode: SettingsCategoryItem, sortOrder?: number): SettingsCategoryItem\n  {\n    const parentNode = this.getParentFromNodes(node);\n\n    const newItem = {\n      UID: this.getGuid(),\n      ActivityCategoryID: newNode.ActivityCategoryID,\n      CategoryName: newNode.CategoryName,\n      SortOrder: sortOrder || 0,\n      Childs: [],\n      ParentID: node.ParentID,\n      CategoryCode: newNode.CategoryCode,\n      CategoryDesc: newNode.CategoryDesc\n    } as SettingsCategoryItem;\n\n    if (parentNode != null)\n    {\n      parentNode.Childs.splice(parentNode.Childs.findIndex(item => item.UID == node.UID), 0, newItem);\n    } else\n    {\n      this.data.splice(this.data.findIndex(item => item.UID == node.UID), 0, newItem);\n    }\n    this.dataChange.next(this.data);\n    return newItem;\n  }\n\n  insertItemBelow(node: SettingsCategoryItem, newNode: SettingsCategoryItem): SettingsCategoryItem\n  {\n    const parentNode = this.getParentFromNodes(node);\n    const newItem = {\n      UID: this.getGuid(),\n      ActivityCategoryID: newNode.ActivityCategoryID,\n      CategoryName: newNode.CategoryName,\n      SortOrder: 0,\n      Childs: [],\n      ParentID: node.ParentID,\n      CategoryCode: newNode.CategoryCode,\n      CategoryDesc: newNode.CategoryDesc\n    } as SettingsCategoryItem;\n    if (parentNode != null)\n    {\n      parentNode.Childs.splice(parentNode.Childs.findIndex(item => item.UID == node.UID) + 1, 0, newItem);\n    } else\n    {\n      this.data.splice(this.data.findIndex(item => item.UID == node.UID) + 1, 0, newItem);\n    }\n    this.dataChange.next(this.data);\n    return newItem;\n  }\n\n  getParentFromNodes(node: SettingsCategoryItem): SettingsCategoryItem\n  {\n    for (let i = 0; i < this.data.length; ++i)\n    {\n      const currentRoot = this.data[i];\n      const parent = this.getParent(currentRoot, node);\n      if (parent != null)\n      {\n        return parent;\n      }\n    }\n    return null;\n  }\n\n  getParent(currentRoot: SettingsCategoryItem, node: SettingsCategoryItem): SettingsCategoryItem\n  {\n    if (currentRoot.Childs && currentRoot.Childs.length > 0)\n    {\n      for (let i = 0; i < currentRoot.Childs.length; ++i)\n      {\n        const child = currentRoot.Childs[i];\n        if (child.UID === node.UID)\n        {\n          return currentRoot;\n        } else if (child.Childs && child.Childs.length > 0)\n        {\n          const parent = this.getParent(child, node);\n          if (parent != null)\n          {\n            return parent;\n          }\n        }\n      }\n    }\n    return null;\n  }\n\n  updateItem(node: SettingsCategoryItem, name: string)\n  {\n    node.CategoryName = name;\n    this.dataChange.next(this.data);\n  }\n\n  deleteItem(node: SettingsCategoryItem)\n  {\n    this.deleteNode(this.data, node);\n    this.dataChange.next(this.data);\n  }\n\n  reviseSortOrder(): void\n  {\n    this.updateSortOrder(this.data);\n    this.dataChange.next(this.data);\n  }\n\n  private updateSortOrder(pages: SettingsCategoryItem[]): SettingsCategoryItem[]\n  {\n    pages.forEach((page, index) =>\n    {\n      page.SortOrder = index + 1;\n      if (page.Childs && page.Childs.length > 0)\n      {\n        this.updateSortOrder(page.Childs); // Recurse for children\n      }\n    });\n    return pages;\n  }\n\n  reviseSortOrderAndGetSortNumber(page: SettingsCategoryItem): any\n  {\n    var sortOrder = this.updateSortOrderAndGetSorNumber(this.data, page);\n    this.dataChange.next(this.data);\n    return sortOrder;\n  }\n\n  private updateSortOrderAndGetSorNumber(pages: SettingsCategoryItem[], inputPage: SettingsCategoryItem)\n  {\n    let sortOrder = 0;\n    pages.forEach((page, index) =>\n    {\n      page.SortOrder = index + 1;\n      if (page.UID == inputPage.UID)\n        sortOrder = page.SortOrder;\n      if (page.Childs && page.Childs.length > 0)\n      {\n        let nestSortOrder = this.updateSortOrderAndGetSorNumber(page.Childs, inputPage); // Recurse for children\n        if (nestSortOrder > 0)\n          sortOrder = nestSortOrder;\n      }\n    });\n    return sortOrder;\n  }\n\n  copyPasteItem(item: SettingsCategoryItem, parent: SettingsCategoryItem): SettingsCategoryItem\n  {\n    const newItem = this.insertItem(parent, item);\n    if (item.Childs)\n    {\n      item.Childs.forEach(child =>\n      {\n        this.copyPasteItem(child, newItem);\n      });\n    }\n    return newItem;\n  }\n\n  copyPasteItemAbove(from: SettingsCategoryItem, to: SettingsCategoryItem): SettingsCategoryItem\n  {\n    const newItem = this.insertItemAbove(to, from, from.SortOrder);\n    if (from.Childs)\n    {\n      from.Childs.forEach(child =>\n      {\n        this.copyPasteItem(child, newItem);\n      });\n    }\n    return newItem;\n  }\n\n  copyPasteItemBelow(from: SettingsCategoryItem, to: SettingsCategoryItem): SettingsCategoryItem\n  {\n    const newItem = this.insertItemBelow(to, from);\n    if (from.Childs)\n    {\n      from.Childs.forEach(child =>\n      {\n        this.copyPasteItem(child, newItem);\n      });\n    }\n    return newItem;\n  }\n\n  assignUIDs(pages: SettingsCategoryItem[])\n  {\n    pages.forEach(item =>\n    {\n      item.UID = this.getGuid();\n\n      if (item.Childs && item.Childs.length > 0)\n      {\n        this.assignUIDs(item.Childs);\n      }\n    });\n  }\n\n  getGuid()\n  {\n    return \"10000000-1000-4000-8000-100000000000\".replace(/[018]/g, c =>\n      (+c ^ crypto.getRandomValues(new Uint8Array(1))[0] & 15 >> +c / 4).toString(16)\n    );\n  }\n\n  deleteNode(nodes: SettingsCategoryItem[], nodeToDelete: SettingsCategoryItem)\n  {\n    const index = nodes.findIndex(item => item.UID == nodeToDelete.UID);\n    if (index > -1)\n    {\n      nodes.splice(index, 1);\n    } else\n    {\n      nodes.forEach(node =>\n      {\n        if (node.Childs && node.Childs.length > 0)\n        {\n          this.deleteNode(node.Childs, nodeToDelete);\n        }\n      });\n    }\n  }\n\n  /**\n   * Calculate the maximum depth of a category and all its children\n   * @param category The category to calculate depth for\n   * @returns The maximum depth (1-based, so a category with no children returns 1)\n   */\n  calculateMaxDepth(category: SettingsCategoryItem): number\n  {\n    if (!category.Childs || category.Childs.length === 0)\n    {\n      return 1; // Base case: category with no children has depth 1\n    }\n\n    let maxChildDepth = 0;\n    for (const child of category.Childs)\n    {\n      const childDepth = this.calculateMaxDepth(child);\n      maxChildDepth = Math.max(maxChildDepth, childDepth);\n    }\n\n    return 1 + maxChildDepth; // Current category (1) + maximum depth of children\n  }\n\n  /**\n   * Check if dropping a category would exceed the maximum nesting level\n   * @param draggedCategory The category being dragged\n   * @param targetParentLevel The level of the target parent category\n   * @param maxAllowedLevels The maximum allowed nesting levels (default: 4)\n   * @returns true if dropping would exceed the limit, false otherwise\n   */\n  wouldExceedMaxLevels(draggedCategory: SettingsCategoryItem, targetParentLevel: number, maxAllowedLevels: number = 4): boolean\n  {\n    // Calculate the maximum depth of the dragged category and its children\n    const maxDepthOfDraggedCategory = this.calculateMaxDepth(draggedCategory);\n\n    // The dragged category will be at: targetParentLevel + 1\n    // The maximum level after drop will be: (targetParentLevel + 1) + (maxDepthOfDraggedCategory - 1)\n    // Simplified: targetParentLevel + maxDepthOfDraggedCategory\n    const resultingMaxLevel = targetParentLevel + maxDepthOfDraggedCategory;\n\n    return resultingMaxLevel > maxAllowedLevels;\n  }\n\n  /**\n   * Validate if a drag & drop operation would exceed the maximum nesting levels\n   * @param draggedCategory The category being dragged\n   * @param targetNode The target node being dropped on\n   * @param dragOverArea The area where the drop is happening (Above, Below, Center)\n   * @param settingsCategoryItemJagged The flat array of categories with level information\n   * @param maxAllowedLevels The maximum allowed nesting levels (default: 4)\n   * @returns true if the drop would exceed the limit, false otherwise\n   */\n  validateDragDropNesting(\n    draggedCategory: SettingsCategoryItem,\n    targetNode: SettingsCategoryItem,\n    dragOverArea: DropOverAreaType | null,\n    settingsCategoryItemJagged: any[],\n    maxAllowedLevels: number = 4\n  ): boolean\n  {\n    // If no drag over area is specified, allow the operation\n    if (!dragOverArea)\n    {\n      return false; // Not exceeding limits\n    }\n\n    let targetParentId: number | null = null;\n\n    // Determine the target parent based on the drop area\n    const area = dragOverArea as DropOverAreaType;\n    if (area === DropOverAreaType.Above || area === DropOverAreaType.Below)\n    {\n      // When dropping above or below, the dragged item becomes a sibling of the target node\n      // So it should have the same parent as the target node\n      targetParentId = targetNode.ParentID;\n    }\n    else if (area === DropOverAreaType.Center)\n    {\n      // When dropping in the center, the dragged item becomes a child of the target node\n      targetParentId = targetNode.ActivityCategoryID;\n    }\n    else\n    {\n      // Unknown drop area, allow the operation\n      return false;\n    }\n\n    // If no target parent (dropping at root level), it's always allowed\n    if (targetParentId === null)\n    {\n      return false; // Not exceeding limits\n    }\n\n    // Find the target parent in the jagged array to get its level\n    const targetParent = settingsCategoryItemJagged.find(cat => cat.ActivityCategoryID === targetParentId);\n    if (!targetParent)\n    {\n      return false; // Parent not found, allow the operation\n    }\n\n    // Check if dropping would exceed the maximum levels\n    return this.wouldExceedMaxLevels(draggedCategory, targetParent.Level, maxAllowedLevels);\n  }\n\n}\n","import { Component, Inject, OnDestroy } from '@angular/core';\nimport { AbstractControl, FormBuilder, FormGroup, ValidationErrors, Validators } from '@angular/forms';\nimport { MAT_LEGACY_DIALOG_DATA as MAT_DIALOG_DATA, MatLegacyDialogRef as MatDialogRef } from '@angular/material/legacy-dialog';\nimport { SnackBarService } from '@tei/material';\nimport { finalize, Subscription } from 'rxjs';\nimport { IActivitiesCategoriesSettingsService } from '../../@intermediate/activities-categories-settings/activities-categories-settings.interface';\nimport { SettingsCategoryItem, SettingsCategoryItemJagged } from '../../@intermediate/activities-categories-settings/activities-categories-settings.model';\n\n@Component({\n  selector: 'tei-booking-activities-add-category-dialog',\n  templateUrl: './activities-add-category-dialog.component.html',\n  styleUrls: ['./activities-add-category-dialog.component.scss']\n})\nexport class ActivitiesAddCategoryDialogComponent implements OnDestroy\n{\n  isLoading: boolean = false;\n  categoryForm: FormGroup;\n  subscriptions = new Subscription();\n\n  constructor(\n    private fb: FormBuilder,\n    @Inject(\"IActivitiesCategoriesService\") private categoriesService: IActivitiesCategoriesSettingsService,\n    public dialogRef: MatDialogRef<ActivitiesAddCategoryDialogComponent>,\n    private snackBarService: SnackBarService,\n    @Inject(MAT_DIALOG_DATA) public data: {\n      settingsCategoryItemJagged: SettingsCategoryItemJagged[];\n      settingsCategoryItemTree: SettingsCategoryItem[];\n    },\n  )\n  {\n    this.categoryForm = this.createCategoryForm();\n  }\n\n  createCategoryForm(): FormGroup\n  {\n    return this.fb.group({\n      ParentID: [null],\n      CategoryCode: ['', [Validators.required, Validators.pattern(/^\\S+$/)]],\n      CategoryName: ['', [Validators.required, Validators.maxLength(64), this.noWhitespaceValidator]],\n      CategoryDesc: [''],\n      SortOrder: [0],\n    });\n  }\n\n  noWhitespaceValidator(control: AbstractControl): ValidationErrors | null\n  {\n    const isValid = /\\S/.test(control.value); // Checks for at least one non-whitespace character\n    return isValid ? null : { whitespace: true };\n  }\n\n  // Method to calculate the level of a category in the tree structure\n  private calculateCategoryLevel(categoryId: number, categories: SettingsCategoryItem[], currentLevel: number = 0): number\n  {\n    for (const category of categories)\n    {\n      if (category.ActivityCategoryID === categoryId)\n      {\n        return currentLevel;\n      }\n\n      if (category.Childs && category.Childs.length > 0)\n      {\n        const foundLevel = this.calculateCategoryLevel(categoryId, category.Childs, currentLevel + 1);\n        if (foundLevel !== -1)\n        {\n          return foundLevel;\n        }\n      }\n    }\n    return -1; // Not found\n  }\n\n  // Method to check if creating a category under the selected parent would exceed 4 levels\n  wouldExceedMaxLevels(parentId: number): boolean\n  {\n    if (!parentId) return false; // Root level is level 0\n\n    const parentLevel = this.calculateCategoryLevel(parentId, this.data.settingsCategoryItemTree);\n    if (parentLevel === -1) return false; // Parent not found\n\n    // If parent is level 4, adding a child would make it level 5 (exceeds limit)\n    return parentLevel >= 3;\n  }\n\n  // Method to get all available parent categories (exclude 4th level categories)\n  getAvailableParentCategories(): SettingsCategoryItem[]\n  {\n    const availableCategories: SettingsCategoryItem[] = [];\n\n    this.collectAvailableCategories(this.data.settingsCategoryItemTree, availableCategories, 0);\n\n    // Return original categories without modification\n    return availableCategories;\n  }\n\n  // Method to get display name with hierarchy for a category\n  getCategoryDisplayName(category: SettingsCategoryItem): string\n  {\n    return this.generateHierarchyName(category);\n  }\n\n  // Helper method to generate hierarchy name with dots for indentation\n  private generateHierarchyName(category: SettingsCategoryItem): string\n  {\n    const level = this.calculateCategoryLevel(category.ActivityCategoryID, this.data.settingsCategoryItemTree);\n    const dots = '.'.repeat(level);\n    const categoryName = category.CategoryName || '';\n    const maxLength = 64; // Maximum length before truncation\n\n    // Use the truncation helper for consistent text handling\n    const truncatedName = this.truncateText(categoryName, maxLength);\n\n    return `${ dots }${ truncatedName }`;\n  }\n\n  // Helper method to recursively collect available categories\n  private collectAvailableCategories(\n    categories: SettingsCategoryItem[],\n    availableCategories: SettingsCategoryItem[],\n    currentLevel: number\n  ): void\n  {\n    for (const category of categories)\n    {\n      // Skip if this would be level 4 or higher\n      if (currentLevel >= 3)\n      {\n        continue;\n      }\n\n      availableCategories.push(category);\n\n      // Recursively process children\n      if (category.Childs && category.Childs.length > 0)\n      {\n        this.collectAvailableCategories(category.Childs, availableCategories, currentLevel + 1);\n      }\n    }\n  }\n\n  // Helper method to truncate text with ellipsis\n  private truncateText(text: string, maxLength: number = 64): string\n  {\n    if (!text || typeof text !== 'string')\n    {\n      return '';\n    }\n\n    if (text.length <= maxLength)\n    {\n      return text;\n    }\n\n    return text.substring(0, maxLength - 3) + '...';\n  }\n\n  closeDialog(): void\n  {\n    this.dialogRef.close();\n  }\n\n  // Method to trim all form values\n  trimFormValues(): void\n  {\n    const trimmedValues = Object.keys(this.categoryForm.value).reduce((acc, key) =>\n    {\n      acc[key] = typeof this.categoryForm.value[key] === 'string'\n        ? this.categoryForm.value[key].trim()\n        : this.categoryForm.value[key];\n      return acc;\n    }, {} as { [key: string]: any; });\n\n    this.categoryForm.setValue(trimmedValues);\n  }\n\n  // Method to submit the dialog\n  submitDialog(): void\n  {\n    if (this.categoryForm.invalid)\n    {\n      return;\n    }\n\n    const parentId = this.categoryForm.get('ParentID')?.value;\n\n    // Check if creating this category would exceed 4 levels\n    if (this.wouldExceedMaxLevels(parentId))\n    {\n      this.snackBarService.showError('Categories can only be nested up to 4 levels.', '', null, 'left', 'bottom');\n      return;\n    }\n\n    this.isLoading = true;\n    this.trimFormValues();\n    this.subscriptions.add(\n      this.categoriesService.Create(this.categoryForm.value)\n        .pipe(finalize(() =>\n        {\n          this.isLoading = false;\n        })).subscribe(result =>\n        {\n          this.dialogRef.close(true);\n        })\n    );\n  }\n\n  ngOnDestroy(): void\n  {\n    this.subscriptions.unsubscribe();\n  }\n\n}\n","import { CommonModule } from '@angular/common';\nimport { NgModule } from '@angular/core';\nimport { FormsModule, ReactiveFormsModule } from '@angular/forms';\nimport { MatDividerModule } from '@angular/material/divider';\nimport { MatLegacyButtonModule as MatButtonModule } from '@angular/material/legacy-button';\nimport { MatLegacyCardModule as MatCardModule } from '@angular/material/legacy-card';\nimport { MatLegacyFormFieldModule as MatFormFieldModule } from '@angular/material/legacy-form-field';\nimport { MatLegacyInputModule as MatInputModule } from '@angular/material/legacy-input';\nimport { MatLegacySelectModule as MatSelectModule } from '@angular/material/legacy-select';\nimport { RouterModule } from '@angular/router';\nimport { TranslateModule } from '@ngx-translate/core';\nimport { TeiCurrencyTranslateModule, TeiTextTranslatePipeModule } from '@tei/core-translate';\nimport { LoadingModule, NumberInputModule, SnackBarService } from '@tei/material';\nimport { ActivitiesAddCategoryDialogComponent } from './activities-add-category-dialog.component';\n\nconst COMPONENTS = [ActivitiesAddCategoryDialogComponent];\nconst BASE_MODULES = [CommonModule, RouterModule, FormsModule, ReactiveFormsModule];\nconst CORE_MODULES = [TeiTextTranslatePipeModule, TranslateModule, TeiCurrencyTranslateModule, NumberInputModule, LoadingModule];\nconst MATERIAL_MODULES = [MatDividerModule, MatButtonModule, MatCardModule, MatFormFieldModule, MatInputModule, MatSelectModule];\n\n@NgModule({\n  declarations: [...COMPONENTS],\n  imports: [\n    ...BASE_MODULES, ...CORE_MODULES, ...MATERIAL_MODULES\n  ],\n  providers: [\n    SnackBarService\n  ],\n  exports: [...COMPONENTS]\n})\nexport class ActivitiesAddCategoryDialogModule\n{ }\n","import { Component, Inject, OnInit } from '@angular/core';\nimport { MAT_LEGACY_DIALOG_DATA as MAT_DIALOG_DATA, MatLegacyDialogRef as MatDialogRef } from '@angular/material/legacy-dialog';\nimport { SettingsCategoryItem } from '../../@intermediate/activities-categories-settings/activities-categories-settings.model';\n\n@Component({\n  selector: 'tei-booking-activities-delete-category-dialog',\n  templateUrl: './activities-delete-category-dialog.component.html',\n  styleUrls: ['./activities-delete-category-dialog.component.scss']\n})\nexport class ActivitiesDeleteCategoryDialogComponent implements OnInit\n{\n\n  constructor(\n    public dialogRef: MatDialogRef<ActivitiesDeleteCategoryDialogComponent>,\n    @Inject(MAT_DIALOG_DATA) public data: SettingsCategoryItem\n  )\n  {\n  }\n  isLoading: boolean = false;\n\n  async ngOnInit(): Promise<void>\n  {\n  }\n\n\n  closeDialog(): void\n  {\n    this.dialogRef.close();\n  }\n  submitDialog(): void\n  {\n    this.dialogRef.close(this.data);\n  }\n\n}\n","import { CommonModule } from '@angular/common';\nimport { NgModule } from '@angular/core';\nimport { FormsModule, ReactiveFormsModule } from '@angular/forms';\nimport { MatDividerModule } from '@angular/material/divider';\nimport { MatLegacyButtonModule as MatButtonModule } from '@angular/material/legacy-button';\nimport { MatLegacyCardModule as MatCardModule } from '@angular/material/legacy-card';\nimport { MatLegacyFormFieldModule as MatFormFieldModule } from '@angular/material/legacy-form-field';\nimport { MatLegacyInputModule as MatInputModule } from '@angular/material/legacy-input';\nimport { MatLegacySelectModule as MatSelectModule } from '@angular/material/legacy-select';\nimport { RouterModule } from '@angular/router';\nimport { TranslateModule } from '@ngx-translate/core';\nimport { TeiCurrencyTranslateModule, TeiTextTranslatePipeModule } from '@tei/core-translate';\nimport { LoadingModule, NumberInputModule } from '@tei/material';\nimport { ActivitiesDeleteCategoryDialogComponent } from './activities-delete-category-dialog.component';\n\nconst COMPONENTS = [ActivitiesDeleteCategoryDialogComponent];\nconst BASE_MODULES = [CommonModule, RouterModule, FormsModule, ReactiveFormsModule];\nconst CORE_MODULES = [TeiTextTranslatePipeModule, TranslateModule, TeiCurrencyTranslateModule, NumberInputModule, LoadingModule];\nconst MATERIAL_MODULES = [MatDividerModule, MatButtonModule, MatCardModule, MatFormFieldModule, MatInputModule, MatSelectModule];\n\n@NgModule({\n  declarations: [...COMPONENTS],\n  imports: [\n    ...BASE_MODULES, ...CORE_MODULES, ...MATERIAL_MODULES\n  ],\n  providers: [\n  ],\n  exports: [...COMPONENTS]\n})\nexport class ActivitiesDeleteCategoryDialogModule\n{ }\n","import { Component, Inject, OnDestroy, OnInit } from '@angular/core';\nimport { AbstractControl, FormBuilder, FormGroup, ValidationErrors, Validators } from '@angular/forms';\nimport { MAT_LEGACY_DIALOG_DATA as MAT_DIALOG_DATA, MatLegacyDialogRef as MatDialogRef } from '@angular/material/legacy-dialog';\nimport { SnackBarService } from '@tei/material';\nimport { finalize, Subscription } from 'rxjs';\nimport { IActivitiesCategoriesSettingsService } from '../../@intermediate/activities-categories-settings/activities-categories-settings.interface';\nimport { SettingsCategoryItem, SettingsCategoryItemJagged } from '../../@intermediate/activities-categories-settings/activities-categories-settings.model';\n\n@Component({\n  selector: 'tei-booking-activities-edit-category-dialog',\n  templateUrl: './activities-edit-category-dialog.component.html',\n  styleUrls: ['./activities-edit-category-dialog.component.scss']\n})\nexport class ActivitiesEditCategoryDialogComponent implements OnInit, OnDestroy\n{\n  isLoading: boolean = false;\n  categoryForm: FormGroup;\n  subscriptions = new Subscription();\n\n  constructor(\n    private fb: FormBuilder,\n    @Inject(\"IActivitiesCategoriesService\") private categoriesService: IActivitiesCategoriesSettingsService,\n    public dialogRef: MatDialogRef<ActivitiesEditCategoryDialogComponent>,\n    private snackBarService: SnackBarService,\n    @Inject(MAT_DIALOG_DATA) public data: {\n      settingsCategoryItemJagged: SettingsCategoryItemJagged[];\n      settingsCategoryItem: SettingsCategoryItem;\n      settingsCategoryItemTree: SettingsCategoryItem[];\n    },\n  )\n  {\n\n  }\n\n  async ngOnInit(): Promise<void>\n  {\n    this.categoryForm = this.createCategoryForm(this.data.settingsCategoryItem);\n  }\n\n  createCategoryForm(settingsCategoryItem: SettingsCategoryItem): FormGroup\n  {\n    return this.fb.group({\n      ActivityCategoryID: [settingsCategoryItem.ActivityCategoryID],\n      ParentID: [settingsCategoryItem.ParentID],\n      CategoryCode: [\n        settingsCategoryItem.CategoryCode,\n        [\n          Validators.required,\n          Validators.pattern(/^\\S+$/) // No spaces allowed\n        ]\n      ],\n      CategoryName: [\n        settingsCategoryItem.CategoryName,\n        [Validators.required, Validators.maxLength(64), this.noWhitespaceValidator]\n      ],\n      CategoryDesc: [settingsCategoryItem.CategoryDesc],\n      SortOrder: [settingsCategoryItem.SortOrder],\n    });\n  }\n\n  noWhitespaceValidator(control: AbstractControl): ValidationErrors | null\n  {\n    const isValid = /\\S/.test(control.value); // Checks for at least one non-whitespace character\n    return isValid ? null : { whitespace: true };\n  }\n\n  // Method to calculate the level of a category in the tree structure\n  private calculateCategoryLevel(categoryId: number, categories: SettingsCategoryItem[], currentLevel: number = 0): number\n  {\n    for (const category of categories)\n    {\n      if (category.ActivityCategoryID === categoryId)\n      {\n        return currentLevel;\n      }\n\n      if (category.Childs && category.Childs.length > 0)\n      {\n        const foundLevel = this.calculateCategoryLevel(categoryId, category.Childs, currentLevel + 1);\n        if (foundLevel !== -1)\n        {\n          return foundLevel;\n        }\n      }\n    }\n    return -1; // Not found\n  }\n\n  // Method to check if editing a category under the selected parent would exceed 4 levels\n  wouldExceedMaxLevels(parentId: number): boolean\n  {\n    if (!parentId) return false; // Root level is level 0\n\n    const parentLevel = this.calculateCategoryLevel(parentId, this.data.settingsCategoryItemTree);\n    if (parentLevel === -1) return false; // Parent not found\n\n    // If parent is level 3, adding a child would make it level 4 (max allowed)\n    return parentLevel >= 3;\n  }\n\n  // Method to get all available parent categories (exclude 4th level categories and current category's descendants)\n  getAvailableParentCategories(): SettingsCategoryItem[]\n  {\n    const currentCategoryId = this.data.settingsCategoryItem.ActivityCategoryID;\n    const availableCategories: SettingsCategoryItem[] = [];\n\n    this.collectAvailableCategories(this.data.settingsCategoryItemTree, availableCategories, currentCategoryId, 0);\n\n    // Return original categories without modification\n    return availableCategories;\n  }\n\n  // Method to get display name with hierarchy for a category\n  getCategoryDisplayName(category: SettingsCategoryItem): string\n  {\n    return this.generateHierarchyName(category);\n  }\n\n  // Helper method to generate hierarchy name with dots for indentation\n  private generateHierarchyName(category: SettingsCategoryItem): string\n  {\n    const level = this.calculateCategoryLevel(category.ActivityCategoryID, this.data.settingsCategoryItemTree);\n    const dots = '.'.repeat(level);\n    const categoryName = category.CategoryName || '';\n    const maxLength = 64; // Maximum length before truncation\n\n    // Use the truncation helper for consistent text handling\n    const truncatedName = this.truncateText(categoryName, maxLength);\n\n    return `${ dots }${ truncatedName }`;\n  }\n\n  // Helper method to recursively collect available categories\n  private collectAvailableCategories(\n    categories: SettingsCategoryItem[],\n    availableCategories: SettingsCategoryItem[],\n    currentCategoryId: number,\n    currentLevel: number\n  ): void\n  {\n    for (const category of categories)\n    {\n      // Skip the current category being edited\n      if (category.ActivityCategoryID === currentCategoryId)\n      {\n        continue;\n      }\n\n      // Skip if this would be level 4 or higher\n      if (currentLevel >= 4)\n      {\n        continue;\n      }\n\n      // Skip if this category is a descendant of the current category (prevent circular references)\n      if (this.isDescendantOf(category.ActivityCategoryID, currentCategoryId))\n      {\n        continue;\n      }\n\n      availableCategories.push(category);\n\n      // Recursively process children\n      if (category.Childs && category.Childs.length > 0)\n      {\n        this.collectAvailableCategories(category.Childs, availableCategories, currentCategoryId, currentLevel + 1);\n      }\n    }\n  }\n\n  // Helper method to check if a category is a descendant of another category\n  private isDescendantOf(categoryId: number, ancestorId: number): boolean\n  {\n    return this.checkDescendantInTree(categoryId, ancestorId, this.data.settingsCategoryItemTree);\n  }\n\n  // Helper method to check descendant relationship in tree structure\n  private checkDescendantInTree(categoryId: number, ancestorId: number, categories: SettingsCategoryItem[]): boolean\n  {\n    for (const category of categories)\n    {\n      if (category.ActivityCategoryID === categoryId)\n      {\n        // Found the category, now check if ancestorId is in its parent chain\n        return this.isAncestorInChain(ancestorId, category, this.data.settingsCategoryItemTree);\n      }\n\n      if (category.Childs && category.Childs.length > 0)\n      {\n        if (this.checkDescendantInTree(categoryId, ancestorId, category.Childs))\n        {\n          return true;\n        }\n      }\n    }\n    return false;\n  }\n\n  // Helper method to check if ancestorId is in the parent chain of a category\n  private isAncestorInChain(ancestorId: number, category: SettingsCategoryItem, allCategories: SettingsCategoryItem[]): boolean\n  {\n    if (!category.ParentID) return false;\n\n    if (category.ParentID === ancestorId) return true;\n\n    // Find the parent category and check its chain\n    const parent = this.findCategoryById(category.ParentID, allCategories);\n    if (parent)\n    {\n      return this.isAncestorInChain(ancestorId, parent, allCategories);\n    }\n\n    return false;\n  }\n\n  // Helper method to find a category by ID in the tree structure\n  private findCategoryById(categoryId: number, categories: SettingsCategoryItem[]): SettingsCategoryItem | null\n  {\n    for (const category of categories)\n    {\n      if (category.ActivityCategoryID === categoryId)\n      {\n        return category;\n      }\n\n      if (category.Childs && category.Childs.length > 0)\n      {\n        const found = this.findCategoryById(categoryId, category.Childs);\n        if (found) return found;\n      }\n    }\n    return null;\n  }\n\n  // Helper method to truncate text with ellipsis\n  private truncateText(text: string, maxLength: number = 64): string\n  {\n    if (!text || typeof text !== 'string')\n    {\n      return '';\n    }\n\n    if (text.length <= maxLength)\n    {\n      return text;\n    }\n\n    return text.substring(0, maxLength - 3) + '...';\n  }\n\n  closeDialog(): void\n  {\n    this.dialogRef.close();\n  }\n\n  // Method to trim all form values\n  trimFormValues(): void\n  {\n    const trimmedValues = Object.keys(this.categoryForm.value).reduce((acc, key) =>\n    {\n      acc[key] = typeof this.categoryForm.value[key] === 'string'\n        ? this.categoryForm.value[key].trim()\n        : this.categoryForm.value[key];\n      return acc;\n    }, {} as { [key: string]: any; });\n\n    this.categoryForm.setValue(trimmedValues);\n  }\n\n  // Method to submit the dialog\n  submitDialog(): void\n  {\n    if (this.categoryForm.invalid)\n    {\n      return;\n    }\n\n    const parentId = this.categoryForm.get('ParentID')?.value;\n\n    // Check if editing this category would exceed 4 levels\n    if (this.wouldExceedMaxLevels(parentId))\n    {\n      this.snackBarService.showError('Categories can only be nested up to 4 levels.', '', null, 'left', 'bottom');\n      return;\n    }\n\n    this.isLoading = true;\n    this.trimFormValues();\n    this.subscriptions.add(\n      this.categoriesService.Edit(this.categoryForm.value)\n        .pipe(finalize(() =>\n        {\n          this.isLoading = false;\n        })).subscribe(result =>\n        {\n          this.dialogRef.close(true);\n        })\n    );\n  }\n\n  ngOnDestroy(): void\n  {\n    this.subscriptions.unsubscribe();\n  }\n\n}\n","import { CommonModule } from '@angular/common';\nimport { NgModule } from '@angular/core';\nimport { FormsModule, ReactiveFormsModule } from '@angular/forms';\nimport { MatDividerModule } from '@angular/material/divider';\nimport { MatLegacyButtonModule as MatButtonModule } from '@angular/material/legacy-button';\nimport { MatLegacyCardModule as MatCardModule } from '@angular/material/legacy-card';\nimport { MatLegacyFormFieldModule as MatFormFieldModule } from '@angular/material/legacy-form-field';\nimport { MatLegacyInputModule as MatInputModule } from '@angular/material/legacy-input';\nimport { MatLegacySelectModule as MatSelectModule } from '@angular/material/legacy-select';\nimport { RouterModule } from '@angular/router';\nimport { TranslateModule } from '@ngx-translate/core';\nimport { TeiCurrencyTranslateModule, TeiTextTranslatePipeModule } from '@tei/core-translate';\nimport { LoadingModule, NumberInputModule, SnackBarService } from '@tei/material';\nimport { ActivitiesEditCategoryDialogComponent } from './activities-edit-category-dialog.component';\n\nconst COMPONENTS = [ActivitiesEditCategoryDialogComponent];\nconst BASE_MODULES = [CommonModule, RouterModule, FormsModule, ReactiveFormsModule];\nconst CORE_MODULES = [TeiTextTranslatePipeModule, TranslateModule, TeiCurrencyTranslateModule, NumberInputModule, LoadingModule];\nconst MATERIAL_MODULES = [MatDividerModule, MatButtonModule, MatCardModule, MatFormFieldModule, MatInputModule, MatSelectModule];\n\n@NgModule({\n  declarations: [...COMPONENTS],\n  imports: [\n    ...BASE_MODULES, ...CORE_MODULES, ...MATERIAL_MODULES\n  ],\n  providers: [\n    SnackBarService\n  ],\n  exports: [...COMPONENTS]\n})\nexport class ActivitiesEditCategoryDialogModule\n{ }\n","import { FlatTreeControl } from '@angular/cdk/tree';\nimport { Component, ElementRef, Inject, OnDestroy, OnInit, ViewChild } from '@angular/core';\nimport { MatLegacyDialog as MatDialog } from '@angular/material/legacy-dialog';\nimport { MatTreeFlatDataSource, MatTreeFlattener } from '@angular/material/tree';\nimport { TranslateService } from '@ngx-translate/core';\nimport { ResponsiveService } from '@tei/core';\nimport { BreadCrumb, SnackBarService } from '@tei/material';\nimport { finalize, Subscription } from 'rxjs';\nimport { IActivitiesCategoriesSettingsService } from '../../@intermediate/activities-categories-settings/activities-categories-settings.interface';\nimport { DeleteActivitiesSettingsRequest, DropOverAreaType, FlatSettingsCategoryItemJagged, GetActivitiesSettingsResquest, SettingsCategoryItem, SettingsCategoryItemJagged, SortOrderActivitiesSettingsRequest } from '../../@intermediate/activities-categories-settings/activities-categories-settings.model';\nimport { TreeListMenuActionsService } from '../../@services/tree-list-menu-actions.service';\nimport { ActivitiesAddCategoryDialogComponent } from '../../components/activities-add-category-dialog/activities-add-category-dialog.component';\nimport { ActivitiesDeleteCategoryDialogComponent } from '../../components/activities-delete-category-dialog/activities-delete-category-dialog.component';\nimport { ActivitiesEditCategoryDialogComponent } from '../../components/activities-edit-category-dialog/activities-edit-category-dialog.component';\n\n@Component({\n  selector: 'tei-booking-activities-categories-settings',\n  templateUrl: './activities-categories-settings.component.html',\n  styleUrls: ['./activities-categories-settings.component.scss']\n})\nexport class ActivitiesCategoriesSettingsComponent implements OnInit, OnDestroy\n{\n  constructor(\n    @Inject(\"IActivitiesCategoriesService\") private categoriesService: IActivitiesCategoriesSettingsService,\n    private translateService: TranslateService,\n    private responsiveService: ResponsiveService,\n    @Inject('Database') private database: TreeListMenuActionsService,\n    public dialog: MatDialog,\n    private snackBarService: SnackBarService,\n    private translate: TranslateService,\n  )\n  {\n\n  }\n\n  @ViewChild('emptyItem') emptyItem: ElementRef;\n  isMobile: boolean;\n  isLoading: boolean = false;\n  showAddCategoryButton: boolean = false;\n  subscription = new Subscription();\n  dataSource: MatTreeFlatDataSource<SettingsCategoryItem, FlatSettingsCategoryItemJagged>;\n  treeFlattener: MatTreeFlattener<SettingsCategoryItem, FlatSettingsCategoryItemJagged>;\n  nestedNodeMap = new Map<SettingsCategoryItem, FlatSettingsCategoryItemJagged>();\n  getLevel = (node: FlatSettingsCategoryItemJagged) => node.Level;\n  isExpandable = (node: FlatSettingsCategoryItemJagged) => node.expandable;\n  getChildren = (node: SettingsCategoryItem): SettingsCategoryItem[] => node.Childs;\n  flatNodeMap = new Map<FlatSettingsCategoryItemJagged, SettingsCategoryItem>();\n  treeControl: FlatTreeControl<FlatSettingsCategoryItemJagged>;\n  hasChild = (_: number, _nodeData: FlatSettingsCategoryItemJagged) => _nodeData.expandable;\n  dropOverAreaType = DropOverAreaType;\n  /* Drag and drop */\n  dragNode: FlatSettingsCategoryItemJagged;\n  dragNodeExpandOverWaitTimeMs = 500;\n  dragNodeExpandOverNode: FlatSettingsCategoryItemJagged;\n  dragNodeExpandOverTime: number;\n  dragNodeExpandOverArea: DropOverAreaType;\n  lastDragOverTarget: Element;\n  settingsCategoryItemJagged: SettingsCategoryItemJagged[] = [];\n  settingsCategoryItem: SettingsCategoryItem[] = [];\n  // To keep track of expanded nodes\n  expandedNodeIds: Set<number> = new Set<number>();\n\n  breadCrumbData: BreadCrumb[] = [\n    {\n      title: this.translateService.instant('ACTIVITIES.SETTINGS.ACTIVITIES'),\n      relativeUrl: '../'\n    },\n    {\n      title: this.translateService.instant('ACTIVITIES.SETTINGS.CATEGORIES'),\n      relativeUrl: './'\n    }\n  ];\n\n  ngOnInit(): void\n  {\n    this.configureTree();\n    this.getCategories();\n    this.isSmallScreen();\n  }\n\n  async getCategories(): Promise<void>\n  {\n    this.saveExpandedNodes();\n    this.isLoading = true;\n    this.subscription.add(this.categoriesService.Get(new GetActivitiesSettingsResquest()).pipe(finalize(() =>\n    {\n      this.isLoading = false;\n      this.showAddCategoryButton = true;\n    })).subscribe(result =>\n    {\n      let categories = this.sortCategories(result.ActivityCategories);\n      this.database.initialize(categories);\n      this.database.reviseSortOrder();\n      this.settingsCategoryItemJagged = result.ActivityCategoriesJagged;\n      this.settingsCategoryItem = categories;\n\n      this.expandSavedExpandedNodes();\n    }));\n  }\n\n  private saveExpandedNodes(): void\n  {\n    this.expandedNodeIds.clear();\n    if (this.treeControl)\n    {\n      const expandedNodes = this.treeControl.dataNodes.filter(node =>\n        this.treeControl.isExpanded(node));\n\n      expandedNodes.forEach(node =>\n      {\n        this.expandedNodeIds.add(node.ActivityCategoryID);\n      });\n\n    }\n  }\n\n  private expandSavedExpandedNodes(): void\n  {\n    this.expandedNodeIds.forEach(nodeId =>\n    {\n      this.treeControl.expand(this.findNode(nodeId));\n    });\n  }\n\n\n  private sortCategories(categories: SettingsCategoryItem[]): SettingsCategoryItem[]\n  {\n    let sortedCategories = categories.sort((a, b) => a.SortOrder - b.SortOrder);\n    sortedCategories.forEach(cat =>\n    {\n      if (cat?.Childs && cat.Childs.length > 0)\n        cat.Childs = this.sortCategories(cat.Childs);\n    });\n\n    return sortedCategories;\n  }\n\n  private configureTree(): void\n  {\n    this.treeFlattener = new MatTreeFlattener(this.transformer, this.getLevel, this.isExpandable, this.getChildren);\n    this.treeControl = new FlatTreeControl<FlatSettingsCategoryItemJagged>(this.getLevel, this.isExpandable);\n    this.dataSource = new MatTreeFlatDataSource(this.treeControl, this.treeFlattener);\n    this.database.dataChange.subscribe(data =>\n    {\n      this.dataSource.data = JSON.parse(JSON.stringify(data));\n    });\n  }\n\n  transformer = (node: SettingsCategoryItem, level: number) =>\n  {\n    const existingNode = this.nestedNodeMap.get(node);\n    const flatNode = existingNode && existingNode.CategoryName === node.CategoryName\n      ? existingNode\n      : new FlatSettingsCategoryItemJagged();\n    flatNode.CategoryName = node.CategoryName;\n    flatNode.Level = level;\n    flatNode.ParentID = node.ParentID;\n    flatNode.ActivityCategoryID = node.ActivityCategoryID;\n    flatNode.expandable = (node.Childs && node.Childs.length > 0);\n    this.flatNodeMap.set(flatNode, node);\n    this.nestedNodeMap.set(node, flatNode);\n    return flatNode;\n  };\n\n  openCreateCategoryDialog(): void\n  {\n    const addCategoryDialog = this.dialog.open(ActivitiesAddCategoryDialogComponent, {\n      panelClass: ['o-dialog-sm-fullscreen', 'o-dialog-md-fullscreen', 'activities-add-category-dialog'],\n      width: '460px',\n      data: {\n        settingsCategoryItemJagged: this.settingsCategoryItemJagged,\n        settingsCategoryItemTree: this.settingsCategoryItem\n      }\n    });\n\n    addCategoryDialog.afterClosed().subscribe(result =>\n    {\n      if (result)\n      {\n        this.snackBarService.showSuccess(this.translate.instant('ACTIVITIES.CATEGORIES.CATEGORY_CREATED'), '', null, 'left', 'bottom');\n        this.getCategories();\n      }\n    });\n  }\n\n  openRemoveCategoryDialog(node: SettingsCategoryItem): void\n  {\n    this.getCategories();\n    const addCategoryDialog = this.dialog.open(ActivitiesDeleteCategoryDialogComponent, {\n      panelClass: ['o-dialog-sm-fullscreen', 'o-dialog-md-fullscreen', 'activities-add-category-dialog'],\n      width: '460px',\n      data: node\n    });\n\n    addCategoryDialog.afterClosed().subscribe(result =>\n    {\n      if (result && result.ActivityCategoryID)\n      {\n        const request: DeleteActivitiesSettingsRequest = {\n          ActivityCategoryID: node.ActivityCategoryID\n        };\n        this.isLoading = true;\n        this.subscription.add(this.categoriesService.Delete(request).pipe(\n          finalize(() => { this.isLoading = false; })\n        ).subscribe(async (res) =>\n        {\n          this.snackBarService.showSuccess(this.translate.instant('ACTIVITIES.CATEGORIES.CATEGORY_DELETED'), '', null, 'left', 'bottom');\n          await this.getCategories();\n        }));\n      }\n    });\n  }\n\n  findCategoryById(\n    items: SettingsCategoryItem[],\n    categoryId: number\n  ): SettingsCategoryItem | undefined\n  {\n    for (const item of items)\n    {\n      if (item.ActivityCategoryID === categoryId)\n      {\n        return item;\n      }\n      if (item.Childs?.length)\n      {\n        const found = this.findCategoryById(item.Childs, categoryId);\n        if (found)\n        {\n          return found;\n        }\n      }\n    }\n    return undefined;\n  }\n\n\n\n  openEditCategoryDialog(node: SettingsCategoryItem): void\n  {\n    const cateogry: SettingsCategoryItem = this.findCategoryById(this.settingsCategoryItem, node.ActivityCategoryID);\n    const editCategoryDialog = this.dialog.open(ActivitiesEditCategoryDialogComponent, {\n      panelClass: ['o-dialog-sm-fullscreen', 'o-dialog-md-fullscreen', 'activities-edit-category-dialog'],\n      width: '460px',\n      data: {\n        settingsCategoryItemJagged: this.settingsCategoryItemJagged.filter(item => item.ActivityCategoryID !== node.ActivityCategoryID),\n        settingsCategoryItem: cateogry,\n        settingsCategoryItemTree: this.settingsCategoryItem\n      }\n    });\n\n    editCategoryDialog.afterClosed().subscribe(async (result) =>\n    {\n      if (result)\n      {\n        this.snackBarService.showSuccess(this.translate.instant('ACTIVITIES.CATEGORIES.CATEGORY_SAVED'), '', null, 'left', 'bottom');\n        await this.getCategories();\n      }\n    });\n  }\n\n  findParentNode(node: FlatSettingsCategoryItemJagged): FlatSettingsCategoryItemJagged\n  {\n    if (node.ParentID == null) return node;\n    var parentNode = this.findNode(node.ParentID);\n    return this.findParentNode(parentNode);\n  }\n\n  findNode(categoryID: number): FlatSettingsCategoryItemJagged\n  {\n    let selectedCategory: FlatSettingsCategoryItemJagged;\n    this.flatNodeMap.forEach((value: SettingsCategoryItem, key: FlatSettingsCategoryItemJagged) => \n    {\n      if (key.ActivityCategoryID === categoryID)\n      {\n        selectedCategory = key;\n      }\n    });\n    return selectedCategory;\n  }\n\n  protected isSmallScreen(): boolean\n  {\n    const screenSize = this.responsiveService.mediaBreakpoint.getValue();\n    this.isMobile = screenSize === 'xs';\n    return this.isMobile;\n  }\n\n  handleDragStart(event: DragEvent, node: FlatSettingsCategoryItemJagged): void\n  {\n    if (event.dataTransfer)\n      event.dataTransfer.setDragImage(this.emptyItem.nativeElement, 0, 0);\n    this.dragNode = node;\n    this.treeControl.collapse(node);\n\n    const targetElement = event.target as HTMLElement;\n    targetElement.classList.add('dragged');\n  }\n\n  handleDragOver(event, node: FlatSettingsCategoryItemJagged): void\n  {\n    event.preventDefault();\n    // Handle node expand\n    if (node !== this.dragNodeExpandOverNode)\n    {\n      this.dragNodeExpandOverNode = node;\n      this.dragNodeExpandOverTime = new Date().getTime();\n    }\n\n    let isValidToBeBelow = false;\n    let currentNode = this.flatNodeMap.get(node);\n    let parent = this.database.getParentFromNodes(currentNode);\n    if (parent == null)\n    {\n      let items = this.database.data;\n      isValidToBeBelow = items.indexOf(currentNode) == items.length - 1;\n    } else\n    {\n      isValidToBeBelow = parent.Childs.indexOf(currentNode) == parent.Childs.length - 1;\n    }\n\n    // Handle drag area\n    const target = event.currentTarget || event.target;\n    let percentageY = event.offsetY / target.clientHeight;\n    let centerThreshold = 0.75;\n    if (!isValidToBeBelow)\n      centerThreshold = 1.0;\n\n    if (percentageY < 0.25)\n    {\n      this.dragNodeExpandOverArea = DropOverAreaType.Above;\n    }\n    else if (percentageY >= 0.25 && percentageY <= centerThreshold)\n    {\n      this.dragNodeExpandOverArea = DropOverAreaType.Center;\n    }\n    else if (percentageY > 0.75 && percentageY <= 1 && isValidToBeBelow)\n    {\n      this.dragNodeExpandOverArea = DropOverAreaType.Below;\n    }\n    else\n    {\n      this.dragNodeExpandOverArea = null;\n    }\n  }\n\n  handleDrop(event: DragEvent, node: FlatSettingsCategoryItemJagged): void\n  {\n    this.saveExpandedNodes();\n    event.preventDefault();\n\n    if (node !== this.dragNode)\n    {\n      // Validate if dropping would exceed 4 levels\n      const draggedCategory = this.flatNodeMap.get(this.dragNode);\n      const targetNode = this.flatNodeMap.get(node);\n\n      if (this.database.validateDragDropNesting(\n        draggedCategory,\n        targetNode,\n        this.dragNodeExpandOverArea,\n        this.settingsCategoryItemJagged\n      ))\n      {\n        this.snackBarService.showError('Categories can only be nested up to 4 levels.', '', null, 'left', 'bottom');\n        this.resetDragState();\n        return;\n      }\n\n      let request: SortOrderActivitiesSettingsRequest = {\n        ActivityCategoryID: this.flatNodeMap.get(this.dragNode).ActivityCategoryID,\n        SortOrder: 0,\n        ParentID: null\n      };\n      let newItem: SettingsCategoryItem;\n      if (this.dragNodeExpandOverArea === DropOverAreaType.Above)\n      {\n        request.ParentID = this.flatNodeMap.get(node).ParentID;\n        newItem = this.database.copyPasteItemAbove(this.flatNodeMap.get(this.dragNode), this.flatNodeMap.get(node));\n      }\n      else if (this.dragNodeExpandOverArea === DropOverAreaType.Below)\n      {\n        request.ParentID = this.flatNodeMap.get(node).ParentID;\n        newItem = this.database.copyPasteItemBelow(this.flatNodeMap.get(this.dragNode), this.flatNodeMap.get(node));\n      }\n      else\n      {\n        request.ParentID = this.flatNodeMap.get(node).ActivityCategoryID;\n        newItem = this.database.copyPasteItem(this.flatNodeMap.get(this.dragNode), this.flatNodeMap.get(node));\n      }\n\n      this.database.deleteItem(this.flatNodeMap.get(this.dragNode));\n\n      var newSortPlace = this.database.reviseSortOrderAndGetSortNumber(newItem);\n      request.SortOrder = newSortPlace;\n      this.expandSavedExpandedNodes();\n      this.categoriesService.SortOrder(request).subscribe({\n        complete: () =>\n        {\n          this.resetDragState();\n          this.snackBarService.showSuccess(this.translate.instant('ACTIVITIES.CATEGORIES.CATEGORY_SAVED'), '', null, 'left', 'bottom');\n          // Refresh the categories to update the jagged array with correct levels\n          this.getCategories();\n        }\n      });\n    } else\n    {\n      this.resetDragState();\n    }\n  }\n\n  handleDragEnd(event: DragEvent): void\n  {\n    const targetElement = event.target as HTMLElement;\n    targetElement.classList.remove('dragged');\n    if (event.dataTransfer.dropEffect == \"none\")\n      this.resetDragState();\n  }\n\n  resetDragState(): void\n  {\n    this.dragNode = null;\n    this.dragNodeExpandOverNode = null;\n    this.dragNodeExpandOverArea = null;\n    this.dragNodeExpandOverTime = 0;\n  }\n\n  handleTouchStart(event: TouchEvent, node: FlatSettingsCategoryItemJagged): void\n  {\n    if (this.checkClosestIsActionButton(event))\n    {\n      return;\n    }\n    event.preventDefault();\n\n    const touch = event.touches[0];\n    const targetElement = document.elementFromPoint(touch.clientX, touch.clientY);\n\n    if (targetElement)\n    {\n      const dragStartEvent = new CustomEvent('dragstart', {\n        bubbles: true,\n        detail: { node },\n      });\n      targetElement.dispatchEvent(dragStartEvent);\n    }\n\n    this.lastDragOverTarget = null;\n  }\n\n  checkClosestIsActionButton(event: TouchEvent | DragEvent)\n  {\n    return (\n      (event.target as HTMLElement).closest('.a-tree-node-item-expand-toggle') ||\n      (event.target as HTMLElement).closest('.a-more-button') ||\n      (event.target as HTMLElement).closest('.a-manage-page') ||\n      (event.target as HTMLElement).closest('.a-remove-page')\n    );\n  }\n\n  handleTouchMove(event: TouchEvent, node: FlatSettingsCategoryItemJagged): void\n  {\n    if (this.checkClosestIsActionButton(event))\n    {\n      return;\n    }\n    event.preventDefault();\n\n    const touch = event.touches[0];\n    const targetElement = document.elementFromPoint(touch.clientX, touch.clientY);\n\n    if (targetElement)\n    {\n      const boundingRect = targetElement.getBoundingClientRect();\n      const offsetY = touch.clientY - boundingRect.top;\n\n      if (this.lastDragOverTarget !== targetElement)\n      {\n        if (this.lastDragOverTarget)\n        {\n          const dragLeaveEvent = new CustomEvent('dragleave', { bubbles: true });\n          this.lastDragOverTarget.dispatchEvent(dragLeaveEvent);\n        }\n\n        const dragOverEvent = new CustomEvent('dragover', { bubbles: true });\n        Object.assign(dragOverEvent, { offsetY, node });\n        targetElement.dispatchEvent(dragOverEvent);\n\n        this.lastDragOverTarget = targetElement;\n      }\n    }\n  }\n\n  handleTouchEnd(event: TouchEvent, node: FlatSettingsCategoryItemJagged): void\n  {\n    if (this.checkClosestIsActionButton(event))\n    {\n      return;\n    }\n\n    const touch = event.changedTouches[0];\n    const targetElement = document.elementFromPoint(touch.clientX, touch.clientY);\n\n    if (targetElement)\n    {\n      const dropEvent = new CustomEvent('drop', { bubbles: true });\n      Object.assign(dropEvent, { node });\n      targetElement.dispatchEvent(dropEvent);\n    }\n\n    this.lastDragOverTarget = null;\n  }\n\n  ngOnDestroy(): void\n  {\n    this.subscription.unsubscribe();\n  }\n\n}\n","import { DragDropModule } from '@angular/cdk/drag-drop';\nimport { CommonModule } from '@angular/common';\nimport { NgModule } from '@angular/core';\nimport { MatIconModule } from '@angular/material/icon';\nimport { MatLegacyButtonModule as MatButtonModule } from '@angular/material/legacy-button';\nimport { MatLegacyCardModule as MatCardModule } from '@angular/material/legacy-card';\nimport { MatLegacyDialogModule as MatDialogModule } from '@angular/material/legacy-dialog';\nimport { MatLegacyFormFieldModule as MatFormFieldModule } from '@angular/material/legacy-form-field';\nimport { MatLegacyInputModule as MatInputModule } from '@angular/material/legacy-input';\nimport { MatLegacyMenuModule as MatMenuModule } from '@angular/material/legacy-menu';\nimport { MatTreeModule } from '@angular/material/tree';\nimport { RouterModule } from '@angular/router';\nimport { TeiTextTranslatePipeModule } from '@tei/core-translate';\nimport { BreadCrumbModule, LoadingModule } from '@tei/material';\nimport { ActivitiesCategoriesSettingsService } from '../../@services/activities-categories-settings.service';\nimport { TreeListMenuActionsService } from '../../@services/tree-list-menu-actions.service';\nimport { ActivitiesAddCategoryDialogModule } from '../../components/activities-add-category-dialog/activities-add-category-dialog.module';\nimport { ActivitiesDeleteCategoryDialogModule } from '../../components/activities-delete-category-dialog/activities-delete-category-dialog.module';\nimport { ActivitiesEditCategoryDialogModule } from '../../components/activities-edit-category-dialog/activities-edit-category-dialog.module';\nimport { ActivitiesCategoriesSettingsComponent } from './activities-categories-settings.component';\n\nconst MATERIAL_MODULES = [MatTreeModule, MatIconModule, DragDropModule, MatButtonModule, MatFormFieldModule, MatInputModule, MatMenuModule, MatDialogModule];\nconst BASE_MODULES = [CommonModule];\nconst TEI_MATERIAL_MODULES = [BreadCrumbModule, LoadingModule, MatCardModule];\nconst TEI_MODULES = [TeiTextTranslatePipeModule, ActivitiesAddCategoryDialogModule, ActivitiesEditCategoryDialogModule, ActivitiesDeleteCategoryDialogModule];\n\n@NgModule({\n  declarations: [ActivitiesCategoriesSettingsComponent],\n  imports: [\n    ...TEI_MODULES,\n    ...MATERIAL_MODULES,\n    ...BASE_MODULES,\n    ...TEI_MATERIAL_MODULES,\n    RouterModule.forChild([\n      { path: '', component: ActivitiesCategoriesSettingsComponent },\n    ]),\n  ],\n  providers: [{ provide: 'IActivitiesCategoriesService', useClass: ActivitiesCategoriesSettingsService },\n  { provide: 'Database', useClass: TreeListMenuActionsService }\n  ]\n\n})\nexport class ActivitiesCategoriesSettingsModule\n{ }\n"],"names":["i0","elementStart","text","elementEnd","rf","option_r2","ctx","$implicit","ctx_r1","nextContext","property","ActivityCategoryID","advance","CategoryName","textInterpolate1","getCategoryDisplayName","ActivitiesAddCategoryDialogComponent_form_0_Template","_r4","getCurrentView","pipe","listener","ActivitiesAddCategoryDialogComponent_form_0_Template_button_click_8_listener","restoreView","ctx_r3","resetView","closeDialog","element","template","ActivitiesAddCategoryDialogComponent_form_0_mat_option_32_Template","ActivitiesAddCategoryDialogComponent_form_0_Template_button_click_35_listener","ctx_r5","ActivitiesAddCategoryDialogComponent_form_0_Template_button_click_39_listener","ctx_r6","submitDialog","ctx_r0","categoryForm","pipeBind1","get","value","length","getAvailableParentCategories","textInterpolate","invalid","isLoading","ActivitiesDeleteCategoryDialogComponent_form_0_Template","_r2","ActivitiesDeleteCategoryDialogComponent_form_0_Template_button_click_8_listener","ActivitiesDeleteCategoryDialogComponent_form_0_Template_button_click_21_listener","ActivitiesDeleteCategoryDialogComponent_form_0_Template_button_click_25_listener","ctx_r4","data","ActivitiesEditCategoryDialogComponent_form_0_mat_option_32_Template","ActivitiesEditCategoryDialogComponent_form_0_Template","ActivitiesEditCategoryDialogComponent_form_0_Template_button_click_8_listener","ActivitiesEditCategoryDialogComponent_form_0_Template_button_click_35_listener","ActivitiesEditCategoryDialogComponent_form_0_Template_button_click_39_listener","_c0","ActivitiesCategoriesSettingsComponent_tei_material_bread_crumb_3_Template","breadCrumbData","ActivitiesCategoriesSettingsComponent_button_9_Template","_r6","ActivitiesCategoriesSettingsComponent_button_9_Template_button_click_0_listener","openCreateCategoryDialog","_c1","a0","a1","a2","ActivitiesCategoriesSettingsComponent_mat_tree_node_13_Template","_r10","ActivitiesCategoriesSettingsComponent_mat_tree_node_13_Template_div_dragstart_3_listener","$event","restoredCtx","node_r7","ctx_r9","handleDragStart","ActivitiesCategoriesSettingsComponent_mat_tree_node_13_Template_div_dragover_3_listener","ctx_r11","handleDragOver","ActivitiesCategoriesSettingsComponent_mat_tree_node_13_Template_div_dragend_3_listener","ctx_r12","handleDragEnd","ActivitiesCategoriesSettingsComponent_mat_tree_node_13_Template_div_drop_3_listener","ctx_r13","handleDrop","ActivitiesCategoriesSettingsComponent_mat_tree_node_13_Template_div_touchstart_3_listener","ctx_r14","handleTouchStart","ActivitiesCategoriesSettingsComponent_mat_tree_node_13_Template_div_touchmove_3_listener","ctx_r15","handleTouchMove","ActivitiesCategoriesSettingsComponent_mat_tree_node_13_Template_div_touchend_3_listener","ctx_r16","handleTouchEnd","ActivitiesCategoriesSettingsComponent_mat_tree_node_13_Template_button_click_14_listener","ctx_r17","openEditCategoryDialog","ActivitiesCategoriesSettingsComponent_mat_tree_node_13_Template_button_click_20_listener","ctx_r18","openRemoveCategoryDialog","_r8","reference","ctx_r2","pureFunction3","dragNodeExpandOverArea","dropOverAreaType","Above","dragNodeExpandOverNode","Below","Center","ActivitiesCategoriesSettingsComponent_mat_tree_node_14_Template","_r22","ActivitiesCategoriesSettingsComponent_mat_tree_node_14_Template_div_dragstart_4_listener","node_r19","ctx_r21","ActivitiesCategoriesSettingsComponent_mat_tree_node_14_Template_div_dragover_4_listener","ctx_r23","ActivitiesCategoriesSettingsComponent_mat_tree_node_14_Template_div_dragend_4_listener","ctx_r24","ActivitiesCategoriesSettingsComponent_mat_tree_node_14_Template_div_drop_4_listener","ctx_r25","ActivitiesCategoriesSettingsComponent_mat_tree_node_14_Template_div_touchstart_4_listener","ctx_r26","ActivitiesCategoriesSettingsComponent_mat_tree_node_14_Template_div_touchmove_4_listener","ctx_r27","ActivitiesCategoriesSettingsComponent_mat_tree_node_14_Template_div_touchend_4_listener","ctx_r28","ActivitiesCategoriesSettingsComponent_mat_tree_node_14_Template_button_click_15_listener","ctx_r29","ActivitiesCategoriesSettingsComponent_mat_tree_node_14_Template_button_click_21_listener","ctx_r30","_r20","treeControl","isExpanded","ActivitiesCategoriesSettingsService","constructor","apiBaseUrlProvider","http","serviceUrl","getBaseUrl","Get","request","apiUrl","params","SortOrder","post","Create","Delete","Edit","fac","ActivitiesCategoriesSettingsService_Factory","t","inject","i1","HttpClient","prov","defineInjectable","token","factory","providedIn","setClassMetadata","Injectable","args","Inject","GetActivitiesSettingsResponse","GetActivitiesSettingsResquest","SettingsCategoryItem","FlatSettingsCategoryItemJagged","SettingsCategoryItemJagged","ReorderWebNavigationResponse","ReorderWebNavigationRequest","DropOverAreaType","SortOrderActivitiesSettingsRequest","CreateCategoryFormModel","CreateActivitiesSettingsRequest","CreateActivitiesSettingsResponse","DeleteActivitiesSettingsRequest","DeleteActivitiesSettingsResponse","EditActivitiesSettingsRequest","EditActivitiesSettingsResponse","SortOrderActivitiesSettingsResponse","TreeListMenuActionsService","dataChange","BehaviorSubject","initialize","assignUIDs","next","buildFileTree","obj","level","Object","keys","reduce","accumulator","key","node","Childs","concat","insertItem","parent","item","newItem","UID","getGuid","CategoryCode","CategoryDesc","push","parentNode","getParentFromNodes","parentToModify","find","insertItemAbove","newNode","sortOrder","ParentID","splice","findIndex","insertItemBelow","i","currentRoot","getParent","child","updateItem","name","deleteItem","deleteNode","reviseSortOrder","updateSortOrder","pages","forEach","page","index","reviseSortOrderAndGetSortNumber","updateSortOrderAndGetSorNumber","inputPage","nestSortOrder","copyPasteItem","copyPasteItemAbove","from","to","copyPasteItemBelow","replace","c","crypto","getRandomValues","Uint8Array","toString","nodes","nodeToDelete","calculateMaxDepth","category","maxChildDepth","childDepth","Math","max","wouldExceedMaxLevels","draggedCategory","targetParentLevel","maxAllowedLevels","maxDepthOfDraggedCategory","resultingMaxLevel","validateDragDropNesting","targetNode","dragOverArea","settingsCategoryItemJagged","targetParentId","area","targetParent","cat","Level","ActivitiesAddCategoryDialogComponent","fb","categoriesService","dialogRef","snackBarService","subscriptions","Subscription","createCategoryForm","group","Validators","required","pattern","maxLength","noWhitespaceValidator","control","isValid","test","whitespace","calculateCategoryLevel","categoryId","categories","currentLevel","foundLevel","parentId","parentLevel","settingsCategoryItemTree","availableCategories","collectAvailableCategories","generateHierarchyName","dots","repeat","categoryName","truncatedName","truncateText","text","substring","close","trimFormValues","trimmedValues","acc","trim","setValue","_this$categoryForm$ge","showError","add","pipe","finalize","subscribe","result","ngOnDestroy","unsubscribe","directiveInject","FormBuilder","i2","MatLegacyDialogRef","i3","SnackBarService","MAT_DIALOG_DATA","cmp","defineComponent","type","selectors","decls","vars","consts","template","ActivitiesAddCategoryDialogComponent_Template","dependencies","i4","NgForOf","NgIf","NgNoValidate","DefaultValueAccessor","NgControlStatus","NgControlStatusGroup","MaxLengthValidator","FormGroupDirective","FormControlName","i5","MatLegacyButton","i6","MatIcon","LoadingComponent","i7","MatDivider","i8","MatLegacyFormField","MatLegacyHint","i9","MatLegacyInput","i10","MatLegacySelect","i11","MatLegacyOption","i12","TeiTextTranslatePipe","Component","COMPONENTS","BASE_MODULES","CommonModule","RouterModule","FormsModule","ReactiveFormsModule","CORE_MODULES","TeiTextTranslatePipeModule","TranslateModule","TeiCurrencyTranslateModule","NumberInputModule","LoadingModule","MATERIAL_MODULES","MatDividerModule","MatButtonModule","MatCardModule","MatFormFieldModule","MatInputModule","MatSelectModule","ActivitiesAddCategoryDialogModule","mod","defineNgModule","inj","defineInjector","providers","imports","NgModule","declarations","exports","ActivitiesDeleteCategoryDialogComponent","ngOnInit","_asyncToGenerator","ActivitiesDeleteCategoryDialogComponent_Factory","i1$2","ActivitiesDeleteCategoryDialogComponent_Template","NgForm","ActivitiesDeleteCategoryDialogModule","ActivitiesEditCategoryDialogComponent","_this","settingsCategoryItem","currentCategoryId","isDescendantOf","ancestorId","checkDescendantInTree","isAncestorInChain","allCategories","findCategoryById","found","_this$categoryForm$ge2","ActivitiesEditCategoryDialogComponent_Template","ActivitiesEditCategoryDialogModule","ActivitiesCategoriesSettingsComponent","translateService","responsiveService","database","dialog","translate","showAddCategoryButton","subscription","nestedNodeMap","Map","getLevel","isExpandable","expandable","getChildren","flatNodeMap","hasChild","_","_nodeData","dragNodeExpandOverWaitTimeMs","expandedNodeIds","Set","title","instant","relativeUrl","transformer","existingNode","flatNode","set","configureTree","getCategories","isSmallScreen","_this2","saveExpandedNodes","sortCategories","ActivityCategories","ActivityCategoriesJagged","expandSavedExpandedNodes","clear","expandedNodes","dataNodes","filter","nodeId","expand","findNode","sortedCategories","sort","a","b","treeFlattener","MatTreeFlattener","FlatTreeControl","dataSource","MatTreeFlatDataSource","JSON","parse","stringify","addCategoryDialog","open","panelClass","width","afterClosed","showSuccess","_this3","_ref","res","_x","apply","arguments","items","_item$Childs","undefined","_this4","cateogry","editCategoryDialog","_ref2","_x2","findParentNode","categoryID","selectedCategory","screenSize","mediaBreakpoint","getValue","isMobile","event","dataTransfer","setDragImage","emptyItem","nativeElement","dragNode","collapse","targetElement","target","classList","preventDefault","dragNodeExpandOverTime","Date","getTime","isValidToBeBelow","currentNode","indexOf","currentTarget","percentageY","offsetY","clientHeight","centerThreshold","resetDragState","newSortPlace","complete","remove","dropEffect","checkClosestIsActionButton","touch","touches","document","elementFromPoint","clientX","clientY","dragStartEvent","CustomEvent","bubbles","detail","dispatchEvent","lastDragOverTarget","closest","boundingRect","getBoundingClientRect","top","dragLeaveEvent","dragOverEvent","assign","changedTouches","dropEvent","TranslateService","ResponsiveService","MatLegacyDialog","viewQuery","ActivitiesCategoriesSettingsComponent_Query","viewQuery","_t","queryRefresh","loadQuery","first","ActivitiesCategoriesSettingsComponent_Template","MatTreeNodeDef","MatTreeNodePadding","MatTreeNodeToggle","MatTree","MatTreeNode","MatLegacyLabel","MatLegacyMenu","MatLegacyMenuItem","MatLegacyMenuTrigger","NgClass","BreadCrumbComponent","MatLegacyCard","styles","ViewChild","MatTreeModule","MatIconModule","DragDropModule","MatMenuModule","MatDialogModule","TEI_MATERIAL_MODULES","BreadCrumbModule","TEI_MODULES","ActivitiesCategoriesSettingsModule","provide","useClass","forChild","path","component"],"sourceRoot":"webpack:///","x_google_ignoreList":[]}